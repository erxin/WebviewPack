import{u as a,r as e,V as t,N as l,O as s,f as i,h as o,w as n,n as u,t as c,v as r,e as d,$ as A,x as p,k as f,l as g,A as v,B as _,C as b,D as h,E as m,G as w,H as x,J as B,K as U,c as I,T as y,m as C,W as S,X as T,Y as k,P as E,p as R,F as Q,y as j,Z as G}from"./index-57ef5050.js";import{_ as L,a as D,c as Y,b as O}from"./ti-modal.c75f7568.js";import{_ as X,a as J}from"./ti-button.e2464617.js";const H=X({__name:"ti-layout-setserver",setup(S){const{setUserInfo:T}=a(),k=e({ip:"",port:"",device_id:""}),E=e(""),R=()=>{const a=f();k.value.ip=(null==a?void 0:a.ip)||g()||"127.0.0.1",k.value.port=(null==a?void 0:a.port)||"8080"};t((()=>{var a;/JBCWeb/.test(navigator.userAgent)&&(k.value.device_id=(null==(a=window.getAndroidIDInterface)?void 0:a.getAndroidID())||"")}));const Q=a=>{E.value=a},j=a=>{k.value.ip=a},G=a=>{k.value.port=a},Y=e("");e([]);const O=e(),X=e(!1),H=async()=>{var a;const e={...k.value};if(e.ip)if(e.port)try{const t=await v(_(`${null==e?void 0:e.ip}:${e.port}`));1==parseInt(t.data.cashier.order_method.is_table_order)?(b(e),h(t.data.app_id),m(t.data.shop_supplier_id),w(null==(a=t.data)?void 0:a.currency),T(t.data),setTimeout((()=>{X.value=!0}),150)):uni.showToast({title:A("桌台用餐方式已关闭，请联系管理员"),icon:"none"})}catch(t){uni.showToast({title:A("绑定失败"),icon:"none"})}else uni.showToast({title:A("請輸入連接埠"),icon:"none"});else uni.showToast({title:A("請輸入伺服器位址"),icon:"none"})},M=a=>{X.value=!1,a&&(O.value=a,Y.value=a.table_no)},N=()=>{R(),Y.value=x().table_no,O.value=x()},z=async()=>{var a;const e={...k.value};if(e.ip)if(e.port)try{const t=await v(_(`${null==e?void 0:e.ip}:${e.port}`));if(!O.value)return void uni.showToast({title:A("請查找桌位"),icon:"none"});1==parseInt(t.data.cashier.order_method.is_table_order)?(b(e),h(t.data.app_id),m(t.data.shop_supplier_id),w(null==(a=t.data)?void 0:a.currency),setTimeout((()=>{Z()}),150)):uni.showToast({title:A("桌台用餐方式已关闭，请联系管理员"),icon:"none"})}catch(t){uni.showToast({title:A("绑定失败"),icon:"none"})}else uni.showToast({title:A("請輸入連接埠"),icon:"none"});else uni.showToast({title:A("請輸入伺服器位址"),icon:"none"})},Z=async()=>{try{const a=await B({table_id:O.value.table_id,key:k.value.device_id});U(O.value),I({url:"/pages/index/index"}),uni.showToast({title:a.msg,icon:"none"})}catch(a){}};return R(),(a,e)=>{const t=y,f=C,g=l(s("ti-input"),L),v=l(s("ti-button"),J),_=l(s("ti-layout-table-list"),D);return i(),o(f,null,{default:n((()=>[u(f,{class:"ti-item-input"},{default:n((()=>[u(f,{class:"ti-label-box"},{default:n((()=>[u(f,{class:"ti-label-left"},{default:n((()=>[u(t,{class:"ti-label-server"},{default:n((()=>[c(r(d(A)("當前機器ID")),1)])),_:1})])),_:1})])),_:1}),u(f,{class:"ti-input-box"},{default:n((()=>[u(g,{type:"text",clearable:!1,disabled:!0,value:k.value.device_id},null,8,["value"])])),_:1})])),_:1}),u(f,{class:"ti-item-input"},{default:n((()=>[u(f,{class:"ti-label-box"},{default:n((()=>[u(f,{class:"ti-label-left"},{default:n((()=>[u(t,{class:"ti-label-server"},{default:n((()=>[c(r(d(A)("機器備註(非必填)")),1)])),_:1})])),_:1})])),_:1}),u(f,{class:"ti-input-box"},{default:n((()=>[u(g,{type:"text",onInput:Q,placeholder:d(A)("機器備註"),clearable:!1},null,8,["placeholder"])])),_:1})])),_:1}),u(f,{class:"ti-item-input"},{default:n((()=>[u(f,{class:"ti-label-box"},{default:n((()=>[u(f,{class:"ti-label-left"},{default:n((()=>[u(t,{class:"ti-label-server"},{default:n((()=>[c(r(d(A)("服務器連接地址")),1)])),_:1})])),_:1})])),_:1}),u(f,{class:"ti-input-box"},{default:n((()=>[u(g,{type:"text",onInput:j,placeholder:d(A)("伺服器位址"),value:k.value.ip,clearable:!1},null,8,["placeholder","value"]),u(f,{class:"ti-colon"},{default:n((()=>[c(":")])),_:1}),u(f,{class:"ti-input-port"},{default:n((()=>[u(g,{type:"number",onInput:G,placeholder:d(A)("端口"),value:k.value.port,clearable:!1},null,8,["placeholder","value"])])),_:1})])),_:1})])),_:1}),u(f,{class:"ti-bottom"},{default:n((()=>[u(v,{title:d(A)("重置"),onClick:N},null,8,["title"]),u(v,{title:d(A)("確定"),type:"primary",onClick:z},null,8,["title"])])),_:1}),u(f,{class:"ti-select-table-box",onClick:H},{default:n((()=>[u(t,{class:"ti-label-table"},{default:n((()=>[c(r(Y.value?d(A)("已選 : ")+d(p)(Y.value,21):d(A)("查找桌位")),1)])),_:1})])),_:1}),u(_,{show:X.value,"onUpdate:show":e[0]||(e[0]=a=>X.value=a),onConfirm:M},null,8,["show"])])),_:1})}}},[["__scopeId","data-v-3e824f2a"]]),M=""+new URL("binding-page-bg-image-db048039.png",import.meta.url).href,N=""+new URL("logo-fcaec045.png",import.meta.url).href,z=""+new URL("monitor-mobbile-8fa7acb0.svg",import.meta.url).href,Z=X({__name:"set-language",props:{firstBind:{type:Boolean,default:!1}},setup(a){const t=a,d=e(S[T()||"en"]),A=e(),p=a=>{A.value.isShow()?A.value.close():A.value.open()},f=()=>{d.value=S[T()]};return(a,e)=>{const g=l(s("ti-layout-language-item"),Y),v=C,_=E,b=y;return i(),o(v,{class:"ti-language",onClick:[p,e[0]||(e[0]=k((()=>{}),["stop"]))]},{default:n((()=>[u(v,{class:"ti-language-box"},{default:n((()=>[u(g,{ref_key:"refShowLanguage",ref:A,firstBind:t.firstBind,onLanguageText:f},null,8,["firstBind"])])),_:1}),u(_,{class:"ti-language-global",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAIeSURBVHgB5VXdcdswDAYUKpXVPrAbeASNoExQZ4ImE7QbxB6hE9gb1BvYnSDaoN6gfOg5PsshA0CyJEbUnZK7vCTfnX9EfvgAkAAE8CGgP8c3ehL/1Wns6s+9nnz6OcY2GhRNL2ckWolY9x0Qpp3tjBa/CY84HMCLHOhU3QG43+BcoTVoQMx7JIRc9ogDDpYU0N0oB5U4zuUhORVwUBkMgfeYI3DzkBP0xBNKNYJlxYeteSiv+KjoODJwaMBZU1lFlJXTUOLalGWhJ2rTZmmvzf5xHQxIzjNRlDol/0Kwjdie7y2UQUWkc+XUH0/GlFBQxSwpm/zZJXOGO1rbmn15q9OLGVjKkI7LGDBdWtSJ/gd9NnCM/0GEG4jVrBbqi1eh8VpeP2RiQ7as0a0q1Rq4GyE2EaLpCA1h2nCxcZxTULy+8jLwxGXHGhgL1+NOGxl4Y7QO+NK6sNH4SsIetwg5WFBXblsjp4OOfew8rvBJA+HX+bG5ZHMoV/Szkh44/KeqqI0Q/pATGCpT+U8NBxcknHyhMjXDd9c2Gryi0SDYaMpjoaWoIq5nclaPijjOIHbUSG7ncSOc0ldh9se1jIojjYpIMr31JHuRpGpOy9XQuiy/SldzE4Vg3ZUMO27OSm5BDudeHM9tzP5EBLeQB29aBuBN27540EHjxFKqiJnMlm51ncHTlveQGxSvQ+KjIZefqvvmlcmvz2T4Lfa+8ARyhNbiDRkX2gAAAABJRU5ErkJggg=="}),u(b,{class:"ti-language-text"},{default:n((()=>[c(r(d.value),1)])),_:1}),u(_,{class:"ti-language-arrow-down",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACPSURBVHgB7Y9BCoUwDESH/w3EuskRPIpH8AZ6M72ZR9ClO60KQRGtYF0ofbRQmslMAgQC70TEHkb6SM8kEkPDfBMqcIFJpz02aF377dSMTt8DalfIXLc6/ehZ4JyIqdSJTjbZTL7oSlzFFXLL3BXixfwwxFDlzfwkxJ+5hph/LjE1i3nUCkcZnkAsCAS+xQhmhzo19D7FAAAAAABJRU5ErkJggg=="})])),_:1})}}},[["__scopeId","data-v-2cc4bd42"]]),K=X({__name:"first-binding",setup(a){const t=e(!1);return(a,e)=>{const o=E,p=C,f=l(s("ti-layout-setserver"),H),g=l(s("ti-modal"),O);return i(),R(Q,null,[u(p,{class:"page",onClick:e[0]||(e[0]=a=>d(j)())},{default:n((()=>[u(p,{class:"ti-page-bg"},{default:n((()=>[u(o,{class:"ti-bg-image",src:M})])),_:1}),u(p,{class:"ti-flex"},{default:n((()=>[u(p,{class:"ti-flex-round"},{default:n((()=>[u(p,{class:"ti-round-box"},{default:n((()=>[u(p,{class:"ti-round-content"},{default:n((()=>[u(p,{class:"ti-item-logo"},{default:n((()=>[u(o,{class:"ti-logo",src:N})])),_:1}),u(f,{class:"m-top-32px"})])),_:1})])),_:1})])),_:1})])),_:1}),u(p,{class:"ti-language-box"},{default:n((()=>[u(Z,{firstBind:!0})])),_:1})])),_:1}),u(g,{class:"ti-action-tips",show:t.value,"onUpdate:show":e[1]||(e[1]=a=>t.value=a),isCancelShow:!1,isConfirmShow:!0,content:d(A)("平板設備數量已達上限，請聯繫銷售代表"),onConfirm:e[2]||(e[2]=a=>t.value=!1)},{title:n((()=>[u(p,{class:"warning-header"},{default:n((()=>[u(p,{class:"warning-image-round"},{default:n((()=>[u(o,{class:"warning-image",src:z,mode:""})])),_:1}),u(p,{class:"warning-text",style:{"font-weight":"bold"}},{default:n((()=>[c(r(d(A)("綁定失敗")),1)])),_:1})])),_:1})])),default:n((()=>[G("template",null,[u(p)])])),_:1},8,["show","content"])],64)}}},[["__scopeId","data-v-b75b066c"]]);export{K as default};
