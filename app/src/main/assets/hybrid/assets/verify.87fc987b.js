import{aG as e,aH as l,a7 as a,aI as t,aJ as s,aK as o,aL as n,aM as u,aN as i,aO as c,aP as f,k as d,l as r,w as _,t as v,y as p,z as A,m,T as b,X as g,q as y,ap as h,a as w,s as x,b as C,r as B,a0 as k,a1 as I,$ as U,g as S,ak as E,R as T,S as Q,j as D,A as F,B as M,a2 as Y,aC as N,aD as R,C as O,d as K,aw as j,K as G,aQ as X,aR as P,ac as Z,ab as H,an as L,aS as z,c as W,ah as q,am as V,aT as J,v as $,F as ee,x as le,as as ae,at as te,aB as se,M as oe,aU as ne,Y as ue,aV as ie}from"./index-91a75986.js";import{d as ce,V as fe,e as de,c as re}from"./platform.9e6cfb3a.js";import{_ as _e}from"./ti-button.e78c5802.js";import ve from"./components-ti-keyboard-ti-keyboard.7d1068ac.js";var pe=Date.now;var Ae=function(){try{var l=e(Object,"defineProperty");return l({},"",{}),l}catch(a){}}();const me=Ae;var be=me?function(e,l){return me(e,"toString",{configurable:!0,enumerable:!1,value:(a=l,function(){return a}),writable:!0});var a}:l;var ge,ye,he;const we=(ge=be,ye=0,he=0,function(){var e=pe(),l=16-(e-he);if(he=e,l>0){if(++ye>=800)return arguments[0]}else ye=0;return ge.apply(void 0,arguments)});var xe=Math.max;function Ce(e,l,n){if(!a(n))return!1;var u=typeof l;return!!("number"==u?t(n)&&s(l,n.length):"string"==u&&l in n)&&o(n[l],e)}var Be=n?n.isConcatSpreadable:void 0;function ke(e){return u(e)||i(e)||!!(Be&&e&&e[Be])}function Ie(e,l,a,t,s){var o=-1,n=e.length;for(a||(a=ke),s||(s=[]);++o<n;){var u=e[o];l>0&&a(u)?l>1?Ie(u,l-1,a,t,s):c(s,u):t||(s[s.length]=u)}return s}var Ue=function(e,a){return we(function(e,l,a){return l=xe(void 0===l?e.length-1:l,0),function(){for(var t=arguments,s=-1,o=xe(t.length-l,0),n=Array(o);++s<o;)n[s]=t[l+s];s=-1;for(var u=Array(l+1);++s<l;)u[s]=t[s];return u[l]=a(n),function(e,l,a){switch(a.length){case 0:return e.call(l);case 1:return e.call(l,a[0]);case 2:return e.call(l,a[0],a[1]);case 3:return e.call(l,a[0],a[1],a[2])}return e.apply(l,a)}(e,this,u)}}(e,a,l),e+"")}((function(e,l){if(null==e)return[];var a=l.length;return a>1&&Ce(e,l[0],l[1])?l=[]:a>2&&Ce(l[0],l[1],l[2])&&(l=[l[0]]),f(e,Ie(l,1),[])}));const Se=Ue,Ee=""+new URL("notification-yellow-5a0f90af.svg",import.meta.url).href,Te=_e({__name:"ti-call-toast",props:{title:{type:String,default:null},showTips:{type:Boolean,default:!1}},setup(e){const l=e;return(e,a)=>{const t=b,s=g,o=y;return l.showTips?(d(),r(o,{key:0,class:"ti-toast"},{default:_((()=>[v(t,{class:"ti-toast-image",src:Ee}),v(s,{class:"ti-toast-title"},{default:_((()=>[p(A(l.title),1)])),_:1})])),_:1})):m("",!0)}}},[["__scopeId","data-v-9c80bb27"]]);const Qe=_e({__name:"ti-layout-head",props:{isPay:{type:Boolean,default:!1},isTableNo:{type:Boolean,default:!1},is_call_service:{type:Number,default:1}},emits:["doubleLogo"],setup(e,{expose:l,emit:a}){const t=w(),{userInfo:s}=x(t),o=C(),{tableInfo:n}=x(o),u=B(!1),i=B(!0),c=B(!1),f=B(0),Z=B(),H=B(!1),L=B(0),z=e,W=B(k[I()]),q=()=>{W.value=k[I()]},V=a,J=()=>{V("doubleLogo")},$=async()=>{null==t||t.getUserInfo(!0),null==o||o.getTableInfoAsync(!0),K()&&j("goodsListRefresh")};U("change",(()=>{W.value=k[I()]}));const ee=()=>{Z.value.isShow()?Z.value.close():Z.value.open()},le=B(!1),ae=e=>{le.value||(le.value=!0,setTimeout((()=>{le.value=!1}),2e3),ne(e))},te=B(!1),se=B({table_id:"",call_type:"",shop_supplier_id:""}),oe=B(),ne=async e=>{oe.value=G(),se.value.table_id=oe.value.table_id,se.value.call_type=e,se.value.shop_supplier_id=oe.value.shop_supplier_id;try{u.value=!0;await(l=se.value,h("call.call/call",l));te.value=!0,setTimeout((()=>{te.value=!1}),3e3)}catch(a){}finally{u.value=!1}var l},ue=B(!1),ie=B(0),de=e=>{e.cache_id!==L.value?(L.value=e.cache_id,H.value=-1==parseInt(e.buffet.buffet_expired_time),c.value=!0,0!=e.buffet.remain_continue_time?ue.value=!0:ue.value=!1,f.value=e.buffet.buffet_remaining_time,ie.value=e.buffet.buffet_order_remaining_time,clearInterval(_e),_e=setInterval((()=>{f.value>0?(f.value--,re.value=Ae(f.value)):(re.value="00:00:00",clearInterval(_e))}),1e3),clearInterval(pe),pe=setInterval((()=>{ie.value>0?(ie.value--,ve.value=Ae(ie.value)):(ve.value="00:00:00",clearInterval(pe))}),1e3)):0!=e.buffet.remain_continue_time?(ue.value=!0,ie.value=e.buffet.buffet_order_remaining_time):ue.value=!1},re=B("");let _e;const ve=B("");let pe;const Ae=e=>{let l=Math.floor(e/3600),a=Math.floor(e%3600/60),t=e%60;return`${me(l)}:${me(a)}:${me(t)}`},me=e=>String(e).padStart(2,"0"),be=B(!0),ge=B(0);let ye=Date.now();const he=B(!0),we=()=>{const e=Date.now();e-ye>1e3?ge.value=1:ge.value++,ye=e,ge.value>=8&&(new fe,ge.value=0)};return S((()=>{var e;(async()=>{const e=X();if("pages/index/opentable-index"!=e[e.length-1].route)return;const l=await P();1==l.data.buffet.is_buffet&&(L.value=l.data.cache_id,c.value=!0,f.value=l.data.buffet.buffet_remaining_time,ie.value=l.data.buffet.buffet_order_remaining_time,H.value=-1==parseInt(l.data.buffet.buffet_expired_time)),L.value=""})(),U("sendHead",(e=>{de(e)})),0==(null==(e=w())?void 0:e.getIsConnected())&&(be.value=!1)})),U("isConnect",(e=>{he.value=e})),E((()=>he.value),((e,l)=>{0==e||(showNetWorkConnect.value=!0)})),l({tiCallClick:ae,showBuffet:(e,l)=>{i.value=e}}),(l,a)=>{const t=b,o=y,u=g,f=T(Q("ti-layout-language-item"),ce),h=T(Q("ti-call-toast"),Te);return d(),r(o,{class:"ti-head",onClick:a[3]||(a[3]=e=>D(O)(!1))},{default:_((()=>[v(o,{class:"ti-head-left"},{default:_((()=>{var e;return[v(o,{class:"ti-logo-box"},{default:_((()=>{var e,l,a,o,n,u;return[(null==(a=null==(l=null==(e=D(s))?void 0:e.cloud_basic)?void 0:l.base)?void 0:a.brand_logo_long)?(d(),r(t,{key:0,class:"ti-logo",onDblclick:J,src:null==(u=null==(n=null==(o=D(s))?void 0:o.cloud_basic)?void 0:n.base)?void 0:u.brand_logo_long},null,8,["src"])):(d(),r(t,{key:1,class:"ti-logo",src:"data:image/png;base64,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",onDblclick:J}))]})),_:1}),(null==(e=D(n))?void 0:e.table_no)?(d(),r(o,{key:0,class:"ti-table-no"},{default:_((()=>{var e;return[p(A(D(F)("桌號：")+D(M)(null==(e=D(n))?void 0:e.table_no,17)),1)]})),_:1})):m("",!0),i.value&&c.value&&!H.value?(d(),r(o,{key:1,class:"ti-table-no"},{default:_((()=>[p(A(D(F)("剩餘用餐：")),1)])),_:1})):m("",!0),i.value&&c.value&&!H.value?(d(),r(o,{key:2,class:"ti-table-no",style:{color:"red","margin-left":"0","padding-left":"0"}},{default:_((()=>[p(A(re.value),1)])),_:1})):m("",!0),i.value&&ue.value&&!H.value?(d(),r(o,{key:3,class:"ti-table-no remaining-time"},{default:_((()=>[p("("+A(D(F)("剩餘點餐：")),1)])),_:1})):m("",!0),i.value&&ue.value&&!H.value?(d(),r(o,{key:4,class:"ti-table-no remaining-time",style:{color:"red","margin-left":"0","padding-left":"0"}},{default:_((()=>[p(A(ve.value),1)])),_:1})):m("",!0),i.value&&ue.value&&!H.value?(d(),r(o,{key:5,class:"ti-table-no remaining-time",style:{"padding-left":"0","margin-left":"0"}},{default:_((()=>[p(")")])),_:1})):m("",!0),i.value&&c.value&&H.value?(d(),r(o,{key:6,class:"ti-table-no"},{default:_((()=>[p(A(D(F)("剩餘用餐：")+D(F)("不限制")),1)])),_:1})):m("",!0)]})),_:1}),v(o,{class:"ti-head-right"},{default:_((()=>[v(o,{class:"yx-private-box",onClick:we}),v(o,{class:"ti-image-box",onClick:$},{default:_((()=>[v(t,{class:"ti-refresh-image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAYAAAAehFoBAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHgSURBVHgB7ZjtbcIwEIYvVf+XEbxB2aCMQDfICGwAnaDtBGEDukFgAugEsAFscD2Xs+K4iXU2diUkP9LJJLHPby7+OgAKhUKhUAigggQg4oSKmuyFbGo9urDtyLZVVW1H2us2F3p+gpxQRzOyFuUcyWrHR83PWsgJdfA+ImhD1rDp3/uReor9rM09yIH+/ANRbXS0PW0UR/LotFv+h+CN1eHeRCqg/coRfc4mmCNii51ABBzxoyM8rWDuxB6DwWJ5ONVsq9yCG8u5ggjQv6KkE+xEt4FIqO3CI/gDUoHdWqmZwg3wsFCuQUqwWxnyLD0BPAjrKS6/IQP6q0knsVSwcXaGxOB1q96TbST1pYJPXO4gPTMulaTyI8h41Q7pNHWA9DxxeYF7ALsd70tSXxph41yP5T+TI/Ycy0uk4kuR4BDntW+XwriturF8KEgJdsfAMYIEY+TuGTQkHD7JzCQ80bAQTxp+OTvDeIPUDERYn2PnEAhvzXYWsoIceIbEMsDHFPvnYNFmcatg3eEcu0zB3Ks9bWfYn2C/YjEyAQgWzNdDWYN+iRb7SahbR5PuKOkRbDKE1rm/GBE1RIs3Hk+D/kjBa2Z8GFoReEjo58/Q31y2cD3lrUNWkkKhUCgUkvAD5MmZuUxCRYMAAAAASUVORK5CYII="})])),_:1}),v(o,{class:"ti-buttons-box",onClick:[a[0]||(a[0]=Y((()=>{}),["stop"])),ee]},{default:_((()=>[v(o,{class:"yx-language-box",style:{position:"relative"}},{default:_((()=>[v(t,{class:"ti-pay-image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAIxSURBVHgB1Va7TtxAFL0bkSZF7CZFmuwPZJ0fIKFIIiJYSJMiCY8GBIhHg4S0AtHwdI8QIFEBgn6Xl0QDuytRUNlGNDTs8gF4kGhozJyBMbZ3DKYAiSONNPLM3DP3njtnN6W/e+vRM+INPTMSEfxr7yTr5JQurq7FKB4eUd/gUJKj8QRNLa3UN3Ab5H9bB31Kp/21jPGFmrOtYo49uEAsoEF0zE5NeEC28buX/vjBiwPWsAeYnZ7wVLEoLrgM0Nz4I5YgegEVSV201rmxcTEvlw6IMZd0XSNzepIu+Zy5TKxp/Nt7TRfrGOXiAdV/a6Dc6DgdWxZtbeb9mKlgm6Kex7ZFjmPzYC49BZquUyZj0Geuz+L8nJpAbOQ3w6ZL90IQzS8tU/3XhpDIQLVSEVkO9HYLwV3GxOWQkVLk3MiwVyru39dz6raelbOzWA2wFtUNMfp7umpFti0rdBiE+P4Y5OVUxBj+O8gYRigzxhglhRRfIljOl7MKiBaEpmmUFGjbIBwudg2BOTMp+vmeQFcSByHX5F4AnfVwm971Mw7hwSRpU+iH/ar3U/PQHNtW9/MjkO8HZMEMQlZxzm+1ubvnp9ry66c40JT9XVMqZOQ4Fm0X8lTY2RNWASCjEKLmZEbMTrplErMzFWantGvzCXYt3daMses6VT3RUdVqRfywlEtF3y2DkG5r8BK2//1DW4W8UhslAbC+tuLPt3k3ie7ihAD02FhbFfOFgKAqpF79v4obedc8+SUx1RUAAAAASUVORK5CYII="}),v(u,{class:"ti-pay-text"},{default:_((()=>[p(A(W.value),1)])),_:1}),v(o,{class:"ti-language-box"},{default:_((()=>[v(f,{ref_key:"refShowLanguage",ref:Z,onLanguageText:q},null,512)])),_:1})])),_:1})])),_:1}),1===e.is_call_service||"1"===e.is_call_service?N((d(),r(o,{key:0,class:"ti-buttons-box"},{default:_((()=>[z.isPay?(d(),r(o,{key:0,class:"ti-pay-box",onClick:a[1]||(a[1]=e=>ae("2"))},{default:_((()=>[v(t,{class:"ti-pay-image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEMSURBVHgB5ZXhEYIwDIWDxwBuICM4QkfQCdQJdAMdQSdQJ9ANYAPcgBFgg/qiQXNaegL1j3537wq0zaNJoUR/g7V2DK2hAsr5nvqCIENoBaX2SSomKXUFkw20h0oVdMOG0n9gE2oLJs1UUG63bOYY194AExIJnMsKhp6xHxvE6nou7VRaLmrTvJEYGfWsiqLoQp632qh8d6XgTOi4A4eXoe4kUKrTO6DwJNCkvok9A3fQ2dPPQZYekxu+FVjy09RfQe/FVkXuWlzjcgtVgyOUKMNVaINGYgoDF3uBDy167Qi1At73J0lPqevxjRSxmXEZZBSOzPnU9vsP1TQfRPZ+gm1lX7eFc/84lH6HK0WszDSg1bNEAAAAAElFTkSuQmCC"}),v(u,{class:"ti-pay-text"},{default:_((()=>[p(A(D(F)("結賬")),1)])),_:1})])),_:1})):m("",!0),v(o,{class:"ti-call-box",onClick:a[2]||(a[2]=e=>ae("1"))},{default:_((()=>[v(t,{class:"ti-call-image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEvSURBVHgB5ZXRTcMwFEXvS+IoMT8eISOUCQgbsAHZADZINqAbICZgBMoG3YBugD+jtvB4LhUIWjd2KepHr/IUyXbusSP7GjgZGZ23RmevqyrVHQ4lY+TR6l6Kf1SZP5oC1dD3tNPcGZB6klGVZ8gM74tL28t7L0CpXnaYf0Pyxbm1sNs6E695oZoAc6cK8/zW1+kFgPgaoWK+iAeAKoSKMEI8IEoG/wxAPID8s/ozYH2AogCmyOpgABLVIlZEbRBgtf+BBtEA1EanV4MAaamxrzhtNu02ZsJbj3yQEp4NA9SyA/vDyyvmCd7S8e9mb9gZpUbI3O+SGPjMJCla7yxZJZOslKfS9izmU9svJziGKGSQxLZLyxu4aHYHkF3Rg+3nHQ4lc5aNv65MnXU4GX0AyjBH7Mx/5MAAAAAASUVORK5CYII="}),v(u,{class:"ti-call-text"},{default:_((()=>[p(A(D(F)("呼叫服務員")),1)])),_:1})])),_:1})])),_:1},512)),[[R,be.value]]):m("",!0)])),_:1}),te.value?(d(),r(o,{key:0,class:"ti-call-toast-box"},{default:_((()=>[v(h,{showTips:te.value,title:D(F)("已呼叫服務員，請稍等...")},null,8,["showTips","title"])])),_:1})):m("",!0)])),_:1})}}},[["__scopeId","data-v-e4d40aa7"]]),De=[{font_class:"arrow-down",unicode:""},{font_class:"arrow-left",unicode:""},{font_class:"arrow-right",unicode:""},{font_class:"arrow-up",unicode:""},{font_class:"auth",unicode:""},{font_class:"auth-filled",unicode:""},{font_class:"back",unicode:""},{font_class:"bars",unicode:""},{font_class:"calendar",unicode:""},{font_class:"calendar-filled",unicode:""},{font_class:"camera",unicode:""},{font_class:"camera-filled",unicode:""},{font_class:"cart",unicode:""},{font_class:"cart-filled",unicode:""},{font_class:"chat",unicode:""},{font_class:"chat-filled",unicode:""},{font_class:"chatboxes",unicode:""},{font_class:"chatboxes-filled",unicode:""},{font_class:"chatbubble",unicode:""},{font_class:"chatbubble-filled",unicode:""},{font_class:"checkbox",unicode:""},{font_class:"checkbox-filled",unicode:""},{font_class:"checkmarkempty",unicode:""},{font_class:"circle",unicode:""},{font_class:"circle-filled",unicode:""},{font_class:"clear",unicode:""},{font_class:"close",unicode:""},{font_class:"closeempty",unicode:""},{font_class:"cloud-download",unicode:""},{font_class:"cloud-download-filled",unicode:""},{font_class:"cloud-upload",unicode:""},{font_class:"cloud-upload-filled",unicode:""},{font_class:"color",unicode:""},{font_class:"color-filled",unicode:""},{font_class:"compose",unicode:""},{font_class:"contact",unicode:""},{font_class:"contact-filled",unicode:""},{font_class:"down",unicode:""},{font_class:"bottom",unicode:""},{font_class:"download",unicode:""},{font_class:"download-filled",unicode:""},{font_class:"email",unicode:""},{font_class:"email-filled",unicode:""},{font_class:"eye",unicode:""},{font_class:"eye-filled",unicode:""},{font_class:"eye-slash",unicode:""},{font_class:"eye-slash-filled",unicode:""},{font_class:"fire",unicode:""},{font_class:"fire-filled",unicode:""},{font_class:"flag",unicode:""},{font_class:"flag-filled",unicode:""},{font_class:"folder-add",unicode:""},{font_class:"folder-add-filled",unicode:""},{font_class:"font",unicode:""},{font_class:"forward",unicode:""},{font_class:"gear",unicode:""},{font_class:"gear-filled",unicode:""},{font_class:"gift",unicode:""},{font_class:"gift-filled",unicode:""},{font_class:"hand-down",unicode:""},{font_class:"hand-down-filled",unicode:""},{font_class:"hand-up",unicode:""},{font_class:"hand-up-filled",unicode:""},{font_class:"headphones",unicode:""},{font_class:"heart",unicode:""},{font_class:"heart-filled",unicode:""},{font_class:"help",unicode:""},{font_class:"help-filled",unicode:""},{font_class:"home",unicode:""},{font_class:"home-filled",unicode:""},{font_class:"image",unicode:""},{font_class:"image-filled",unicode:""},{font_class:"images",unicode:""},{font_class:"images-filled",unicode:""},{font_class:"info",unicode:""},{font_class:"info-filled",unicode:""},{font_class:"left",unicode:""},{font_class:"link",unicode:""},{font_class:"list",unicode:""},{font_class:"location",unicode:""},{font_class:"location-filled",unicode:""},{font_class:"locked",unicode:""},{font_class:"locked-filled",unicode:""},{font_class:"loop",unicode:""},{font_class:"mail-open",unicode:""},{font_class:"mail-open-filled",unicode:""},{font_class:"map",unicode:""},{font_class:"map-filled",unicode:""},{font_class:"map-pin",unicode:""},{font_class:"map-pin-ellipse",unicode:""},{font_class:"medal",unicode:""},{font_class:"medal-filled",unicode:""},{font_class:"mic",unicode:""},{font_class:"mic-filled",unicode:""},{font_class:"micoff",unicode:""},{font_class:"micoff-filled",unicode:""},{font_class:"minus",unicode:""},{font_class:"minus-filled",unicode:""},{font_class:"more",unicode:""},{font_class:"more-filled",unicode:""},{font_class:"navigate",unicode:""},{font_class:"navigate-filled",unicode:""},{font_class:"notification",unicode:""},{font_class:"notification-filled",unicode:""},{font_class:"paperclip",unicode:""},{font_class:"paperplane",unicode:""},{font_class:"paperplane-filled",unicode:""},{font_class:"person",unicode:""},{font_class:"person-filled",unicode:""},{font_class:"personadd",unicode:""},{font_class:"personadd-filled",unicode:""},{font_class:"personadd-filled-copy",unicode:""},{font_class:"phone",unicode:""},{font_class:"phone-filled",unicode:""},{font_class:"plus",unicode:""},{font_class:"plus-filled",unicode:""},{font_class:"plusempty",unicode:""},{font_class:"pulldown",unicode:""},{font_class:"pyq",unicode:""},{font_class:"qq",unicode:""},{font_class:"redo",unicode:""},{font_class:"redo-filled",unicode:""},{font_class:"refresh",unicode:""},{font_class:"refresh-filled",unicode:""},{font_class:"refreshempty",unicode:""},{font_class:"reload",unicode:""},{font_class:"right",unicode:""},{font_class:"scan",unicode:""},{font_class:"search",unicode:""},{font_class:"settings",unicode:""},{font_class:"settings-filled",unicode:""},{font_class:"shop",unicode:""},{font_class:"shop-filled",unicode:""},{font_class:"smallcircle",unicode:""},{font_class:"smallcircle-filled",unicode:""},{font_class:"sound",unicode:""},{font_class:"sound-filled",unicode:""},{font_class:"spinner-cycle",unicode:""},{font_class:"staff",unicode:""},{font_class:"staff-filled",unicode:""},{font_class:"star",unicode:""},{font_class:"star-filled",unicode:""},{font_class:"starhalf",unicode:""},{font_class:"trash",unicode:""},{font_class:"trash-filled",unicode:""},{font_class:"tune",unicode:""},{font_class:"tune-filled",unicode:""},{font_class:"undo",unicode:""},{font_class:"undo-filled",unicode:""},{font_class:"up",unicode:""},{font_class:"top",unicode:""},{font_class:"upload",unicode:""},{font_class:"upload-filled",unicode:""},{font_class:"videocam",unicode:""},{font_class:"videocam-filled",unicode:""},{font_class:"vip",unicode:""},{font_class:"vip-filled",unicode:""},{font_class:"wallet",unicode:""},{font_class:"wallet-filled",unicode:""},{font_class:"weibo",unicode:""},{font_class:"weixin",unicode:""}];const Fe=_e({name:"UniIcons",emits:["click"],props:{type:{type:String,default:""},color:{type:String,default:"#333333"},size:{type:[Number,String],default:16},customPrefix:{type:String,default:""},fontFamily:{type:String,default:""}},data:()=>({icons:De}),computed:{unicode(){let e=this.icons.find((e=>e.font_class===this.type));return e?e.unicode:""},iconSize(){return"number"==typeof(e=this.size)||/^[0-9]*$/g.test(e)?e+"px":e;var e},styleObj(){return""!==this.fontFamily?`color: ${this.color}; font-size: ${this.iconSize}; font-family: ${this.fontFamily};`:`color: ${this.color}; font-size: ${this.iconSize};`}},methods:{_onClick(){this.$emit("click")}}},[["render",function(e,l,a,t,s,o){const n=g;return d(),r(n,{style:H(o.styleObj),class:L(["uni-icons",["uniui-"+a.type,a.customPrefix,a.customPrefix?a.type:""]]),onClick:o._onClick},{default:_((()=>[Z(e.$slots,"default",{},void 0,!0)])),_:3},8,["style","class","onClick"])}],["__scopeId","data-v-d0013c3d"]]),Me=_e({__name:"ti-input-d",props:{modelValue:{type:[String,Number],default:null},type:{type:String,default:"text"},focus:{type:Boolean,default:!1},disabled:{type:Boolean,default:!0},readonly:{type:Boolean,default:!0},password:{type:Boolean,default:!1},placeholder:{type:String,default:null},prefixIcon:{type:String,default:null},suffixIcon:{type:String,default:"../../static/arrow-left.png"}},emits:["update:modelValue","focus","blur","click"],setup(e,{emit:l}){const a=l,t=e,s=e=>{a("update:modelValue",e.detail.value)},o=()=>{t.modelValue&&a("update:modelValue",t.modelValue.substring(0,t.modelValue.length-1))},n=()=>{a("click")};return(e,l)=>{const a=b,u=y,i=z;return d(),r(u,{class:L(["ti-input-box",{focus:t.focus}]),onClick:n},{default:_((()=>[Z(e.$slots,"prefix",{},(()=>[t.prefixIcon?(d(),r(u,{key:0,class:"ti-input-prefix"},{default:_((()=>[v(a,{class:"ti-prefix-icon",src:t.prefixIcon},null,8,["src"])])),_:1})):m("",!0)]),!0),v(i,{class:"ti-input",value:t.modelValue,type:t.type,password:t.password,disabled:t.disabled,placeholder:t.placeholder,focus:!1,readonly:!0,onInput:s},null,8,["value","type","password","disabled","placeholder"]),Z(e.$slots,"suffix",{},(()=>[t.suffixIcon?(d(),r(u,{key:0,class:"ti-input-suffix",onClick:o},{default:_((()=>[v(a,{class:"ti-suffix-icon",src:t.suffixIcon},null,8,["src"])])),_:1})):m("",!0)]),!0)])),_:3},8,["class"])}}},[["__scopeId","data-v-cd8e9f17"]]),Ye=_e({__name:"diners-number",props:{show:{type:Boolean,default:!1},title:{type:String,default:null},placeholder:{type:String,default:null},password:{type:Boolean,default:!1},isBuffet:{type:Boolean,default:!1}},emits:["update:show","exit","confirm"],setup(e,{emit:l}){const a=W(),t=w(),s=C(),{userInfo:o}=x(t),n=e,u=l,i=B({table_id:"",meal_num:"",is_buffet:n.isBuffet,buffet_ids:[],number:"",buffet_customer_type:[]}),c=B(1150),f=B(!1),b=q((()=>{var e;return((null==(e=i.value)?void 0:e.buffet_customer_type)||[]).reduce(((e,l)=>e+Number(l.num)),0)||0})),h=B(0),k=B(null),I=B(!1),U=B(""),M=B([]),Y=B(!1),N=B(!1),R=B(n.isBuffet);function O(){R.value=!0,c.value=1150,i.value.number=""}function K(){R.value=!1,c.value=824,i.value.buffet_ids=[],i.value.buffet_customer_type=[]}const j=q((()=>{var e;const l=[];return null==(e=M.value)||e.map((e=>{var a;(null==(a=i.value)?void 0:a.buffet_ids.includes(e.id))&&l.push(e.name_text)})),l})),G=e=>{e&&1==N.value&&(i.value.number+=e)},X=()=>{1==N.value&&(i.value.number="")},P=()=>{X(),u("exit")},Z=()=>{var e;if(R.value&&!n.password){if(!j.value||j.value.length<=0)return uni.showToast({title:F("请选择自助餐套餐"),icon:"none"});if(!i.value.buffet_customer_type||i.value.buffet_customer_type.length<=0)return uni.showToast({title:se("[{title}]暂无用户类型，请选择其他自助餐",{title:j.value[0]}),icon:"none"});let l="";if(((null==(e=i.value)?void 0:e.buffet_ids)||[]).some((e=>{var a;const t=null==(a=M.value)?void 0:a.find((l=>l.id==e));if(!t.buffetCustomerType||t.buffetCustomerType.length<=0)return l=t.name_text,!0})),l)return I.value=!0,void(U.value=l);if(!b.value)return uni.showToast({title:F("請輸入人數"),icon:"none"});if(!/^(?!0+$)\d{1,3}$/.test(b.value))return uni.showToast({title:F("用餐人數支持1-999"),icon:"none"});Y.value=!0}else if(R.value||n.password)u("confirm",i.value.number,R.value&&"1"==(null==o?void 0:o.value.buffet.is_open));else{if(!i.value.number)return uni.showToast({title:F("請輸入人數"),icon:"none"});if(!/^(?!0+$)\d{1,3}$/.test(i.value.number))return uni.showToast({title:F("用餐人數支持1-999"),icon:"none"});z()}},z=async()=>{if(!f.value){null==a||a.setIsContinueGetData(!0),i.value.meal_num=i.value.number,i.value.is_buffet=R.value?1:0,i.value.table_id=oe(),delete i.value.number;try{f.value=!0,await ne(i.value),null==s||s.openTablePage(i.value.is_buffet)}catch(e){u("exit",e)}finally{f.value=!1}}},ce=()=>{!i.value.buffet_customer_type||i.value.buffet_customer_type.length<=0||(i.value.buffet_customer_type[h.value].num=0)},fe=e=>{i.value.buffet_customer_type[h.value].num=Number(`${(i.value.buffet_customer_type[h.value].num||"").toString()}${e}`)};return S((()=>{setTimeout((()=>{N.value=!0}),500)})),E((()=>i.value.buffet_ids),(()=>{var e;let l=[];((null==(e=i.value)?void 0:e.buffet_ids)||[]).map((e=>{var a;const t=null==(a=M.value)?void 0:a.find((l=>l.id==e));t.buffetCustomerType&&t.buffetCustomerType.length>0&&t.buffetCustomerType.map((e=>{l.findIndex((l=>l.customer_type_id==e.customer_type_id))<0&&l.push({name_text:e.name_text,customer_type_id:e.customer_type_id,num:0})}))})),i.value.buffet_customer_type=Se(l,"customer_type_id")}),{deep:!0}),E((()=>n.password),(e=>{c.value=e?824:1150})),E((()=>n.show),(async e=>{await V(),1==n.isBuffet&&n.show?(J().then((e=>{var l;if(M.value=e.data,n.isUpdate&&n.buffetIds&&n.buffetIds.length>0){const e=null==(l=M.value)?void 0:l.find((e=>e.id==n.buffetIds[0]));k.value=null==e?void 0:e.is_comb}})),e&&X(),O()):K()}),{immediate:!0}),(l,a)=>{const t=y,s=g,w=T(Q("ti-empty-data"),de),x=ue,C=T(Q("uni-icons"),Fe),B=ie,S=T(Q("ti-keyboard"),ve),E=T(Q("ti-input-d"),Me),W=T(Q("ti-modal"),re);return d(),$(ee,null,[v(W,{show:n.show,isBgGray:!0,title:n.title,width:c.value,isBuffet:R.value,isCancelShow:!1,isConfirmShow:!1,onCancel:a[4]||(a[4]=e=>u("update:show",!1))},{content:_((()=>[v(t,{class:"ti-dialog-content"},{default:_((()=>{var l;return[e.password||"1"!=(null==(l=D(o))?void 0:l.buffet.is_open)?m("",!0):(d(),r(t,{key:0,class:"ti-dinner-select"},{default:_((()=>[v(t,{class:L(["ti-dinner-select-item",{select:R.value,unselect:!R.value}]),onClick:a[0]||(a[0]=e=>O())},{default:_((()=>[p(A(D(F)("自助餐")),1)])),_:1},8,["class"]),v(t,{class:L(["ti-dinner-select-item",{select:!R.value,unselect:R.value}]),onClick:a[1]||(a[1]=e=>K())},{default:_((()=>[p(A(D(F)("非自助餐")),1)])),_:1},8,["class"])])),_:1})),R.value&&!e.password?(d(),r(t,{key:1,class:"ti-buffet-box",style:H({"grid-template-columns":n.isBuffetProduct?"1fr":""})},{default:_((()=>[n.isBuffetProduct?m("",!0):(d(),r(x,{key:0,class:"ti-buffet-scroll","scroll-y":""},{default:_((()=>[M.value&&M.value.length>0?(d(),r(t,{key:0,class:"ti-buffet-list"},{default:_((()=>[(d(!0),$(ee,null,le(M.value,(e=>(d(),r(t,{key:e.id,class:L(["ti-buffet-item",{active:i.value.buffet_ids.includes(e.id),disabled:i.value.buffet_ids.length>0&&k.value!=e.is_comb}]),onClick:l=>(e=>{if(!(i.value.buffet_ids.length>0&&k.value!=e.is_comb))if(k.value=e.is_comb,0==k.value)i.value.buffet_ids=i.value.buffet_ids[0]!=e.id?[e.id]:[];else{const l=i.value.buffet_ids.indexOf(e.id);if(l>-1)i.value.buffet_ids.splice(l,1);else{if(i.value.buffet_ids.length>=2)return uni.showToast({title:se("最多只能选择{count}个",{count:2}),icon:"none"});i.value.buffet_ids.push(e.id)}}})(e)},{default:_((()=>[v(t,{class:"ti-buffet-name"},{default:_((()=>[p(A(e.name_text||e.name),1)])),_:2},1024),v(t,null,{default:_((()=>[v(s,{class:"ti-buffet-price"},{default:_((()=>{var l;return[p(A(D(ae)(e.buffetCustomerType?null==(l=e.buffetCustomerType[0])?void 0:l.price:0)),1)]})),_:2},1024),v(s,{class:"ti-buffet-subPrice"},{default:_((()=>{var l;return[p(A(D(te)(e.buffetCustomerType?null==(l=e.buffetCustomerType[0])?void 0:l.price:0)),1)]})),_:2},1024)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128))])),_:1})):(d(),r(w,{key:1}))])),_:1})),v(t,{style:{overflow:"hidden"}},{default:_((()=>[v(t,{class:"ti-buffet-info"},{default:_((()=>[j.value&&0!=j.value.length?(d(),$(ee,{key:1},[v(t,{class:"ti-buffet-select"},{default:_((()=>[(d(!0),$(ee,null,le(j.value,((e,l)=>(d(),r(t,{key:l,class:"ti-buffet-select-item"},{default:_((()=>[p(A(e),1)])),_:2},1024)))),128))])),_:1}),i.value.buffet_customer_type&&i.value.buffet_customer_type.length>0?(d(),$(ee,{key:0},[v(t,{class:"ti-buffet-num"},{default:_((()=>[(d(!0),$(ee,null,le(i.value.buffet_customer_type,((e,l)=>(d(),r(t,{key:e.customer_type_id,class:"ti-buffet-num-item"},{default:_((()=>[v(t,{class:"ti-buffet-num-label"},{default:_((()=>[p(A(e.name_text.length>8?e.name_text.slice(0,6)+"...":e.name_text),1)])),_:2},1024),v(t,{class:"ti-buffet-num-input"},{default:_((()=>[v(B,{class:"ti-input-minus",disabled:e.num<=0,onClick:l=>e.num--},{default:_((()=>[v(C,{"custom-prefix":"iconfont",type:"icon-minus",size:"16",color:"#FFBE00"})])),_:2},1032,["disabled","onClick"]),v(t,{class:L(["ti-input-box",{active:h.value==l}]),onClick:e=>h.value=l},{default:_((()=>[p(A(e.num),1)])),_:2},1032,["class","onClick"]),v(B,{class:"ti-input-plus",disabled:b.value>=999,onClick:l=>e.num++},{default:_((()=>[v(C,{type:"plusempty",size:"16",color:"#FFBE00"})])),_:2},1032,["disabled","onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1}),v(t,{class:"ti-buffet-num-total"},{default:_((()=>[v(s,null,{default:_((()=>[p(A(D(F)("共")),1)])),_:1}),v(s,{class:"orange"},{default:_((()=>[p(A(b.value),1)])),_:1}),v(s,null,{default:_((()=>[p(A(D(F)("人")),1)])),_:1})])),_:1})],64)):(d(),r(t,{key:1,class:"ti-buffet-num-empty"},{default:_((()=>[p(A(D(F)("暂无可选顾客类型")),1)])),_:1}))],64)):(d(),r(t,{key:0,class:"ti-buffet-info-empty"},{default:_((()=>[p(A(D(F)("请选择自助餐套餐")),1)])),_:1}))])),_:1}),v(t,{class:"ti-dialog-btn",style:{padding:"16px","border-radius":"10px"}},{default:_((()=>[v(S,{primaryLoading:f.value,isDoubleZero:!0,isCross:!1,isDrop:!1,onInput:fe,onClear:ce,onConfirm:Z,onExit:P},null,8,["primaryLoading"])])),_:1})])),_:1})])),_:1},8,["style"])):m("",!0),!R.value||e.password?(d(),r(E,{key:2,modelValue:i.value.number,"onUpdate:modelValue":a[2]||(a[2]=e=>i.value.number=e),password:n.password,placeholder:n.placeholder,focus:N.value,onClick:a[3]||(a[3]=e=>{return l="number",void(N.value="number"===l);var l})},null,8,["modelValue","password","placeholder","focus"])):m("",!0)]})),_:1})])),footer:_((()=>[!R.value||e.password?(d(),r(t,{key:0,class:"ti-dialog-footer"},{default:_((()=>[v(S,{onInput:G,onClear:X,onExit:P,onConfirm:Z})])),_:1})):m("",!0)])),_:1},8,["show","title","width","isBuffet"]),v(W,{class:"ti-action-tips",show:I.value,"onUpdate:show":a[5]||(a[5]=e=>I.value=e),title:D(F)("溫馨提示"),content:D(se)("[{title}]暂无用户类型，请选择其他自助餐",{title:U.value}),isCancelShow:!1,onConfirm:a[6]||(a[6]=e=>I.value=!1)},null,8,["show","title","content"]),v(W,{class:"ti-dialog-buffet",show:Y.value,title:D(F)("提示"),onCancel:a[7]||(a[7]=e=>(Y.value=!1,l.directGo=!1)),onConfirm:a[8]||(a[8]=e=>z())},{content:_((()=>[v(t,{class:"ti-dialog-content"},{default:_((()=>[v(x,{class:"ti-buffet-dialog-scroll","scroll-y":""},{default:_((()=>[v(t,{class:"ti-buffet-message"},{default:_((()=>[v(t,{class:"ti-buffet-case"}),v(t,{class:"ti-buffet-text"},{default:_((()=>[p(A(D(F)("如有剩餘食物，可能產生額外費用")),1)])),_:1})])),_:1}),v(t,{class:"ti-buffet-message"},{default:_((()=>[v(t,{class:"ti-buffet-case"}),v(t,{class:"ti-buffet-text"},{default:_((()=>[p(A(D(F)("點菜時請考慮您的飽食量，只訂購能夠完全食用的食品數量")),1)])),_:1})])),_:1}),v(t,{class:"ti-buffet-message"},{default:_((()=>[v(t,{class:"ti-buffet-case"}),v(t,{class:"ti-buffet-text"},{default:_((()=>[p(A(D(F)("對於食品和飲品的過度點單，可能會引發額外費用")),1)])),_:1})])),_:1}),v(t,{class:"ti-buffet-message"},{default:_((()=>[v(t,{class:"ti-buffet-case"}),v(t,{class:"ti-buffet-text"},{default:_((()=>[p(A(D(F)("如有多餘食物或飲品浪費的情況，我們可能會視情況追加費用")),1)])),_:1})])),_:1}),v(t,{class:"ti-buffet-tips"},{default:_((()=>[p(A(D(F)("我们鼓励客人谨慎点菜，仅订购会食用完的食品，避免剩菜问题和额外费用")),1)])),_:1})])),_:1})])),_:1})])),_:1},8,["show","title"])],64)}}},[["__scopeId","data-v-29df640a"]]);function Ne(e){return h("base.base/verifyPassword",e)}export{Ye as D,Qe as _,Fe as a,Ne as v};
