!function(){function t(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,a,o,u=[],s=!0,l=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(i=a.call(n)).done)&&(u.push(i.value),u.length!==e);s=!0);}catch(t){l=!0,r=t}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw r}}return u}}(t,e)||p(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e,i){return e=u(e),function(t,e){if(e&&("object"===w(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return n(t)}(t,a()?Reflect.construct(e,i||[],u(t).constructor):e.apply(t,i))}function n(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&o(t,e)}function r(t){var e="function"==typeof Map?new Map:void 0;return r=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(a())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,e);var r=new(t.bind.apply(t,i));return n&&o(r,n.prototype),r}(t,arguments,u(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),o(n,t)},r(t)}function a(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(a=function(){return!!t})()}function o(t,e){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},o(t,e)}function u(t){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},u(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,b(i.key),i)}}function c(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function d(t){return function(t){if(Array.isArray(t))return h(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||p(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=p(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function p(t,e){if(t){if("string"==typeof t)return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(t,e):void 0}}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function v(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function m(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?v(Object(n),!0).forEach((function(e){g(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function g(t,e,n){return(e=b(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function b(t){var e=function(t,e){if("object"!=w(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=w(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==w(e)?e:String(e)}function y(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */y=function(){return e};var t,e={},n=Object.prototype,i=n.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function c(t,e,n,i){var a=e&&e.prototype instanceof g?e:g,o=Object.create(a.prototype),u=new P(i||[]);return r(o,"_invoke",{value:F(t,n,u)}),o}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",h="executing",v="completed",m={};function g(){}function b(){}function _(){}var x={};l(x,o,(function(){return this}));var D=Object.getPrototypeOf,k=D&&D(D(B([])));k&&k!==n&&i.call(k,o)&&(x=k);var C=_.prototype=g.prototype=Object.create(x);function A(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function n(r,a,o,u){var s=d(t[r],t,a);if("throw"!==s.type){var l=s.arg,c=l.value;return c&&"object"==w(c)&&i.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,o,u)}),(function(t){n("throw",t,o,u)})):e.resolve(c).then((function(t){l.value=t,o(l)}),(function(t){return n("throw",t,o,u)}))}u(s.arg)}var a;r(this,"_invoke",{value:function(t,i){function r(){return new e((function(e,r){n(t,i,e,r)}))}return a=a?a.then(r,r):r()}})}function F(e,n,i){var r=f;return function(a,o){if(r===h)throw new Error("Generator is already running");if(r===v){if("throw"===a)throw o;return{value:t,done:!0}}for(i.method=a,i.arg=o;;){var u=i.delegate;if(u){var s=I(u,i);if(s){if(s===m)continue;return s}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(r===f)throw r=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);r=h;var l=d(e,n,i);if("normal"===l.type){if(r=i.done?v:p,l.arg===m)continue;return{value:l.arg,done:i.done}}"throw"===l.type&&(r=v,i.method="throw",i.arg=l.arg)}}}function I(e,n){var i=n.method,r=e.iterator[i];if(r===t)return n.delegate=null,"throw"===i&&e.iterator.return&&(n.method="return",n.arg=t,I(e,n),"throw"===n.method)||"return"!==i&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+i+"' method")),m;var a=d(r,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,m;var o=a.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function B(e){if(e||""===e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function n(){for(;++r<e.length;)if(i.call(e,r))return n.value=e[r],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}throw new TypeError(w(e)+" is not iterable")}return b.prototype=_,r(C,"constructor",{value:_,configurable:!0}),r(_,"constructor",{value:b,configurable:!0}),b.displayName=l(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,l(t,s,"GeneratorFunction")),t.prototype=Object.create(C),t},e.awrap=function(t){return{__await:t}},A(E.prototype),l(E.prototype,u,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,i,r,a){void 0===a&&(a=Promise);var o=new E(c(t,n,i,r),a);return e.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},A(C),l(C,s,"Generator"),l(C,o,(function(){return this})),l(C,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var i in e)n.push(i);return n.reverse(),function t(){for(;n.length;){var i=n.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=B,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(i,r){return u.type="throw",u.arg=e,n.next=i,r&&(n.method="next",n.arg=t),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=i.call(o,"catchLoc"),l=i.call(o,"finallyLoc");if(s&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),T(n),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var r=i.arg;T(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,i){return this.delegate={iterator:B(e),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=t),m}},e}function _(t,e,n,i,r,a,o){try{var u=t[a](o),s=u.value}catch(l){return void n(l)}u.done?e(s):Promise.resolve(s).then(i,r)}function x(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var a=t.apply(e,n);function o(t){_(a,i,r,o,u,"next",t)}function u(t){_(a,i,r,o,u,"throw",t)}o(void 0)}))}}function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}System.register(["./index-legacy-156406af.js"],(function(a,o){"use strict";var u,l,p,h,v,b,_,D,k,C,A,E,F,I,S,T,P,B,N,z,O,M,L,j,U,R,q,V,$,K,H,W,J,Z,Y,G,Q,X,tt,et,nt,it,rt,at,ot,ut,st,lt,ct,dt,ft,pt,ht,vt,mt,gt,bt,yt,_t,xt,wt,Dt,kt,Ct,At,Et,Ft,It,St,Tt,Pt,Bt,Nt,zt,Ot,Mt,Lt,jt,Ut,Rt,qt,Vt,$t,Kt,Ht,Wt,Jt,Zt,Yt,Gt,Qt,Xt,te,ee,ne,ie,re,ae,oe,ue,se,le,ce,de,fe,pe,he,ve,me,ge,be,ye,_e,xe,we,De,ke,Ce,Ae,Ee,Fe,Ie,Se,Te,Pe,Be,Ne,ze,Oe,Me,Le,je,Ue,Re,qe,Ve,$e,Ke,He,We,Je,Ze,Ye,Ge,Qe,Xe,tn,en,nn,rn,an,on,un,sn,ln,cn,dn,fn,pn,hn,vn=document.createElement("style");return vn.textContent='uni-view[data-v-a17af18d],uni-scroll-view[data-v-a17af18d],uni-swiper-item[data-v-a17af18d]{display:flex;flex-direction:column;flex-shrink:0;flex-grow:0;flex-basis:auto;align-items:stretch;align-content:flex-start}.u-switch[data-v-a17af18d]{display:flex;flex-direction:row;box-sizing:border-box;position:relative;background-color:#fff;border-width:1px;border-radius:100px;transition:background-color .4s;border-color:rgba(0,0,0,.12);border-style:solid;justify-content:flex-end;align-items:center;overflow:hidden}.u-switch__node[data-v-a17af18d]{display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:#fff;border-radius:100px;box-shadow:1px 1px 1px rgba(0,0,0,.25);transition-property:transform;transition-duration:.4s;transition-timing-function:cubic-bezier(.3,1.05,.4,1.05)}.u-switch__bg[data-v-a17af18d]{position:absolute;background-color:#fff;transition-property:transform;transition-duration:.4s;border-radius:0 100px 100px 0;transition-timing-function:ease}.u-switch--disabled[data-v-a17af18d]{opacity:.6}.ti-dialog-content .ti-modify-title[data-v-2dd083b7]{padding-bottom:10px;font-size:12px;font-weight:400;line-height:17px}.ti-dialog-btn[data-v-2dd083b7]{padding-top:16px;background-color:#f3f5f6;border-radius:0 0 10px 10px}.ti-dialog-content .ti-remark-title[data-v-bf2db426]{padding-bottom:10px;font-size:12px;font-weight:400;line-height:17px}.ti-dialog-content .ti-remark-textarea[data-v-bf2db426]{border-radius:5px;border:1px solid #ffbe00;padding:10px}.ti-dialog-content .ti-remark-textarea[data-v-bf2db426] uni-textarea{width:100%;height:64px}.ti-dialog-content .ti-remark-num[data-v-bf2db426]{text-align:right;color:#999;font-size:10px;font-weight:400;line-height:16px;padding-top:2px}.ti-dialog-content .ti-withdrawal-title[data-v-e9c1e9a7]{padding-bottom:10px;font-size:12px;font-weight:400;line-height:17px}.ti-dialog-content .ti-withdrawal-list[data-v-e9c1e9a7]{padding-bottom:10px;display:flex;flex-wrap:wrap}.ti-dialog-content .ti-withdrawal-list .ti-withdrawal-item[data-v-e9c1e9a7]{cursor:pointer;display:flex;align-items:center;justify-content:center;padding:10px 21px;border-radius:5px;border:1px solid rgba(36,22,11,.15);margin-right:10px;margin-bottom:9px;font-size:12px;font-weight:400;line-height:17px}.ti-dialog-content .ti-withdrawal-list .ti-withdrawal-item.active[data-v-e9c1e9a7]{background-color:#fbdb7d;border-color:#fbdb7d}.ti-dialog-btn[data-v-e9c1e9a7]{padding-top:16px;background-color:#f3f5f6;border-radius:0 0 10px 10px}.ti-cancel-title[data-v-1382b5da]{margin-bottom:5px}.ti-cancel-list[data-v-1382b5da]{max-height:134px}.ti-cancel-list .ti-cancel-item[data-v-1382b5da]{padding:7px 10px;border-radius:5px;background-color:#f3f5f6;margin-bottom:5px;font-size:12px;font-weight:400;line-height:17px;text-align:left}.ti-cancel-list .ti-cancel-item[data-v-1382b5da]:last-child{margin-bottom:0}.ti-order-pickup[data-v-b93842ba]{height:100%;overflow:auto;padding:0 26px 26px}.ti-order-pickup .ti-pickup-list .ti-pickup-item[data-v-b93842ba]{margin-bottom:16px}.ti-order-pickup .ti-pickup-list .ti-pickup-item[data-v-b93842ba]:last-child{margin-bottom:0}.ti-order-pickup .ti-pickup-list .ti-pickup-item .ti-pickup-top[data-v-b93842ba]{display:flex;align-items:center;justify-content:space-between;padding-bottom:6px}.ti-order-pickup .ti-pickup-list .ti-pickup-item .ti-pickup-top .ti-pickup-left .ti-price-box .ti-price-text[data-v-b93842ba]{font-size:12px;font-weight:400;line-height:17px}.ti-order-pickup .ti-pickup-list .ti-pickup-item .ti-pickup-top .ti-pickup-left .ti-price-box .ti-pickup-price[data-v-b93842ba]{color:#e50028;font-size:16px;font-weight:700;line-height:24px;padding-left:5px}.ti-order-pickup .ti-pickup-list .ti-pickup-item .ti-pickup-top .ti-pickup-left .ti-price-box .ti-pickup-subPrice[data-v-b93842ba]{color:#999;font-size:16px;font-weight:700;line-height:24px;padding-left:5px}.ti-order-pickup .ti-pickup-list .ti-pickup-item .ti-pickup-top .ti-pickup-left .ti-pickup-time[data-v-b93842ba]{color:#999;font-size:10px;font-weight:400;line-height:14px}.ti-order-pickup .ti-pickup-list .ti-pickup-item .ti-pickup-top .ti-pickup-action[data-v-b93842ba]{display:flex}.ti-order-pickup .ti-pickup-list .ti-pickup-item .ti-pickup-top .ti-pickup-action[data-v-b93842ba] .ti-button{padding-left:26px;padding-right:26px}.ti-order-pickup .ti-pickup-list .ti-pickup-item .ti-pickup-top .ti-pickup-action .ti-cancel-all[data-v-b93842ba]{padding-right:10px}.ti-order-pickup .ti-pickup-list .ti-pickup-item .ti-pickup-goods[data-v-b93842ba]{padding:10px 16px;border-radius:8px;background-color:#f3f5f6}.ti-order-pickup .ti-pickup-list .ti-pickup-item .ti-pickup-goods .ti-goods-head[data-v-b93842ba]{display:grid;grid-template-columns:1fr 117px 67px;color:#999;font-size:11px;font-weight:400;line-height:16px;margin-bottom:5px}.ti-order-pickup .ti-pickup-list .ti-pickup-item .ti-pickup-goods .ti-goods-head .ti-goods-head-total[data-v-b93842ba]{text-align:right}.ti-order-pickup .ti-pickup-list .ti-pickup-item .ti-pickup-goods .ti-goods-body .ti-goods-item[data-v-b93842ba]{display:grid;grid-template-columns:1fr 67px 117px;padding-bottom:5px;padding-top:5px;font-size:11px;font-weight:400;line-height:16px;align-items:center;border-bottom:1px solid #e8eaeb}.ti-order-pickup .ti-pickup-list .ti-pickup-item .ti-pickup-goods .ti-goods-body .ti-goods-item[data-v-b93842ba]:last-child{padding-bottom:0;border-bottom:none}.ti-order-pickup .ti-pickup-list .ti-pickup-item .ti-pickup-goods .ti-goods-body .ti-goods-item[data-v-b93842ba]:first-child{padding-top:0}.ti-order-pickup .ti-pickup-list .ti-pickup-item .ti-pickup-goods .ti-goods-body .ti-goods-item .ti-goods-item-price[data-v-b93842ba]{display:flex;flex-direction:column;align-items:right;text-align:right}.ti-order-pickup .ti-pickup-list .ti-pickup-item .ti-pickup-goods .ti-goods-body .ti-goods-item .ti-goods-subPrice[data-v-b93842ba]{margin-left:5px;color:#999;text-align:right}.ti-preferential-box[data-v-5ee088a3]{display:grid;align-items:center;gap:10px;grid-template-columns:auto 1fr}.ti-preferential-box .ti-preferential-type[data-v-5ee088a3]{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}.ti-preferential-box .ti-preferential-type .ti-preferential-type-item[data-v-5ee088a3]{padding:10px 21px;border-radius:5px;border:1px solid rgba(36,22,11,.15);text-align:center;display:flex;align-items:center;justify-content:center;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ti-preferential-box .ti-preferential-type .ti-preferential-type-item.active[data-v-5ee088a3]{background-color:#fbdb7d;border-color:#fbdb7d}.ti-preferential-box .ti-preferential-label[data-v-5ee088a3]{font-size:12px;font-weight:400;line-height:17px}.ti-preferential-box .ti-preferential-label.ti-preferential-round[data-v-5ee088a3]{align-self:start;padding:14px 0}.ti-preferential-box .ti-preferential-price[data-v-5ee088a3]{color:#e50028;font-size:16px;font-weight:700}.ti-preferential-box .ti-preferential-subPrice[data-v-5ee088a3]{margin-left:5px;color:rgba(36,22,11,.65);font-size:16px;font-weight:700}.ti-preferential-box .ti-preferential-percentage[data-v-5ee088a3]{color:#999;font-size:12px;font-weight:700;line-height:17px;padding-right:10px}.ti-type-radio[data-v-5ee088a3]{display:grid;gap:16px;padding:10px 0}.ti-type-radio .ti-radio-text[data-v-5ee088a3]{font-size:12px;font-weight:400;line-height:26px}.ti-type-radio[data-v-5ee088a3] .uni-label-pointer{display:flex;align-items:center;line-height:1.5}.ti-type-radio[data-v-5ee088a3] .uni-radio-input{width:16px;height:16px}.ti-type-radio[data-v-5ee088a3] .uni-radio-input svg{font-size:10px}.ti-preferential-keyboard[data-v-5ee088a3]{width:100%;padding-top:16px;background-color:#f3f5f6;border-radius:0 0 10px 10px}.ti-cancel-title[data-v-249d77fe]{margin-bottom:5px}.ti-cancel-list[data-v-249d77fe]{max-height:134px}.ti-cancel-list .ti-cancel-item[data-v-249d77fe]{padding:7px 10px;border-radius:5px;background-color:#f3f5f6;margin-bottom:5px;font-size:12px;font-weight:400;line-height:17px;text-align:left}.ti-cancel-list .ti-cancel-item[data-v-249d77fe]:last-child{margin-bottom:0}.ti-action-box[data-v-8eec995d]{padding-left:10px;padding-right:10px}.ti-action-box .ti-action-btn[data-v-8eec995d]{width:104px;background-color:#fff;border-radius:8px;padding:10px;height:100%;display:flex;flex-direction:column}.ti-action-box .ti-action-btn .ti-action-pack[data-v-8eec995d]{display:flex;align-items:center;justify-content:center;margin-bottom:10px}.ti-action-box .ti-action-btn .ti-action-pack .ti-pack-text[data-v-8eec995d]{font-size:10px;font-weight:400;margin-right:5px}.ti-action-box .ti-action-btn .ti-action-pack[data-v-8eec995d] .u-switch{cursor:pointer}.ti-action-box .ti-action-btn .ti-btn-box[data-v-8eec995d]{overflow:hidden;flex:1 1 0%;display:flex;flex-direction:column;flex-shrink:0}.ti-action-box .ti-action-btn .ti-btn-box .ti-btn-item[data-v-8eec995d]{width:100%;flex:1 1 0%;overflow:hidden;font-size:12px;font-weight:700;border-radius:5px;background-color:#fbdb7d;color:#100a05;display:flex;align-items:center;justify-content:center;line-height:1.5;margin-bottom:10px}.ti-action-box .ti-action-btn .ti-btn-box .ti-btn-item[disabled][data-v-8eec995d]{color:#999!important;background-color:#e8eaeb!important}.ti-action-box .ti-action-btn .ti-btn-box .ti-btn-item[disabled].button-hover[data-v-8eec995d]{background-color:#e8eaeb}.ti-action-box .ti-action-btn .ti-btn-box .ti-btn-item .ti-btn-item-text[data-v-8eec995d]{width:100%;display:block;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}.ti-action-box .ti-action-btn .ti-btn-box .ti-btn-item.danger[data-v-8eec995d]{color:#e50028;background-color:rgba(254,51,51,.2)}.ti-action-box .ti-action-btn .ti-btn-box .ti-btn-item.danger.button-hover[data-v-8eec995d]{background-color:rgba(254,51,51,.4)}.ti-action-box .ti-action-btn .ti-btn-box .ti-btn-item.button-hover[data-v-8eec995d]{background-color:#ffbe00}.ti-action-box .ti-action-btn .ti-btn-box .ti-btn-item[data-v-8eec995d]:after{border:none}.ti-action-box .ti-action-btn .ti-btn-box .ti-btn-item[data-v-8eec995d]:last-child{margin-bottom:0}.ti-number-box[data-v-075eebbc]{width:91px;display:flex;align-items:center}.ti-number-box .ti-number-btn[data-v-075eebbc]{width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;line-height:1}.ti-number-box .ti-number-btn .uni-icons[data-v-075eebbc]{color:#100a05!important}.ti-number-box .ti-number-btn[data-v-075eebbc]:after{border:none}.ti-number-box .ti-number-btn.ti-number-minus[data-v-075eebbc]{background-color:transparent;border:1px solid #ffbe00}.ti-number-box .ti-number-btn.ti-number-minus.button-hover[data-v-075eebbc]{background-color:#f3f5f6}.ti-number-box .ti-number-btn.ti-number-minus[disabled][data-v-075eebbc]{border-color:rgba(255,190,0,.25);background-color:#fff}.ti-number-box .ti-number-btn.ti-number-minus[disabled] .uni-icons[data-v-075eebbc]{color:rgba(16,10,5,.25)!important}.ti-number-box .ti-number-btn.ti-number-plus[data-v-075eebbc]{background-color:#ffbe00}.ti-number-box .ti-number-btn.ti-number-plus.button-hover[data-v-075eebbc]{background-color:#100a05}.ti-number-box .ti-number-btn.ti-number-plus.button-hover .uni-icons[data-v-075eebbc]{color:#fff!important}.ti-number-box .ti-number-btn.ti-number-plus[disabled][data-v-075eebbc]{background-color:#fbdb7d}.ti-number-box .ti-number-btn.ti-number-plus[disabled] .uni-icons[data-v-075eebbc]{color:rgba(16,10,5,.25)!important}.ti-number-box .ti-number-btn .ti-number-reload[data-v-075eebbc]{animation:1s infinite linear rotateAnimation-075eebbc}@keyframes rotateAnimation-075eebbc{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.ti-number-box .ti-number-input[data-v-075eebbc]{flex:1 1 0%;overflow:hidden;text-align:center;font-size:12px;font-weight:700;line-height:17px}.ti-dialog-content .ti-payment-input[data-v-7fdade5a]{display:flex;align-items:center}.ti-dialog-content .ti-payment-input[data-v-7fdade5a] .ti-input-box{flex:1}.ti-dialog-content .ti-payment-input[data-v-7fdade5a] .ti-button{width:120px;margin:0 0 0 10px}.ti-dialog-content .ti-payment-member .ti-member-list[data-v-7fdade5a]{margin-top:10px;border-radius:5px;background:rgba(255,190,0,.05);padding:10px;display:grid;grid-template-columns:repeat(auto-fill,minmax(107px,1fr));gap:8px}.ti-dialog-content .ti-payment-member .ti-member-list .ti-member-item[data-v-7fdade5a]{text-align:center}.ti-dialog-content .ti-payment-member .ti-member-list .ti-member-item .ti-member-head[data-v-7fdade5a]{color:rgba(36,22,11,.65);font-size:10px;font-weight:400;line-height:16px;margin-bottom:2px}.ti-dialog-content .ti-payment-member .ti-member-list .ti-member-item .ti-member-name[data-v-7fdade5a]{font-size:12px;font-weight:700;line-height:17px}.ti-dialog-content .ti-payment-member .ti-member-discount[data-v-7fdade5a]{margin-top:10px;display:flex;align-items:center}.ti-dialog-content .ti-payment-member .ti-member-discount .ti-discount-title[data-v-7fdade5a]{font-size:12px;font-weight:400;line-height:17px;margin-right:10px}.ti-dialog-content .ti-payment-member .ti-member-discount .ti-discount-price[data-v-7fdade5a]{color:#e50028;font-size:16px;font-weight:700}.ti-dialog-content .ti-payment-member .ti-member-discount .ti-discount-subPrice[data-v-7fdade5a]{margin-left:5px;color:#999;font-size:16px;font-weight:700}.ti-dialog-btn[data-v-7fdade5a]{padding-top:16px;background-color:#f3f5f6;border-radius:0 0 10px 10px}.ti-pay-container[data-v-fb9b87fa]{display:flex;flex-direction:column;justify-content:center}.ti-pay-container .ti-pay-title-box[data-v-fb9b87fa]{display:flex;flex-direction:column;justify-content:center;align-items:center}.ti-pay-container .ti-pay-title-box .ti-pay-title[data-v-fb9b87fa]{font-size:16px;color:#100a05;font-weight:600}.ti-pay-container .ti-pay-title-box .ti-pay-prices-box[data-v-fb9b87fa]{display:flex;align-items:center}.ti-pay-container .ti-pay-title-box .ti-pay-prices-box .ti-pay-prices[data-v-fb9b87fa]{font-size:16px;color:#e50028;font-weight:600}.ti-pay-container .ti-pay-title-box .ti-pay-prices-box .ti-pay-subPrice[data-v-fb9b87fa]{margin-left:8px;font-size:16px;color:#e50028;font-weight:600}.ti-pay-container .ti-pay-content-box[data-v-fb9b87fa]{display:flex;flex-direction:column;align-items:center}.ti-pay-container .ti-pay-content-box .ti-pay-code[data-v-fb9b87fa]{margin-top:16px;width:107px;height:107px}.ti-pay-container .ti-pay-content-box .ti-pay-code uni-image[data-v-fb9b87fa]{width:100%}.ti-pay-container .ti-pay-content-box .ti-pay-code-tips[data-v-fb9b87fa]{margin-top:9px;font-size:13px;color:#100a05}.ti-dialog-content .ti-payment-money[data-v-0df11180]{margin-bottom:10px}.ti-dialog-content .ti-payment-money .ti-payment-label[data-v-0df11180]{font-size:12px;font-weight:400;margin-right:10px}.ti-dialog-content .ti-payment-money .ti-payment-price[data-v-0df11180]{color:#e50028;font-size:16px;font-weight:700}.ti-dialog-content .ti-payment-money .ti-payment-subPrice[data-v-0df11180]{margin-left:5px;color:rgba(36,22,11,.65);font-size:16px;font-weight:700}.ti-dialog-content .ti-payment-type[data-v-0df11180]{display:flex}.ti-dialog-content .ti-payment-type .ti-type-label[data-v-0df11180]{margin-right:10px;display:flex;align-items:center;color:var(--S--, #100a05);font-size:12px;font-weight:400}.ti-dialog-content .ti-payment-type .ti-type-radio[data-v-0df11180]{display:flex}.ti-dialog-content .ti-payment-type .ti-type-radio .ti-radio-text[data-v-0df11180]{font-size:12px;font-weight:400;line-height:26px}.ti-dialog-content .ti-payment-type .ti-type-radio[data-v-0df11180] .uni-label-pointer{display:flex;align-items:center;padding:10px 16px}.ti-dialog-content .ti-payment-type .ti-type-radio[data-v-0df11180] .uni-radio-input{width:16px;height:16px}.ti-dialog-content .ti-payment-type .ti-type-radio[data-v-0df11180] .uni-radio-input svg{font-size:10px}.ti-dialog-content .ti-payment-cashier .ti-payment-cashier-view[data-v-0df11180]{margin-top:10px;display:flex;flex-direction:row;align-items:center}.ti-dialog-content .ti-payment-cashier .ti-payment-cashier-view .ti-payment-cashier-title[data-v-0df11180]{font-size:12px;font-weight:400}.ti-dialog-content .ti-payment-cashier .ti-payment-cashier-view .ti-payment-cashier-content[data-v-0df11180]{margin-left:10px;font-size:16px;font-weight:700}.ti-dialog-content .ti-payment-member[data-v-0df11180]{border-top:1px dotted rgba(36,22,11,.15);padding-top:10px}.ti-dialog-content .ti-payment-member .ti-payment-top[data-v-0df11180]{display:flex;align-items:center;justify-content:space-between;padding-bottom:10px}.ti-dialog-content .ti-payment-member .ti-payment-top .ti-payment-top-name[data-v-0df11180]{font-size:12px;font-weight:700;line-height:17px}.ti-dialog-content .ti-payment-member .ti-payment-top .ti-payment-top-discomfort[data-v-0df11180]{cursor:pointer;color:#ffbe00;font-size:12px;font-weight:400;line-height:17px}.ti-dialog-content .ti-payment-member .ti-member-list[data-v-0df11180]{border-radius:5px;background:rgba(255,190,0,.05);padding:10px;display:grid;grid-template-columns:repeat(auto-fill,minmax(107px,1fr));gap:8px}.ti-dialog-content .ti-payment-member .ti-member-list .ti-member-item[data-v-0df11180]{text-align:center}.ti-dialog-content .ti-payment-member .ti-member-list .ti-member-item .ti-member-head[data-v-0df11180]{color:rgba(36,22,11,.65);font-size:10px;font-weight:400;line-height:16px;margin-bottom:2px}.ti-dialog-content .ti-payment-member .ti-member-list .ti-member-item .ti-member-name[data-v-0df11180]{font-size:12px;font-weight:700;line-height:17px}.ti-dialog-content .ti-payment-member .ti-member-discount[data-v-0df11180]{margin-top:10px;display:flex;align-items:center}.ti-dialog-content .ti-payment-member .ti-member-discount .ti-discount-title[data-v-0df11180]{font-size:12px;font-weight:400;line-height:17px;margin-right:10px}.ti-dialog-content .ti-payment-member .ti-member-discount .ti-discount-price[data-v-0df11180]{color:#e50028;font-size:16px;font-weight:700}.ti-dialog-content .ti-payment-member .ti-member-discount .ti-discount-subPrice[data-v-0df11180]{margin-left:5px;color:#999;font-size:16px;font-weight:700}.ti-dialog-content .ti-payment-other .ti-other-title[data-v-0df11180]{font-size:12px;font-weight:400;line-height:17px}.ti-dialog-content .ti-payment-other .ti-other-list[data-v-0df11180]{padding-top:10px;padding-bottom:10px;display:grid;grid-template-columns:repeat(auto-fill,minmax(134px,1fr));gap:10px}.ti-dialog-content .ti-payment-other .ti-other-list .ti-other-item[data-v-0df11180]{cursor:pointer;display:flex;align-items:center;padding:10px 21px;border-radius:5px;border:1px solid rgba(36,22,11,.15)}.ti-dialog-content .ti-payment-other .ti-other-list .ti-other-item.active[data-v-0df11180]{border-color:#ffbe00;background-color:#fff6de}.ti-dialog-content .ti-payment-other .ti-other-list .ti-other-item .ti-other-image[data-v-0df11180]{width:26px;height:26px}.ti-dialog-content .ti-payment-other .ti-other-list .ti-other-item .ti-other-image uni-image[data-v-0df11180]{width:100%}.ti-dialog-content .ti-payment-other .ti-other-list .ti-other-item .ti-other-text[data-v-0df11180]{padding-left:5px;font-size:12px;font-weight:400;line-height:17px;width:91px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.keyboard-back[data-v-0df11180]{background-color:#f3f5f6;padding:16px 26px}.ti-lock-view[data-v-9539fd08]{position:absolute;top:0;left:0;right:0;bottom:0;background:rgba(16,10,5,.7);display:flex;justify-content:center;align-items:center;z-index:124}.ti-lock-view .ti-lock-center[data-v-9539fd08]{display:flex;align-items:center;flex-direction:column}.ti-lock-view .ti-lock-center .ti-lock-message[data-v-9539fd08]{color:#fff;font-size:10px;font-weight:400}.ti-lock-view .ti-lock-center .ti-lock-unlock[data-v-9539fd08]{margin-top:16px;padding:10px 16px}.ti-pay-container[data-v-aec3a359]{display:flex;flex-direction:column;justify-content:center}.ti-pay-container .ti-pay-title-box[data-v-aec3a359]{display:flex;flex-direction:column;align-items:center}.ti-pay-container .ti-pay-title-box .ti-pay-title[data-v-aec3a359]{font-size:24px;color:#100a05;font-weight:600}.ti-pay-container .ti-pay-title-box .ti-pay-prices-box[data-v-aec3a359]{display:flex;align-items:center}.ti-pay-container .ti-pay-title-box .ti-pay-prices-box .ti-pay-prices[data-v-aec3a359]{font-size:24px;color:#e50028;font-weight:600}.ti-pay-container .ti-pay-title-box .ti-pay-prices-box .ti-pay-subPrice[data-v-aec3a359]{margin-left:5px;font-size:24px;color:#e50028;font-weight:600}.ti-pay-container .ti-pay-content[data-v-aec3a359]{margin-top:16px;display:grid;gap:10px;grid-template-columns:repeat(2,minmax(0,1fr));padding:16px;background:#f3f5f6;border-radius:5px}.ti-pay-container .ti-pay-content .ti-data-other-item[data-v-aec3a359]{display:flex;flex-direction:column}.ti-pay-container .ti-pay-content .ti-data-other-item .ti-data-other-item-title[data-v-aec3a359]{color:rgba(36,22,11,.65);text-align:left;font-size:12px;font-weight:400}.ti-pay-container .ti-pay-content .ti-data-other-item .ti-data-other-item-content-box[data-v-aec3a359]{margin-top:4px;display:flex;align-items:left;flex-direction:column}.ti-pay-container .ti-pay-content .ti-data-other-item .ti-data-other-item-content-box .ti-data-other-item-content[data-v-aec3a359]{color:#100a05;text-align:left;font-size:12px;font-weight:600}.ti-pay-container .ti-pay-content .ti-data-other-item .ti-data-other-item-content-box .ti-data-other-item-sub-content[data-v-aec3a359]{margin-left:5px;color:#999;text-align:left;font-size:11px;font-weight:600}#ti-cart-scroll[data-v-c38115f5]{height:100%}.ti-cart-box[data-v-c38115f5]{width:458px;display:flex;flex-direction:column;position:relative}.ti-cart-box .ti-cart-list[data-v-c38115f5]{background-color:#fff;border-radius:8px;padding-top:10px;padding-bottom:16px;flex:1 1 0%;display:flex;flex-direction:column;overflow:hidden;position:relative}.ti-cart-box .ti-cart-list .ti-cart-head[data-v-c38115f5]{padding-left:16px;padding-right:16px}.ti-cart-box .ti-cart-list .ti-cart-shop-head[data-v-c38115f5]{display:grid;grid-template-columns:auto 108px 91px;align-items:center;gap:10px;color:#999;font-size:10px;font-weight:400;line-height:16px;border-bottom:1px solid #e8eaeb;height:36px}.ti-cart-box .ti-cart-list .ti-cart-shop-head .ti-shop-head-money[data-v-c38115f5]{text-align:center}.ti-cart-box .ti-cart-list .ti-cart-shop-head .ti-shop-head-num[data-v-c38115f5]{display:flex;align-items:center;justify-content:space-between;text-align:right}.ti-cart-box .ti-cart-list .ti-cart-shop-head .ti-shop-head-num .ti-shop-head-lock[data-v-c38115f5]{width:26px;height:26px;display:flex;align-items:center;justify-content:center;cursor:pointer}.ti-cart-box .ti-cart-list .ti-shop-list[data-v-c38115f5]{flex:1 1 0%;overflow:auto;position:relative}.ti-cart-box .ti-cart-list .ti-shop-list .ti-shop-item[data-v-c38115f5]{cursor:pointer;padding-left:16px;padding-right:16px}.ti-cart-box .ti-cart-list .ti-shop-list .ti-shop-item .ti-shop-item-box[data-v-c38115f5]{border-bottom:1px solid #e8eaeb;padding-top:9px;padding-bottom:9px}.ti-cart-box .ti-cart-list .ti-shop-list .ti-shop-item.active[data-v-c38115f5]{background-color:#e8eaeb}.ti-cart-box .ti-cart-list .ti-shop-list .ti-shop-item:last-child .ti-shop-item-box[data-v-c38115f5]{border-bottom:none}.ti-cart-box .ti-cart-list .ti-shop-list .ti-shop-item .ti-shop-body[data-v-c38115f5]{display:grid;grid-template-columns:auto 99px 91px;align-items:center;gap:10px}.ti-cart-box .ti-cart-list .ti-shop-list .ti-shop-item .ti-shop-body .ti-shop-body-top[data-v-c38115f5]{width:100%;overflow:hidden}.ti-cart-box .ti-cart-list .ti-shop-list .ti-shop-item .ti-shop-body .ti-shop-body-top .ti-shop-title[data-v-c38115f5]{color:#000;font-size:12px;font-weight:700;line-height:17px}.ti-cart-box .ti-cart-list .ti-shop-list .ti-shop-item .ti-shop-body .ti-shop-body-top .ti-shop-spec[data-v-c38115f5]{color:rgba(36,22,11,.65);font-size:8px;font-weight:400;line-height:16px}.ti-cart-box .ti-cart-list .ti-shop-list .ti-shop-item .ti-shop-body .ti-shop-body-money[data-v-c38115f5]{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}.ti-cart-box .ti-cart-list .ti-shop-list .ti-shop-item .ti-shop-body .ti-shop-body-money .ti-shop-price[data-v-c38115f5]{font-size:12px;font-weight:700;line-height:17px;text-align:right;display:block}.ti-cart-box .ti-cart-list .ti-shop-list .ti-shop-item .ti-shop-body .ti-shop-body-money .ti-shop-subPrice[data-v-c38115f5]{font-size:10px;font-weight:400;line-height:16px;text-align:right;color:#999;display:block}.ti-cart-box .ti-cart-list .ti-shop-list .ti-shop-item .ti-shop-remark[data-v-c38115f5]{padding:5px 9px;border-radius:2px;background:#f3f5f6;font-size:10px;font-weight:400;line-height:16px;color:#999;margin-top:5px}.ti-cart-box .ti-cart-statistics[data-v-c38115f5]{padding-top:16px}.ti-cart-box .ti-cart-statistics .ti-cart-total[data-v-c38115f5]{display:flex;align-items:center;justify-content:flex-end;border-bottom:1px dotted rgba(36,22,11,.149);padding-bottom:10px}.ti-cart-box .ti-cart-statistics .ti-cart-total .ti-total-text[data-v-c38115f5]{font-size:12px;font-weight:400;line-height:17px}.ti-cart-box .ti-cart-statistics .ti-cart-total .ti-total-price[data-v-c38115f5]{font-size:13px;font-weight:700;line-height:20px;padding-left:16px;padding-right:5px}.ti-cart-box .ti-cart-statistics .ti-cart-total .ti-total-subPrice[data-v-c38115f5]{font-size:12px;font-weight:400;line-height:17px;color:#999}.ti-cart-box .ti-cart-statistics .ti-cart-discount[data-v-c38115f5]{padding-top:10px;padding-bottom:16px}.ti-cart-box .ti-cart-statistics .ti-cart-discount .ti-discount-item[data-v-c38115f5]{display:flex;align-items:center;justify-content:space-between;padding-bottom:4px}.ti-cart-box .ti-cart-statistics .ti-cart-discount .ti-discount-item[data-v-c38115f5]:last-child{padding-bottom:0}.ti-cart-box .ti-cart-statistics .ti-cart-discount .ti-discount-item .ti-discount-text[data-v-c38115f5]{font-size:10px;font-weight:400;line-height:16px}.ti-cart-box .ti-cart-statistics .ti-cart-discount .ti-discount-item .ti-discount-price[data-v-c38115f5]{font-size:12px;font-weight:700;line-height:17px;padding-left:16px;padding-right:9px}.ti-cart-box .ti-cart-statistics .ti-cart-discount .ti-discount-item .ti-discount-subPrice[data-v-c38115f5]{font-size:10px;font-weight:400;line-height:16px;color:#999}.ti-cart-box .ti-cart-statistics .ti-cart-settlement[data-v-c38115f5]{display:flex;align-items:center;justify-content:space-between;border-radius:8px;background-color:#100a05;color:#fff;overflow:hidden}.ti-cart-box .ti-cart-statistics .ti-cart-settlement .ti-settlement-total[data-v-c38115f5]{display:flex;align-items:center;margin-left:16px}.ti-cart-box .ti-cart-statistics .ti-cart-settlement .ti-settlement-total .ti-settlement-text[data-v-c38115f5]{font-size:10px;font-weight:700;line-height:3}.ti-cart-box .ti-cart-statistics .ti-cart-settlement .ti-settlement-total .ti-settlement-price[data-v-c38115f5]{font-size:16px;font-weight:700;line-height:3;padding-left:2px;padding-right:5px}.ti-cart-box .ti-cart-statistics .ti-cart-settlement .ti-settlement-total .ti-settlement-subPrice[data-v-c38115f5]{font-size:16px;font-weight:700;line-height:3;color:#999}.ti-cart-box .ti-cart-statistics .ti-cart-settlement .ti-settlement-btn[data-v-c38115f5]{height:100%;line-height:3;margin:0;padding:0 42px;background-color:#ffbe00;border-radius:0;color:#100a05;font-size:16px;font-weight:700;position:relative}.ti-cart-box .ti-cart-statistics .ti-cart-settlement .ti-settlement-btn[disabled][data-v-c38115f5]{color:rgba(16,10,5,.25);background-color:#fbdb7d}.ti-cart-box .ti-cart-statistics .ti-cart-settlement .ti-settlement-btn[data-v-c38115f5]:after{border:none}.ti-cart-box .ti-cart-statistics .ti-cart-settlement .ti-settlement-btn.button-hover[data-v-c38115f5]{background-color:#fbdb7d}.ti-cart-box .ti-cart-statistics .ti-cart-settlement .ti-settlement-btn .ti-settlement-badge[data-v-c38115f5]{position:absolute;font-size:10px;font-weight:700;background-color:#e50028;color:#fff;line-height:16px;border-radius:8px;padding:0 3px;text-align:center;top:2px;min-width:16px}.ti-category[data-v-13cf2c63]{overflow:auto hidden;white-space:nowrap;width:100%}.ti-category[data-v-13cf2c63] .uni-scroll-view::-webkit-scrollbar{width:0;height:0}.ti-category-box[data-v-13cf2c63]{width:100%;position:relative}.ti-category-box .ti-category-left[data-v-13cf2c63],.ti-category-box .ti-category-right[data-v-13cf2c63]{cursor:pointer;position:absolute;top:0;z-index:123;width:60px;height:100%;display:flex;align-items:center}.ti-category-box .ti-category-left .ti-category-btn[data-v-13cf2c63],.ti-category-box .ti-category-right .ti-category-btn[data-v-13cf2c63]{border-radius:5px;background-color:#fbdb7d;display:flex;justify-content:center;align-items:center;width:30px;height:30px}.ti-category-box .ti-category-left[data-v-13cf2c63]{left:0;background-image:linear-gradient(to left,transparent 0%,white 50%)}.ti-category-box .ti-category-right[data-v-13cf2c63]{right:0;justify-content:flex-end;background-image:linear-gradient(to right,transparent 0%,white 50%)}.ti-dish-menu[data-v-39379e9b]{padding-left:16px;padding-right:16px}.ti-menu-content[data-v-39379e9b]{display:inline-block;border-bottom:1px solid #f5f7fa;width:100%}.ti-menu-content .ti-menu-item[data-v-39379e9b]{display:inline-block;padding:9px 16px;cursor:pointer;border-bottom:2px solid white;margin-right:10px}.ti-menu-content .ti-menu-item .ti-menu-title[data-v-39379e9b]{font-size:12px;font-weight:700}.ti-menu-content .ti-menu-item.active[data-v-39379e9b]{color:#ffbe00;border-color:#ffbe00}.ti-menu-content .ti-menu-item[data-v-39379e9b]:last-child{margin-right:0}.ti-category-content[data-v-14066009]{padding-bottom:16px}.ti-category-content .ti-dish-secondary[data-v-14066009]{padding:9px 16px 0}.ti-category-content .ti-dish-secondary .ti-secondary-box[data-v-14066009]{display:flex;align-items:center}.ti-category-content .ti-dish-secondary .ti-secondary-item[data-v-14066009]{cursor:pointer;padding:9px 21px;border-radius:5px;border:1px solid rgba(36,22,11,.15);margin-right:10px;font-size:10px;font-weight:400}.ti-category-content .ti-dish-secondary .ti-secondary-item.active[data-v-14066009]{background-color:#fbdb7d;border-color:#fbdb7d}.ti-goods-detail[data-v-586ef4eb] .ti-dialog-top{padding-bottom:14px}.ti-dialog-content .ti-detail-box[data-v-586ef4eb]{display:flex;margin-bottom:10px}.ti-dialog-content .ti-detail-box .ti-detail-image[data-v-586ef4eb]{width:107px;height:80px;border-radius:5px;overflow:hidden}.ti-dialog-content .ti-detail-box .ti-detail-image uni-image[data-v-586ef4eb]{width:100%}.ti-dialog-content .ti-detail-box .ti-detail-con[data-v-586ef4eb]{overflow:hidden;flex:1 1 0%;padding:8px 16px 8px 10px}.ti-dialog-content .ti-detail-box .ti-detail-con .ti-detail-title[data-v-586ef4eb]{font-size:13px;font-weight:700;padding-bottom:9px}.ti-dialog-content .ti-detail-box .ti-detail-con .ti-price-box[data-v-586ef4eb]{margin-bottom:2px}.ti-dialog-content .ti-detail-box .ti-detail-con .ti-price-box[data-v-586ef4eb]:last-child{margin-bottom:0}.ti-dialog-content .ti-detail-box .ti-detail-con .ti-price-box .ti-detail-unit[data-v-586ef4eb]{font-size:12px;font-weight:400}.ti-dialog-content .ti-detail-box .ti-detail-con .ti-price-box .ti-detail-price[data-v-586ef4eb]{padding-left:5px;font-size:12px;font-weight:700;color:#e50028}.ti-dialog-content .ti-detail-box .ti-detail-con .ti-price-box .ti-detail-subPrice[data-v-586ef4eb]{padding-left:5px;color:rgba(36,22,11,.65);font-size:12px;font-weight:700}.ti-dialog-content .ti-detail-specs[data-v-586ef4eb]{max-height:207px;overflow:auto}.ti-dialog-content .ti-detail-specs .ti-specs-box .ti-specs-item[data-v-586ef4eb]{cursor:pointer}.ti-dialog-content .ti-detail-specs .ti-specs-box .ti-specs-item .ti-specs-title[data-v-586ef4eb]{font-size:12px;font-weight:700;padding-bottom:5px}.ti-dialog-content .ti-detail-specs .ti-specs-box .ti-specs-item .ti-specs-child[data-v-586ef4eb]{display:flex;flex-wrap:wrap}.ti-dialog-content .ti-detail-specs .ti-specs-box .ti-specs-item .ti-specs-child .ti-child-item[data-v-586ef4eb]{border-radius:8px;border:1px solid rgba(36,22,11,.15);padding:10px 21px;margin-right:10px;margin-bottom:10px}.ti-dialog-content .ti-detail-specs .ti-specs-box .ti-specs-item .ti-specs-child .ti-child-item[data-v-586ef4eb]:last-child{margin-right:0}.ti-dialog-content .ti-detail-specs .ti-specs-box .ti-specs-item .ti-specs-child .ti-child-item.disabled[data-v-586ef4eb]{border-color:#e8eaeb;background-color:#e8eaeb;color:#999}.ti-dialog-content .ti-detail-specs .ti-specs-box .ti-specs-item .ti-specs-child .ti-child-item.disabled .ti-child-subPrice[data-v-586ef4eb]{color:#999}.ti-dialog-content .ti-detail-specs .ti-specs-box .ti-specs-item .ti-specs-child .ti-child-item.active[data-v-586ef4eb]{border-color:#fbdb7d;background-color:#fbdb7d}.ti-dialog-content .ti-detail-specs .ti-specs-box .ti-specs-item .ti-specs-child .ti-child-item .ti-child-name[data-v-586ef4eb]{font-size:12px;font-weight:400;display:inline-block}.ti-dialog-content .ti-detail-specs .ti-specs-box .ti-specs-item .ti-specs-child .ti-child-item .ti-child-price[data-v-586ef4eb]{font-size:12px;font-weight:400;margin-left:6px;display:inline-block}.ti-dialog-content .ti-detail-specs .ti-specs-box .ti-specs-item .ti-specs-child .ti-child-item .ti-child-subPrice[data-v-586ef4eb]{color:rgba(36,22,11,.65);font-size:12px;font-weight:400;margin-left:6px;display:inline-block}.ti-dish-box[data-v-5f261952]{flex:1 1 0%;overflow:hidden;background-color:#fff;border-radius:8px;padding-top:10px;padding-bottom:10px;display:flex;flex-direction:column;position:relative}.ti-dish-box .ti-dish-list[data-v-5f261952]{flex:1 1 0%;overflow:auto;position:relative}.ti-dish-box .ti-dish-list .ti-dish-goods[data-v-5f261952]{padding-left:16px;padding-right:16px;display:grid;grid-template-columns:repeat(auto-fill,147px);justify-content:space-between;gap:10px}.ti-dish-box .ti-dish-list .ti-dish-goods .ti-goods-item[data-v-5f261952]{cursor:pointer;overflow:hidden;border-radius:8px;background:#f3f5f6;position:relative}.ti-dish-box .ti-dish-list .ti-dish-goods .ti-goods-item .ti-goods-box[data-v-5f261952]{display:flex;flex-direction:column;height:100%}.ti-dish-box .ti-dish-list .ti-dish-goods .ti-goods-item .ti-goods-image[data-v-5f261952]{height:110px;overflow:hidden;position:relative}.ti-dish-box .ti-dish-list .ti-dish-goods .ti-goods-item .ti-goods-image uni-image[data-v-5f261952]{width:100%}.ti-dish-box .ti-dish-list .ti-dish-goods .ti-goods-item .ti-goods-quota[data-v-5f261952]{position:absolute;padding:4px 10px;border-radius:8px 0;background:linear-gradient(98.43deg,#e50028 1.9%,#ff8e5e 85.55%);color:#fff;font-size:10px;font-weight:700;line-height:16px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;z-index:1}.ti-dish-box .ti-dish-list .ti-dish-goods .ti-goods-item .ti-goods-content[data-v-5f261952]{flex:1 1 0%;display:flex;flex-direction:column;justify-content:space-between;padding:5px 10px 10px}.ti-dish-box .ti-dish-list .ti-dish-goods .ti-goods-item .ti-goods-content .ti-goods-title[data-v-5f261952]{font-size:11px;font-weight:400}.ti-dish-box .ti-dish-list .ti-dish-goods .ti-goods-item .ti-goods-content .ti-price-box[data-v-5f261952]{padding-top:5px;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}.ti-dish-box .ti-dish-list .ti-dish-goods .ti-goods-item .ti-goods-content .ti-price-box .ti-goods-price[data-v-5f261952]{font-size:13px;font-weight:700;color:#e50028;display:inline-block}.ti-dish-box .ti-dish-list .ti-dish-goods .ti-goods-item .ti-goods-content .ti-price-box .ti-goods-subPrice[data-v-5f261952]{margin-left:5px;font-size:10px;font-weight:400;color:#999;display:inline-block}.ti-dish-box .ti-dish-list .ti-dish-goods .ti-goods-item .ti-goods-sold-out[data-v-5f261952]{display:block;position:absolute;left:50%;transform:translate(-50%);top:42px;font-size:10px;font-weight:400;color:#fff;background-color:rgba(16,10,5,.7);padding:9px 16px;border-radius:16px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;z-index:1}.ti-dish-box .ti-dish-list .ti-dish-goods .ti-goods-item .ti-goods-disabled[data-v-5f261952]{opacity:.5}.ti-index[data-v-3d459e7f]{display:flex;height:100%}.ti-dialog-content .ti-modify-title[data-v-da17d970]{padding-bottom:10px;font-size:12px;font-weight:400;line-height:17px}.ti-dialog-btn[data-v-da17d970]{padding-top:16px;background-color:#f3f5f6;border-radius:0 0 10px 10px}.ti-dialog-content .ti-remark-title[data-v-3b3a5321]{padding-bottom:10px;font-size:12px;font-weight:400;line-height:17px}.ti-dialog-content .ti-remark-textarea[data-v-3b3a5321]{border-radius:5px;border:1px solid #ffbe00;padding:10px}.ti-dialog-content .ti-remark-textarea[data-v-3b3a5321] uni-textarea{width:100%;height:64px}.ti-dialog-content .ti-remark-num[data-v-3b3a5321]{text-align:right;color:#999;font-size:10px;font-weight:400;line-height:16px;padding-top:2px}.ti-dialog-content .ti-withdrawal-title[data-v-e8b23bc2]{padding-bottom:10px;font-size:12px;font-weight:400;line-height:17px}.ti-dialog-content .ti-withdrawal-list[data-v-e8b23bc2]{padding-bottom:10px;display:flex;flex-wrap:wrap}.ti-dialog-content .ti-withdrawal-list .ti-withdrawal-item[data-v-e8b23bc2]{cursor:pointer;display:flex;align-items:center;justify-content:center;padding:10px 21px;border-radius:5px;border:1px solid rgba(36,22,11,.15);margin-right:10px;margin-bottom:9px;font-size:12px;font-weight:400;line-height:17px}.ti-dialog-content .ti-withdrawal-list .ti-withdrawal-item.active[data-v-e8b23bc2]{background-color:#fbdb7d;border-color:#fbdb7d}.ti-dialog-btn[data-v-e8b23bc2]{padding-top:16px;background-color:#f3f5f6;border-radius:0 0 10px 10px}.ti-preferential-box[data-v-11c7e7fe]{display:grid;align-items:center;gap:10px;grid-template-columns:auto 1fr}.ti-preferential-box .ti-preferential-type[data-v-11c7e7fe]{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}.ti-preferential-box .ti-preferential-type .ti-preferential-type-item[data-v-11c7e7fe]{padding:10px 21px;border-radius:5px;border:1px solid rgba(36,22,11,.15);text-align:center;display:flex;align-items:center;justify-content:center;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ti-preferential-box .ti-preferential-type .ti-preferential-type-item.active[data-v-11c7e7fe]{background-color:#fbdb7d;border-color:#fbdb7d}.ti-preferential-box .ti-preferential-label[data-v-11c7e7fe]{font-size:12px;font-weight:400;line-height:17px}.ti-preferential-box .ti-preferential-label.ti-preferential-round[data-v-11c7e7fe]{align-self:start;padding:14px 0}.ti-preferential-box .ti-preferential-price[data-v-11c7e7fe]{color:#e50028;font-size:16px;font-weight:700}.ti-preferential-box .ti-preferential-subPrice[data-v-11c7e7fe]{margin-left:5px;color:rgba(36,22,11,.65);font-size:16px;font-weight:700}.ti-preferential-box .ti-preferential-percentage[data-v-11c7e7fe]{color:#999;font-size:12px;font-weight:700;line-height:17px;padding-right:10px}.ti-type-radio[data-v-11c7e7fe]{display:grid;gap:16px;padding:10px 0}.ti-type-radio .ti-radio-text[data-v-11c7e7fe]{font-size:12px;font-weight:400;line-height:26px}.ti-type-radio[data-v-11c7e7fe] .uni-label-pointer{display:flex;align-items:center;line-height:1.5}.ti-type-radio[data-v-11c7e7fe] .uni-radio-input{width:16px;height:16px}.ti-type-radio[data-v-11c7e7fe] .uni-radio-input svg{font-size:10px}.ti-preferential-keyboard[data-v-11c7e7fe]{width:100%;padding-top:16px;background-color:#f3f5f6;border-radius:0 0 10px 10px}.ti-cancel-title[data-v-fbb3cb44]{margin-bottom:5px}.ti-cancel-list[data-v-fbb3cb44]{max-height:134px}.ti-cancel-list .ti-cancel-item[data-v-fbb3cb44]{padding:7px 10px;border-radius:5px;background-color:#f3f5f6;margin-bottom:5px;font-size:12px;font-weight:400;line-height:17px;text-align:left}.ti-cancel-list .ti-cancel-item[data-v-fbb3cb44]:last-child{margin-bottom:0}.ti-cancel-title[data-v-d1eb41ed]{margin-bottom:5px}.ti-cancel-list[data-v-d1eb41ed]{max-height:134px}.ti-cancel-list .ti-cancel-item[data-v-d1eb41ed]{padding:7px 10px;border-radius:5px;background-color:#f3f5f6;margin-bottom:5px;font-size:12px;font-weight:400;line-height:17px;text-align:left}.ti-cancel-list .ti-cancel-item[data-v-d1eb41ed]:last-child{margin-bottom:0}.ti-turntable-box .ti-turntable-list[data-v-f8f85dd2]{padding-left:26px;padding-right:26px;display:grid;grid-template-columns:repeat(auto-fill,minmax(158px,1fr));gap:10px}.ti-turntable-box .ti-turntable-list .ti-turntable-item[data-v-f8f85dd2]{padding:10px;border-radius:4px;border:1px solid rgba(36,22,11,.15);background-color:#fff;font-size:12px;font-weight:600;line-height:17px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;cursor:pointer}.ti-turntable-box .ti-turntable-list .ti-turntable-item.active[data-v-f8f85dd2]{background-color:#fbdb7d;border-color:transparent}.uni-popup[data-v-221fc41c]{position:fixed;z-index:99}.uni-popup.top[data-v-221fc41c],.uni-popup.left[data-v-221fc41c],.uni-popup.right[data-v-221fc41c]{top:var(--window-top)}.uni-popup .uni-popup__wrapper[data-v-221fc41c]{display:block;position:relative}.uni-popup .uni-popup__wrapper.left[data-v-221fc41c],.uni-popup .uni-popup__wrapper.right[data-v-221fc41c]{padding-top:var(--window-top);flex:1}.fixforpc-z-index[data-v-221fc41c]{z-index:999}.fixforpc-top[data-v-221fc41c]{top:0}.ti-open-buffet[data-v-f1098571]{width:938px}.ti-dialog-btn[data-v-f1098571]{padding-top:16px;background-color:#f3f5f6;border-radius:0 0 10px 10px}.ti-modify-buffet[data-v-f1098571]{display:grid;grid-template-columns:repeat(2,1fr);gap:10px;padding-bottom:16px}.ti-modify-buffet .ti-buffet-item[data-v-f1098571]{border-radius:5px;padding:10px 21px;display:flex;justify-content:center;align-items:center;cursor:pointer;border:1px solid rgba(36,22,11,.15);font-size:12px;font-weight:400}.ti-modify-buffet .ti-buffet-item.active[data-v-f1098571]{background-color:#fbdb7d;border-color:#fbdb7d}.ti-buffet-box[data-v-f1098571]{display:grid;grid-template-columns:repeat(2,1fr);gap:16px}.ti-buffet-scroll[data-v-f1098571]{max-height:479px;border-radius:12px;border:1px solid rgba(36,22,11,.15)}.ti-buffet-list[data-v-f1098571]{padding:16px;display:grid;gap:5px;cursor:pointer}.ti-buffet-list .ti-buffet-item[data-v-f1098571]{display:grid;grid-template-columns:1fr auto;justify-content:space-between;gap:16px;padding:10px 21px;border-radius:5px;border:1px solid rgba(36,22,11,.1490196078)}.ti-buffet-list .ti-buffet-item .ti-buffet-name[data-v-f1098571]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:12px;font-weight:400}.ti-buffet-list .ti-buffet-item .ti-buffet-price[data-v-f1098571]{font-size:12px;font-weight:600}.ti-buffet-list .ti-buffet-item .ti-buffet-subPrice[data-v-f1098571]{margin-left:5px;color:#999;font-size:10px;font-weight:400;line-height:1.5}.ti-buffet-list .ti-buffet-item.active[data-v-f1098571]{background-color:#fbdb7d;border-color:transparent}.ti-buffet-list .ti-buffet-item.disabled[data-v-f1098571]{background-color:#f3f5f6;border-color:transparent}.ti-buffet-list .ti-buffet-item.disabled .ti-buffet-price[data-v-f1098571]{color:#999}.ti-buffet-info[data-v-f1098571]{height:187px;padding:16px;border-radius:8px;margin-bottom:16px;background-color:#f3f5f6;display:flex;flex-direction:column}.ti-buffet-info .ti-buffet-info-empty[data-v-f1098571]{height:100%;width:100%;display:flex;align-items:center;justify-content:center;color:#999;font-size:16px;font-weight:600}.ti-buffet-info .ti-buffet-select[data-v-f1098571]{border-bottom:1px solid #e8eaeb}.ti-buffet-info .ti-buffet-select .ti-buffet-select-item[data-v-f1098571]{font-size:12px;font-weight:600;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:100%;padding-bottom:10px}.ti-buffet-info .ti-buffet-num-empty[data-v-f1098571]{flex:1 1 0%;width:100%;display:flex;align-items:center;justify-content:center;color:#999;font-size:16px;font-weight:600}.ti-buffet-info .ti-buffet-num[data-v-f1098571]{padding:10px 0;display:grid;grid-template-columns:repeat(3,1fr);gap:10px}.ti-buffet-info .ti-buffet-num .ti-buffet-num-item[data-v-f1098571]{overflow:hidden}.ti-buffet-info .ti-buffet-num .ti-buffet-num-label[data-v-f1098571]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding-bottom:5px}.ti-buffet-info .ti-buffet-num .ti-buffet-num-input[data-v-f1098571]{background-color:#fff;border-radius:5px;height:37px;display:flex;justify-content:space-between}.ti-buffet-info .ti-buffet-num .ti-buffet-num-input .ti-input-minus[data-v-f1098571],.ti-buffet-info .ti-buffet-num .ti-buffet-num-input .ti-input-plus[data-v-f1098571]{padding:0;margin:0;background-color:#fff;flex-shrink:0;width:37px;height:37px;display:flex;align-items:center;justify-content:center}.ti-buffet-info .ti-buffet-num .ti-buffet-num-input .ti-input-minus.button-hover[data-v-f1098571],.ti-buffet-info .ti-buffet-num .ti-buffet-num-input .ti-input-plus.button-hover[data-v-f1098571]{background-color:#e8eaeb}.ti-buffet-info .ti-buffet-num .ti-buffet-num-input .ti-input-minus[data-v-f1098571]:after,.ti-buffet-info .ti-buffet-num .ti-buffet-num-input .ti-input-plus[data-v-f1098571]:after{border:0}.ti-buffet-info .ti-buffet-num .ti-buffet-num-input .ti-input-minus[data-v-f1098571]{border-radius:5px 0 0 5px;border:1px solid rgba(36,22,11,.15);border-right:0}.ti-buffet-info .ti-buffet-num .ti-buffet-num-input .ti-input-box[data-v-f1098571]{flex:1 10%;text-align:center;overflow:hidden;border:1px solid rgba(36,22,11,.15);display:flex;align-items:center;justify-content:center}.ti-buffet-info .ti-buffet-num .ti-buffet-num-input .ti-input-box.active[data-v-f1098571]{border-color:#ffbe00}.ti-buffet-info .ti-buffet-num .ti-buffet-num-input .ti-input-plus[data-v-f1098571]{border-radius:0 5px 5px 0;border:1px solid rgba(36,22,11,.15);border-left:0}.ti-buffet-info .ti-buffet-num-total[data-v-f1098571]{font-size:12px;font-weight:400}.ti-buffet-info .ti-buffet-num-total .orange[data-v-f1098571]{color:#ffbe00;font-size:12px;font-weight:600;padding:0 4px}.ti-cancel-title[data-v-66800af2]{margin-bottom:5px}.ti-cancel-list[data-v-66800af2]{max-height:134px}.ti-cancel-list .ti-cancel-item[data-v-66800af2]{padding:7px 10px;border-radius:5px;background-color:#f3f5f6;margin-bottom:5px;font-size:12px;font-weight:400;line-height:17px;text-align:left}.ti-cancel-list .ti-cancel-item[data-v-66800af2]:last-child{margin-bottom:0}.ti-action-box[data-v-9f5b565b]{padding-left:10px;padding-right:10px}.ti-action-box .ti-action-btn[data-v-9f5b565b]{width:104px;background-color:#fff;border-radius:8px;padding:10px;height:100%;display:flex;flex-direction:column}.ti-action-box .ti-action-btn .ti-action-pack[data-v-9f5b565b]{display:flex;align-items:center;justify-content:center;margin-bottom:10px}.ti-action-box .ti-action-btn .ti-action-pack .ti-pack-text[data-v-9f5b565b]{font-size:10px;font-weight:400;margin-right:5px}.ti-action-box .ti-action-btn .ti-btn-box[data-v-9f5b565b]{overflow:hidden;flex:1 1 0%;display:flex;flex-direction:column;flex-shrink:0}.ti-action-box .ti-action-btn .ti-btn-box .ti-btn-item[data-v-9f5b565b]{width:100%;flex:1 1 0%;overflow:hidden;font-size:12px;font-weight:700;border-radius:5px;background-color:#fbdb7d;color:#100a05;display:flex;align-items:center;justify-content:center;line-height:1.5;margin-bottom:10px}.ti-action-box .ti-action-btn .ti-btn-box .ti-btn-item[disabled][data-v-9f5b565b]{color:#999!important;background-color:#e8eaeb!important}.ti-action-box .ti-action-btn .ti-btn-box .ti-btn-item[disabled].button-hover[data-v-9f5b565b]{background-color:#e8eaeb}.ti-action-box .ti-action-btn .ti-btn-box .ti-btn-item .ti-btn-item-text[data-v-9f5b565b]{width:100%;display:block;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}.ti-action-box .ti-action-btn .ti-btn-box .ti-btn-item.danger[data-v-9f5b565b]{color:#e50028;background-color:rgba(254,51,51,.2)}.ti-action-box .ti-action-btn .ti-btn-box .ti-btn-item.danger.button-hover[data-v-9f5b565b]{background-color:rgba(254,51,51,.4)}.ti-action-box .ti-action-btn .ti-btn-box .ti-btn-item.button-hover[data-v-9f5b565b]{background-color:#ffbe00}.ti-action-box .ti-action-btn .ti-btn-box .ti-btn-item[data-v-9f5b565b]:after{border:none}.ti-action-box .ti-action-btn .ti-btn-box .ti-btn-item[data-v-9f5b565b]:last-child{margin-bottom:0}.ti-number-box[data-v-0592a469]{width:91px;display:flex;align-items:center}.ti-number-box .ti-number-btn[data-v-0592a469]{width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;line-height:1}.ti-number-box .ti-number-btn .uni-icons[data-v-0592a469]{color:#100a05!important}.ti-number-box .ti-number-btn[data-v-0592a469]:after{border:none}.ti-number-box .ti-number-btn.ti-number-minus[data-v-0592a469]{background-color:transparent;border:1px solid #ffbe00}.ti-number-box .ti-number-btn.ti-number-minus.button-hover[data-v-0592a469]{background-color:#f3f5f6}.ti-number-box .ti-number-btn.ti-number-minus[disabled][data-v-0592a469]{border-color:rgba(255,190,0,.25);background-color:#fff}.ti-number-box .ti-number-btn.ti-number-minus[disabled] .uni-icons[data-v-0592a469]{color:rgba(16,10,5,.25)!important}.ti-number-box .ti-number-btn.ti-number-plus[data-v-0592a469]{background-color:#ffbe00}.ti-number-box .ti-number-btn.ti-number-plus.button-hover[data-v-0592a469]{background-color:#100a05}.ti-number-box .ti-number-btn.ti-number-plus.button-hover .uni-icons[data-v-0592a469]{color:#fff!important}.ti-number-box .ti-number-btn.ti-number-plus[disabled][data-v-0592a469]{background-color:#fbdb7d}.ti-number-box .ti-number-btn.ti-number-plus[disabled] .uni-icons[data-v-0592a469]{color:rgba(16,10,5,.25)!important}.ti-number-box .ti-number-btn .ti-number-reload[data-v-0592a469]{animation:1s infinite linear rotateAnimation-0592a469}@keyframes rotateAnimation-0592a469{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.ti-number-box .ti-number-input[data-v-0592a469]{flex:1 1 0%;overflow:hidden;text-align:center;font-size:12px;font-weight:700;line-height:17px}.ti-dialog-content .ti-payment-input[data-v-f2bec8a8]{display:flex;align-items:center}.ti-dialog-content .ti-payment-input[data-v-f2bec8a8] .ti-input-box{flex:1}.ti-dialog-content .ti-payment-input[data-v-f2bec8a8] .ti-button{width:120px;margin:0 0 0 10px}.ti-dialog-content .ti-payment-member .ti-member-list[data-v-f2bec8a8]{margin-top:10px;border-radius:5px;background:rgba(255,190,0,.05);padding:10px;display:grid;grid-template-columns:repeat(auto-fill,minmax(107px,1fr));gap:8px}.ti-dialog-content .ti-payment-member .ti-member-list .ti-member-item[data-v-f2bec8a8]{text-align:center}.ti-dialog-content .ti-payment-member .ti-member-list .ti-member-item .ti-member-head[data-v-f2bec8a8]{color:rgba(36,22,11,.65);font-size:10px;font-weight:400;line-height:16px;margin-bottom:2px}.ti-dialog-content .ti-payment-member .ti-member-list .ti-member-item .ti-member-name[data-v-f2bec8a8]{font-size:12px;font-weight:700;line-height:17px}.ti-dialog-content .ti-payment-member .ti-member-discount[data-v-f2bec8a8]{margin-top:10px;display:flex;align-items:center}.ti-dialog-content .ti-payment-member .ti-member-discount .ti-discount-title[data-v-f2bec8a8]{font-size:12px;font-weight:400;line-height:17px;margin-right:10px}.ti-dialog-content .ti-payment-member .ti-member-discount .ti-discount-price[data-v-f2bec8a8]{color:#e50028;font-size:16px;font-weight:700}.ti-dialog-content .ti-payment-member .ti-member-discount .ti-discount-subPrice[data-v-f2bec8a8]{margin-left:5px;color:#999;font-size:16px;font-weight:700}.ti-dialog-btn[data-v-f2bec8a8]{padding-top:16px;background-color:#f3f5f6;border-radius:0 0 10px 10px}.ti-pay-container[data-v-87b13621]{display:flex;flex-direction:column;justify-content:center}.ti-pay-container .ti-pay-title-box[data-v-87b13621]{display:flex;flex-direction:column;justify-content:center;align-items:center}.ti-pay-container .ti-pay-title-box .ti-pay-title[data-v-87b13621]{font-size:16px;color:#100a05;font-weight:600}.ti-pay-container .ti-pay-title-box .ti-pay-prices-box[data-v-87b13621]{display:flex;align-items:center}.ti-pay-container .ti-pay-title-box .ti-pay-prices-box .ti-pay-prices[data-v-87b13621]{font-size:16px;color:#e50028;font-weight:600}.ti-pay-container .ti-pay-title-box .ti-pay-prices-box .ti-pay-subPrice[data-v-87b13621]{margin-left:8px;font-size:16px;color:#e50028;font-weight:600}.ti-pay-container .ti-pay-content-box[data-v-87b13621]{display:flex;flex-direction:column;align-items:center}.ti-pay-container .ti-pay-content-box .ti-pay-code[data-v-87b13621]{margin-top:16px;width:107px;height:107px}.ti-pay-container .ti-pay-content-box .ti-pay-code uni-image[data-v-87b13621]{width:100%}.ti-pay-container .ti-pay-content-box .ti-pay-code-tips[data-v-87b13621]{margin-top:9px;font-size:13px;color:#100a05}.ti-dialog-content .ti-payment-money[data-v-ac245f17]{margin-bottom:10px}.ti-dialog-content .ti-payment-money .ti-payment-label[data-v-ac245f17]{font-size:12px;font-weight:400;margin-right:10px}.ti-dialog-content .ti-payment-money .ti-payment-price[data-v-ac245f17]{color:#e50028;font-size:16px;font-weight:700}.ti-dialog-content .ti-payment-money .ti-payment-subPrice[data-v-ac245f17]{margin-left:5px;color:rgba(36,22,11,.65);font-size:16px;font-weight:700}.ti-dialog-content .ti-payment-type[data-v-ac245f17]{display:flex}.ti-dialog-content .ti-payment-type .ti-type-label[data-v-ac245f17]{margin-right:10px;display:flex;align-items:center;color:var(--S--, #100a05);font-size:12px;font-weight:400}.ti-dialog-content .ti-payment-type .ti-type-radio[data-v-ac245f17]{display:flex}.ti-dialog-content .ti-payment-type .ti-type-radio .ti-radio-text[data-v-ac245f17]{font-size:12px;font-weight:400;line-height:26px}.ti-dialog-content .ti-payment-type .ti-type-radio[data-v-ac245f17] .uni-label-pointer{display:flex;align-items:center;padding:10px 16px}.ti-dialog-content .ti-payment-type .ti-type-radio[data-v-ac245f17] .uni-radio-input{width:16px;height:16px}.ti-dialog-content .ti-payment-type .ti-type-radio[data-v-ac245f17] .uni-radio-input svg{font-size:10px}.ti-dialog-content .ti-payment-cashier .ti-payment-cashier-view[data-v-ac245f17]{margin-top:10px;display:flex;flex-direction:row;align-items:center}.ti-dialog-content .ti-payment-cashier .ti-payment-cashier-view .ti-payment-cashier-title[data-v-ac245f17]{font-size:12px;font-weight:400}.ti-dialog-content .ti-payment-cashier .ti-payment-cashier-view .ti-payment-cashier-content[data-v-ac245f17]{margin-left:10px;font-size:16px;font-weight:700}.ti-dialog-content .ti-payment-member[data-v-ac245f17]{border-top:1px dotted rgba(36,22,11,.15);padding-top:10px}.ti-dialog-content .ti-payment-member .ti-payment-top[data-v-ac245f17]{display:flex;align-items:center;justify-content:space-between;padding-bottom:10px}.ti-dialog-content .ti-payment-member .ti-payment-top .ti-payment-top-name[data-v-ac245f17]{font-size:12px;font-weight:700;line-height:17px}.ti-dialog-content .ti-payment-member .ti-payment-top .ti-payment-top-discomfort[data-v-ac245f17]{cursor:pointer;color:#ffbe00;font-size:12px;font-weight:400;line-height:17px}.ti-dialog-content .ti-payment-member .ti-member-list[data-v-ac245f17]{border-radius:5px;background:rgba(255,190,0,.05);padding:10px;display:grid;grid-template-columns:repeat(auto-fill,minmax(107px,1fr));gap:8px}.ti-dialog-content .ti-payment-member .ti-member-list .ti-member-item[data-v-ac245f17]{text-align:center}.ti-dialog-content .ti-payment-member .ti-member-list .ti-member-item .ti-member-head[data-v-ac245f17]{color:rgba(36,22,11,.65);font-size:10px;font-weight:400;line-height:16px;margin-bottom:2px}.ti-dialog-content .ti-payment-member .ti-member-list .ti-member-item .ti-member-name[data-v-ac245f17]{font-size:12px;font-weight:700;line-height:17px}.ti-dialog-content .ti-payment-member .ti-member-discount[data-v-ac245f17]{margin-top:10px;display:flex;align-items:center}.ti-dialog-content .ti-payment-member .ti-member-discount .ti-discount-title[data-v-ac245f17]{font-size:12px;font-weight:400;line-height:17px;margin-right:10px}.ti-dialog-content .ti-payment-member .ti-member-discount .ti-discount-price[data-v-ac245f17]{color:#e50028;font-size:16px;font-weight:700}.ti-dialog-content .ti-payment-member .ti-member-discount .ti-discount-subPrice[data-v-ac245f17]{margin-left:5px;color:#999;font-size:16px;font-weight:700}.ti-dialog-content .ti-payment-other .ti-other-title[data-v-ac245f17]{font-size:12px;font-weight:400;line-height:17px}.ti-dialog-content .ti-payment-other .ti-other-list[data-v-ac245f17]{padding-top:10px;padding-bottom:10px;display:grid;grid-template-columns:repeat(auto-fill,minmax(134px,1fr));gap:10px}.ti-dialog-content .ti-payment-other .ti-other-list .ti-other-item[data-v-ac245f17]{cursor:pointer;display:flex;align-items:center;padding:10px 21px;border-radius:5px;border:1px solid rgba(36,22,11,.15)}.ti-dialog-content .ti-payment-other .ti-other-list .ti-other-item.active[data-v-ac245f17]{border-color:#ffbe00;background-color:#fff6de}.ti-dialog-content .ti-payment-other .ti-other-list .ti-other-item .ti-other-image[data-v-ac245f17]{width:26px;height:26px}.ti-dialog-content .ti-payment-other .ti-other-list .ti-other-item .ti-other-image uni-image[data-v-ac245f17]{width:100%}.ti-dialog-content .ti-payment-other .ti-other-list .ti-other-item .ti-other-text[data-v-ac245f17]{padding-left:5px;font-size:12px;font-weight:400;line-height:17px;width:91px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.keyboard-back[data-v-ac245f17]{background-color:#f3f5f6;padding:16px 26px}.ti-pay-container[data-v-fe393606]{display:flex;flex-direction:column;justify-content:center}.ti-pay-container .ti-pay-title-box[data-v-fe393606]{display:flex;flex-direction:column;align-items:center}.ti-pay-container .ti-pay-title-box .ti-pay-title[data-v-fe393606]{font-size:24px;color:#100a05;font-weight:600}.ti-pay-container .ti-pay-title-box .ti-pay-prices-box[data-v-fe393606]{display:flex;align-items:center}.ti-pay-container .ti-pay-title-box .ti-pay-prices-box .ti-pay-prices[data-v-fe393606]{font-size:24px;color:#e50028;font-weight:600}.ti-pay-container .ti-pay-title-box .ti-pay-prices-box .ti-pay-subPrice[data-v-fe393606]{margin-left:5px;font-size:24px;color:#e50028;font-weight:600}.ti-pay-container .ti-pay-content[data-v-fe393606]{margin-top:16px;display:grid;gap:10px;grid-template-columns:repeat(2,minmax(0,1fr));padding:16px;background:#f3f5f6;border-radius:5px}.ti-pay-container .ti-pay-content .ti-data-other-item[data-v-fe393606]{display:flex;flex-direction:column}.ti-pay-container .ti-pay-content .ti-data-other-item .ti-data-other-item-title[data-v-fe393606]{color:rgba(36,22,11,.65);text-align:left;font-size:12px;font-weight:400}.ti-pay-container .ti-pay-content .ti-data-other-item .ti-data-other-item-content-box[data-v-fe393606]{margin-top:4px;display:flex;align-items:left;flex-direction:column}.ti-pay-container .ti-pay-content .ti-data-other-item .ti-data-other-item-content-box .ti-data-other-item-content[data-v-fe393606]{color:#100a05;text-align:left;font-size:12px;font-weight:600}.ti-pay-container .ti-pay-content .ti-data-other-item .ti-data-other-item-content-box .ti-data-other-item-sub-content[data-v-fe393606]{margin-left:5px;color:#999;text-align:left;font-size:11px;font-weight:600}.ti-table-info[data-v-f66f5ee7]{border-radius:8px 8px 0 0;background:linear-gradient(180deg,#ffc51d 0%,#ffe27b 100%);padding-bottom:10px}.ti-table-info .ti-table-noBuffet[data-v-f66f5ee7]{padding:10px 16px 0;display:grid;justify-content:space-between;align-items:center;grid-template-columns:1fr auto;gap:21px;width:100%;overflow:hidden;height:36px}.ti-table-info .ti-table-noBuffet .ti-table-num[data-v-f66f5ee7]{font-size:13px;font-weight:600;line-height:20px;width:100%;overflow:hidden;display:flex;align-items:center}.ti-table-info .ti-table-noBuffet .ti-table-num .ti-table-name[data-v-f66f5ee7]{word-wrap:break-word;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding-right:5px}.ti-table-info .ti-table-noBuffet .ti-table-num .ti-table-name-p[data-v-f66f5ee7]{word-wrap:break-word;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding-right:5px;flex-shrink:0}.ti-table-info .ti-table-noBuffet .ti-table-num .ti-table-lock[data-v-f66f5ee7]{cursor:pointer;flex-shrink:0;width:26px;height:26px;display:flex;align-items:center;justify-content:center}.ti-table-info .ti-table-noBuffet .ti-table-time[data-v-f66f5ee7]{font-size:12px;font-weight:400;line-height:17px}.ti-table-info .ti-table-buffet[data-v-f66f5ee7]{padding-left:16px;padding-right:10px;display:grid;justify-content:space-between;align-items:center;grid-template-columns:1fr auto;gap:21px;height:26px}.ti-table-info .ti-table-buffet .ti-buffet-name[data-v-f66f5ee7]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:12px;font-weight:400}.ti-table-info .ti-table-buffet .ti-buffet-right[data-v-f66f5ee7]{display:flex;align-items:center}.ti-table-info .ti-table-buffet .ti-buffet-right .ti-buffet-time[data-v-f66f5ee7]{font-size:12px;font-weight:400;padding-right:5px}.ti-table-info .ti-table-buffet .ti-buffet-right .ti-buffet-icon[data-v-f66f5ee7]{cursor:pointer;width:26px;height:26px;display:flex;align-items:center;justify-content:center}.ti-dialog-buffet[data-v-f66f5ee7] .ti-dialog-box{width:364px}.ti-dialog-buffet .ti-buffet-scroll[data-v-f66f5ee7]{max-height:249px}.ti-dialog-buffet .ti-buffet-list[data-v-f66f5ee7]{display:grid;gap:5px;cursor:pointer}.ti-dialog-buffet .ti-buffet-list .ti-buffet-item[data-v-f66f5ee7]{display:grid;grid-template-columns:1fr auto;justify-content:space-between;gap:16px;padding:10px 21px;border-radius:5px;border:1px solid rgba(36,22,11,.1490196078)}.ti-dialog-buffet .ti-buffet-list .ti-buffet-item .ti-buffet-name[data-v-f66f5ee7]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:12px;font-weight:400}.ti-dialog-buffet .ti-buffet-list .ti-buffet-item .ti-buffet-price[data-v-f66f5ee7]{font-size:12px;font-weight:600}.ti-dialog-buffet .ti-buffet-list .ti-buffet-item .ti-buffet-subPrice[data-v-f66f5ee7]{margin-left:5px;color:#999;font-size:10px;font-weight:400;line-height:1.5}.ti-dialog-buffet .ti-buffet-list .ti-buffet-item.active[data-v-f66f5ee7]{background-color:#fbdb7d;border-color:transparent}.ti-dialog-buffet .ti-buffet-list .ti-buffet-item.disabled[data-v-f66f5ee7]{background-color:#f3f5f6;border-color:transparent}.ti-dialog-buffet .ti-buffet-list .ti-buffet-item.disabled .ti-buffet-price[data-v-f66f5ee7]{color:#999}.ti-lock-view[data-v-ab340b23]{position:absolute;top:0;left:0;right:0;bottom:0;background:rgba(16,10,5,.7);display:flex;justify-content:center;align-items:center;z-index:124}.ti-lock-view .ti-lock-center[data-v-ab340b23]{display:flex;align-items:center;flex-direction:column}.ti-lock-view .ti-lock-center .ti-lock-message[data-v-ab340b23]{color:#fff;font-size:10px;font-weight:400}.ti-lock-view .ti-lock-center .ti-lock-unlock[data-v-ab340b23]{margin-top:16px;padding:10px 16px}#ti-table-cart-scroll[data-v-96d7b9a7]{height:100%}.ti-cart-box[data-v-96d7b9a7]{width:458px;display:flex;flex-direction:column}.ti-cart-box .ti-cart-list[data-v-96d7b9a7]{background-color:#fff;border-radius:8px;padding-bottom:16px;flex:1 1 0%;display:flex;flex-direction:column;overflow:hidden;position:relative}.ti-cart-box .ti-cart-list .ti-cart-head[data-v-96d7b9a7]{margin-top:16px;padding-left:16px;padding-right:16px}.ti-cart-box .ti-cart-list .ti-cart-shop-head[data-v-96d7b9a7]{display:grid;grid-template-columns:auto 108px 91px;align-items:center;gap:10px;color:#999;font-size:10px;font-weight:400;line-height:16px;border-bottom:1px solid #e8eaeb;padding-bottom:9px}.ti-cart-box .ti-cart-list .ti-cart-shop-head .ti-shop-head-money[data-v-96d7b9a7]{text-align:center}.ti-cart-box .ti-cart-list .ti-cart-shop-head .ti-shop-head-num[data-v-96d7b9a7]{display:flex;justify-content:space-between}.ti-cart-box .ti-cart-list .ti-shop-list[data-v-96d7b9a7]{flex:1 1 0%;overflow:auto}.ti-cart-box .ti-cart-list .ti-shop-list .ti-shop-item[data-v-96d7b9a7]{cursor:pointer;padding-left:16px;padding-right:16px}.ti-cart-box .ti-cart-list .ti-shop-list .ti-shop-item .ti-shop-item-box[data-v-96d7b9a7]{border-bottom:1px solid #e8eaeb;padding-top:9px;padding-bottom:9px}.ti-cart-box .ti-cart-list .ti-shop-list .ti-shop-item.active[data-v-96d7b9a7]{background-color:#e8eaeb}.ti-cart-box .ti-cart-list .ti-shop-list .ti-shop-item:last-child .ti-shop-item-box[data-v-96d7b9a7]{border-bottom:none}.ti-cart-box .ti-cart-list .ti-shop-list .ti-shop-item .ti-shop-body[data-v-96d7b9a7]{display:grid;grid-template-columns:auto 99px 91px;align-items:center;gap:10px}.ti-cart-box .ti-cart-list .ti-shop-list .ti-shop-item .ti-shop-body .ti-shop-body-top[data-v-96d7b9a7]{width:100%;overflow:hidden}.ti-cart-box .ti-cart-list .ti-shop-list .ti-shop-item .ti-shop-body .ti-shop-body-top .ti-shop-title[data-v-96d7b9a7]{color:#000;font-size:12px;font-weight:700;line-height:17px}.ti-cart-box .ti-cart-list .ti-shop-list .ti-shop-item .ti-shop-body .ti-shop-body-top .ti-shop-spec[data-v-96d7b9a7]{color:rgba(36,22,11,.65);font-size:8px;font-weight:400;line-height:16px}.ti-cart-box .ti-cart-list .ti-shop-list .ti-shop-item .ti-shop-body .ti-shop-body-money[data-v-96d7b9a7]{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}.ti-cart-box .ti-cart-list .ti-shop-list .ti-shop-item .ti-shop-body .ti-shop-body-money .ti-shop-price[data-v-96d7b9a7]{font-size:12px;font-weight:700;line-height:17px;text-align:right;display:block}.ti-cart-box .ti-cart-list .ti-shop-list .ti-shop-item .ti-shop-body .ti-shop-body-money .ti-shop-subPrice[data-v-96d7b9a7]{font-size:10px;font-weight:400;line-height:16px;text-align:right;color:#999;display:block}.ti-cart-box .ti-cart-list .ti-shop-list .ti-shop-item .ti-shop-remark[data-v-96d7b9a7]{padding:5px 9px;border-radius:2px;background:#f3f5f6;font-size:10px;font-weight:400;line-height:16px;color:#999;margin-top:5px}.ti-cart-box .ti-cart-list .ti-shop-list .ti-shop-item .ti-shop-customer[data-v-96d7b9a7]{color:rgba(36,22,11,.65);font-size:10px}.ti-cart-box .ti-cart-statistics[data-v-96d7b9a7]{padding-top:16px}.ti-cart-box .ti-cart-statistics .ti-cart-total[data-v-96d7b9a7]{display:flex;align-items:center;justify-content:flex-end;border-bottom:1px dotted rgba(36,22,11,.149);padding-bottom:10px}.ti-cart-box .ti-cart-statistics .ti-cart-total .ti-total-text[data-v-96d7b9a7]{font-size:12px;font-weight:400;line-height:17px}.ti-cart-box .ti-cart-statistics .ti-cart-total .ti-total-price[data-v-96d7b9a7]{font-size:13px;font-weight:700;line-height:20px;padding-left:16px;padding-right:5px}.ti-cart-box .ti-cart-statistics .ti-cart-total .ti-total-subPrice[data-v-96d7b9a7]{font-size:12px;font-weight:400;line-height:17px;color:#999}.ti-cart-box .ti-cart-statistics .ti-cart-discount[data-v-96d7b9a7]{padding-top:10px;padding-bottom:16px}.ti-cart-box .ti-cart-statistics .ti-cart-discount .ti-discount-item[data-v-96d7b9a7]{display:flex;align-items:center;justify-content:space-between;padding-bottom:4px}.ti-cart-box .ti-cart-statistics .ti-cart-discount .ti-discount-item[data-v-96d7b9a7]:last-child{padding-bottom:0}.ti-cart-box .ti-cart-statistics .ti-cart-discount .ti-discount-item .ti-discount-text[data-v-96d7b9a7]{font-size:10px;font-weight:400;line-height:16px}.ti-cart-box .ti-cart-statistics .ti-cart-discount .ti-discount-item .ti-discount-price[data-v-96d7b9a7]{font-size:12px;font-weight:700;line-height:17px;padding-left:16px;padding-right:9px}.ti-cart-box .ti-cart-statistics .ti-cart-discount .ti-discount-item .ti-discount-subPrice[data-v-96d7b9a7]{font-size:10px;font-weight:400;line-height:16px;color:#999}.ti-cart-box .ti-cart-statistics .ti-cart-settlement[data-v-96d7b9a7]{display:flex;align-items:center;justify-content:space-between;border-radius:8px;background-color:#100a05;color:#fff;overflow:hidden}.ti-cart-box .ti-cart-statistics .ti-cart-settlement .ti-settlement-total[data-v-96d7b9a7]{display:flex;align-items:center;margin-left:16px}.ti-cart-box .ti-cart-statistics .ti-cart-settlement .ti-settlement-total .ti-settlement-text[data-v-96d7b9a7]{font-size:10px;font-weight:700;line-height:3}.ti-cart-box .ti-cart-statistics .ti-cart-settlement .ti-settlement-total .ti-settlement-price[data-v-96d7b9a7]{font-size:16px;font-weight:700;line-height:3;padding-left:2px;padding-right:5px}.ti-cart-box .ti-cart-statistics .ti-cart-settlement .ti-settlement-total .ti-settlement-subPrice[data-v-96d7b9a7]{font-size:16px;font-weight:700;line-height:3;color:#999}.ti-cart-box .ti-cart-statistics .ti-cart-settlement .ti-settlement-btn[data-v-96d7b9a7]{height:100%;line-height:3;margin:0;padding:0 42px;background-color:#ffbe00;border-radius:0;color:#100a05;font-size:16px;font-weight:700;position:relative}.ti-cart-box .ti-cart-statistics .ti-cart-settlement .ti-settlement-btn[disabled][data-v-96d7b9a7]{color:rgba(16,10,5,.25);background-color:#fbdb7d}.ti-cart-box .ti-cart-statistics .ti-cart-settlement .ti-settlement-btn[data-v-96d7b9a7]:after{border:none}.ti-cart-box .ti-cart-statistics .ti-cart-settlement .ti-settlement-btn.button-hover[data-v-96d7b9a7]{background-color:#fbdb7d}.ti-cart-box .ti-cart-statistics .ti-cart-settlement .ti-settlement-btn .ti-settlement-badge[data-v-96d7b9a7]{position:absolute;font-size:10px;font-weight:700;background-color:#e50028;color:#fff;line-height:16px;border-radius:8px;padding:0 3px;text-align:center;top:2px;min-width:16px}.ti-dish-menu[data-v-bc6a03c5]{padding-left:16px;padding-right:16px}.ti-menu-content[data-v-bc6a03c5]{display:inline-block;border-bottom:1px solid #f5f7fa;width:100%}.ti-menu-content .ti-menu-item[data-v-bc6a03c5]{display:inline-block;padding:9px 16px;cursor:pointer;border-bottom:2px solid white;margin-right:10px}.ti-menu-content .ti-menu-item .ti-menu-title[data-v-bc6a03c5]{font-size:12px;font-weight:700}.ti-menu-content .ti-menu-item.active[data-v-bc6a03c5]{color:#ffbe00;border-color:#ffbe00}.ti-menu-content .ti-menu-item[data-v-bc6a03c5]:last-child{margin-right:0}.ti-category-content[data-v-b5ee87b5]{padding-bottom:16px}.ti-category-content .ti-dish-secondary[data-v-b5ee87b5]{padding:9px 16px 0}.ti-category-content .ti-dish-secondary .ti-secondary-box[data-v-b5ee87b5]{display:flex;align-items:center}.ti-category-content .ti-dish-secondary .ti-secondary-item[data-v-b5ee87b5]{cursor:pointer;padding:9px 21px;border-radius:5px;border:1px solid rgba(36,22,11,.15);margin-right:10px;font-size:10px;font-weight:400}.ti-category-content .ti-dish-secondary .ti-secondary-item.active[data-v-b5ee87b5]{background-color:#fbdb7d;border-color:#fbdb7d}.ti-goods-detail[data-v-c068da8e] .ti-dialog-top{padding-bottom:14px}.ti-dialog-content .ti-detail-box[data-v-c068da8e]{display:flex;margin-bottom:10px}.ti-dialog-content .ti-detail-box .ti-detail-image[data-v-c068da8e]{width:107px;height:80px;border-radius:5px;overflow:hidden}.ti-dialog-content .ti-detail-box .ti-detail-image uni-image[data-v-c068da8e]{width:100%}.ti-dialog-content .ti-detail-box .ti-detail-con[data-v-c068da8e]{overflow:hidden;flex:1 1 0%;padding:8px 16px 8px 10px}.ti-dialog-content .ti-detail-box .ti-detail-con .ti-detail-title[data-v-c068da8e]{font-size:13px;font-weight:700;padding-bottom:9px}.ti-dialog-content .ti-detail-box .ti-detail-con .ti-price-box[data-v-c068da8e]{margin-bottom:2px}.ti-dialog-content .ti-detail-box .ti-detail-con .ti-price-box[data-v-c068da8e]:last-child{margin-bottom:0}.ti-dialog-content .ti-detail-box .ti-detail-con .ti-price-box .ti-detail-unit[data-v-c068da8e]{font-size:12px;font-weight:400}.ti-dialog-content .ti-detail-box .ti-detail-con .ti-price-box .ti-detail-price[data-v-c068da8e]{padding-left:5px;font-size:12px;font-weight:700;color:#e50028}.ti-dialog-content .ti-detail-box .ti-detail-con .ti-price-box .ti-detail-subPrice[data-v-c068da8e]{padding-left:5px;color:rgba(36,22,11,.65);font-size:12px;font-weight:700}.ti-dialog-content .ti-detail-specs[data-v-c068da8e]{max-height:207px;overflow:auto}.ti-dialog-content .ti-detail-specs .ti-specs-box .ti-specs-item[data-v-c068da8e]{cursor:pointer}.ti-dialog-content .ti-detail-specs .ti-specs-box .ti-specs-item .ti-specs-title[data-v-c068da8e]{font-size:12px;font-weight:700;padding-bottom:5px}.ti-dialog-content .ti-detail-specs .ti-specs-box .ti-specs-item .ti-specs-child[data-v-c068da8e]{display:flex;flex-wrap:wrap}.ti-dialog-content .ti-detail-specs .ti-specs-box .ti-specs-item .ti-specs-child .ti-child-item[data-v-c068da8e]{border-radius:8px;border:1px solid rgba(36,22,11,.15);padding:10px 21px;margin-right:10px;margin-bottom:10px}.ti-dialog-content .ti-detail-specs .ti-specs-box .ti-specs-item .ti-specs-child .ti-child-item[data-v-c068da8e]:last-child{margin-right:0}.ti-dialog-content .ti-detail-specs .ti-specs-box .ti-specs-item .ti-specs-child .ti-child-item.disabled[data-v-c068da8e]{border-color:#e8eaeb;background-color:#e8eaeb;color:#999}.ti-dialog-content .ti-detail-specs .ti-specs-box .ti-specs-item .ti-specs-child .ti-child-item.disabled .ti-child-subPrice[data-v-c068da8e]{color:#999}.ti-dialog-content .ti-detail-specs .ti-specs-box .ti-specs-item .ti-specs-child .ti-child-item.active[data-v-c068da8e]{border-color:#fbdb7d;background-color:#fbdb7d}.ti-dialog-content .ti-detail-specs .ti-specs-box .ti-specs-item .ti-specs-child .ti-child-item .ti-child-name[data-v-c068da8e]{font-size:12px;font-weight:400;display:inline-block}.ti-dialog-content .ti-detail-specs .ti-specs-box .ti-specs-item .ti-specs-child .ti-child-item .ti-child-price[data-v-c068da8e]{font-size:12px;font-weight:400;margin-left:6px;display:inline-block}.ti-dialog-content .ti-detail-specs .ti-specs-box .ti-specs-item .ti-specs-child .ti-child-item .ti-child-subPrice[data-v-c068da8e]{color:rgba(36,22,11,.65);font-size:12px;font-weight:400;margin-left:6px;display:inline-block}.ti-dish-box[data-v-292aa93c]{flex:1 1 0%;overflow:hidden;background-color:#fff;border-radius:8px;padding-top:10px;padding-bottom:10px;display:flex;flex-direction:column;position:relative}.ti-dish-box .ti-dish-list[data-v-292aa93c]{flex:1 1 0%;overflow:auto}.ti-dish-box .ti-dish-list .ti-dish-goods[data-v-292aa93c]{padding-left:16px;padding-right:16px;display:grid;grid-template-columns:repeat(auto-fill,147px);justify-content:space-between;gap:10px}.ti-dish-box .ti-dish-list .ti-dish-goods .ti-goods-item[data-v-292aa93c]{cursor:pointer;overflow:hidden;border-radius:8px;background:#f3f5f6;position:relative}.ti-dish-box .ti-dish-list .ti-dish-goods .ti-goods-item .ti-goods-box[data-v-292aa93c]{display:flex;flex-direction:column;height:100%}.ti-dish-box .ti-dish-list .ti-dish-goods .ti-goods-item .ti-goods-image[data-v-292aa93c]{height:110px;overflow:hidden;position:relative}.ti-dish-box .ti-dish-list .ti-dish-goods .ti-goods-item .ti-goods-image uni-image[data-v-292aa93c]{width:100%}.ti-dish-box .ti-dish-list .ti-dish-goods .ti-goods-item .ti-goods-quota[data-v-292aa93c]{position:absolute;padding:4px 10px;border-radius:8px 0;background:linear-gradient(98.43deg,#e50028 1.9%,#ff8e5e 85.55%);color:#fff;font-size:10px;font-weight:700;line-height:16px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;z-index:1}.ti-dish-box .ti-dish-list .ti-dish-goods .ti-goods-item .ti-goods-content[data-v-292aa93c]{flex:1 1 0%;display:flex;flex-direction:column;justify-content:space-between;padding:5px 10px 10px}.ti-dish-box .ti-dish-list .ti-dish-goods .ti-goods-item .ti-goods-content .ti-goods-title[data-v-292aa93c]{font-size:11px;font-weight:400}.ti-dish-box .ti-dish-list .ti-dish-goods .ti-goods-item .ti-goods-content .ti-price-box[data-v-292aa93c]{padding-top:5px;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}.ti-dish-box .ti-dish-list .ti-dish-goods .ti-goods-item .ti-goods-content .ti-price-box .ti-goods-price[data-v-292aa93c]{font-size:13px;font-weight:700;color:#e50028;display:inline-block}.ti-dish-box .ti-dish-list .ti-dish-goods .ti-goods-item .ti-goods-content .ti-price-box .ti-goods-subPrice[data-v-292aa93c]{margin-left:5px;font-size:10px;font-weight:400;color:#999;display:inline-block}.ti-dish-box .ti-dish-list .ti-dish-goods .ti-goods-item .ti-goods-sold-out[data-v-292aa93c]{display:block;position:absolute;left:50%;transform:translate(-50%);top:42px;font-size:10px;font-weight:400;color:#fff;background-color:rgba(16,10,5,.7);padding:9px 16px;border-radius:16px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;z-index:1}.ti-dish-box .ti-dish-list .ti-dish-goods .ti-goods-item .ti-goods-disabled[data-v-292aa93c]{opacity:.5}.ti-order-food[data-v-f1fb2d9e]{display:flex;height:100%}.ti-cancel-title[data-v-3f21f172]{margin-bottom:5px}.ti-cancel-list[data-v-3f21f172]{max-height:134px}.ti-cancel-list .ti-cancel-item[data-v-3f21f172]{padding:7px 10px;border-radius:5px;background-color:#f3f5f6;margin-bottom:5px;font-size:12px;font-weight:400;line-height:17px;text-align:left}.ti-cancel-list .ti-cancel-item[data-v-3f21f172]:last-child{margin-bottom:0}.ti-dining-box[data-v-07a81ce5]{display:flex;flex-direction:column;height:100%;border-radius:8px;background-color:#fff}.ti-dining-box .ti-dining-category[data-v-07a81ce5]{padding:16px}.ti-dining-box .ti-dining-category .ti-category-list[data-v-07a81ce5]{display:flex;align-items:center}.ti-dining-box .ti-dining-category .ti-category-list .ti-category-item[data-v-07a81ce5]{display:flex;align-items:center;padding-right:16px;margin-right:16px;border-right:1px solid #e8eaeb}.ti-dining-box .ti-dining-category .ti-category-list .ti-category-item[data-v-07a81ce5]:last-child{padding-right:0;margin-right:0;border-right:none}.ti-dining-box .ti-dining-category .ti-category-list .ti-category-item .ti-category-all[data-v-07a81ce5]{padding:8px 21px;border-radius:5px;border:1px solid rgba(36,22,11,.15);margin-right:10px;font-size:12px;font-weight:400;line-height:16px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;cursor:pointer}.ti-dining-box .ti-dining-category .ti-category-list .ti-category-item .ti-category-all.active[data-v-07a81ce5]{background-color:#fbdb7d;border-color:transparent}.ti-dining-box .ti-dining-category .ti-category-list .ti-category-item .ti-category-child[data-v-07a81ce5]{display:flex;align-items:center}.ti-dining-box .ti-dining-category .ti-category-list .ti-category-item .ti-category-child .ti-category-childItem[data-v-07a81ce5]{padding:8px 21px;font-size:12px;font-weight:400;line-height:16px;max-width:112px;min-height:34px;cursor:pointer;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;position:relative;border-left:1px solid rgba(36,22,11,.15);border-top:1px solid rgba(36,22,11,.15);border-bottom:1px solid rgba(36,22,11,.15)}.ti-dining-box .ti-dining-category .ti-category-list .ti-category-item .ti-category-child .ti-category-childItem[data-v-07a81ce5]:first-child{border-radius:5px 0 0 5px}.ti-dining-box .ti-dining-category .ti-category-list .ti-category-item .ti-category-child .ti-category-childItem[data-v-07a81ce5]:last-child{border-radius:0 5px 5px 0;border-right:1px solid rgba(36,22,11,.15)}.ti-dining-box .ti-dining-category .ti-category-list .ti-category-item .ti-category-child .ti-category-childItem.active[data-v-07a81ce5]{background-color:#fbdb7d;border-color:transparent}.ti-dining-box .ti-dining-category .ti-category-list .ti-category-item .ti-category-child .ti-category-childItem.onlyOne[data-v-07a81ce5]{border-radius:5px}.ti-dining-box .ti-dining-table[data-v-07a81ce5]{flex:1 1 0%;overflow:auto}.ti-dining-box .ti-dining-table .ti-dining-list[data-v-07a81ce5]{display:grid;grid-template-columns:repeat(auto-fill,minmax(183px,1fr));gap:10px;padding-left:16px;padding-right:16px;padding-bottom:16px}.ti-dining-box .ti-dining-table .ti-dining-list .ti-dining-item[data-v-07a81ce5]{border-radius:12px 12px 0 0;border-top:16px solid #ffbe00;background-color:#f3f5f6;padding:10px 16px 16px;position:relative;cursor:pointer}.ti-dining-box .ti-dining-table .ti-dining-list .ti-dining-item.green[data-v-07a81ce5]{border-top-color:#20a939}.ti-dining-box .ti-dining-table .ti-dining-list .ti-dining-item .ti-dining-number[data-v-07a81ce5]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:16px;font-weight:500;line-height:24px;border-bottom:1px dashed rgba(16,10,5,.1);padding-bottom:10px;margin-bottom:10px}.ti-dining-box .ti-dining-table .ti-dining-list .ti-dining-item .ti-dining-idle[data-v-07a81ce5]{overflow:hidden;text-overflow:ellipsis;font-size:12px;font-weight:400;line-height:17px;color:#999;min-height:87px}.ti-dining-box .ti-dining-table .ti-dining-list .ti-dining-item .ti-dining-info .ti-dining-info-item[data-v-07a81ce5]{display:flex;align-items:center;margin-bottom:5px}.ti-dining-box .ti-dining-table .ti-dining-list .ti-dining-item .ti-dining-info .ti-dining-info-item[data-v-07a81ce5]:last-child{margin-bottom:0}.ti-dining-box .ti-dining-table .ti-dining-list .ti-dining-item .ti-dining-info .ti-dining-info-item .ti-dining-info-icon[data-v-07a81ce5]{margin-right:5px}.ti-dining-box .ti-dining-table .ti-dining-list .ti-dining-item .ti-dining-info .ti-dining-info-item .ti-dining-info-text[data-v-07a81ce5]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:12px;font-weight:400;line-height:17px}.ti-dining-box .ti-dining-table .ti-dining-list .ti-dining-item .ti-dining-info .ti-dining-info-item .ti-dining-info-text .ti-dining-info-subPrice[data-v-07a81ce5]{color:#999;font-size:10px;font-weight:400;line-height:16px;display:block}.ti-dining-box .ti-dining-table .ti-dining-list .ti-dining-item .ti-dining-close[data-v-07a81ce5]{position:absolute;bottom:0;right:0;width:21px;height:21px;border-radius:5px 0 0;background-color:#e50028;display:flex;align-items:center;justify-content:center}.ti-dining-box .ti-dining-total[data-v-07a81ce5]{padding-left:16px;padding-right:16px}.ti-dining-box .ti-dining-total .ti-dining-total-box[data-v-07a81ce5]{border-top:1px solid #e8eaeb;padding-top:16px;padding-bottom:16px;display:flex}.ti-dining-box .ti-dining-total .ti-dining-total-box .ti-dining-total-item[data-v-07a81ce5]{font-size:12px;font-weight:400;line-height:17px;margin-right:21px;display:flex;align-items:center}.ti-dining-box .ti-dining-total .ti-dining-total-box .ti-dining-total-item[data-v-07a81ce5]:last-child{margin-right:0}.ti-dining-box .ti-dining-total .ti-dining-total-box .ti-dining-total-item .ti-dining-total-color[data-v-07a81ce5]{width:16px;height:16px;margin-right:6px}.ti-dining-box .ti-dining-total .ti-dining-total-box .ti-dining-total-item .ti-dining-total-color.green[data-v-07a81ce5]{background-color:#20a939}.ti-dining-box .ti-dining-total .ti-dining-total-box .ti-dining-total-item .ti-dining-total-color.orange[data-v-07a81ce5]{background-color:#ffbe00}.ti-desk[data-v-c6ab73f1]{height:100%}@media screen and (max-width: 500px){.hide-on-phone[data-v-6425133e]{display:none}}.uni-stat__select[data-v-6425133e]{display:flex;align-items:center;cursor:pointer;width:100%;flex:1;box-sizing:border-box}.uni-stat-box[data-v-6425133e],.uni-stat__actived[data-v-6425133e]{width:100%;flex:1}.uni-label-text[data-v-6425133e]{font-size:14px;font-weight:700;color:#6a6a6a;margin:auto 5px auto 0}.uni-select[data-v-6425133e]{font-size:14px;border:1px solid #e5e5e5;box-sizing:border-box;border-radius:4px;padding:0 5px 0 10px;position:relative;display:flex;-webkit-user-select:none;-moz-user-select:none;user-select:none;flex-direction:row;align-items:center;border-bottom:solid 1px #e5e5e5;width:100%;flex:1;height:35px}.uni-select--disabled[data-v-6425133e]{background-color:#f5f7fa;cursor:not-allowed}.uni-select__label[data-v-6425133e]{font-size:16px;height:35px;padding-right:10px;color:#909399}.uni-select__input-box[data-v-6425133e]{height:35px;position:relative;display:flex;flex:1;flex-direction:row;align-items:center}.uni-select__input[data-v-6425133e]{flex:1;font-size:14px;height:22px;line-height:22px}.uni-select__input-plac[data-v-6425133e]{font-size:14px;color:#909399}.uni-select__selector[data-v-6425133e]{box-sizing:border-box;position:absolute;top:calc(100% + 12px);left:0;width:100%;background-color:#fff;border:1px solid #EBEEF5;border-radius:6px;box-shadow:0 2px 12px rgba(0,0,0,.1);z-index:3;padding:4px 0}.uni-select__selector-scroll[data-v-6425133e]{max-height:200px;box-sizing:border-box}@media (min-width: 768px){.uni-select__selector-scroll[data-v-6425133e]{max-height:600px}}.uni-select__selector-empty[data-v-6425133e],.uni-select__selector-item[data-v-6425133e]{display:flex;cursor:pointer;line-height:35px;font-size:14px;text-align:center;padding:0 10px}.uni-select__selector-item[data-v-6425133e]:hover{background-color:#f9f9f9}.uni-select__selector-empty[data-v-6425133e]:last-child,.uni-select__selector-item[data-v-6425133e]:last-child{border-bottom:none}.uni-select__selector__disabled[data-v-6425133e]{opacity:.4;cursor:default}.uni-popper__arrow[data-v-6425133e],.uni-popper__arrow[data-v-6425133e]:after{position:absolute;display:block;width:0;height:0;border-color:transparent;border-style:solid;border-width:6px}.uni-popper__arrow[data-v-6425133e]{filter:drop-shadow(0 2px 12px rgba(0,0,0,.03));top:-6px;left:10%;margin-right:3px;border-top-width:0;border-bottom-color:#ebeef5}.uni-popper__arrow[data-v-6425133e]:after{content:" ";top:1px;margin-left:-6px;border-top-width:0;border-bottom-color:#fff}.uni-select__input-text[data-v-6425133e]{width:100%;color:#333;white-space:nowrap;text-overflow:ellipsis;-o-text-overflow:ellipsis;overflow:hidden}.uni-select__input-placeholder[data-v-6425133e]{color:#6a6a6a;font-size:12px}.uni-select--mask[data-v-6425133e]{position:fixed;top:0;bottom:0;right:0;left:0;z-index:2}.uni-pagination[data-v-7a02a0a9]{display:flex;position:relative;overflow:hidden;flex-direction:row;justify-content:center;align-items:center}.uni-pagination__total[data-v-7a02a0a9]{font-size:14px;color:#999;margin-right:15px}.uni-pagination__btn[data-v-7a02a0a9]{display:flex;cursor:pointer;padding:0 8px;line-height:30px;font-size:12px;position:relative;background-color:#f0f0f0;flex-direction:row;justify-content:center;align-items:center;text-align:center;border-radius:5px}.uni-pagination__child-btn[data-v-7a02a0a9]{display:flex;position:relative;flex-direction:row;justify-content:center;align-items:center;text-align:center;color:#666;font-size:12px}.uni-pagination__num[data-v-7a02a0a9]{display:flex;flex:1;flex-direction:row;justify-content:center;align-items:center;height:30px;line-height:30px;font-size:12px;color:#666;margin:0 5px}.uni-pagination__num-tag[data-v-7a02a0a9]{cursor:pointer;min-width:30px;margin:0 5px;height:30px;text-align:center;line-height:30px;color:#999;border-radius:4px}.uni-pagination__num-current[data-v-7a02a0a9]{display:flex;flex-direction:row}.uni-pagination__num-current-text[data-v-7a02a0a9]{font-size:15px}.current-index-text[data-v-7a02a0a9]{color:#ffbe00}.uni-pagination--enabled[data-v-7a02a0a9]{color:#333;opacity:1}.uni-pagination--disabled[data-v-7a02a0a9]{opacity:.5;cursor:default}.uni-pagination--hover[data-v-7a02a0a9]{color:rgba(0,0,0,.6);background-color:#eee}.tag--active[data-v-7a02a0a9]:hover{color:#ffbe00}.page--active[data-v-7a02a0a9]{color:#fff;background-color:#ffbe00}.page--active[data-v-7a02a0a9]:hover{color:#fff}.is-pc-hide[data-v-7a02a0a9]{display:block}.is-phone-hide[data-v-7a02a0a9]{display:none}@media screen and (min-width: 450px){.is-pc-hide[data-v-7a02a0a9]{display:none}.is-phone-hide[data-v-7a02a0a9]{display:block}.uni-pagination__num-flex-none[data-v-7a02a0a9]{flex:none}}.ti-order-menu[data-v-0c36077c]{overflow:auto hidden;white-space:nowrap;width:100%}.ti-order-menu .ti-menu-content[data-v-0c36077c]{display:inline-block;border-bottom:1px solid #f5f7fa;width:100%}.ti-order-menu .ti-menu-content .ti-menu-item[data-v-0c36077c]{display:inline-block;padding:9px 16px;cursor:pointer;border-bottom:2px solid white;margin-right:10px}.ti-order-menu .ti-menu-content .ti-menu-item .ti-menu-title[data-v-0c36077c]{font-size:12px;font-weight:700;line-height:26px}.ti-order-menu .ti-menu-content .ti-menu-item .ti-menu-bedge[data-v-0c36077c]{margin-left:6px;height:16px;width:16px;display:flex;justify-content:center;background-color:#ffbe00;font-family:Inter;font-size:10px;font-style:normal;line-height:20px;font-weight:700;border-radius:8px;color:#100a05}.ti-order-menu .ti-menu-content .ti-menu-item.active[data-v-0c36077c]{color:#ffbe00;border-color:#ffbe00}.ti-order-menu .ti-menu-content .ti-menu-item[data-v-0c36077c]:last-child{margin-right:0}.ti-preferential-box[data-v-b576680d]{display:grid;align-items:center;gap:10px;grid-template-columns:auto 1fr}.ti-preferential-box .ti-preferential-type[data-v-b576680d]{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}.ti-preferential-box .ti-preferential-type .ti-preferential-type-item[data-v-b576680d]{padding:10px 21px;border-radius:5px;border:1px solid rgba(36,22,11,.15);text-align:center}.ti-preferential-box .ti-preferential-type .ti-preferential-type-item.active[data-v-b576680d]{background-color:#fbdb7d;border-color:#fbdb7d}.ti-preferential-box .ti-preferential-label[data-v-b576680d]{font-size:12px;font-weight:400;line-height:17px}.ti-preferential-box .ti-preferential-price[data-v-b576680d]{color:#e50028;font-size:16px;font-weight:700}.ti-preferential-box .ti-preferential-subPrice[data-v-b576680d]{margin-left:5px;color:rgba(36,22,11,.65);font-size:16px;font-weight:700}.ti-preferential-box .ti-preferential-percentage[data-v-b576680d]{color:#999;font-size:12px;font-weight:700;line-height:17px;padding-right:10px}.ti-preferential-input-item[data-v-b576680d]{margin-top:10px}.ti-preferential-keyboard[data-v-b576680d]{width:100%;padding-top:16px;background-color:#f3f5f6;border-radius:0 0 10px 10px}.ti-order-detail-container[data-v-ee1c14bf]{width:643px;height:100%;border-top-left-radius:10px;border-bottom-left-radius:10px;background:white;padding:0 26px 26px;display:flex;flex-direction:column;overflow:auto}.ti-order-detail-container .ti-order-detail-title[data-v-ee1c14bf]{font-size:16px;font-weight:700}.ti-order-detail-container .ti-order-detail-header[data-v-ee1c14bf]{margin-top:16px;margin-bottom:16px;margin-left:-27px;display:flex;flex-direction:row;align-items:center}.ti-order-detail-container .ti-order-detail-header .ti-order-detail-header-tag[data-v-ee1c14bf]{background-color:#ffbe00;height:20px;width:4px;border-radius:2px}.ti-order-detail-container .ti-order-detail-header .ti-order-detail-header-title[data-v-ee1c14bf]{margin-left:25px;font-size:12px;font-weight:700}.ti-order-detail-container .ti-order-detail-other[data-v-ee1c14bf]{display:grid;gap:10px;grid-template-columns:repeat(3,minmax(0,1fr));padding:16px;background:#f3f5f6;border-radius:5px}.ti-order-detail-container .ti-order-detail-other .ti-order-detail-other-item[data-v-ee1c14bf]{display:flex;flex-direction:column}.ti-order-detail-container .ti-order-detail-other .ti-order-detail-other-item .ti-order-detail-other-item-title[data-v-ee1c14bf]{color:rgba(36,22,11,.65);text-align:left;font-size:12px;font-weight:400}.ti-order-detail-container .ti-order-detail-other .ti-order-detail-other-item .ti-order-detail-other-item-content[data-v-ee1c14bf]{color:#100a05;text-align:left;font-size:12px;font-weight:600}.ti-order-detail-container .ti-order-detail-other .ti-order-detail-other-item .ti-order-detail-other-price-list[data-v-ee1c14bf]{display:flex;flex-direction:row}.ti-order-detail-container .ti-order-detail-other .ti-order-detail-other-item .ti-order-detail-other-price-list .ti-order-detail-other-price-main[data-v-ee1c14bf]{color:#100a05;text-align:left;font-size:12px;font-weight:600}.ti-order-detail-container .ti-order-detail-other .ti-order-detail-other-item .ti-order-detail-other-price-list .ti-order-detail-other-price-sub[data-v-ee1c14bf]{margin-left:5px;color:#999;text-align:left;font-size:12px;font-weight:600}.ti-order-detail-container .scroll-content[data-v-ee1c14bf]{flex:1 1 0%;overflow:auto;display:flex;margin-bottom:10px}.ti-order-detail-container .ti-data-bottom[data-v-ee1c14bf]{flex:0 0 auto;overflow:auto;margin-top:auto}.ti-order-detail-container .ti-data-bottom .ti-data-bottom-grid[data-v-ee1c14bf]{display:grid;gap:10px;grid-template-columns:repeat(3,minmax(0,1fr))}.goods-list[data-v-ee1c14bf]{display:flex;flex-direction:row;align-items:center}.goods-list .goods-list-image[data-v-ee1c14bf]{width:42px;height:42px;border-radius:5px}.goods-list .goods-list-title[data-v-ee1c14bf]{margin-left:8px;display:flex;flex-direction:column;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:140px}.goods-list .goods-list-title .goods-list-main-title[data-v-ee1c14bf]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.goods-list .goods-list-title .goods-list-sub-title[data-v-ee1c14bf]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-size:13px;color:#999}.price-colum[data-v-ee1c14bf]{display:flex;flex-direction:row;justify-content:flex-end}.price-colum .price-table-main[data-v-ee1c14bf]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-align:right;color:#100a05}.price-colum .price-table-sub[data-v-ee1c14bf]{margin-right:5px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-align:right;color:#999}.table-body[data-v-ee1c14bf]{border-radius:8px;color:#100a05}.table-body[data-v-ee1c14bf] .uni-table-td{color:#100a05!important;line-height:1.3!important;font-size:12px!important}.table-header[data-v-ee1c14bf]{background-color:#f3f5f6;color:#100a05}.scroll-view[data-v-ee1c14bf]{flex:1 1 0%;overflow:auto}.scroll-view-bg[data-v-ee1c14bf]{overflow:auto}.ti-select-mask[data-v-873ce65d]{position:fixed;top:0;bottom:0;right:0;left:0;z-index:999}.ti-select[data-v-873ce65d]{box-sizing:border-box;position:relative;display:flex;-webkit-user-select:none;-moz-user-select:none;user-select:none;flex-direction:row;align-items:center;width:100%;flex:1}.ti-select .ti-select-input-box[data-v-873ce65d]{cursor:pointer;border-radius:5px;border:1px solid rgba(36,22,11,.15);background-color:#fff;width:100%;padding:5px 8px;display:flex;align-items:center;justify-content:space-between}.ti-select .ti-select-input-box .ti-select-input-text[data-v-873ce65d]{font-size:12px;font-weight:400;line-height:2}.ti-select .ti-select-input-box .ti-select-placeholder[data-v-873ce65d]{color:rgba(16,10,5,.3);font-size:12px;font-weight:400;line-height:2}.ti-select .ti-select-input-box .ti-icon-down[data-v-873ce65d]{transition:all .3s;transform:rotate(90deg)}.ti-select .ti-select-input-box .ti-icon-down.active[data-v-873ce65d]{transform:rotate(-90deg)}.ti-select-locate[data-v-873ce65d]{position:fixed;z-index:10000}.ti-select-locate .ti-select-selector[data-v-873ce65d]{max-height:260px;overflow:auto;box-sizing:border-box;position:relative;left:0;width:100%;background-color:#fff;z-index:9999;padding:2px 0;border-radius:5px;box-shadow:0 0 0 1px rgba(0,0,0,.05),0 4px 6px -2px rgba(0,0,0,.05),0 10px 15px -3px rgba(0,0,0,.1)}.ti-select-locate .ti-select-selector.bottom[data-v-873ce65d]{top:calc(100% + 8px)}.ti-select-locate .ti-select-selector.top[data-v-873ce65d]{bottom:calc(100% + 8px)}.ti-select-locate .ti-select-selector .ti-select-selector-item[data-v-873ce65d]{display:flex;align-items:center;justify-content:space-between;cursor:pointer;padding:9px 10px}.ti-select-locate .ti-select-selector .ti-select-selector-item .ti-select-selector-item-text[data-v-873ce65d]{font-size:12px;font-weight:400;line-height:2}.ti-select-locate .ti-select-selector .ti-select-selector-item[data-v-873ce65d]:hover{background-color:#f9f9f9}.ti-select-locate .ti-select-selector .ti-select-selector-item.active[data-v-873ce65d]{background-color:#fff6de}.ti-table-mask[data-v-fc5283ef]{position:absolute;top:0;bottom:0;left:0;right:0;background-color:rgba(255,255,255,.8);z-index:99;display:flex;margin:auto;transition:all .5s;justify-content:center;align-items:center}.ti-cancel-order-input-red[data-v-fc5283ef]{color:#e50028;font-size:10px;font-weight:400}.ti-cancel-order[data-v-fc5283ef]{margin-top:10px;border-radius:5px;background-color:#f3f5f6;padding:16px;display:grid;grid-template-columns:repeat(2,1fr);gap:16px;text-align:left}.ti-cancel-order .ti-cancel-order-item[data-v-fc5283ef]{overflow:hidden}.ti-cancel-order .ti-cancel-order-item .ti-cancel-order-label[data-v-fc5283ef]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:rgba(24,13,3,.65);font-size:12px;margin-bottom:2px}.ti-cancel-order .ti-cancel-order-item .ti-cancel-order-input[data-v-fc5283ef]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:12px;font-weight:600}.ti-re-order[data-v-fc5283ef] .ti-dialog-box{width:387px}.ti-cancel-title[data-v-fc5283ef]{margin-bottom:5px}.ti-cancel-list[data-v-fc5283ef]{padding-top:10px;max-height:134px;display:grid;grid-template-columns:repeat(2,1fr);gap:5px}.ti-cancel-list .ti-cancel-item[data-v-fc5283ef]{padding:7px 10px;border-radius:5px;background-color:#f3f5f6;margin-bottom:5px;font-size:12px;font-weight:400;line-height:17px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;text-align:left;height:100%;display:flex;align-items:center}.ti-cancel-list .ti-cancel-item[data-v-fc5283ef]:last-child{margin-bottom:0}.ti-cancel-list .ti-cancel-item.active[data-v-fc5283ef]{background-color:#fbdb7d}.ti-order-container[data-v-fc5283ef]{padding:10px 16px 16px;display:flex;flex-direction:column;align-self:stretch;border-radius:16px;background:white;width:100%;height:100%}.ti-order-container .ti-order-container-option[data-v-fc5283ef]{margin-top:10px;margin-bottom:10px;display:flex;flex-direction:row;align-items:center;width:100%}.ti-order-container .ti-order-container-option .date-picker[data-v-fc5283ef]{margin-left:16px;width:227px;height:35px;display:flex}.ti-order-container .ti-order-container-option .date-order-input-item[data-v-fc5283ef]{margin-left:16px;width:214px;font-size:10px;border-radius:5px;border:1px solid var(--S-, rgba(36, 22, 11, .15));background:var(--white, #fff);display:flex;padding:6px 10px;align-items:center}.ti-order-container .ti-order-container-option .date-order-input-item .date-order-input[data-v-fc5283ef]{font-size:13px;height:21px}.ti-order-container .ti-order-container-option .date-select-type[data-v-fc5283ef]{margin-left:16px;width:214px}.ti-order-container .ti-order-container-option .date-search-confirm[data-v-fc5283ef]{margin-left:16px}.ti-order-container .ti-order-container-option .date-search-confirm .date-search-confirm-button[data-v-fc5283ef]{padding:8px 21px;width:auto;font-weight:400}.edit-buttons[data-v-fc5283ef]{display:flex;flex-direction:row;align-items:center}.edit-buttons .function-buttons[data-v-fc5283ef]{width:auto;padding:9px;margin-left:0%;margin-right:0%;font-weight:400}.edit-buttons .function-buttons.margin[data-v-fc5283ef]{margin-left:16px}.edit-buttons .function-buttons.ti-primary[data-v-fc5283ef]{background-color:#fbdb7d;border-color:#fbdb7d}.table-body[data-v-fc5283ef]{border-radius:8px;color:#100a05}.table-body[data-v-fc5283ef] .uni-table-td{color:#100a05!important;line-height:1.5!important}.table-header[data-v-fc5283ef]{background-color:#f3f5f6;color:#100a05}.page-control[data-v-fc5283ef]{display:flex;justify-content:flex-end;margin-top:16px}.date-order-price-sub[data-v-fc5283ef]{font-family:Noto Sans;color:#999;font-size:13px}.omitText[data-v-25a40c96]{width:100%;display:flex;line-height:1.5}.omitText .text-front[data-v-25a40c96]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.omitText .text-after[data-v-25a40c96]{white-space:nowrap;text-overflow:initial}.ti-transfer[data-v-e9cb37b5]{display:flex;overflow:hidden}.ti-transfer .ti-transfer-unselect[data-v-e9cb37b5]{width:294px;height:321px;margin-left:16px;display:flex;flex-direction:column}.ti-transfer .ti-transfer-unselect .ti-transfer-title-view[data-v-e9cb37b5]{padding:12px;background:#f3f5f6;display:flex;align-items:center;border-radius:8px 8px 0 0;border:1px solid rgba(36,22,11,.15);border-bottom:none}.ti-transfer .ti-transfer-unselect .ti-transfer-title-view .ti-transfer-check[data-v-e9cb37b5]{width:16px;height:16px;border:1px solid rgba(36,22,11,.15)}.ti-transfer .ti-transfer-unselect .ti-transfer-title-view .ti-transfer-check.select[data-v-e9cb37b5]{border:none}.ti-transfer .ti-transfer-unselect .ti-transfer-title-view .ti-transfer-title[data-v-e9cb37b5]{margin-left:8px;font-size:12px;font-style:300;color:#100a05}.ti-transfer .ti-transfer-unselect .ti-transfer-list[data-v-e9cb37b5]{padding:8px 16px 40px;border:1px solid rgba(36,22,11,.15);flex:1;overflow:hidden}.ti-transfer .ti-transfer-unselect .ti-transfer-list .ti-transfer-search[data-v-e9cb37b5]{height:32px}.ti-transfer .ti-transfer-unselect .ti-transfer-list .ti-transfer-list-item[data-v-e9cb37b5]{display:flex;justify-content:space-between;align-items:center;height:33px}.ti-transfer .ti-transfer-unselect .ti-transfer-list .ti-transfer-list-item .ti-transfer-list-item-box[data-v-e9cb37b5]{display:flex}.ti-transfer .ti-transfer-unselect .ti-transfer-list .ti-transfer-list-item .ti-transfer-list-item-box .ti-transfer-check[data-v-e9cb37b5]{width:16px;height:16px;border:1px solid rgba(36,22,11,.15)}.ti-transfer .ti-transfer-unselect .ti-transfer-list .ti-transfer-list-item .ti-transfer-list-item-box .ti-transfer-check.select[data-v-e9cb37b5]{border:none}.ti-transfer .ti-transfer-unselect .ti-transfer-list .ti-transfer-list-item .ti-transfer-list-item-box .ti-transfer-list-item-title[data-v-e9cb37b5]{margin-left:8px;font-size:12px;font-style:300;color:#100a05;width:160px;overflow:hidden}.ti-transfer .ti-transfer-unselect .ti-transfer-list .ti-transfer-list-item .ti-transfer-list-item-end-title[data-v-e9cb37b5]{color:rgba(36,22,11,.65);font-size:12px;font-style:300;width:53px}.ti-transfer .ti-transfer-action-button[data-v-e9cb37b5]{margin-left:16px;display:flex;flex-direction:column;justify-content:center}.ti-transfer .ti-transfer-action-button .ti-transfer-round[data-v-e9cb37b5]{margin-top:16px;width:36px;height:36px;border-radius:50%;background-color:#ffbe00;display:flex;justify-content:center;align-items:center}.ti-transfer .ti-transfer-action-button .ti-transfer-round.disable[data-v-e9cb37b5]{background-color:#999;opacity:.3}.ti-transfer .ti-transfer-action-button .ti-transfer-round .ti-transfer-image[data-v-e9cb37b5]{width:21px;height:21px}.search-icon[data-v-e9cb37b5]{width:13px;height:13px;margin-left:8px}.ti-scroll[data-v-e9cb37b5]{padding-top:16px}.ti-empty-data[data-v-e9cb37b5]{padding-top:0;height:30%}.ti-setting-refresh[data-v-707fd673]{cursor:pointer;padding-left:10px;width:40px;height:40px;display:flex;align-items:center;justify-content:center}@keyframes rotate-707fd673{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.ti-setting-container[data-v-707fd673]{display:flex;flex-direction:column;flex:1;height:100%;background-color:#fff;border-radius:10px;padding-top:16px;overflow:auto}.ti-setting-container .ti-setting-header[data-v-707fd673]{display:flex;flex-direction:row;align-items:center}.ti-setting-container .ti-setting-header .ti-setting-header-tag[data-v-707fd673]{background-color:#ffbe00;height:20px;width:4px;border-radius:2px}.ti-setting-container .ti-setting-header .ti-setting-header-title[data-v-707fd673]{margin-left:16px;font-size:14px;font-weight:700}.ti-setting-container .ti-setting-content[data-v-707fd673]{display:flex;flex-direction:column;padding:16px}.ti-setting-container .ti-setting-content .ti-setting-item[data-v-707fd673]{display:flex;flex-direction:row;align-items:center;margin-top:16px;width:536px}.ti-setting-container .ti-setting-content .ti-setting-item .ti-setting-item-title[data-v-707fd673]{width:200px;font-size:13px;font-weight:400}.ti-setting-container .ti-setting-content .ti-setting-item .ti-setting-item-input[data-v-707fd673]{flex:1;margin-right:40px}.ti-setting-container .ti-setting-content .ti-setting-item .ti-setting-item-input[data-v-707fd673] uni-input{font-size:12px}.ti-setting-container .ti-setting-content .ti-setting-item .ti-setting-item-input.disable[data-v-707fd673]{background-color:#e8eaeb;color:#999}.ti-setting-container .ti-setting-content .ti-setting-item[data-v-707fd673] .u-switch{cursor:pointer}.ti-setting-container .ti-setting-content .ti-setting-transfer[data-v-707fd673]{border-top:1px solid #e8eaeb;margin-top:16px;padding-top:16px;display:flex;flex-direction:row}.ti-setting-container .ti-setting-content .ti-setting-transfer .ti-setting-transfer-title[data-v-707fd673]{width:201px;font-size:13px;font-weight:400;margin-right:-17px}.ti-setting-container .ti-setting-bottom[data-v-707fd673]{border-top:1px solid #e8eaeb;margin-top:16px;padding:16px 16px 0 0;display:flex;flex-direction:row}.ti-setting-container .ti-setting-bottom .ti-setting-bottom-temps[data-v-707fd673]{width:200px}.ti-setting-container .ti-setting-bottom .ti-setting-bottom-buttons[data-v-707fd673]{display:grid;gap:10px;grid-template-columns:repeat(2,minmax(0,1fr));width:230px}.ti-index[data-v-11bfbce4]{display:flex;height:100%}\n',document.head.appendChild(vn),{setters:[function(t){u=t.ab,l=t.ac,p=t.ad,h=t.ae,v=t.af,b=t.ag,_=t.ah,D=t.ai,k=t.aj,C=t.ak,A=t.al,E=t.am,F=t.an,I=t.ao,S=t.ap,T=t.aq,P=t.ar,B=t.as,N=t.at,z=t.au,O=t.av,M=t.aw,L=t.ax,j=t.ay,U=t.az,R=t.aA,q=t.aB,V=t.aC,$=t.r,K=t.aD,H=t._,W=t.aE,J=t.aF,Z=t.a0,Y=t.aG,G=t.a1,Q=t.b,X=t.c,tt=t.w,et=t.d,nt=t.aH,it=t.aI,rt=t.i,at=t.z,ot=t.a5,ut=t.a6,st=t.a7,lt=t.N,ct=t.O,dt=t.K,ft=t.$,pt=t.a4,ht=t.aJ,vt=t.aK,mt=t.aL,gt=t.aM,bt=t.aN,yt=t.y,_t=t.aO,xt=t.aP,wt=t.aQ,Dt=t.aR,kt=t.aS,Ct=t.aT,At=t.aU,Et=t.e,Ft=t.aV,It=t.aW,St=t.aX,Tt=t.aY,Pt=t.aZ,Bt=t.a_,Nt=t.a$,zt=t.b0,Ot=t.b1,Mt=t.b2,Lt=t.b3,jt=t.b4,Ut=t.b5,Rt=t.b6,qt=t.b7,Vt=t.b8,$t=t.b9,Kt=t.ba,Ht=t.q,Wt=t.s,Jt=t.u,Zt=t.bb,Yt=t.bc,Gt=t.bd,Qt=t.be,Xt=t.bf,te=t.a8,ee=t.bg,ne=t.bh,ie=t.n,re=t.bi,ae=t.bj,oe=t.bk,ue=t.A,se=t.bl,le=t.t,ce=t.bm,de=t.bn,fe=t.a3,pe=t.bo,he=t.bp,ve=t.bq,me=t.br,ge=t.bs,be=t.bt,ye=t.bu,_e=t.bv,xe=t.bw,we=t.o,De=t.bx,ke=t.by,Ce=t.bz,Ae=t.bA,Ee=t.bB,Fe=t.bC,Ie=t.h,Se=t.bD,Te=t.bE,Pe=t.j,Be=t.bF,Ne=t.bG,ze=t.bH,Oe=t.bI,Me=t.bJ,Le=t.bK,je=t.bL,Ue=t.bM,Re=t.bN,qe=t.bO,Ve=t.bP,$e=t.bQ,Ke=t.bR,He=t.k,We=t.H,Je=t.bS,Ze=t.bT,Ye=t.bU,Ge=t.bV,Qe=t.bW,Xe=t.bX,tn=t.bY,en=t.bZ,nn=t.b_,rn=t.b$,an=t.c0,on=t.c1,un=t.a2,sn=t.x,ln=t.c2,cn=t.c3,dn=t.c4,fn=t.c5,pn=t.a,hn=t.l}],execute:function(){var vn="[object Symbol]";function mn(t){return"symbol"==w(t)||u(t)&&l(t)==vn}function gn(t,e){for(var n=-1,i=null==t?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}var bn=1/0,yn=p?p.prototype:void 0,_n=yn?yn.toString:void 0;function xn(t){if("string"==typeof t)return t;if(h(t))return gn(t,xn)+"";if(mn(t))return _n?_n.call(t):"";var e=t+"";return"0"==e&&1/t==-bn?"-0":e}var wn=/\s/;var Dn=/^\s+/;function kn(t){return t?t.slice(0,function(t){for(var e=t.length;e--&&wn.test(t.charAt(e)););return e}(t)+1).replace(Dn,""):t}var Cn=NaN,An=/^[-+]0x[0-9a-f]+$/i,En=/^0b[01]+$/i,Fn=/^0o[0-7]+$/i,In=parseInt;function Sn(t){if("number"==typeof t)return t;if(mn(t))return Cn;if(v(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=v(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=kn(t);var n=En.test(t);return n||Fn.test(t)?In(t.slice(2),n?2:8):An.test(t)?Cn:+t}function Tn(t){return t}var Pn=Date.now;var Bn,Nn,zn,On=b?function(t,e){return b(t,"toString",{configurable:!0,enumerable:!1,value:(n=e,function(){return n}),writable:!0});var n}:Tn,Mn=(Bn=On,Nn=0,zn=0,function(){var t=Pn(),e=16-(t-zn);if(zn=t,e>0){if(++Nn>=800)return arguments[0]}else Nn=0;return Bn.apply(void 0,arguments)}),Ln=Mn,jn=Math.max;function Un(t,e,n){if(!v(n))return!1;var i=w(e);return!!("number"==i?_(n)&&D(e,n.length):"string"==i&&e in n)&&k(n[e],t)}var Rn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,qn=/^\w*$/;function Vn(t,e){if(h(t))return!1;var n=w(t);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!mn(t))||(qn.test(t)||!Rn.test(t)||null!=e&&t in Object(e))}var $n="Expected a function";function Kn(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError($n);var n=function n(){var i=arguments,r=e?e.apply(this,i):i[0],a=n.cache;if(a.has(r))return a.get(r);var o=t.apply(this,i);return n.cache=a.set(r,o)||a,o};return n.cache=new(Kn.Cache||C),n}Kn.Cache=C;var Hn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Wn=/\\(\\)?/g,Jn=function(t){var e=Kn(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Hn,(function(t,n,i,r){e.push(i?r.replace(Wn,"$1"):n||t)})),e})),Zn=Jn;function Yn(t,e){return h(t)?t:Vn(t,e)?[t]:Zn(function(t){return null==t?"":xn(t)}(t))}var Gn=1/0;function Qn(t){if("string"==typeof t||mn(t))return t;var e=t+"";return"0"==e&&1/t==-Gn?"-0":e}function Xn(t,e){for(var n=0,i=(e=Yn(e,t)).length;null!=t&&n<i;)t=t[Qn(e[n++])];return n&&n==i?t:void 0}var ti=p?p.isConcatSpreadable:void 0;function ei(t){return h(t)||A(t)||!!(ti&&t&&t[ti])}function ni(t,e,n,i,r){var a=-1,o=t.length;for(n||(n=ei),r||(r=[]);++a<o;){var u=t[a];e>0&&n(u)?e>1?ni(u,e-1,n,i,r):E(r,u):i||(r[r.length]=u)}return r}function ii(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}var ri=1,ai=2;function oi(t,e,n,i,r,a){var o=n&ri,u=t.length,s=e.length;if(u!=s&&!(o&&s>u))return!1;var l=a.get(t),c=a.get(e);if(l&&c)return l==e&&c==t;var d=-1,f=!0,p=n&ai?new F:void 0;for(a.set(t,e),a.set(e,t);++d<u;){var h=t[d],v=e[d];if(i)var m=o?i(v,h,d,e,t,a):i(h,v,d,t,e,a);if(void 0!==m){if(m)continue;f=!1;break}if(p){if(!ii(e,(function(t,e){if(!I(p,e)&&(h===t||r(h,t,n,i,a)))return p.push(e)}))){f=!1;break}}else if(h!==v&&!r(h,v,n,i,a)){f=!1;break}}return a.delete(t),a.delete(e),f}function ui(t){var e=-1,n=Array(t.size);return t.forEach((function(t,i){n[++e]=[i,t]})),n}var si=1,li=2,ci="[object Boolean]",di="[object Date]",fi="[object Error]",pi="[object Map]",hi="[object Number]",vi="[object RegExp]",mi="[object Set]",gi="[object String]",bi="[object Symbol]",yi="[object ArrayBuffer]",_i="[object DataView]",xi=p?p.prototype:void 0,wi=xi?xi.valueOf:void 0;var Di=1,ki=Object.prototype.hasOwnProperty;var Ci=1,Ai="[object Arguments]",Ei="[object Array]",Fi="[object Object]",Ii=Object.prototype.hasOwnProperty;function Si(t,e,n,i,r,a){var o=h(t),u=h(e),s=o?Ei:B(t),l=u?Ei:B(e),c=(s=s==Ai?Fi:s)==Fi,d=(l=l==Ai?Fi:l)==Fi,f=s==l;if(f&&N(t)){if(!N(e))return!1;o=!0,c=!1}if(f&&!c)return a||(a=new z),o||O(t)?oi(t,e,n,i,r,a):function(t,e,n,i,r,a,o){switch(n){case _i:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case yi:return!(t.byteLength!=e.byteLength||!a(new S(t),new S(e)));case ci:case di:case hi:return k(+t,+e);case fi:return t.name==e.name&&t.message==e.message;case vi:case gi:return t==e+"";case pi:var u=ui;case mi:var s=i&si;if(u||(u=T),t.size!=e.size&&!s)return!1;var l=o.get(t);if(l)return l==e;i|=li,o.set(t,e);var c=oi(u(t),u(e),i,r,a,o);return o.delete(t),c;case bi:if(wi)return wi.call(t)==wi.call(e)}return!1}(t,e,s,n,i,r,a);if(!(n&Ci)){var p=c&&Ii.call(t,"__wrapped__"),v=d&&Ii.call(e,"__wrapped__");if(p||v){var m=p?t.value():t,g=v?e.value():e;return a||(a=new z),r(m,g,n,i,a)}}return!!f&&(a||(a=new z),function(t,e,n,i,r,a){var o=n&Di,u=P(t),s=u.length;if(s!=P(e).length&&!o)return!1;for(var l=s;l--;){var c=u[l];if(!(o?c in e:ki.call(e,c)))return!1}var d=a.get(t),f=a.get(e);if(d&&f)return d==e&&f==t;var p=!0;a.set(t,e),a.set(e,t);for(var h=o;++l<s;){var v=t[c=u[l]],m=e[c];if(i)var g=o?i(m,v,c,e,t,a):i(v,m,c,t,e,a);if(!(void 0===g?v===m||r(v,m,n,i,a):g)){p=!1;break}h||(h="constructor"==c)}if(p&&!h){var b=t.constructor,y=e.constructor;b==y||!("constructor"in t)||!("constructor"in e)||"function"==typeof b&&b instanceof b&&"function"==typeof y&&y instanceof y||(p=!1)}return a.delete(t),a.delete(e),p}(t,e,n,i,r,a))}function Ti(t,e,n,i,r){return t===e||(null==t||null==e||!u(t)&&!u(e)?t!=t&&e!=e:Si(t,e,n,i,Ti,r))}var Pi=1,Bi=2;function Ni(t){return t==t&&!v(t)}function zi(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}}function Oi(t){var e=function(t){for(var e=M(t),n=e.length;n--;){var i=e[n],r=t[i];e[n]=[i,r,Ni(r)]}return e}(t);return 1==e.length&&e[0][2]?zi(e[0][0],e[0][1]):function(n){return n===t||function(t,e,n,i){var r=n.length,a=r,o=!i;if(null==t)return!a;for(t=Object(t);r--;){var u=n[r];if(o&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++r<a;){var s=(u=n[r])[0],l=t[s],c=u[1];if(o&&u[2]){if(void 0===l&&!(s in t))return!1}else{var d=new z;if(i)var f=i(l,c,s,t,e,d);if(!(void 0===f?Ti(c,l,Pi|Bi,i,d):f))return!1}}return!0}(n,t,e)}}function Mi(t,e){return null!=t&&e in Object(t)}function Li(t,e){return null!=t&&function(t,e,n){for(var i=-1,r=(e=Yn(e,t)).length,a=!1;++i<r;){var o=Qn(e[i]);if(!(a=null!=t&&n(t,o)))break;t=t[o]}return a||++i!=r?a:!!(r=null==t?0:t.length)&&L(r)&&D(o,r)&&(h(t)||A(t))}(t,e,Mi)}var ji=1,Ui=2;function Ri(t,e){return Vn(t)&&Ni(e)?zi(Qn(t),e):function(n){var i=function(t,e,n){var i=null==t?void 0:Xn(t,e);return void 0===i?n:i}(n,t);return void 0===i&&i===e?Li(n,t):Ti(e,i,ji|Ui)}}function qi(t){return Vn(t)?(e=Qn(t),function(t){return null==t?void 0:t[e]}):function(t){return function(e){return Xn(e,t)}}(t);var e}function Vi(t){return"function"==typeof t?t:null==t?Tn:"object"==w(t)?h(t)?Ri(t[0],t[1]):Oi(t):qi(t)}var $i,Ki=function(t,e,n){for(var i=-1,r=Object(t),a=n(t),o=a.length;o--;){var u=a[$i?o:++i];if(!1===e(r[u],u,r))break}return t},Hi=Ki;var Wi=function(t,e){return function(n,i){if(null==n)return n;if(!_(n))return t(n,i);for(var r=n.length,a=e?r:-1,o=Object(n);(e?a--:++a<r)&&!1!==i(o[a],a,o););return n}}((function(t,e){return t&&Hi(t,e,M)})),Ji=Wi,Zi=function(){return j.Date.now()},Yi=Math.max,Gi=Math.min;function Qi(t,e,n){var i,r,a,o,u,s,l=0,c=!1,d=!1,f=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function p(e){var n=i,a=r;return i=r=void 0,l=e,o=t.apply(a,n)}function h(t){var n=t-s;return void 0===s||n>=e||n<0||d&&t-l>=a}function m(){var t=Zi();if(h(t))return g(t);u=setTimeout(m,function(t){var n=e-(t-s);return d?Gi(n,a-(t-l)):n}(t))}function g(t){return u=void 0,f&&i?p(t):(i=r=void 0,o)}function b(){var t=Zi(),n=h(t);if(i=arguments,r=this,s=t,n){if(void 0===u)return function(t){return l=t,u=setTimeout(m,e),c?p(t):o}(s);if(d)return clearTimeout(u),u=setTimeout(m,e),p(s)}return void 0===u&&(u=setTimeout(m,e)),o}return e=Sn(e)||0,v(n)&&(c=!!n.leading,a=(d="maxWait"in n)?Yi(Sn(n.maxWait)||0,e):a,f="trailing"in n?!!n.trailing:f),b.cancel=function(){void 0!==u&&clearTimeout(u),l=0,i=s=r=u=void 0},b.flush=function(){return void 0===u?o:g(Zi())},b}function Xi(t,e){if(t!==e){var n=void 0!==t,i=null===t,r=t==t,a=mn(t),o=void 0!==e,u=null===e,s=e==e,l=mn(e);if(!u&&!l&&!a&&t>e||a&&o&&s&&!u&&!l||i&&o&&s||!n&&s||!r)return 1;if(!i&&!a&&!l&&t<e||l&&n&&r&&!i&&!a||u&&n&&r||!o&&r||!s)return-1}return 0}function tr(t,e,n){e=e.length?gn(e,(function(t){return h(t)?function(e){return Xn(e,1===t.length?t[0]:t)}:t})):[Tn];var i=-1;e=gn(e,U(Vi));var r=function(t,e){var n=-1,i=_(t)?Array(t.length):[];return Ji(t,(function(t,r,a){i[++n]=e(t,r,a)})),i}(t,(function(t,n,r){return{criteria:gn(e,(function(e){return e(t)})),index:++i,value:t}}));return function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(r,(function(t,e){return function(t,e,n){for(var i=-1,r=t.criteria,a=e.criteria,o=r.length,u=n.length;++i<o;){var s=Xi(r[i],a[i]);if(s)return i>=u?s:s*("desc"==n[i]?-1:1)}return t.index-e.index}(t,e,n)}))}var er=function(t,e){return Ln(function(t,e,n){return e=jn(void 0===e?t.length-1:e,0),function(){for(var i=arguments,r=-1,a=jn(i.length-e,0),o=Array(a);++r<a;)o[r]=i[e+r];r=-1;for(var u=Array(e+1);++r<e;)u[r]=i[r];return u[e]=n(o),function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}(t,this,u)}}(t,e,Tn),t+"")}((function(t,e){if(null==t)return[];var n=e.length;return n>1&&Un(t,e[0],e[1])?e=[]:n>2&&Un(e[0],e[1],e[2])&&(e=[e[0]]),tr(t,ni(e,1),[])})),nr=er;function ir(t){return R("order.cart/add",t,{isLoading:!1})}function rr(t){return R("order.cart/list",t,{isLoading:!1})}function ar(t){return R("order.cart/sub",t,{isLoading:!1})}function or(t){return R("order.cart/changePrice",t,{isLoading:!1})}function ur(t){return R("order.cart/remark",t,{isLoading:!1})}function sr(t){return R("order.cart/changeMoney",t,{isLoading:!1})}function lr(t){return R("order.order/index",t,{isLoading:!1})}function cr(t){return R("order.order/detail",t)}function dr(t){return R("order.order/refund",t)}function fr(t){return R("order.order/cancel",t)}function pr(t){return R("order.order/remove",t)}function hr(t){return R("order.order/print",t)}function vr(t){return R("order.order/unlock",t)}function mr(t){return R("order.order/reverseSettle",t)}function gr(t){return R("order.order/unSendProductList",t,{isMessage:!1})}var br=V("isLockStore",(function(){return{cashierIsLock:$(0),tableIsLock:$(0),isPaying:$(0)}})),yr={props:{loading:{type:Boolean,default:K.switch.loading},disabled:{type:Boolean,default:K.switch.disabled},size:{type:[String,Number],default:K.switch.size},activeColor:{type:String,default:K.switch.activeColor},inactiveColor:{type:String,default:K.switch.inactiveColor},modelValue:{type:[Boolean,String,Number],default:K.switch.value},activeValue:{type:[String,Number,Boolean],default:K.switch.activeValue},inactiveValue:{type:[String,Number,Boolean],default:K.switch.inactiveValue},asyncChange:{type:Boolean,default:K.switch.asyncChange},space:{type:[String,Number],default:K.switch.space}}},_r={name:"u-switch",mixins:[W,J,yr],watch:{modelValue:{immediate:!0,handler:function(t){t!==this.inactiveValue&&t!==this.activeValue&&uni.$u.error("v-model绑定的值必须为inactiveValue、activeValue二者之一")}}},data:function(){return{bgColor:"#ffffff"}},computed:{isActive:function(){return this.modelValue===this.activeValue},switchStyle:function(){var t={};return t.width=uni.$u.addUnit(2*this.size+2),t.height=uni.$u.addUnit(Number(this.size)+2),this.customInactiveColor&&(t.borderColor="rgba(0, 0, 0, 0)"),t.backgroundColor=this.isActive?this.activeColor:this.inactiveColor,t},nodeStyle:function(){var t={};t.width=uni.$u.addUnit(this.size-this.space),t.height=uni.$u.addUnit(this.size-this.space);var e=this.isActive?uni.$u.addUnit(this.space):uni.$u.addUnit(this.size);return t.transform="translateX(-".concat(e,")"),t},bgStyle:function(){var t={};return t.width=uni.$u.addUnit(2*Number(this.size)-this.size/2),t.height=uni.$u.addUnit(this.size),t.backgroundColor=this.inactiveColor,t.transform="scale(".concat(this.isActive?0:1,")"),t},customInactiveColor:function(){return"#fff"!==this.inactiveColor&&"#ffffff"!==this.inactiveColor}},emits:["update:modelValue","change"],methods:{clickHandler:function(){var t=this;if(!this.disabled&&!this.loading){var e=this.isActive?this.inactiveValue:this.activeValue;this.asyncChange||this.$emit("update:modelValue",e),this.$nextTick((function(){t.$emit("change",e)}))}}}};var xr=H(_r,[["render",function(t,e,n,i,r,a){var o=rt,u=Z(G("u-loading-icon"),Y);return Q(),X(o,{class:it(["u-switch",[t.disabled&&"u-switch--disabled"]]),style:nt([a.switchStyle,t.$u.addStyle(t.customStyle)]),onClick:a.clickHandler},{default:tt((function(){return[et(o,{class:"u-switch__bg",style:nt([a.bgStyle])},null,8,["style"]),et(o,{class:it(["u-switch__node",[t.modelValue&&"u-switch__node--on"]]),style:nt([a.nodeStyle]),ref:"u-switch__node"},{default:tt((function(){return[et(u,{show:t.loading,mode:"circle",timingFunction:"linear",color:t.modelValue?t.activeColor:"#AAABAD",size:.6*t.size},null,8,["show","color","size"])]})),_:1},8,["class","style"])]})),_:1},8,["class","style","onClick"])}],["__scopeId","data-v-a17af18d"]]),wr={__name:"modify-price",props:{show:{type:Boolean,default:!1},productItem:{type:Object,default:function(){return{}}}},emits:["update:show","success"],setup:function(t,e){var n=e.emit,i=t,r=$(!1),a=$("");at((function(){return i.show}),(function(){i.show&&(a.value="")}));var o=function(t){if(t){var e=a.value+t;/^\d*\.?\d{0,2}$/.test(e)&&(a.value+=t)}},u=function(){var t=x(y().mark((function t(){var e,o;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.value){t.next=2;break}return t.abrupt("return",uni.showToast({title:ft("請輸入價格"),icon:"none"}));case 2:if((u=a.value)>=0&&u<=1e6){t.next=4;break}return t.abrupt("return",uni.showToast({title:ft("请输入0-1000000间的價格"),icon:"none"}));case 4:return t.prev=4,r.value=!0,t.next=8,or({order_product_id:null===(e=i.productItem)||void 0===e?void 0:e.order_product_id,price:a.value});case 8:o=t.sent,uni.showToast({title:o.msg,icon:"none"}),n("update:show",!1),n("success",o.data.res),t.next=16;break;case 14:t.prev=14,t.t0=t.catch(4);case 16:return t.prev=16,r.value=!1,t.finish(16);case 19:case"end":return t.stop()}var u}),t,null,[[4,14,16,19]])})));return function(){return t.apply(this,arguments)}}();return function(e,s){var l=rt,c=Z(G("ti-input"),ot),d=Z(G("ti-keyboard"),ut),f=Z(G("ti-modal"),st);return Q(),X(f,{show:i.show,title:dt(ft)("價格")},{content:tt((function(){return[et(l,{class:"ti-dialog-content"},{default:tt((function(){return[et(l,{class:"ti-modify-title text-ellipsis"},{default:tt((function(){var e,n;return[lt(ct((null===(e=t.productItem)||void 0===e?void 0:e.product_name_text)||(null===(n=t.productItem)||void 0===n||null===(n=n.product)||void 0===n?void 0:n.product_name_text)),1)]})),_:1}),et(l,{class:"ti-modify-input"},{default:tt((function(){return[et(c,{modelValue:a.value,"onUpdate:modelValue":s[0]||(s[0]=function(t){return a.value=t}),placeholder:dt(ft)("請輸入價格"),focus:!0},null,8,["modelValue","placeholder"])]})),_:1})]})),_:1})]})),footer:tt((function(){return[et(l,{class:"ti-dialog-btn"},{default:tt((function(){return[et(d,{primaryLoading:r.value,isDoubleZero:!0,isCross:!1,isDrop:!0,onExit:s[1]||(s[1]=function(t){return n("update:show",!1)}),onClear:s[2]||(s[2]=function(t){return a.value=""}),onInput:o,onConfirm:u},null,8,["primaryLoading"])]})),_:1})]})),_:1},8,["show","title"])}}},Dr=H(wr,[["__scopeId","data-v-2dd083b7"]]),kr={__name:"remark",props:{show:{type:Boolean,default:!1},productItem:{type:Object,default:function(){return{}}}},emits:["update:show","success"],setup:function(t,e){var n=e.emit,i=t,r=$(!1),a=$("");at((function(){return i.show}),(function(){var t;i.show&&(a.value=(null===(t=i.productItem)||void 0===t?void 0:t.remark)||"")}));var o=function(){var t=x(y().mark((function t(){var e,o;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r.value=!0,t.next=4,ur({order_product_id:null===(e=i.productItem)||void 0===e?void 0:e.order_product_id,remark:a.value.trim()});case 4:1==(o=t.sent).code&&(uni.showToast({title:o.msg,icon:"none"}),n("update:show",!1),n("success",o.data.res)),t.next=10;break;case 8:t.prev=8,t.t0=t.catch(0);case 10:return t.prev=10,r.value=!1,t.finish(10);case 13:case"end":return t.stop()}}),t,null,[[0,8,10,13]])})));return function(){return t.apply(this,arguments)}}();return function(e,u){var s=rt,l=ht,c=Z(G("ti-button"),pt),d=Z(G("ti-modal"),st);return Q(),X(d,{show:i.show,title:dt(ft)("備註")},{content:tt((function(){return[et(s,{class:"ti-dialog-content"},{default:tt((function(){return[et(s,{class:"ti-remark-title text-ellipsis"},{default:tt((function(){var e,n;return[lt(ct((null===(e=t.productItem)||void 0===e?void 0:e.product_name_text)||(null===(n=t.productItem)||void 0===n||null===(n=n.product)||void 0===n?void 0:n.product_name_text)),1)]})),_:1}),et(s,{class:"ti-remark-textarea"},{default:tt((function(){return[et(l,{modelValue:a.value,"onUpdate:modelValue":u[0]||(u[0]=function(t){return a.value=t}),focus:!0,maxlength:50,"placeholder-style":"color:rgba(16,10,5,.3)",placeholder:dt(ft)("请输入")},null,8,["modelValue","placeholder"])]})),_:1}),et(s,{class:"ti-remark-num"},{default:tt((function(){var t;return[lt(ct((null===(t=a.value)||void 0===t?void 0:t.trim().length)||0)+"/50 ",1)]})),_:1})]})),_:1})]})),footer:tt((function(){return[et(s,{class:"ti-dialog-btn"},{default:tt((function(){return[et(c,{onClick:u[1]||(u[1]=function(t){return n("update:show",!1)})},{default:tt((function(){return[lt(ct(dt(ft)("退出")),1)]})),_:1}),et(c,{onClick:u[2]||(u[2]=function(t){return a.value=""})},{default:tt((function(){return[lt(ct(dt(ft)("清空")),1)]})),_:1}),et(c,{loading:r.value,type:"primary",onClick:o},{default:tt((function(){return[lt(ct(dt(ft)("确定")),1)]})),_:1},8,["loading"])]})),_:1})]})),_:1},8,["show","title"])}}},Cr=H(kr,[["__scopeId","data-v-bf2db426"]]),Ar={__name:"withdrawal",props:{show:{type:Boolean,default:!1},productItem:{type:Object,default:function(){return{}}}},emits:["update:show","success"],setup:function(t,e){var n=e.emit,i=t,r=$(!1),a=$(""),o=$([ft("等待時間長"),ft("口味不好"),ft("菜賣光了")]),u=$(0);at((function(){return i.show}),(function(){var t;i.show&&(a.value=(null===(t=i.productItem)||void 0===t?void 0:t.total_num)||"")}));var s=function(t){t&&(a.value+=t)},l=function(){var t=x(y().mark((function t(){var e,s,l;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.value){t.next=2;break}return t.abrupt("return",uni.showToast({title:ft("请输入退菜數量"),icon:"none"}));case 2:return t.prev=2,r.value=!0,t.next=6,c={order_id:null===(e=i.productItem)||void 0===e?void 0:e.order_id,order_product_id:null===(s=i.productItem)||void 0===s?void 0:s.order_product_id,num:a.value,return_reason:o.value[u.value]},R("order.cart/moveProduct",c,{isLoading:!1});case 6:l=t.sent,uni.showToast({title:l.msg,icon:"none"}),n("update:show",!1),n("success",l.data.res),t.next=14;break;case 12:t.prev=12,t.t0=t.catch(2);case 14:return t.prev=14,r.value=!1,t.finish(14);case 17:case"end":return t.stop()}var c}),t,null,[[2,12,14,17]])})));return function(){return t.apply(this,arguments)}}();return function(e,c){var d=rt,f=Z(G("ti-input"),ot),p=Z(G("ti-keyboard"),ut),h=Z(G("ti-modal"),st);return Q(),X(h,{show:i.show,title:dt(ft)("退菜")},{content:tt((function(){return[et(d,{class:"ti-dialog-content"},{default:tt((function(){return[et(d,{class:"ti-withdrawal-title text-ellipsis"},{default:tt((function(){var e,n;return[lt(ct((null===(e=t.productItem)||void 0===e?void 0:e.product_name_text)||(null===(n=t.productItem)||void 0===n||null===(n=n.product)||void 0===n?void 0:n.product_name_text)),1)]})),_:1}),et(d,{class:"ti-withdrawal-list"},{default:tt((function(){return[(Q(!0),vt(mt,null,gt(o.value,(function(t,e){return Q(),X(d,{key:e,class:it([{active:e==u.value},"ti-withdrawal-item"]),onClick:function(t){return function(t){u.value=t}(e)}},{default:tt((function(){return[lt(ct(t),1)]})),_:2},1032,["class","onClick"])})),128))]})),_:1}),et(d,{class:"ti-withdrawal-input"},{default:tt((function(){return[et(f,{modelValue:a.value,"onUpdate:modelValue":c[0]||(c[0]=function(t){return a.value=t}),placeholder:dt(ft)("请输入退菜數量"),focus:!0},null,8,["modelValue","placeholder"])]})),_:1})]})),_:1})]})),footer:tt((function(){return[et(d,{class:"ti-dialog-btn"},{default:tt((function(){return[et(p,{primaryLoading:r.value,isDoubleZero:!0,isCross:!1,isDrop:!0,onExit:c[1]||(c[1]=function(t){return n("update:show",!1)}),onClear:c[2]||(c[2]=function(t){return a.value=""}),onInput:s,onConfirm:l},null,8,["primaryLoading"])]})),_:1})]})),_:1},8,["show","title"])}}},Er=H(Ar,[["__scopeId","data-v-e9c1e9a7"]]),Fr={__name:"cancel-all",props:{show:{type:Boolean,default:!1},orderId:{type:[Number,String],default:null},sendKitchen:{type:Array,default:function(){return[]}}},emits:["update:show","success"],setup:function(t,e){var n=e.emit,i=t,r=$(!1),a=function(){var t=x(y().mark((function t(){var e;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r.value){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,r.value=!0,t.next=6,a={order_id:i.orderId},R("order.cart/delStay",a,{isLoading:!1});case 6:e=t.sent,uni.showToast({title:e.msg,icon:"none"}),n("update:show",!1),n("success",{}),t.next=14;break;case 12:t.prev=12,t.t0=t.catch(2);case 14:return t.prev=14,r.value=!1,t.finish(14);case 17:case"end":return t.stop()}var a}),t,null,[[2,12,14,17]])})));return function(){return t.apply(this,arguments)}}();return function(e,o){var u=rt,s=bt,l=Z(G("ti-modal"),st);return Q(),X(l,{class:"ti-action-tips",title:e.$t("溫馨提示"),show:i.show,confirmLoading:r.value,onCancel:o[0]||(o[0]=function(t){return n("update:show",!1)}),onConfirm:a},{content:tt((function(){return[et(u,{class:"ti-dialog-content"},{default:tt((function(){return[i.sendKitchen&&t.sendKitchen.length>0?(Q(),vt(mt,{key:0},[et(u,{class:"ti-cancel-title"},{default:tt((function(){return[lt(ct(e.$t("此單有商品已送廚，是否取消此筆交易？")),1)]})),_:1}),et(s,{"scroll-y":""},{default:tt((function(){return[et(u,{class:"ti-cancel-list"},{default:tt((function(){return[(Q(!0),vt(mt,null,gt(i.sendKitchen,(function(t,e){return Q(),X(u,{key:e,class:"ti-cancel-item"},{default:tt((function(){return[lt(ct(null==t?void 0:t.product_name_text),1)]})),_:2},1024)})),128))]})),_:1})]})),_:1})],64)):(Q(),vt(mt,{key:1},[lt(ct(e.$t("是否取消此筆交易？")),1)],64))]})),_:1})]})),_:1},8,["title","show","confirmLoading"])}}},Ir=H(Fr,[["__scopeId","data-v-1382b5da"]]),Sr={__name:"order-pickup",props:{show:{type:Boolean,default:!1}},emits:["update:show","success"],setup:function(t,e){var n=e.emit,i=t,r=$(),a=$(!1),o=$(!1),u=$(),s=$({page:1,list_rows:20}),l=$(!1),c=$([]),d=$(!1),f=yt((function(){var t;return((null===(t=c.value.find((function(t){return t.order_id==u.value})))||void 0===t?void 0:t.product)||[]).filter((function(t){return 1==t.is_send_kitchen}))||[]}));at((function(){return i.show}),(function(){i.show&&p()}));var p=function(){s.value.page=1,v(!0)},h=function(){d.value&&(s.value.page+=1,v())},v=function(){var t=x(y().mark((function t(e){var n,i,r,a;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!l.value){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,e&&(l.value=!0),t.next=6,o=s.value,R("order.cart/stayList",o,{isLoading:!1});case 6:a=t.sent,1==s.value.page&&(c.value=[]),c.value=c.value.concat((null===(n=a.data)||void 0===n?void 0:n.productList)||[]),d.value=(null===(i=a.data)||void 0===i||null===(i=i.list)||void 0===i?void 0:i.last_page)>(null===(r=a.data)||void 0===r||null===(r=r.list)||void 0===r?void 0:r.current_page),t.next=14;break;case 12:t.prev=12,t.t0=t.catch(2);case 14:return t.prev=14,e&&(l.value=!1),t.finish(14);case 17:case"end":return t.stop()}var o}),t,null,[[2,12,14,17]])})));return function(e){return t.apply(this,arguments)}}(),m=function(){var t=x(y().mark((function t(e){var i;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a.value){t.next=2;break}return t.abrupt("return");case 2:return r.value=e,t.prev=3,a.value=!0,t.next=7,R("order.cart/pick",{order_id:e});case 7:i=t.sent,uni.showToast({title:i.msg,icon:"none"}),n("update:show",!1),Ct(e),n("success",i.data.res),t.next=16;break;case 14:t.prev=14,t.t0=t.catch(3);case 16:return t.prev=16,a.value=!1,t.finish(16);case 19:case"end":return t.stop()}}),t,null,[[3,14,16,19]])})));return function(e){return t.apply(this,arguments)}}();return function(t,e){var s=Z(G("ti-loading"),_t),v=At,g=rt,b=Z(G("ti-button"),pt),y=Z(G("ti-empty-data"),xt),_=bt,x=Z(G("ti-drawer"),wt);return Q(),X(g,null,{default:tt((function(){return[et(x,{show:i.show,isConfirmShow:!1,title:dt(ft)("取單"),onCancel:e[0]||(e[0]=function(t){return n("update:show",!1)})},{content:tt((function(){return[et(g,{class:"ti-order-pickup"},{default:tt((function(){return[et(_,{class:"ti-scroll","scroll-y":"","lower-threshold":50,onScrolltolower:h},{default:tt((function(){return[l.value?(Q(),X(s,{key:0})):c.value&&c.value.length>0?(Q(),vt(mt,{key:1},[et(g,{class:"ti-pickup-list"},{default:tt((function(){return[(Q(!0),vt(mt,null,gt(c.value,(function(t,e){return Q(),X(g,{key:e,class:"ti-pickup-item"},{default:tt((function(){return[et(g,{class:"ti-pickup-top"},{default:tt((function(){return[et(g,{class:"ti-pickup-left"},{default:tt((function(){return[et(g,{class:"ti-price-box"},{default:tt((function(){return[et(v,{class:"ti-price-text"},{default:tt((function(){return[lt(ct(dt(ft)("訂單總價：")),1)]})),_:1}),et(v,{class:"ti-pickup-price"},{default:tt((function(){return[lt(ct(dt(Dt)(null==t?void 0:t.total_price)),1)]})),_:2},1024),et(v,{class:"ti-pickup-subPrice"},{default:tt((function(){return[lt(ct(dt(kt)(null==t?void 0:t.total_price)),1)]})),_:2},1024)]})),_:2},1024),et(g,{class:"ti-pickup-time"},{default:tt((function(){return[et(v,null,{default:tt((function(){return[lt(ct(dt(ft)("掛單時間：")),1)]})),_:1}),et(v,null,{default:tt((function(){return[lt(ct(null==t?void 0:t.create_time),1)]})),_:2},1024)]})),_:2},1024)]})),_:2},1024),et(g,{class:"ti-pickup-action"},{default:tt((function(){return[et(g,{class:"ti-cancel-all"},{default:tt((function(){return[et(b,{type:"danger",onClick:function(e){return n=t.order_id,u.value=n,void(o.value=!0);var n}},{default:tt((function(){return[lt(ct(dt(ft)("整單取消")),1)]})),_:2},1032,["onClick"])]})),_:2},1024),et(g,null,{default:tt((function(){return[et(b,{type:"primary",loading:r.value==t.order_id&&a.value,onClick:function(e){return m(t.order_id)}},{default:tt((function(){return[lt(ct(dt(ft)("取單")),1)]})),_:2},1032,["loading","onClick"])]})),_:2},1024)]})),_:2},1024)]})),_:2},1024),et(g,{class:"ti-pickup-goods"},{default:tt((function(){return[et(g,{class:"ti-goods-head"},{default:tt((function(){return[et(g,null,{default:tt((function(){return[lt(ct(dt(ft)("商品名称")),1)]})),_:1}),et(g,null,{default:tt((function(){return[lt(ct(dt(ft)("數量")),1)]})),_:1}),et(g,{class:"ti-goods-head-total"},{default:tt((function(){return[lt(ct(dt(ft)("小计")),1)]})),_:1})]})),_:1}),et(g,{class:"ti-goods-body"},{default:tt((function(){return[(Q(!0),vt(mt,null,gt((null==t?void 0:t.product)||[],(function(t,e){return Q(),X(g,{key:e,class:"ti-goods-item"},{default:tt((function(){return[et(g,null,{default:tt((function(){return[lt(ct(null==t?void 0:t.product_name_text),1)]})),_:2},1024),et(g,null,{default:tt((function(){return[lt(ct("x ".concat(null==t?void 0:t.total_num)),1)]})),_:2},1024),et(g,{class:"ti-goods-item-price"},{default:tt((function(){return[et(v,{class:"ti-goods-price"},{default:tt((function(){return[lt(ct(dt(Dt)(null==t?void 0:t.product_price)),1)]})),_:2},1024),et(v,{class:"ti-goods-subPrice"},{default:tt((function(){return[lt(ct(dt(kt)(null==t?void 0:t.product_price)),1)]})),_:2},1024)]})),_:2},1024)]})),_:2},1024)})),128))]})),_:2},1024)]})),_:2},1024)]})),_:2},1024)})),128))]})),_:1}),et(s,{status:d.value?"loading":"no-more"},null,8,["status"])],64)):(Q(),X(y,{key:2}))]})),_:1})]})),_:1})]})),_:1},8,["show","title"]),et(Ir,{show:o.value,"onUpdate:show":e[1]||(e[1]=function(t){return o.value=t}),orderId:u.value,sendKitchen:f.value,onSuccess:e[2]||(e[2]=function(t){return p()})},null,8,["show","orderId","sendKitchen"])]})),_:1})}}},Tr=H(Sr,[["__scopeId","data-v-b93842ba"]]),Pr={__name:"preferential",props:{show:{type:Boolean,default:!1},orderId:{type:[Number,String],default:null},totalPayPrice:{type:[Number,String],default:0},preferentialData:{type:Object,default:function(){return{}}}},emits:["update:show","success"],setup:function(t,e){var n=e.emit,i=t,r=$({type:1,money:"",rate:"",discountType:1}),a=$(!1);at((function(){return i.show}),(function(){if(i.show){var t,e,n={type:1,money:"",rate:"",discountType:1};if(null!==(t=i.preferentialData)&&void 0!==t&&t.discount_ratio)n.type=2,n.rate=Math.max(null===(e=i.preferentialData)||void 0===e?void 0:e.discount_ratio,0).toString();r.value=n}})),at((function(){return r.value.type}),(function(t,e){if(1==e)r.value.money="";else if(2==e){var n,a;if(null!==(n=i.preferentialData)&&void 0!==n&&n.discount_ratio)r.value.rate=Math.max(null===(a=i.preferentialData)||void 0===a?void 0:a.discount_ratio,0).toString();else r.value.rate=""}else 3==e&&(r.value.discountType=1)}));var o=function(t){r.value.discountType=t.detail.value},u=function(){1==r.value.type?r.value.money="":2==r.value.type&&(r.value.rate="")},s=function(t){if(t)if(1==r.value.type){var e=r.value.money+t;/^\d*\.?\d{0,2}$/.test(e)&&(r.value.money+=t)}else 2==r.value.type&&(r.value.rate+=t)},l=function(){var t=x(y().mark((function t(){var e,o;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=m(m({},r.value),{},{order_id:i.orderId}),!a.value){t.next=3;break}return t.abrupt("return");case 3:if(1!=e.type){t.next=10;break}if(e.money){t.next=6;break}return t.abrupt("return",uni.showToast({title:ft("请输入實付價格"),icon:"none"}));case 6:if((u=e.money)>=0&&u<=999999999){t.next=8;break}return t.abrupt("return",uni.showToast({title:ft("请输入0-999999999间的價格"),icon:"none"}));case 8:t.next=15;break;case 10:if(2!=e.type){t.next=15;break}if(e.rate){t.next=13;break}return t.abrupt("return",uni.showToast({title:ft("请输入折扣"),icon:"none"}));case 13:if(/^(?:[1-9][0-9]?|100|0)$/.test(e.rate)){t.next=15;break}return t.abrupt("return",uni.showToast({title:ft("请输入0-100间的正整数"),icon:"none"}));case 15:return t.prev=15,a.value=!0,t.next=19,sr(e);case 19:o=t.sent,uni.showToast({title:o.msg,icon:"none"}),n("update:show",!1),n("success",o.data.res),t.next=27;break;case 25:t.prev=25,t.t0=t.catch(15);case 27:return t.prev=27,a.value=!1,t.finish(27);case 30:case"end":return t.stop()}var u}),t,null,[[15,25,27,30]])})));return function(){return t.apply(this,arguments)}}();return function(e,c){var d=rt,f=At,p=Z(G("ti-input"),ot),h=It,v=St,m=Tt,g=Z(G("ti-button"),pt),b=Z(G("ti-keyboard"),ut),y=Z(G("ti-modal"),st);return Q(),X(y,{show:i.show,title:dt(ft)("優惠折扣")},{content:tt((function(){return[et(d,{class:"ti-dialog-content"},{default:tt((function(){return[et(d,{class:"ti-preferential-box"},{default:tt((function(){return[et(d,{class:"ti-preferential-label"},{default:tt((function(){return[lt(ct(dt(ft)("當前價格")),1)]})),_:1}),et(d,{class:"ti-preferential-input"},{default:tt((function(){return[et(f,{class:"ti-preferential-price"},{default:tt((function(){return[lt(ct(dt(Dt)(t.totalPayPrice)),1)]})),_:1}),et(f,{class:"ti-preferential-subPrice"},{default:tt((function(){return[lt(ct(dt(kt)(t.totalPayPrice)),1)]})),_:1})]})),_:1}),et(d,{class:"ti-preferential-label"},{default:tt((function(){return[lt(ct(dt(ft)("優惠方式")),1)]})),_:1}),et(d,{class:"ti-preferential-input ti-preferential-type"},{default:tt((function(){return[(Q(!0),vt(mt,null,gt([dt(ft)("改價"),dt(ft)("折扣"),dt(ft)("抹零")],(function(t,e){return Q(),X(d,{key:e,class:it([{active:r.value.type==e+1},"ti-preferential-type-item"]),onClick:function(t){return r.value.type=e+1}},{default:tt((function(){return[lt(ct(t),1)]})),_:2},1032,["class","onClick"])})),128))]})),_:1}),1==r.value.type?(Q(),vt(mt,{key:0},[et(d,{class:"ti-preferential-label"},{default:tt((function(){return[lt(ct(dt(ft)("實付價格")),1)]})),_:1}),et(d,{class:"ti-preferential-input"},{default:tt((function(){return[et(p,{modelValue:r.value.money,"onUpdate:modelValue":c[0]||(c[0]=function(t){return r.value.money=t}),placeholder:dt(ft)("请输入實付價格"),focus:!0},null,8,["modelValue","placeholder"])]})),_:1})],64)):Et("",!0),2==r.value.type?(Q(),vt(mt,{key:1},[et(d,{class:"ti-preferential-label"},{default:tt((function(){return[lt(ct(dt(ft)("折扣")),1)]})),_:1}),et(d,{class:"ti-preferential-input"},{default:tt((function(){return[et(p,{modelValue:r.value.rate,"onUpdate:modelValue":c[1]||(c[1]=function(t){return r.value.rate=t}),regex:/^\d+$/,placeholder:dt(ft)("请输入折扣"),focus:!0},{right:tt((function(){return[et(d,{class:"ti-preferential-percentage"},{default:tt((function(){return[lt("%")]})),_:1})]})),_:1},8,["modelValue","placeholder"])]})),_:1})],64)):Et("",!0),3==r.value.type?(Q(),vt(mt,{key:2},[et(d,{class:"ti-preferential-label ti-preferential-round"},{default:tt((function(){return[lt(ct(dt(ft)("抹零方式")),1)]})),_:1}),et(d,{class:"ti-preferential-input"},{default:tt((function(){return[et(m,{class:"ti-type-radio",style:nt({"grid-template-columns":"zh"==dt(Ft)()||"zhtw"==dt(Ft)()?"repeat(4, auto)":"repeat(2, 1fr)"}),onChange:o},{default:tt((function(){return[et(v,null,{default:tt((function(){return[et(h,{value:"1",color:"#ffbe00",checked:"true"}),et(f,{class:"ti-radio-text"},{default:tt((function(){return[lt(ct(dt(ft)("抹分")),1)]})),_:1})]})),_:1}),et(v,null,{default:tt((function(){return[et(h,{value:"2",color:"#ffbe00"}),et(f,{class:"ti-radio-text"},{default:tt((function(){return[lt(ct(dt(ft)("抹角")),1)]})),_:1})]})),_:1}),et(v,null,{default:tt((function(){return[et(h,{value:"3",color:"#ffbe00"}),et(f,{class:"ti-radio-text"},{default:tt((function(){return[lt(ct(dt(ft)("四舍五入保留一位小数")),1)]})),_:1})]})),_:1}),et(v,null,{default:tt((function(){return[et(h,{value:"4",color:"#ffbe00"}),et(f,{class:"ti-radio-text"},{default:tt((function(){return[lt(ct(dt(ft)("四舍五入到整数")),1)]})),_:1})]})),_:1})]})),_:1},8,["style"])]})),_:1})],64)):Et("",!0)]})),_:1})]})),_:1})]})),footer:tt((function(){return[3==r.value.type?(Q(),X(d,{key:0,class:"ti-dialog-btn"},{default:tt((function(){return[et(g,{onClick:c[2]||(c[2]=function(t){return n("update:show",!1)})},{default:tt((function(){return[lt(ct(dt(ft)("退出")),1)]})),_:1}),et(g,{loading:a.value,type:"primary",onClick:l},{default:tt((function(){return[lt(ct(dt(ft)("确定")),1)]})),_:1},8,["loading"])]})),_:1})):(Q(),X(d,{key:1,class:"ti-dialog-btn ti-preferential-keyboard"},{default:tt((function(){return[et(b,{primaryLoading:a.value,isDoubleZero:!0,isCross:!1,isDrop:!0,onExit:c[3]||(c[3]=function(t){return n("update:show",!1)}),onClear:u,onInput:s,onConfirm:l},null,8,["primaryLoading"])]})),_:1}))]})),_:1},8,["show","title"])}}},Br=H(Pr,[["__scopeId","data-v-5ee088a3"]]),Nr={__name:"cancel-all",props:{show:{type:Boolean,default:!1},sendKitchen:{type:Array,default:function(){return[]}},msg:{type:String,default:null},cancelShow:{type:Boolean,default:!1}},emits:["update:show","confirm"],setup:function(t,e){var n=e.emit,i=t,r=$(!1),a=function(){n("update:show",!1),n("confirm")};return function(e,o){var u=rt,s=bt,l=Z(G("ti-modal"),st);return Q(),X(l,{class:"ti-action-tips",title:e.$t("溫馨提示"),isCancelShow:i.cancelShow,show:i.show,confirmLoading:r.value,onCancel:o[0]||(o[0]=function(t){return n("update:show",!1)}),onConfirm:a},{content:tt((function(){return[et(u,{class:"ti-dialog-content"},{default:tt((function(){return[i.sendKitchen&&t.sendKitchen.length>0?(Q(),vt(mt,{key:0},[et(u,{class:"ti-cancel-title"},{default:tt((function(){return[lt(ct(i.msg),1)]})),_:1}),et(s,{"scroll-y":""},{default:tt((function(){return[et(u,{class:"ti-cancel-list"},{default:tt((function(){return[(Q(!0),vt(mt,null,gt(i.sendKitchen,(function(t,e){return Q(),X(u,{key:e,class:"ti-cancel-item"},{default:tt((function(){return[lt(ct(null==t?void 0:t.product_name_text),1)]})),_:2},1024)})),128))]})),_:1})]})),_:1})],64)):Et("",!0)]})),_:1})]})),_:1},8,["title","isCancelShow","show","confirmLoading"])}}},zr=H(Nr,[["__scopeId","data-v-249d77fe"]]),Or={__name:"action-list",props:{productItem:{type:Object,default:function(){return{}}},orderId:{type:[Number,String],default:null},orderList:{type:Array,default:function(){return[]}},totalPayPrice:{type:[Number,String],default:0},preferentialData:{type:Object,default:function(){return{}}},isLock:{type:Number,default:0}},emits:["success"],setup:function(t,e){var n=e.emit,i=t,r=yt((function(){return i.orderList&&i.orderList.length>0})),a=yt((function(){return i.orderList.filter((function(t){return(null==t?void 0:t.is_send_kitchen)>0}))})),o=yt((function(){return i.orderList.filter((function(t){return(null==t?void 0:t.is_send_kitchen)<=0}))})),u=$(Pt()),s=$(!1),l=$(!1),c=$(!1),d=$(!1),f=$(!1),p=$(!1),h=$(!1),v=$(!1),m=$(!1),g=$(!1),b=$(!1),_=$(!1),w=$(!1),D=$(!1),k=$(""),C=$(!1),A=$([]),E=function(t,e){n("success",t,e)},F=function(){i.orderList&&i.orderList.length>0?w.value=!0:_.value=!0},I=function(){var t;(null===(t=i.productItem)||void 0===t?void 0:t.finish_time)>0?D.value=!0:g.value=!0},S=function(t){Ot(t)},T=function(){var t=x(y().mark((function t(){var e,n;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!d.value){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,d.value=!0,t.next=6,r={order_id:Mt(),order_product_id:null===(e=i.productItem)||void 0===e?void 0:e.order_product_id},R("order.cart/delProduct",r,{isLoading:!1});case 6:n=t.sent,uni.showToast({title:n.msg,icon:"none"}),E(n.data.res,"delete"),c.value=!1,t.next=14;break;case 12:t.prev=12,t.t0=t.catch(2);case 14:return t.prev=14,d.value=!1,t.finish(14);case 17:case"end":return t.stop()}var r}),t,null,[[2,12,14,17]])})));return function(){return t.apply(this,arguments)}}(),P=function(){var t=x(y().mark((function t(){var e;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!p.value){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,p.value=!0,t.next=6,n={delivery:u.value?30:40,order_id:i.orderId},R("order.cart/sendKitchen",n,{isLoading:!1,isMessage:!1});case 6:e=t.sent,uni.showToast({title:e.msg,icon:"none"}),E(e.data.res),f.value=!1,t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),null!==t.t0&&void 0!==t.t0&&t.t0.data&&(null===t.t0||void 0===t.t0?void 0:t.t0.data.length)>0?(A.value=null===t.t0||void 0===t.t0?void 0:t.t0.data,k.value=null===t.t0||void 0===t.t0?void 0:t.t0.msg,C.value=!0):uni.showToast({title:null===t.t0||void 0===t.t0?void 0:t.t0.msg,icon:"none"});case 15:return t.prev=15,p.value=!1,f.value=!1,t.finish(15);case 19:case"end":return t.stop()}var n}),t,null,[[2,12,15,19]])})));return function(){return t.apply(this,arguments)}}(),B=function(){var t=x(y().mark((function t(){var e;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!l.value){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,l.value=!0,t.next=6,n={order_id:i.orderId},R("order.cart/stay",n,{isLoading:!1});case 6:e=t.sent,uni.showToast({title:e.msg,icon:"none"}),E({}),s.value=!1,t.next=14;break;case 12:t.prev=12,t.t0=t.catch(2);case 14:return t.prev=14,l.value=!1,t.finish(14);case 17:case"end":return t.stop()}var n}),t,null,[[2,12,14,17]])})));return function(){return t.apply(this,arguments)}}();return function(e,n){var y,x=At,N=Z(G("u-switch"),xr),z=rt,O=Lt,M=Z(G("ti-modal"),st),L=Bt("permission");return Q(),vt(mt,null,[et(z,{class:"ti-action-box"},{default:tt((function(){return[et(z,{class:"ti-action-btn"},{default:tt((function(){return[et(z,{class:"ti-action-pack"},{default:tt((function(){return[et(x,{class:"ti-pack-text"},{default:tt((function(){return[lt(ct(dt(ft)("打包")),1)]})),_:1}),et(N,{modelValue:u.value,"onUpdate:modelValue":n[0]||(n[0]=function(t){return u.value=t}),activeColor:"#FFBE00",inactiveColor:"rgb(153,153,153,.1)",size:"20",onChange:S},null,8,["modelValue"])]})),_:1}),et(z,{class:"ti-btn-box"},{default:tt((function(){var t,e,a,u;return[Nt((Q(),X(O,{class:"ti-btn-item danger",disabled:!(1!=i.isLock&&0==(null===(t=i.productItem)||void 0===t?void 0:t.is_send_kitchen)),onClick:n[1]||(n[1]=function(t){return c.value=!0})},{default:tt((function(){return[et(x,{class:"ti-btn-item-text"},{default:tt((function(){return[lt(ct(dt(ft)("删除")),1)]})),_:1})]})),_:1},8,["disabled"])),[[L,["cashier_cash_delete"]]]),Nt((Q(),X(O,{class:"ti-btn-item",disabled:!(1!=i.isLock&&(null===(e=i.productItem)||void 0===e?void 0:e.order_product_id)>0),onClick:n[2]||(n[2]=function(t){return v.value=!0})},{default:tt((function(){return[et(x,{class:"ti-btn-item-text"},{default:tt((function(){return[lt(ct(dt(ft)("價格")),1)]})),_:1})]})),_:1},8,["disabled"])),[[L,["cashier_cash_price"]]]),Nt((Q(),X(O,{class:"ti-btn-item",disabled:!r.value,onClick:n[3]||(n[3]=function(t){return s.value=!0})},{default:tt((function(){return[et(x,{class:"ti-btn-item-text"},{default:tt((function(){return[lt(ct(dt(ft)("掛單")),1)]})),_:1})]})),_:1},8,["disabled"])),[[L,["cashier_cash_placement"]]]),et(O,{class:"ti-btn-item",disabled:!1,onClick:F},{default:tt((function(){return[et(x,{class:"ti-btn-item-text"},{default:tt((function(){return[lt(ct(dt(ft)("取單")),1)]})),_:1})]})),_:1}),Nt((Q(),X(O,{class:"ti-btn-item danger",disabled:!r.value,onClick:n[4]||(n[4]=function(t){return h.value=!0})},{default:tt((function(){return[et(x,{class:"ti-btn-item-text"},{default:tt((function(){return[lt(ct(dt(ft)("整單取消")),1)]})),_:1})]})),_:1},8,["disabled"])),[[L,["cashier_cash_cancel"]]]),Nt((Q(),X(O,{class:"ti-btn-item",disabled:!(1!=i.isLock&&o.value.length>0),onClick:n[5]||(n[5]=function(t){return f.value=!0})},{default:tt((function(){return[et(x,{class:"ti-btn-item-text"},{default:tt((function(){return[lt(ct(dt(ft)("送廚")),1)]})),_:1})]})),_:1},8,["disabled"])),[[L,["cashier_cash_send_kitchen"]]]),Nt((Q(),X(O,{class:"ti-btn-item danger",disabled:!(1!=i.isLock&&1==(null===(a=i.productItem)||void 0===a?void 0:a.is_send_kitchen)),onClick:I},{default:tt((function(){return[et(x,{class:"ti-btn-item-text"},{default:tt((function(){return[lt(ct(dt(ft)("退菜")),1)]})),_:1})]})),_:1},8,["disabled"])),[[L,["cashier_cash_return"]]]),Nt((Q(),X(O,{class:"ti-btn-item",disabled:!(1!=i.isLock&&0==(null===(u=i.productItem)||void 0===u?void 0:u.is_send_kitchen)),onClick:n[6]||(n[6]=function(t){return m.value=!0})},{default:tt((function(){return[et(x,{class:"ti-btn-item-text"},{default:tt((function(){return[lt(ct(dt(ft)("备注")),1)]})),_:1})]})),_:1},8,["disabled"])),[[L,["cashier_cash_remark"]]]),Nt((Q(),X(O,{class:"ti-btn-item",disabled:!r.value,onClick:n[7]||(n[7]=function(t){return b.value=!0})},{default:tt((function(){return[et(x,{class:"ti-btn-item-text"},{default:tt((function(){return[lt(ct(dt(ft)("優惠折扣")),1)]})),_:1})]})),_:1},8,["disabled"])),[[L,["cashier_cash_discount"]]])]})),_:1})]})),_:1})]})),_:1}),et(M,{class:"ti-action-tips",show:c.value,"onUpdate:show":n[8]||(n[8]=function(t){return c.value=t}),confirmLoading:d.value,title:dt(ft)("溫馨提示"),content:dt(ft)("是否删除此商品？"),onConfirm:T},null,8,["show","confirmLoading","title","content"]),et(M,{class:"ti-action-tips",show:f.value,"onUpdate:show":n[9]||(n[9]=function(t){return f.value=t}),confirmLoading:p.value,title:dt(ft)("溫馨提示"),content:dt(ft)("是否将商品送廚？"),onConfirm:P},null,8,["show","confirmLoading","title","content"]),et(zr,{show:C.value,"onUpdate:show":n[10]||(n[10]=function(t){return C.value=t}),sendKitchen:A.value,msg:k.value},null,8,["show","sendKitchen","msg"]),et(M,{class:"ti-action-tips",show:s.value,"onUpdate:show":n[11]||(n[11]=function(t){return s.value=t}),confirmLoading:l.value,title:dt(ft)("溫馨提示"),content:dt(ft)("是否将商品挂单？"),onConfirm:B},null,8,["show","confirmLoading","title","content"]),et(Ir,{show:h.value,"onUpdate:show":n[12]||(n[12]=function(t){return h.value=t}),sendKitchen:a.value,orderId:i.orderId,onSuccess:n[13]||(n[13]=function(t){return E({})})},null,8,["show","sendKitchen","orderId"]),et(Dr,{show:v.value,"onUpdate:show":n[14]||(n[14]=function(t){return v.value=t}),productItem:i.productItem,onSuccess:E},null,8,["show","productItem"]),et(Cr,{show:m.value,"onUpdate:show":n[15]||(n[15]=function(t){return m.value=t}),productItem:i.productItem,onSuccess:E},null,8,["show","productItem"]),et(Tr,{show:_.value,"onUpdate:show":n[16]||(n[16]=function(t){return _.value=t}),onSuccess:E},null,8,["show"]),et(M,{class:"ti-action-tips",show:w.value,"onUpdate:show":n[17]||(n[17]=function(t){return w.value=t}),title:dt(ft)("溫馨提示"),content:dt(ft)("请先将购物车内的商品挂单或结账后再取单"),onConfirm:n[18]||(n[18]=function(t){return w.value=!1})},null,8,["show","title","content"]),et(M,{class:"ti-action-tips",show:D.value,"onUpdate:show":n[19]||(n[19]=function(t){return D.value=t}),title:dt(ft)("溫馨提示"),content:dt(zt)("此[{name}]已製作，是否退菜？",{name:null===(y=i.productItem)||void 0===y?void 0:y.product_name_text}),onConfirm:n[20]||(n[20]=function(t){return g.value=!0,D.value=!1})},null,8,["show","title","content"]),et(Er,{show:g.value,"onUpdate:show":n[21]||(n[21]=function(t){return g.value=t}),productItem:i.productItem,onSuccess:E},null,8,["show","productItem"]),et(Br,{show:b.value,"onUpdate:show":n[22]||(n[22]=function(t){return b.value=t}),preferentialData:i.preferentialData,orderId:i.orderId,totalPayPrice:t.totalPayPrice,onSuccess:E},null,8,["show","preferentialData","orderId","totalPayPrice"])],64)}}},Mr=H(Or,[["__scopeId","data-v-8eec995d"]]),Lr={__name:"cart-number",props:{productItem:{type:Object,default:function(){return{}}}},emits:["change"],setup:function(t,e){var n=e.emit,i=t,r=$(!1),a=$(!1),o=$(!1),u=$(null),s=function(){var t=x(y().mark((function t(e){var s,l,c,d;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c={order_product_id:null===(s=i.productItem)||void 0===s?void 0:s.order_product_id,product_num:null===(l=i.productItem)||void 0===l?void 0:l.total_num,type:e},clearTimeout(u.value),"up"==e?(c.product_num+=1,u.value=setTimeout((function(){a.value=!0}),500)):(c.product_num-=1,u.value=setTimeout((function(){o.value=!0}),500)),t.prev=3,r.value=!0,t.next=7,ar(c);case 7:d=t.sent,n("change",d.data.res),t.next=13;break;case 11:t.prev=11,t.t0=t.catch(3);case 13:return t.prev=13,clearTimeout(u.value),r.value=!1,a.value=!1,o.value=!1,t.finish(13);case 19:case"end":return t.stop()}}),t,null,[[3,11,13,19]])})));return function(e){return t.apply(this,arguments)}}();return function(t,e){var n=Z(G("uni-icons"),jt),u=Lt,l=rt;return Q(),X(l,{class:"ti-number-box",onClick:e[2]||(e[2]=Ut((function(){}),["stop"]))},{default:tt((function(){var t,c,d,f,p;return[et(u,{class:"ti-number-btn ti-number-minus",disabled:(null===(t=i.productItem)||void 0===t?void 0:t.total_num)<=1||r.value||(null===(c=i.productItem)||void 0===c?void 0:c.is_send_kitchen)>0,onClick:e[0]||(e[0]=function(t){return s("down")})},{default:tt((function(){return[o.value?(Q(),X(n,{key:1,class:"ti-number-reload",type:"reload",size:"20"})):(Q(),X(n,{key:0,"custom-prefix":"iconfont",type:"icon-minus",size:"16"}))]})),_:1},8,["disabled"]),et(l,{class:"ti-number-input"},{default:tt((function(){var t;return[lt(ct((null===(t=i.productItem)||void 0===t?void 0:t.total_num)||1),1)]})),_:1}),et(u,{class:"ti-number-btn ti-number-plus",disabled:(null===(d=i.productItem)||void 0===d?void 0:d.total_num)>=(null===(f=i.productItem)||void 0===f||null===(f=f.product)||void 0===f?void 0:f.product_stock)||r.value||(null===(p=i.productItem)||void 0===p?void 0:p.is_send_kitchen)>0,onClick:e[1]||(e[1]=function(t){return s("up")})},{default:tt((function(){return[a.value?(Q(),X(n,{key:1,class:"ti-number-reload",type:"reload",size:"20"})):(Q(),X(n,{key:0,type:"plusempty",size:"16"}))]})),_:1},8,["disabled"])]})),_:1})}}},jr=H(Lr,[["__scopeId","data-v-075eebbc"]]);function Ur(t){return R("order.order/pay",t,{isMessage:!1})}function Rr(t){return R("order.order/prints",t)}function qr(t){return R("order.Order/printInvoices",t)}var Vr={__name:"member",props:{show:{type:Boolean,default:!1},orderId:{type:[Number,String],default:null}},emits:["update:show","change"],setup:function(t,e){var n=e.emit,i=t,r=$(!1),a=$(""),o=$({}),u=$(!1);at((function(){return i.show}),(function(){i.show&&(a.value="",o.value={})}));var s=function(){n("update:show",!1)},l=function(t){t&&(a.value+=t)},c=function(){var t=x(y().mark((function t(){var e;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.value){t.next=2;break}return t.abrupt("return",uni.showToast({title:ft("请输入会员手机号/ID"),icon:"none"}));case 2:return t.prev=2,r.value=!0,t.next=6,qt({mobile:a.value,order_id:i.orderId});case 6:e=t.sent,o.value=m(m({},e.data.user),{},{total_pay_price:e.data.total_pay_price}),t.next=12;break;case 10:t.prev=10,t.t0=t.catch(2);case 12:return t.prev=12,r.value=!1,t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[2,10,12,15]])})));return function(){return t.apply(this,arguments)}}(),d=function(){var t=x(y().mark((function t(){var e,r;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,u.value=!0,t.next=4,Vt({order_id:i.orderId,user_id:(null===(e=o.value)||void 0===e?void 0:e.user_id)||0});case 4:1==(r=t.sent).data.reset_notice&&uni.showToast({title:ft("改价/抹零已失效，请重新进行改价/抹零操作"),icon:"none"}),n("update:show",!1),n("change",m({order_id:r.data.order_id},r.data.res)),t.next=12;break;case 10:t.prev=10,t.t0=t.catch(0);case 12:return t.prev=12,u.value=!1,t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[0,10,12,15]])})));return function(){return t.apply(this,arguments)}}();return function(t,e){var n=Z(G("ti-input"),ot),f=Z(G("ti-button"),pt),p=rt,h=At,v=Z(G("ti-keyboard"),ut),m=Z(G("ti-modal"),st);return Q(),X(m,{show:i.show,title:dt(ft)("会员")},{content:tt((function(){return[et(p,{class:"ti-dialog-content"},{default:tt((function(){var t;return[et(p,{class:"ti-payment-input"},{default:tt((function(){return[et(n,{modelValue:a.value,"onUpdate:modelValue":e[0]||(e[0]=function(t){return a.value=t}),regex:/^[\d\-]+$/,placeholder:dt(ft)("請輸入會員手機號/ID"),focus:!0},null,8,["modelValue","placeholder"]),et(f,{loading:r.value,type:"primary",onClick:c},{default:tt((function(){return[lt(ct(dt(ft)("查找")),1)]})),_:1},8,["loading"])]})),_:1}),null!==(t=o.value)&&void 0!==t&&t.user_id?(Q(),X(p,{key:0,class:"ti-payment-member"},{default:tt((function(){return[et(p,{class:"ti-member-list"},{default:tt((function(){return[et(p,{class:"ti-member-item"},{default:tt((function(){return[et(p,{class:"ti-member-head"},{default:tt((function(){return[lt(ct(dt(ft)("暱稱")),1)]})),_:1}),et(p,{class:"ti-member-name text-ellipsis"},{default:tt((function(){var t;return[lt(ct((null===(t=o.value)||void 0===t?void 0:t.nickName)||"-"),1)]})),_:1})]})),_:1}),et(p,{class:"ti-member-item"},{default:tt((function(){return[et(p,{class:"ti-member-head"},{default:tt((function(){return[lt(ct(dt(ft)("會員卡/等級")),1)]})),_:1}),et(p,{class:"ti-member-name text-ellipsis"},{default:tt((function(){var t,e,n,i;return[lt(ct("".concat(1!=(null===(t=o.value)||void 0===t||null===(t=t.cardRecord)||void 0===t?void 0:t.disabled)&&null!==(e=o.value)&&void 0!==e&&null!==(e=e.card)&&void 0!==e&&e.card_name?null===(n=o.value)||void 0===n||null===(n=n.card)||void 0===n?void 0:n.card_name:"-","/").concat((null===(i=o.value)||void 0===i||null===(i=i.grade)||void 0===i?void 0:i.name)||"-")),1)]})),_:1})]})),_:1}),et(p,{class:"ti-member-item"},{default:tt((function(){return[et(p,{class:"ti-member-head"},{default:tt((function(){return[lt(ct(dt(ft)("餘額")),1)]})),_:1}),et(p,{class:"ti-member-name text-ellipsis"},{default:tt((function(){var t;return[lt(ct(dt(Rt)(null===(t=o.value)||void 0===t?void 0:t.balance)||0),1)]})),_:1})]})),_:1}),et(p,{class:"ti-member-item"},{default:tt((function(){return[et(p,{class:"ti-member-head"},{default:tt((function(){return[lt(ct(dt(ft)("積分")),1)]})),_:1}),et(p,{class:"ti-member-name text-ellipsis"},{default:tt((function(){var t;return[lt(ct((null===(t=o.value)||void 0===t?void 0:t.points)||0),1)]})),_:1})]})),_:1})]})),_:1}),et(p,{class:"ti-member-discount"},{default:tt((function(){return[et(h,{class:"ti-discount-title"},{default:tt((function(){return[lt(ct(dt(ft)("會員折扣應收金額")),1)]})),_:1}),et(h,{class:"ti-discount-price"},{default:tt((function(){var t;return[lt(ct(dt(Dt)((null===(t=o.value)||void 0===t?void 0:t.total_pay_price)||0)),1)]})),_:1}),et(h,{class:"ti-discount-subPrice"},{default:tt((function(){var t;return[lt(ct(dt(kt)((null===(t=o.value)||void 0===t?void 0:t.total_pay_price)||0)),1)]})),_:1})]})),_:1})]})),_:1})):Et("",!0)]})),_:1})]})),footer:tt((function(){return[et(p,{class:"ti-dialog-btn"},{default:tt((function(){return[et(v,{primaryLoading:u.value,isDoubleZero:!1,isCross:!0,isDrop:!0,onExit:s,onClear:e[1]||(e[1]=function(t){return a.value=""}),onInput:l,onConfirm:d},null,8,["primaryLoading"])]})),_:1})]})),_:1},8,["show","title"])}}},$r=H(Vr,[["__scopeId","data-v-7fdade5a"]]),Kr={__name:"pay-code",props:{show:{type:Boolean,default:!1},payItem:{type:Object,default:function(){}}},emits:["update:show","success"],setup:function(t,e){var n=e.emit,i=t,r=function(){Kt({},!1),n("update:show",!1)},a=function(){n("success")};return function(e,n){var o=rt,u=At,s=Ht,l=Z(G("ti-modal"),st);return Q(),X(l,{class:"ti-action-tips-pay",show:i.show,confirmText:e.$t("已支付"),cancelText:e.$t("退出"),onCancel:r,onConfirm:a},{content:tt((function(){return[et(o,{class:"ti-pay-container"},{default:tt((function(){return[et(o,{class:"ti-pay-title-box"},{default:tt((function(){return[et(o,{class:"ti-pay-title"},{default:tt((function(){var n;return[lt(ct((null===(n=t.payItem)||void 0===n?void 0:n.name)+e.$t("收款:")),1)]})),_:1}),et(o,{class:"ti-pay-prices-box"},{default:tt((function(){return[et(u,{class:"ti-pay-prices"},{default:tt((function(){var e;return[lt(ct(dt(Dt)(null===(e=t.payItem)||void 0===e?void 0:e.actual_price)),1)]})),_:1}),et(u,{class:"ti-pay-subPrice"},{default:tt((function(){var e;return[lt(ct(dt(kt)(null===(e=t.payItem)||void 0===e?void 0:e.actual_price)),1)]})),_:1})]})),_:1})]})),_:1}),et(o,{class:"ti-pay-content-box"},{default:tt((function(){return[et(o,{class:"ti-pay-code"},{default:tt((function(){var e;return[et(s,{src:dt($t)(null===(e=t.payItem)||void 0===e?void 0:e.qrcode),mode:"widthFix"},null,8,["src"])]})),_:1}),et(o,{class:"ti-pay-code-tips"},{default:tt((function(){var n;return[lt(ct(e.$t("请使用")+"".concat(null===(n=t.payItem)||void 0===n?void 0:n.name)+e.$t("扫一扫支付")),1)]})),_:1})]})),_:1})]})),_:1})]})),_:1},8,["show","confirmText","cancelText"])}}},Hr=H(Kr,[["__scopeId","data-v-fb9b87fa"]]),Wr={__name:"payment-type",props:{show:{type:Boolean,default:!1},totalPayPrice:{type:[Number,String],default:0},orderId:{type:[Number,String],default:null},memberDetail:{type:Object,default:function(){return{}}}},emits:["update:show","success"],setup:function(t,e){var n=e.emit,i=Wt(Jt()).paymentType,r=Wt(br()).isPaying,a=n,o=t,u=$(!1),s=$({}),l=$(""),c=$(0),d=function(t){var e=l.value+t;/^\d*\.?\d{0,2}$/.test(e)&&(l.value+=t)},f=function(){l.value=""},p=function(){var t=parseFloat(l.value)-parseFloat(o.totalPayPrice);return c.value=t,t>=0};at(l,(function(){p()})),at((function(){return o.totalPayPrice}),(function(){p()}));var v=$(!1),g=$([]),b=$({delivery:null,pay_type:"40",user_id:null,order_id:null}),_=$(!1),w=$(!1),D=$(!1),k=$();at((function(){return o.show}),(function(){o.show&&(g.value=[],b.value.pay_type="40",l.value="")})),at((function(){return b.value.pay_type}),(function(){o.show&&(b.value.pay_type>0||(g.value&&g.value.length>0?(b.value.pay_type=g.value[0].value,s.value=g.value[0]):Zt().then((function(t){g.value=t.data||[],b.value.pay_type=g.value[0].value,s.value=g.value[0]}))))}));var C=function(t,e){a("success",t,e)},A=function(){var t=x(y().mark((function t(){var e;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Vt({order_id:o.orderId,user_id:0});case 3:e=t.sent,C(m({order_id:o.orderId},e.data.res)),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}(),E=function(t){b.value.pay_type=t.detail.value},F=function(){var t=x(y().mark((function t(){var e,n,i,r,a;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!w.value){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,w.value=!0,t.next=6,Rr({order_id:o.orderId,is_reload_price:!0});case 6:e=t.sent,uni.showToast({title:e.msg,icon:"none"}),C(m({order_id:o.orderId},e.data.res)),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(2),null!==t.t0&&void 0!==t.t0&&null!==(n=t.t0.data)&&void 0!==n&&n.res&&null!==t.t0&&void 0!==t.t0&&null!==(i=t.t0.data)&&void 0!==i&&i.order_id&&C(m({order_id:null===t.t0||void 0===t.t0||null===(r=t.t0.data)||void 0===r?void 0:r.order_id},null===t.t0||void 0===t.t0||null===(a=t.t0.data)||void 0===a?void 0:a.res));case 14:return t.prev=14,w.value=!1,t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[2,11,14,17]])})));return function(){return t.apply(this,arguments)}}(),I=function(){var t=x(y().mark((function t(){var e,n,i,c,d,f,v,g,x,w=arguments;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=w.length>0&&void 0!==w[0]&&w[0],!_.value){t.next=3;break}return t.abrupt("return");case 3:if((c=m({},b.value)).delivery=Pt()?30:40,c.order_id=o.orderId,c.user_id=null===(e=o.memberDetail)||void 0===e?void 0:e.user_id,c.actual_price=l.value,c.pay_price=o.totalPayPrice,1!=i&&(s.value.actual_price=o.totalPayPrice),"10"!=c.pay_type||c.user_id){t.next=12;break}return t.abrupt("return",uni.showToast({title:ft("请选择会员身份以享受更多优惠，再进行余额支付"),icon:"none"}));case 12:if("40"!=c.pay_type||l.value){t.next=14;break}return t.abrupt("return",uni.showToast({title:ft("请输入实收金额"),icon:"none"}));case 14:if("40"!=c.pay_type||p()){t.next=16;break}return t.abrupt("return",uni.showToast({title:ft("实收金额不应小于应收金额"),icon:"none"}));case 16:if("40"==c.pay_type||"10"==c.pay_type||null===(n=s.value)||void 0===n||!n.qrcode||1==i){t.next=20;break}return u.value=!0,Kt(s.value,!0),t.abrupt("return");case 20:return t.prev=20,_.value=!0,t.next=24,Yt(c);case 24:d=t.sent,"40"==c.pay_type&&Gt((function(){})),uni.showToast({title:d.msg,icon:"none"}),u.value=!1,r.value=1,a("update:show",!1),C(d.data.pay_res,"handleSubmit"),t.next=36;break;case 33:t.prev=33,t.t0=t.catch(20),null!==t.t0&&void 0!==t.t0&&null!==(f=t.t0.data)&&void 0!==f&&f.res&&null!==t.t0&&void 0!==t.t0&&null!==(v=t.t0.data)&&void 0!==v&&v.order_id?(uni.showToast({title:null===t.t0||void 0===t.t0?void 0:t.t0.msg,icon:"none"}),C(m({order_id:null===t.t0||void 0===t.t0||null===(g=t.t0.data)||void 0===g?void 0:g.order_id},null===t.t0||void 0===t.t0||null===(x=t.t0.data)||void 0===x?void 0:x.res))):h(null===t.t0||void 0===t.t0?void 0:t.t0.data)&&(null===t.t0||void 0===t.t0?void 0:t.t0.data.length)>0?(D.value=!0,k.value=null===t.t0||void 0===t.t0?void 0:t.t0.data):uni.showToast({title:null===t.t0||void 0===t.t0?void 0:t.t0.msg,icon:"none"});case 36:return t.prev=36,_.value=!1,t.finish(36);case 39:case"end":return t.stop()}}),t,null,[[20,33,36,39]])})));return function(){return t.apply(this,arguments)}}(),S=function(){Kt(s.value,!1),I(!0)};return function(e,n){var r=At,p=rt,h=It,m=St,y=Tt,x=Z(G("ti-input"),ot),T=Ht,P=Z(G("ti-empty-data"),xt),B=Z(G("ti-keyboard"),ut),N=Z(G("ti-button"),pt),z=Z(G("ti-modal"),st);return Q(),X(z,{show:o.show,title:dt(ft)("結賬")},{content:tt((function(){return[et(p,{class:"ti-dialog-content"},{default:tt((function(){var e;return[et(p,{class:"ti-payment-money"},{default:tt((function(){return[et(r,{class:"ti-payment-label"},{default:tt((function(){return[lt(ct(dt(ft)("應收金額")),1)]})),_:1}),et(r,{class:"ti-payment-price"},{default:tt((function(){return[lt(ct(dt(Dt)(t.totalPayPrice)),1)]})),_:1}),et(r,{class:"ti-payment-subPrice"},{default:tt((function(){return[lt(ct(dt(kt)(t.totalPayPrice)),1)]})),_:1})]})),_:1}),et(p,{class:"ti-payment-type"},{default:tt((function(){return[et(p,{class:"ti-type-label"},{default:tt((function(){return[lt(ct(dt(ft)("收款方式")),1)]})),_:1}),et(y,{class:"ti-type-radio",onChange:E},{default:tt((function(){var t,e,n;return[1==(null===(t=dt(i))||void 0===t?void 0:t.is_cash)?(Q(),X(m,{key:0},{default:tt((function(){return[et(h,{value:"40",color:"#ffbe00",checked:"true"}),et(r,{class:"ti-radio-text"},{default:tt((function(){return[lt(ct(dt(ft)("現金")),1)]})),_:1})]})),_:1})):Et("",!0),1==(null===(e=dt(i))||void 0===e?void 0:e.is_balance)?(Q(),X(m,{key:1},{default:tt((function(){return[et(h,{value:"10",color:"#ffbe00"}),et(r,{class:"ti-radio-text"},{default:tt((function(){return[lt(ct(dt(ft)("餘額")),1)]})),_:1})]})),_:1})):Et("",!0),1==(null===(n=dt(i))||void 0===n?void 0:n.is_other)?(Q(),X(m,{key:2},{default:tt((function(){return[et(h,{value:"",color:"#ffbe00"}),et(r,{class:"ti-radio-text"},{default:tt((function(){return[lt(ct(dt(ft)("其他方式")),1)]})),_:1})]})),_:1})):Et("",!0)]})),_:1})]})),_:1}),"40"==b.value.pay_type?(Q(),X(p,{key:0,class:"ti-payment-cashier"},{default:tt((function(){return[et(x,{modelValue:l.value,"onUpdate:modelValue":n[0]||(n[0]=function(t){return l.value=t}),placeholder:dt(ft)("請輸入實收金額"),focus:!0},null,8,["modelValue","placeholder"]),et(p,{class:"ti-payment-cashier-view"},{default:tt((function(){return[et(p,{class:"ti-payment-cashier-title"},{default:tt((function(){return[lt(ct(dt(ft)("找零")),1)]})),_:1}),et(p,{class:"ti-payment-cashier-content"},{default:tt((function(){return[lt(ct(dt(Dt)(c.value>=0?c.value:0)),1)]})),_:1})]})),_:1})]})),_:1})):Et("",!0),"40"!=b.value.pay_type&&"10"!=b.value.pay_type?(Q(),X(p,{key:1,class:"ti-payment-other"},{default:tt((function(){return[et(p,{class:"ti-other-title"},{default:tt((function(){return[lt(ct(dt(ft)("用戶通過店內掃碼等方式進行支付，確認用戶支付完成後，點擊確認即可完成付款操作。")),1)]})),_:1}),g.value&&g.value.length>0?(Q(),X(p,{key:0,class:"ti-other-list"},{default:tt((function(){return[(Q(!0),vt(mt,null,gt(g.value,(function(t){return Q(),X(p,{key:t.value,class:it([{active:t.value==b.value.pay_type},"ti-other-item"]),onClick:function(e){return b.value.pay_type=t.value,s.value=t}},{default:tt((function(){return[et(p,{class:"ti-other-image"},{default:tt((function(){return[et(T,{src:dt($t)(t.img),mode:"widthFix"},null,8,["src"])]})),_:2},1024),et(p,{class:"ti-other-text"},{default:tt((function(){return[lt(ct(t.name),1)]})),_:2},1024)]})),_:2},1032,["class","onClick"])})),128))]})),_:1})):(Q(),X(P,{key:1}))]})),_:1})):Et("",!0),null!==(e=o.memberDetail)&&void 0!==e&&e.user_id?(Q(),X(p,{key:2,class:"ti-payment-member"},{default:tt((function(){return[et(p,{class:"ti-payment-top"},{default:tt((function(){return[et(p,{class:"ti-payment-top-name"},{default:tt((function(){return[lt(ct(dt(ft)("會員")),1)]})),_:1}),et(p,{class:"ti-payment-top-discomfort",onClick:A},{default:tt((function(){return[lt(ct(dt(ft)("不使用此會員")),1)]})),_:1})]})),_:1}),et(p,{class:"ti-member-list"},{default:tt((function(){return[et(p,{class:"ti-member-item"},{default:tt((function(){return[et(p,{class:"ti-member-head"},{default:tt((function(){return[lt(ct(dt(ft)("暱稱")),1)]})),_:1}),et(p,{class:"ti-member-name text-ellipsis"},{default:tt((function(){var t;return[lt(ct((null===(t=o.memberDetail)||void 0===t?void 0:t.nickName)||"-"),1)]})),_:1})]})),_:1}),et(p,{class:"ti-member-item"},{default:tt((function(){return[et(p,{class:"ti-member-head"},{default:tt((function(){return[lt(ct(dt(ft)("會員卡/等級")),1)]})),_:1}),et(p,{class:"ti-member-name text-ellipsis"},{default:tt((function(){var t,e,n,i;return[lt(ct("".concat(1!=(null===(t=o.memberDetail)||void 0===t||null===(t=t.cardRecord)||void 0===t?void 0:t.disabled)&&null!==(e=o.memberDetail)&&void 0!==e&&null!==(e=e.card)&&void 0!==e&&e.card_name?null===(n=o.memberDetail)||void 0===n||null===(n=n.card)||void 0===n?void 0:n.card_name:"-","/").concat((null===(i=o.memberDetail)||void 0===i||null===(i=i.grade)||void 0===i?void 0:i.name)||"-")),1)]})),_:1})]})),_:1}),et(p,{class:"ti-member-item"},{default:tt((function(){return[et(p,{class:"ti-member-head"},{default:tt((function(){return[lt(ct(dt(ft)("餘額")),1)]})),_:1}),et(p,{class:"ti-member-name text-ellipsis"},{default:tt((function(){var t;return[lt(ct(dt(Rt)(null===(t=o.memberDetail)||void 0===t?void 0:t.balance)||0),1)]})),_:1})]})),_:1}),et(p,{class:"ti-member-item"},{default:tt((function(){return[et(p,{class:"ti-member-head"},{default:tt((function(){return[lt(ct(dt(ft)("積分")),1)]})),_:1}),et(p,{class:"ti-member-name text-ellipsis"},{default:tt((function(){var t;return[lt(ct((null===(t=o.memberDetail)||void 0===t?void 0:t.points)||0),1)]})),_:1})]})),_:1})]})),_:1})]})),_:1})):Et("",!0),et($r,{show:v.value,"onUpdate:show":n[1]||(n[1]=function(t){return v.value=t}),orderId:o.orderId,onChange:C},null,8,["show","orderId"]),et(zr,{show:D.value,"onUpdate:show":n[2]||(n[2]=function(t){return D.value=t}),sendKitchen:k.value},null,8,["show","sendKitchen"]),et(Hr,{show:u.value,"onUpdate:show":n[3]||(n[3]=function(t){return u.value=t}),payItem:s.value,onSuccess:S},null,8,["show","payItem"])]})),_:1})]})),footer:tt((function(){return["40"==b.value.pay_type?(Q(),X(p,{key:0,class:"keyboard-back"},{default:tt((function(){return[et(B,{isExit:!1,isPrimary:!1,isDoubleZero:!0,isCross:!1,isDrop:!0,onInput:d,onClear:f})]})),_:1})):Et("",!0),et(p,{class:"ti-dialog-btn"},{default:tt((function(){return[et(N,{onClick:n[4]||(n[4]=function(t){return a("update:show",!1)})},{default:tt((function(){return[lt(ct(dt(ft)("退出")),1)]})),_:1}),et(N,{loading:w.value,onClick:F},{default:tt((function(){return[lt(ct(dt(ft)("打印")),1)]})),_:1},8,["loading"]),et(N,{onClick:n[5]||(n[5]=function(t){return v.value=!0})},{default:tt((function(){return[lt(ct(dt(ft)("会员")),1)]})),_:1}),et(N,{loading:_.value,type:"primary",onClick:I},{default:tt((function(){return[lt(ct(dt(ft)("确定")),1)]})),_:1},8,["loading"])]})),_:1})]})),_:1},8,["show","title"])}}},Jr=H(Wr,[["__scopeId","data-v-0df11180"]]),Zr=H({__name:"lock",emits:["unlock"],setup:function(t,e){var n=e.emit,i=function(){n("unlock")};return function(t,e){var n=Z(G("uni-icons"),jt),r=rt,a=Z(G("ti-button"),pt);return Q(),X(r,{class:"ti-lock-view"},{default:tt((function(){return[et(r,{class:"ti-lock-center"},{default:tt((function(){return[et(n,{"custom-prefix":"iconfont",type:"icon-lock",size:"36",color:"#FFFFFF"}),et(r,{class:"ti-lock-message"},{default:tt((function(){return[lt(ct(t.$t("核对单已打印，订单已锁定")),1)]})),_:1}),et(r,null,{default:tt((function(){return[et(a,{class:"ti-lock-unlock",type:"primary",title:t.$t("解锁"),onClick:i},null,8,["title"])]})),_:1})]})),_:1})]})),_:1})}}},[["__scopeId","data-v-9539fd08"]]),Yr={__name:"pay-result",props:{show:{type:Boolean,default:!1},payResult:{type:Object,default:function(){}}},emits:["update:show","success"],setup:function(t,e){var n=e.emit,i=t,r=$(!1),a=function(){n("update:show",!1),n("success")},o=function(){var t=x(y().mark((function t(){var e,n,a;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={order_id:null===(e=i.payResult)||void 0===e?void 0:e.order_id},t.prev=1,r.value=!0,t.next=5,Rr(n);case 5:a=t.sent,uni.showToast({title:a.msg,icon:"none"}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),uni.showToast({title:t.t0.msg,icon:"none"});case 12:return t.prev=12,r.value=!1,t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[1,9,12,15]])})));return function(){return t.apply(this,arguments)}}(),u=function(){var t=x(y().mark((function t(){var e,n,a;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={order_id:null===(e=i.payResult)||void 0===e?void 0:e.order_id},t.prev=2,r.value=!0,t.next=6,qr(n);case 6:a=t.sent,uni.showToast({title:a.msg,icon:"none"}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),uni.showToast({title:t.t0.msg,icon:"none"});case 13:return t.prev=13,r.value=!1,t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[2,10,13,16]])})));return function(){return t.apply(this,arguments)}}();return function(e,n){var s=rt,l=Z(G("ti-button"),pt),c=Z(G("ti-modal"),st);return Q(),X(c,{class:"ti-action-tips-pay",show:i.show,confirmText:e.$t("已支付"),onCancel:a},{title:tt((function(){return[et(s)]})),content:tt((function(){return[et(s,{class:"ti-pay-container"},{default:tt((function(){return[et(s,{class:"ti-pay-title-box"},{default:tt((function(){return[et(s,{class:"ti-pay-title"},{default:tt((function(){return[lt(ct("收款"))]})),_:1})]})),_:1}),et(s,{class:"ti-pay-content"},{default:tt((function(){var n;return[et(s,{class:"ti-data-other-item"},{default:tt((function(){return[et(s,{class:"ti-data-other-item-title"},{default:tt((function(){return[lt(ct(e.$t("应收金额")),1)]})),_:1}),et(s,{class:"ti-data-other-item-content-box"},{default:tt((function(){return[et(s,{class:"ti-data-other-item-content"},{default:tt((function(){var e;return[lt(ct(dt(Dt)(null===(e=t.payResult)||void 0===e?void 0:e.pay_price)),1)]})),_:1}),et(s,{class:"ti-data-other-item-sub-content"},{default:tt((function(){var e;return[lt(ct(dt(kt)(null===(e=t.payResult)||void 0===e?void 0:e.pay_price)),1)]})),_:1})]})),_:1})]})),_:1}),et(s,{class:"ti-data-other-item"},{default:tt((function(){return[et(s,{class:"ti-data-other-item-title"},{default:tt((function(){return[lt(ct(e.$t("支付方式")),1)]})),_:1}),et(s,{class:"ti-data-other-item-content-box"},{default:tt((function(){return[et(s,{class:"ti-data-other-item-content"},{default:tt((function(){var e,n,i;return[lt(ct((null===(e=t.payResult)||void 0===e||null===(e=e.pay_type)||void 0===e?void 0:e.text.length)>8?(null===(n=t.payResult)||void 0===n||null===(n=n.pay_type)||void 0===n?void 0:n.text.slice(0,10))+"...":null===(i=t.payResult)||void 0===i||null===(i=i.pay_type)||void 0===i?void 0:i.text),1)]})),_:1})]})),_:1})]})),_:1}),et(s,{class:"ti-data-other-item"},{default:tt((function(){return[et(s,{class:"ti-data-other-item-title"},{default:tt((function(){return[lt(ct(e.$t("实收金额")),1)]})),_:1}),et(s,{class:"ti-data-other-item-content-box"},{default:tt((function(){return[et(s,{class:"ti-data-other-item-content"},{default:tt((function(){var e;return[lt(ct(dt(Dt)(null===(e=t.payResult)||void 0===e?void 0:e.actual_price)),1)]})),_:1}),et(s,{class:"ti-data-other-item-sub-content"},{default:tt((function(){var e;return[lt(ct(dt(kt)(null===(e=t.payResult)||void 0===e?void 0:e.actual_price)),1)]})),_:1})]})),_:1})]})),_:1}),40==(null===(n=t.payResult)||void 0===n||null===(n=n.pay_type)||void 0===n?void 0:n.value)?(Q(),X(s,{key:0,class:"ti-data-other-item"},{default:tt((function(){return[et(s,{class:"ti-data-other-item-title"},{default:tt((function(){return[lt(ct(e.$t("找零")),1)]})),_:1}),et(s,{class:"ti-data-other-item-content-box"},{default:tt((function(){return[et(s,{class:"ti-data-other-item-content"},{default:tt((function(){var e;return[lt(ct(dt(Dt)(null===(e=t.payResult)||void 0===e?void 0:e.change_due)),1)]})),_:1}),et(s,{class:"ti-data-other-item-sub-content"},{default:tt((function(){var e;return[lt(ct(dt(kt)(null===(e=t.payResult)||void 0===e?void 0:e.change_due)),1)]})),_:1})]})),_:1})]})),_:1})):Et("",!0)]})),_:1})]})),_:1})]})),footer:tt((function(){return[et(s,{class:"ti-dialog-btn"},{default:tt((function(){return[et(l,{onClick:a},{default:tt((function(){return[lt(ct(e.$t("退出")),1)]})),_:1}),et(l,{loading:r.value,onClick:o},{default:tt((function(){return[lt(ct(e.$t("打印小票")),1)]})),_:1},8,["loading"]),et(l,{loading:r.value,type:"primary",onClick:u},{default:tt((function(){return[lt(ct(e.$t("发票")),1)]})),_:1},8,["loading"])]})),_:1})]})),_:1},8,["show","confirmText"])}}},Gr=H(Yr,[["__scopeId","data-v-aec3a359"]]),Qr={__name:"cart-list",setup:function(t,e){var n=this,i=e.expose,r=Wt(br()),a=r.cashierIsLock,o=r.isPaying,u=Wt(Qt()).pathName,s=$(),l=$(!1),c=$(!1),d=$({}),f=$(0),p=$({}),h=$({}),v=$([]),g=$(),b=$({}),_=$(),w=$(0),D=$(0),k=$(!1),C=$({}),A=function(){o.value=0,k.value=!1,re(),O({})},E=function(t,e){"handleSubmit"==e?(k.value=!0,C.value=t):O(t,e)},F=function(){var t=x(y().mark((function t(){var e;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(g.value<=0)){t.next=2;break}return t.abrupt("return",uni.showToast({title:ft("订单ID不存在"),icon:"none"}));case 2:return t.prev=2,t.next=5,vr({order_id:g.value});case 5:e=t.sent,uni.showToast({title:e.msg,icon:"none"}),O(e.data.res),t.next=12;break;case 10:t.prev=10,t.t0=t.catch(2);case 12:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(){return t.apply(this,arguments)}}(),I=$(0),S=$(!1),T=$(""),P=$([]),B=function(){var t=x(y().mark((function t(){var e,n;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={order_id:g.value},t.prev=1,t.next=4,gr(e);case 4:n=t.sent,I.value=n.code,null!=n&&n.data&&(null==n?void 0:n.data.length)>0?(P.value=null==n?void 0:n.data,T.value=null==n?void 0:n.msg,S.value=!0):l.value=!0,t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),I.value=null===t.t0||void 0===t.t0?void 0:t.t0.code,null!==t.t0&&void 0!==t.t0&&t.t0.data&&(null===t.t0||void 0===t.t0?void 0:t.t0.data.length)>0?(P.value=null===t.t0||void 0===t.t0?void 0:t.t0.data,T.value=null===t.t0||void 0===t.t0?void 0:t.t0.msg,S.value=!0):uni.showToast({title:null===t.t0||void 0===t.t0?void 0:t.t0.msg,icon:"none"});case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(){return t.apply(this,arguments)}}(),N=function(){1==I.value&&(l.value=!0)},z=function(){var t=x(y().mark((function t(e,n){var i,r,a,u;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(i=m({},h.value)).order_id=Mt(),t.prev=2,e&&(c.value=!0),t.next=6,rr(i);case 6:if(u=t.sent,(null===(r=u.data)||void 0===r?void 0:r.order_id)&&Ct(u.data.order_id),1!=o.value){t.next=10;break}return t.abrupt("return");case 10:O(null===(a=u.data)||void 0===a?void 0:a.allProductInfo,n),t.next=15;break;case 13:t.prev=13,t.t0=t.catch(2);case 15:return t.prev=15,e&&(c.value=!1),t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[2,13,15,18]])})));return function(e,n){return t.apply(this,arguments)}}(),O=function(t,e){var n,i,r;(a.value=(null==t||null===(n=t.orderInfo)||void 0===n?void 0:n.is_lock)||0,b.value={discount_ratio:null==t||null===(i=t.orderInfo)||void 0===i?void 0:i.discount_ratio},p.value=(null==t?void 0:t.sumInfo)||{},D.value--,D.value<0&&(D.value=0),0==D.value)&&(v.value=(null==t||null===(r=t.orderInfo)||void 0===r?void 0:r.product)||[]);if(v.value&&v.value.length>0){var o,l=0;"delete"==e?l=f.value-1:"add"==e?l=v.value.length-1:null!==(o=d.value)&&void 0!==o&&o.order_product_id&&(l=v.value.findIndex((function(t){var e;return t.order_product_id==(null===(e=d.value)||void 0===e?void 0:e.order_product_id)}))),d.value=v.value[Math.max(l,0)],f.value=Math.max(l,0),s.value=null==t?void 0:t.userInfo,g.value=Mt(),"index"==u.value&&(_.value&&clearTimeout(_.value),_.value=setTimeout((function(){D.value=0,z()}),6e3))}else d.value=null,s.value=null,g.value=null,re();"index"==u.value&&ee(ne(p.value),ne(v.value))};return Xt((function(){_.value&&clearTimeout(_.value)})),te("mini-cashier",(function(t){"index"==t&&ee(ne(p.value),ne(v.value))})),at((function(){return u.value}),(function(){"index"==u.value?z(!0):_.value&&clearTimeout(_.value)}),{immediate:!0}),at((function(){return v.value}),function(){var t=x(y().mark((function t(e,i){return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.length>i.length)){t.next=4;break}return t.next=3,ie();case 3:ie((function(){ae().in(n).select("#ti-cart-scroll").fields({size:!0,scrollOffset:!0},(function(t){w.value=t.scrollHeight-t.height})).exec()}));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),i({handleResultCart:O,handleAddCart:function(t,e){D.value++;var n=v.value;n.push(e),v.value=n},getCartData:z,handleError:function(){D.value>0&&v.value.pop();D.value--,D.value<0&&(D.value=0)}}),function(t,e){var n,i,r=rt,o=Z(G("ti-loading"),_t),u=At,h=Z(G("ti-empty-data"),xt),m=bt,y=Lt,_=Bt("permission");return Q(),vt(mt,null,[et(r,{class:"ti-cart-box"},{default:tt((function(){return[et(r,{class:"ti-cart-list"},{default:tt((function(){return[et(r,{class:"ti-cart-head"},{default:tt((function(){return[et(r,{class:"ti-cart-shop-head"},{default:tt((function(){return[et(r,{class:"ti-shop-head-title"},{default:tt((function(){return[lt(ct(dt(ft)("商品名稱")),1)]})),_:1}),et(r,{class:"ti-shop-head-money"},{default:tt((function(){return[lt(ct(dt(ft)("数量")),1)]})),_:1}),et(r,{class:"ti-shop-head-num"},{default:tt((function(){return[et(r),et(r,null,{default:tt((function(){return[lt(ct(dt(ft)("小计")),1)]})),_:1})]})),_:1})]})),_:1})]})),_:1}),et(r,{class:"ti-shop-list"},{default:tt((function(){return[et(m,{id:"ti-cart-scroll","scroll-y":"","enable-flex":"","scroll-with-animation":"","scroll-top":w.value},{default:tt((function(){return[c.value?(Q(),X(o,{key:0})):v.value&&v.value.length>0?(Q(),X(r,{key:1,class:"ti-shop-box"},{default:tt((function(){return[(Q(!0),vt(mt,null,gt(v.value,(function(t,e){var n;return Q(),X(r,{key:t,class:it([{active:(null===(n=d.value)||void 0===n?void 0:n.order_product_id)==(null==t?void 0:t.order_product_id)},"ti-shop-item"]),onClick:function(n){return function(t,e){var n;(null===(n=d.value)||void 0===n?void 0:n.order_product_id)!=(null==t?void 0:t.order_product_id)&&(d.value=t,f.value=e)}(t,e)}},{default:tt((function(){return[et(r,{class:"ti-shop-item-box"},{default:tt((function(){return[et(r,{class:"ti-shop-body"},{default:tt((function(){return[et(r,{class:"ti-shop-body-top"},{default:tt((function(){return[et(r,{class:"ti-shop-title text-ellipsis"},{default:tt((function(){return[lt(ct(t.product_name_text||t.product_name),1)]})),_:2},1024),t.product_attr?(Q(),X(r,{key:0,class:"ti-shop-spec"},{default:tt((function(){return[lt("( "+ct(t.product_attr)+" )",1)]})),_:2},1024)):Et("",!0)]})),_:2},1024),et(jr,{productItem:t,onChange:O},null,8,["productItem"]),et(r,{class:"ti-shop-body-money"},{default:tt((function(){return[et(u,{class:"ti-shop-price"},{default:tt((function(){return[lt(ct(dt(Dt)((null==t?void 0:t.total_product_price)||0)),1)]})),_:2},1024),et(u,{class:"ti-shop-subPrice"},{default:tt((function(){return[lt(ct(dt(kt)((null==t?void 0:t.total_product_price)||0)),1)]})),_:2},1024)]})),_:2},1024)]})),_:2},1024),t.remark?(Q(),X(r,{key:0,class:"ti-shop-remark"},{default:tt((function(){return[lt(ct(t.remark),1)]})),_:2},1024)):Et("",!0)]})),_:2},1024)]})),_:2},1032,["class","onClick"])})),128))]})),_:1})):(Q(),X(h,{key:2}))]})),_:1},8,["scroll-top"])]})),_:1}),1==dt(a)?(Q(),X(Zr,{key:0,onUnlock:F})):Et("",!0)]})),_:1}),et(r,{class:"ti-cart-statistics"},{default:tt((function(){return[et(r,{class:"ti-cart-total"},{default:tt((function(){return[et(u,{class:"ti-total-text"},{default:tt((function(){return[lt(ct(dt(ft)("商品金额:")),1)]})),_:1}),et(u,{class:"ti-total-price"},{default:tt((function(){var t;return[lt(ct(dt(Dt)((null===(t=p.value)||void 0===t?void 0:t.subtotal)||0)),1)]})),_:1}),et(u,{class:"ti-total-subPrice"},{default:tt((function(){var t;return[lt(ct(dt(kt)((null===(t=p.value)||void 0===t?void 0:t.subtotal)||0)),1)]})),_:1})]})),_:1}),et(r,{class:"ti-cart-discount"},{default:tt((function(){return[et(r,{class:"ti-discount-item"},{default:tt((function(){return[et(r,null,{default:tt((function(){return[et(u,{class:"ti-discount-text"},{default:tt((function(){return[lt(ct(dt(ft)("服務費:")),1)]})),_:1}),et(u,{class:"ti-discount-price"},{default:tt((function(){var t;return[lt(ct(dt(Dt)((null===(t=p.value)||void 0===t?void 0:t.service_money)||0)),1)]})),_:1}),et(u,{class:"ti-discount-subPrice"},{default:tt((function(){var t;return[lt(ct(dt(kt)((null===(t=p.value)||void 0===t?void 0:t.service_money)||0)),1)]})),_:1})]})),_:1}),et(r,null,{default:tt((function(){var t;return[et(u,{class:"ti-discount-text"},{default:tt((function(){return[lt(ct(dt(ft)("優惠折扣:")),1)]})),_:1}),et(u,{class:"ti-discount-price"},{default:tt((function(){var t;return[lt(ct("-".concat(dt(Dt)((null===(t=p.value)||void 0===t?void 0:t.special_discount)||0))),1)]})),_:1}),dt(kt)((null===(t=p.value)||void 0===t?void 0:t.special_discount)||0)?(Q(),X(u,{key:0,class:"ti-discount-subPrice"},{default:tt((function(){var t;return[lt(ct("-".concat(dt(kt)((null===(t=p.value)||void 0===t?void 0:t.special_discount)||0))),1)]})),_:1})):Et("",!0)]})),_:1})]})),_:1}),et(r,{class:"ti-discount-item"},{default:tt((function(){return[et(r,null,{default:tt((function(){return[et(u,{class:"ti-discount-text"},{default:tt((function(){return[lt(ct(dt(ft)("消費稅:")),1)]})),_:1}),et(u,{class:"ti-discount-price"},{default:tt((function(){var t;return[lt(ct(dt(Dt)((null===(t=p.value)||void 0===t?void 0:t.total_consumption_tax_money)||0)),1)]})),_:1}),et(u,{class:"ti-discount-subPrice"},{default:tt((function(){var t;return[lt(ct(dt(kt)((null===(t=p.value)||void 0===t?void 0:t.total_consumption_tax_money)||0)),1)]})),_:1})]})),_:1}),et(r,null,{default:tt((function(){var t;return[et(u,{class:"ti-discount-text"},{default:tt((function(){return[lt(ct(dt(ft)("會員折扣:")),1)]})),_:1}),et(u,{class:"ti-discount-price"},{default:tt((function(){var t;return[lt(ct("-".concat(dt(Dt)((null===(t=p.value)||void 0===t?void 0:t.total_user_discount_money)||0))),1)]})),_:1}),dt(kt)((null===(t=p.value)||void 0===t?void 0:t.total_user_discount_money)||0)?(Q(),X(u,{key:0,class:"ti-discount-subPrice"},{default:tt((function(){var t;return[lt(ct("-".concat(dt(kt)((null===(t=p.value)||void 0===t?void 0:t.total_user_discount_money)||0))),1)]})),_:1})):Et("",!0)]})),_:1})]})),_:1})]})),_:1}),et(r,{class:"ti-cart-settlement"},{default:tt((function(){var t,e;return[et(r,{class:"ti-settlement-total"},{default:tt((function(){return[et(u,{class:"ti-settlement-text"},{default:tt((function(){return[lt(ct(dt(ft)("合计应收：")),1)]})),_:1}),et(u,{class:"ti-settlement-price"},{default:tt((function(){var t;return[lt(ct(dt(Dt)((null===(t=p.value)||void 0===t?void 0:t.total_pay_price)||0)),1)]})),_:1}),et(u,{class:"ti-settlement-subPrice"},{default:tt((function(){var t;return[lt(ct(dt(kt)((null===(t=p.value)||void 0===t?void 0:t.total_pay_price)||0)),1)]})),_:1})]})),_:1}),Nt((Q(),X(y,{class:"ti-settlement-btn",disabled:!(null!==(t=p.value)&&void 0!==t&&t.total_num)||(null===(e=p.value)||void 0===e?void 0:e.total_num)<=0,onClick:B},{default:tt((function(){var t;return[et(u,null,{default:tt((function(){return[lt(ct(dt(ft)("結賬")),1)]})),_:1}),(null===(t=p.value)||void 0===t?void 0:t.total_num)>0?(Q(),X(u,{key:0,class:"ti-settlement-badge"},{default:tt((function(){var t;return[lt(ct(null===(t=p.value)||void 0===t?void 0:t.total_num),1)]})),_:1})):Et("",!0)]})),_:1},8,["disabled"])),[[_,["cashier_cash_settle"]]])]})),_:1})]})),_:1})]})),_:1}),et(Mr,{productItem:d.value,orderId:g.value,preferentialData:b.value,totalPayPrice:null===(n=p.value)||void 0===n?void 0:n.total_pay_price,orderList:v.value,isLock:dt(a),onSuccess:O},null,8,["productItem","orderId","preferentialData","totalPayPrice","orderList","isLock"]),et(Jr,{show:l.value,"onUpdate:show":e[0]||(e[0]=function(t){return l.value=t}),orderId:g.value,totalPayPrice:null===(i=p.value)||void 0===i?void 0:i.total_pay_price,memberDetail:s.value,onSuccess:E},null,8,["show","orderId","totalPayPrice","memberDetail"]),et(Gr,{show:k.value,"onUpdate:show":e[1]||(e[1]=function(t){return k.value=t}),payResult:C.value,onSuccess:A},null,8,["show","payResult"]),et(zr,{show:S.value,"onUpdate:show":e[2]||(e[2]=function(t){return S.value=t}),cancelShow:!0,sendKitchen:P.value,msg:T.value,onConfirm:N},null,8,["show","sendKitchen","msg"])],64)}}},Xr=H(Qr,[["__scopeId","data-v-c38115f5"]]),ta={__name:"ti-category",props:{scrollLeft:{type:Number,default:0},scrollInterval:{type:Number,default:200},threshold:{type:Number,default:5}},setup:function(t,e){var n=this,i=e.expose,r=t,a=$(0),o=$(!1),u=$(!1),s=$(0),l=$(0),c=$("ti-".concat(oe(16)));at((function(){return r.scrollLeft}),(function(){a.value=r.scrollLeft}));var d=Qi((function(t){a.value=t.detail.scrollLeft,o.value=r.threshold<t.detail.scrollLeft,u.value=l.value+t.detail.scrollLeft<t.detail.scrollWidth-r.threshold}),300),f=function(){o.value=!1},p=function(){u.value=!1},h=function(t){var e=0;"left"==t?e=a.value-r.scrollInterval:"right"==t&&(e=a.value+r.scrollInterval);var n=s.value-l.value;a.value=Math.min(n,Math.max(e,0))},v=function(){var t=x(y().mark((function t(){return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ie();case 2:ae().in(n).select("#".concat(c.value)).fields({size:!0,scrollOffset:!0},(function(t){t&&(a.value=(null==t?void 0:t.scrollLeft)||0,l.value=(null==t?void 0:t.width)||0,s.value=(null==t?void 0:t.scrollWidth)||0,u.value=s.value>l.value+a.value,o.value=r.threshold<a.value)})).exec();case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return ue((function(){v(),window.addEventListener("resize",v)})),Xt((function(){window.removeEventListener("resize",v)})),i({getScrollWidth:v}),function(t,e){var n=Z(G("uni-icons"),jt),i=rt,s=bt;return Q(),X(i,{class:"ti-category-box"},{default:tt((function(){return[o.value?(Q(),X(i,{key:0,class:"ti-category-left",onClick:e[0]||(e[0]=function(t){return h("left")})},{default:tt((function(){return[et(i,{class:"ti-category-btn"},{default:tt((function(){return[et(n,{type:"left",size:"14",color:"#100A05"})]})),_:1})]})),_:1})):Et("",!0),et(s,{id:c.value,class:"ti-category","scroll-left":a.value,"scroll-x":"","enable-flex":"","scroll-with-animation":"","upper-threshold":r.threshold,"lower-threshold":r.threshold,onScrolltoupper:f,onScrolltolower:p,onScroll:dt(d)},{default:tt((function(){return[se(t.$slots,"default",{},void 0,!0)]})),_:3},8,["id","scroll-left","upper-threshold","lower-threshold","onScroll"]),u.value?(Q(),X(i,{key:1,class:"ti-category-right",onClick:e[1]||(e[1]=function(t){return h("right")})},{default:tt((function(){return[et(i,{class:"ti-category-btn"},{default:tt((function(){return[et(n,{type:"right",size:"14",color:"#100A05"})]})),_:1})]})),_:1})):Et("",!0)]})),_:3})}}},ea=H(ta,[["__scopeId","data-v-13cf2c63"]]),na={__name:"dish-menu",props:{list:{type:Array,default:function(){return[]}},menuId:{type:Number,default:null},defaultIndex:{type:Number,default:0}},emits:["update:menuId"],setup:function(t,e){var n=this,i=e.emit,r=Wt(Qt()).pathName,a=i,o=t,u=$(0),s=$(o.defaultIndex),l=$([]),c=$(),d=function(){var t,e;if(o.list&&0!=o.list.length&&"index"==r.value){var i=ae().in(n);null===(t=o.list)||void 0===t||t.map((function(t,e){i.select("#scroll-index-".concat(e)).boundingClientRect((function(t){if(t){var n=l.value;n[e]=t.width+10,l.value=n}})).exec()})),f(s.value),null===(e=c.value)||void 0===e||e.getScrollWidth()}};at((function(){return r.value}),x(y().mark((function t(){return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ie();case 2:d();case 3:case"end":return t.stop()}}),t)}))),{deep:!0,immediate:!0}),at((function(){return o.list}),x(y().mark((function t(){return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ie();case 2:d();case 3:case"end":return t.stop()}}),t)}))),{deep:!0,immediate:!0});var f=function(t){s.value=t,u.value=l.value.slice(0,t+1).reduce((function(t,e){return t+e}),0)-(l.value[t]+100),a("update:menuId",o.list[t].category_id)};return function(t,e){var n=At,i=rt,r=Z(G("ti-category"),ea);return Q(),X(i,{class:"ti-dish-menu"},{default:tt((function(){return[o.list&&o.list.length>0?(Q(),X(r,{key:0,ref_key:"scrollRef",ref:c,scrollLeft:u.value},{default:tt((function(){return[et(i,{class:"ti-menu-content"},{default:tt((function(){return[(Q(!0),vt(mt,null,gt(o.list,(function(t,e){return Q(),X(i,{key:e,class:it(["ti-menu-item",{active:e==s.value}]),id:"scroll-index-".concat(e),onClick:function(t){return f(e)}},{default:tt((function(){return[et(n,{class:"ti-menu-title"},{default:tt((function(){return[lt(ct(t.name[dt(Ft)()]||t.name_text),1)]})),_:2},1024)]})),_:2},1032,["id","class","onClick"])})),128))]})),_:1})]})),_:1},8,["scrollLeft"])):Et("",!0)]})),_:1})}}},ia=H(na,[["__scopeId","data-v-39379e9b"]]),ra={__name:"dish-category",props:{categoryId:{type:Number,default:null}},emits:["update:categoryId","update:isSpecial"],setup:function(t,e){var n=e.emit,i=le(),r=Wt(i).categoryList,a=n,o=$(),u=$(0),s=$(0),l=yt((function(){var t=(r.value.find((function(t){return t.category_id==u.value}))||{}).child||[];return t&&t.length>0&&(t=[ce].concat(t)),t})),c=yt((function(){return r.value.find((function(t){return t.category_id==u.value}))})),d=yt((function(){return l.value.find((function(t){return t.category_id==s.value}))}));at((function(){return u.value}),(function(){var t,e;a("update:isSpecial",null===(t=c.value)||void 0===t?void 0:t.is_special),a("update:categoryId",u.value),l.value&&l.value.length>0&&(s.value=l.value[0].category_id,f(s.value)),null===(e=o.value)||void 0===e||e.getScrollWidth()}));var f=function(t){var e;s.value=t,a("update:isSpecial",null===(e=d.value)||void 0===e?void 0:e.is_special),a("update:categoryId",s.value>0?s.value:u.value)};return null==i||i.getCategory(),function(t,e){var n=rt,i=Z(G("ti-category"),ea);return Q(),X(n,{class:"ti-category-content"},{default:tt((function(){return[et(ia,{list:dt(r),menuId:u.value,"onUpdate:menuId":e[0]||(e[0]=function(t){return u.value=t})},null,8,["list","menuId"]),l.value&&l.value.length>0?(Q(),X(n,{key:0,class:"ti-dish-secondary"},{default:tt((function(){return[et(i,{ref_key:"categoryRef",ref:o},{default:tt((function(){return[et(n,{class:"ti-secondary-box"},{default:tt((function(){return[(Q(!0),vt(mt,null,gt(l.value,(function(t,e){return Q(),X(n,{key:e,class:it([{active:t.category_id==s.value},"ti-secondary-item"]),onClick:function(e){return f(t.category_id)}},{default:tt((function(){return[lt(ct(t.name[dt(Ft)()]||t.name_text),1)]})),_:2},1032,["class","onClick"])})),128))]})),_:1})]})),_:1},512)]})),_:1})):Et("",!0)]})),_:1})}}},aa=H(ra,[["__scopeId","data-v-14066009"]]);function oa(){return oa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},oa.apply(this,arguments)}var ua={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null};function sa(t){return"number"==typeof t}function la(t){return!(!t||"object"!==w(t)||"function"!=typeof t.constructor)&&(!0===t.isBigNumber&&"object"===w(t.constructor.prototype)&&!0===t.constructor.prototype.isBigNumber||"function"==typeof t.constructor.isDecimal&&!0===t.constructor.isDecimal(t))}function ca(t){return t&&"object"===w(t)&&!0===Object.getPrototypeOf(t).isComplex||!1}function da(t){return t&&"object"===w(t)&&!0===Object.getPrototypeOf(t).isFraction||!1}function fa(t){return t&&!0===t.constructor.prototype.isUnit||!1}function pa(t){return"string"==typeof t}var ha=Array.isArray;function va(t){return t&&!0===t.constructor.prototype.isMatrix||!1}function ma(t){return Array.isArray(t)||va(t)}function ga(t){return t&&t.isDenseMatrix&&!0===t.constructor.prototype.isMatrix||!1}function ba(t){return t&&t.isSparseMatrix&&!0===t.constructor.prototype.isMatrix||!1}function ya(t){return t&&!0===t.constructor.prototype.isRange||!1}function _a(t){return t&&!0===t.constructor.prototype.isIndex||!1}function xa(t){return"boolean"==typeof t}function wa(t){return t&&!0===t.constructor.prototype.isResultSet||!1}function Da(t){return t&&!0===t.constructor.prototype.isHelp||!1}function ka(t){return"function"==typeof t}function Ca(t){return t instanceof Date}function Aa(t){return t instanceof RegExp}function Ea(t){return!(!t||"object"!==w(t)||t.constructor!==Object||ca(t)||da(t))}function Fa(t){return null===t}function Ia(t){return void 0===t}function Sa(t){return t&&!0===t.isAccessorNode&&!0===t.constructor.prototype.isNode||!1}function Ta(t){return t&&!0===t.isArrayNode&&!0===t.constructor.prototype.isNode||!1}function Pa(t){return t&&!0===t.isAssignmentNode&&!0===t.constructor.prototype.isNode||!1}function Ba(t){return t&&!0===t.isBlockNode&&!0===t.constructor.prototype.isNode||!1}function Na(t){return t&&!0===t.isConditionalNode&&!0===t.constructor.prototype.isNode||!1}function za(t){return t&&!0===t.isConstantNode&&!0===t.constructor.prototype.isNode||!1}function Oa(t){return t&&!0===t.isFunctionAssignmentNode&&!0===t.constructor.prototype.isNode||!1}function Ma(t){return t&&!0===t.isFunctionNode&&!0===t.constructor.prototype.isNode||!1}function La(t){return t&&!0===t.isIndexNode&&!0===t.constructor.prototype.isNode||!1}function ja(t){return t&&!0===t.isNode&&!0===t.constructor.prototype.isNode||!1}function Ua(t){return t&&!0===t.isObjectNode&&!0===t.constructor.prototype.isNode||!1}function Ra(t){return t&&!0===t.isOperatorNode&&!0===t.constructor.prototype.isNode||!1}function qa(t){return t&&!0===t.isParenthesisNode&&!0===t.constructor.prototype.isNode||!1}function Va(t){return t&&!0===t.isRangeNode&&!0===t.constructor.prototype.isNode||!1}function $a(t){return t&&!0===t.isRelationalNode&&!0===t.constructor.prototype.isNode||!1}function Ka(t){return t&&!0===t.isSymbolNode&&!0===t.constructor.prototype.isNode||!1}function Ha(t){return t&&!0===t.constructor.prototype.isChain||!1}function Wa(t){var e=w(t);return"object"===e?null===t?"null":la(t)?"BigNumber":t.constructor&&t.constructor.name?t.constructor.name:"Object":e}function Ja(t){var e=w(t);if("number"===e||"string"===e||"boolean"===e||null==t)return t;if("function"==typeof t.clone)return t.clone();if(Array.isArray(t))return t.map((function(t){return Ja(t)}));if(t instanceof Date)return new Date(t.valueOf());if(la(t))return t;if(Ea(t))return function(t,e){var n={};for(var i in t)Ya(t,i)&&(n[i]=e(t[i]));return n}(t,Ja);throw new TypeError("Cannot clone: unknown type of value (value: ".concat(t,")"))}function Za(t,e){var n,i,r;if(Array.isArray(t)){if(!Array.isArray(e))return!1;if(t.length!==e.length)return!1;for(i=0,r=t.length;i<r;i++)if(!Za(t[i],e[i]))return!1;return!0}if("function"==typeof t)return t===e;if(t instanceof Object){if(Array.isArray(e)||!(e instanceof Object))return!1;for(n in t)if(!(n in e)||!Za(t[n],e[n]))return!1;for(n in e)if(!(n in t))return!1;return!0}return t===e}function Ya(t,e){return t&&Object.hasOwnProperty.call(t,e)}var Ga=function(t){if(t)throw new Error("The global config is readonly. \nPlease create a mathjs instance if you want to change the default configuration. \nExample:\n\n  import { create, all } from 'mathjs';\n  const mathjs = create(all);\n  mathjs.config({ number: 'BigNumber' });\n");return Object.freeze(ua)};function Qa(){return!0}function Xa(){return!1}function to(){}oa(Ga,ua,{MATRIX_OPTIONS:["Matrix","Array"],NUMBER_OPTIONS:["number","BigNumber","Fraction"]});var eo="Argument is not a typed-function.";var no=function t(){function e(t){return"object"===w(t)&&null!==t&&t.constructor===Object}var n,i,r=[{name:"number",test:function(t){return"number"==typeof t}},{name:"string",test:function(t){return"string"==typeof t}},{name:"boolean",test:function(t){return"boolean"==typeof t}},{name:"Function",test:function(t){return"function"==typeof t}},{name:"Array",test:Array.isArray},{name:"Date",test:function(t){return t instanceof Date}},{name:"RegExp",test:function(t){return t instanceof RegExp}},{name:"Object",test:e},{name:"null",test:function(t){return null===t}},{name:"undefined",test:function(t){return void 0===t}}],a={name:"any",test:Qa,isAny:!0},o=0,u={createCount:0};function s(t){var e=n.get(t);if(e)return e;var r,a,o='Unknown type "'+t+'"',u=t.toLowerCase(),s=f(i);try{for(s.s();!(a=s.n()).done;)if((r=a.value).toLowerCase()===u){o+='. Did you mean "'+r+'" ?';break}}catch(l){s.e(l)}finally{s.f()}throw new TypeError(o)}function l(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"any",r=e?s(e).index:i.length,a=[],o=0;o<t.length;++o){if(!t[o]||"string"!=typeof t[o].name||"function"!=typeof t[o].test)throw new TypeError("Object with properties {name: string, test: function} expected");var u=t[o].name;if(n.has(u))throw new TypeError('Duplicate type name "'+u+'"');a.push(u),n.set(u,{name:u,test:t[o].test,isAny:t[o].isAny,index:r+o,conversionsTo:[]})}var l=i.slice(r);i=i.slice(0,r).concat(a).concat(l);for(var c=r+a.length;c<i.length;++c)n.get(i[c]).index=c}function c(){n=new Map,i=[],o=0,l([a],!1)}function d(t){var e=i.filter((function(e){var i=n.get(e);return!i.isAny&&i.test(t)}));return e.length?e:["any"]}function p(t){return t&&"function"==typeof t&&"_typedFunctionData"in t}function h(t,e,n){if(!p(t))throw new TypeError(eo);var i=n&&n.exact,r=y(Array.isArray(e)?e.join(","):e),a=v(r);if(!i||a in t.signatures){var o=t._typedFunctionData.signatureMap.get(a);if(o)return o}var u,s,l,c=r.length;if(i)for(s in u=[],t.signatures)u.push(t._typedFunctionData.signatureMap.get(s));else u=t._typedFunctionData.signatures;for(var d=0;d<c;++d){var h,m=r[d],g=[],_=void 0,x=f(u);try{var w=function(){var t=k((_=h.value).params,d);if(!t||m.restParam&&!t.restParam)return 0;if(!t.hasAny){var e=b(t);if(m.types.some((function(t){return!e.has(t.name)})))return 0}g.push(_)};for(x.s();!(h=x.n()).done;)w()}catch(A){x.e(A)}finally{x.f()}if(0===(u=g).length)break}var D,C=f(u);try{for(C.s();!(D=C.n()).done;)if((l=D.value).params.length<=c)return l}catch(A){C.e(A)}finally{C.f()}throw new TypeError("Signature not found (signature: "+(t.name||"unnamed")+"("+v(r,", ")+"))")}function v(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";return t.map((function(t){return t.name})).join(e)}function m(t){var e=0===t.indexOf("..."),n=(e?t.length>3?t.slice(3):"any":t).split("|").map((function(t){return s(t.trim())})),i=!1,r=e?"...":"";return{types:n.map((function(t){return i=t.isAny||i,r+=t.name+"|",{name:t.name,typeIndex:t.index,test:t.test,isAny:t.isAny,conversion:null,conversionIndex:-1}})),name:r.slice(0,-1),hasAny:i,hasConversion:!1,restParam:e}}function g(t){var e=t.types.map((function(t){return t.name})),n=function(t){if(0===t.length)return[];var e=t.map(s);t.length>1&&e.sort((function(t,e){return t.index-e.index}));var n=e[0].conversionsTo;if(1===t.length)return n;n=n.concat([]);for(var i=new Set(t),r=1;r<e.length;++r){var a,o=void 0,u=f(e[r].conversionsTo);try{for(u.s();!(a=u.n()).done;)o=a.value,i.has(o.from)||(n.push(o),i.add(o.from))}catch(l){u.e(l)}finally{u.f()}}return n}(e),i=t.hasAny,r=t.name,a=n.map((function(t){var e=s(t.from);return i=e.isAny||i,r+="|"+t.from,{name:t.from,typeIndex:e.index,test:e.test,isAny:e.isAny,conversion:t,conversionIndex:t.index}}));return{types:t.types.concat(a),name:r,hasAny:i,hasConversion:a.length>0,restParam:t.restParam}}function b(t){return t.typeSet||(t.typeSet=new Set,t.types.forEach((function(e){return t.typeSet.add(e.name)}))),t.typeSet}function y(t){var e=[];if("string"!=typeof t)throw new TypeError("Signatures must be strings");var n=t.trim();if(""===n)return e;for(var i=n.split(","),r=0;r<i.length;++r){var a=m(i[r].trim());if(a.restParam&&r!==i.length-1)throw new SyntaxError('Unexpected rest parameter "'+i[r]+'": only allowed for the last parameter');if(0===a.types.length)return null;e.push(a)}return e}function _(t){var e=R(t);return!!e&&e.restParam}function x(t){if(t&&0!==t.types.length){if(1===t.types.length)return s(t.types[0].name).test;if(2===t.types.length){var e=s(t.types[0].name).test,n=s(t.types[1].name).test;return function(t){return e(t)||n(t)}}var i=t.types.map((function(t){return s(t.name).test}));return function(t){for(var e=0;e<i.length;e++)if(i[e](t))return!0;return!1}}return Qa}function D(t){var e,n,i;if(_(t)){var r=(e=U(t).map(x)).length,a=x(R(t));return function(t){for(var n=0;n<e.length;n++)if(!e[n](t[n]))return!1;return function(t){for(var e=r;e<t.length;e++)if(!a(t[e]))return!1;return!0}(t)&&t.length>=r+1}}return 0===t.length?function(t){return 0===t.length}:1===t.length?(n=x(t[0]),function(t){return n(t[0])&&1===t.length}):2===t.length?(n=x(t[0]),i=x(t[1]),function(t){return n(t[0])&&i(t[1])&&2===t.length}):(e=t.map(x),function(t){for(var n=0;n<e.length;n++)if(!e[n](t[n]))return!1;return t.length===e.length})}function k(t,e){return e<t.length?t[e]:_(t)?R(t):null}function C(t,e){var n=k(t,e);return n?b(n):new Set}function A(t){return null===t.conversion||void 0===t.conversion}function E(t,e){var n=new Set;return t.forEach((function(t){var i,r,a=f(C(t.params,e));try{for(a.s();!(r=a.n()).done;)i=r.value,n.add(i)}catch(o){a.e(o)}finally{a.f()}})),n.has("any")?["any"]:Array.from(n)}function F(t,e,n){var i,r,a,o,u=t||"unnamed",s=n,l=function(){var t=[];if(s.forEach((function(n){var i=x(k(n.params,a));(a<n.params.length||_(n.params))&&i(e[a])&&t.push(n)})),0===t.length){if((r=E(s,a)).length>0){var n=d(e[a]);return(i=new TypeError("Unexpected type of argument in function "+u+" (expected: "+r.join(" or ")+", actual: "+n.join(" | ")+", index: "+a+")")).data={category:"wrongType",fn:u,index:a,actual:n,expected:r},{v:i}}}else s=t};for(a=0;a<e.length;a++)if(o=l())return o.v;var c=s.map((function(t){return _(t.params)?1/0:t.params.length}));if(e.length<Math.min.apply(null,c))return r=E(s,a),(i=new TypeError("Too few arguments in function "+u+" (expected: "+r.join(" or ")+", index: "+e.length+")")).data={category:"tooFewArgs",fn:u,index:e.length,expected:r},i;var f=Math.max.apply(null,c);if(e.length>f)return(i=new TypeError("Too many arguments in function "+u+" (expected: "+f+", actual: "+e.length+")")).data={category:"tooManyArgs",fn:u,index:e.length,expectedLength:f},i;for(var p=[],h=0;h<e.length;++h)p.push(d(e[h]).join("|"));return(i=new TypeError('Arguments of type "'+p.join(", ")+'" do not match any of the defined signatures of function '+u+".")).data={category:"mismatch",actual:p},i}function I(t){for(var e=i.length+1,n=0;n<t.types.length;n++)A(t.types[n])&&(e=Math.min(e,t.types[n].typeIndex));return e}function S(t){for(var e=o+1,n=0;n<t.types.length;n++)A(t.types[n])||(e=Math.min(e,t.types[n].conversionIndex));return e}function T(t,e){if(t.hasAny){if(!e.hasAny)return 1}else if(e.hasAny)return-1;if(t.restParam){if(!e.restParam)return 1}else if(e.restParam)return-1;if(t.hasConversion){if(!e.hasConversion)return 1}else if(e.hasConversion)return-1;var n=I(t)-I(e);if(n<0)return-1;if(n>0)return 1;var i=S(t)-S(e);return i<0?-1:i>0?1:0}function P(t,e){var n=t.params,i=e.params,r=R(n),a=R(i),o=_(n),u=_(i);if(o&&r.hasAny){if(!u||!a.hasAny)return 1}else if(u&&a.hasAny)return-1;var s,l,c=0,d=0,p=f(n);try{for(p.s();!(l=p.n()).done;)(s=l.value).hasAny&&++c,s.hasConversion&&++d}catch(E){p.e(E)}finally{p.f()}var h,v=0,m=0,g=f(i);try{for(g.s();!(h=g.n()).done;)(s=h.value).hasAny&&++v,s.hasConversion&&++m}catch(E){g.e(E)}finally{g.f()}if(c!==v)return c-v;if(o&&r.hasConversion){if(!u||!a.hasConversion)return 1}else if(u&&a.hasConversion)return-1;if(d!==m)return d-m;if(o){if(!u)return 1}else if(u)return-1;var b=(n.length-i.length)*(o?-1:1);if(0!==b)return b;for(var y,x=[],w=0,D=0;D<n.length;++D){var k=T(n[D],i[D]);x.push(k),w+=k}if(0!==w)return w;for(var C=0,A=x;C<A.length;C++)if(0!==(y=A[C]))return y;return 0}function B(t,e){var n=e;if(t.some((function(t){return t.hasConversion}))){var i=_(t),r=t.map(N);n=function(){for(var t=[],n=i?arguments.length-1:arguments.length,a=0;a<n;a++)t[a]=r[a](arguments[a]);return i&&(t[n]=arguments[n].map(r[n])),e.apply(this,t)}}var a=n;if(_(t)){var o=t.length-1;a=function(){return n.apply(this,q(arguments,0,o).concat([q(arguments,o)]))}}return a}function N(t){var e,n,i,r,a=[],o=[];switch(t.types.forEach((function(t){t.conversion&&(a.push(s(t.conversion.from).test),o.push(t.conversion.convert))})),o.length){case 0:return function(t){return t};case 1:return e=a[0],i=o[0],function(t){return e(t)?i(t):t};case 2:return e=a[0],n=a[1],i=o[0],r=o[1],function(t){return e(t)?i(t):n(t)?r(t):t};default:return function(t){for(var e=0;e<o.length;e++)if(a[e](t))return o[e](t);return t}}}function z(t){return function t(e,n,i){if(n<e.length){var r=e[n],a=[];if(r.restParam){var o=r.types.filter(A);o.length<r.types.length&&a.push({types:o,name:"..."+o.map((function(t){return t.name})).join("|"),hasAny:o.some((function(t){return t.isAny})),hasConversion:!1,restParam:!0}),a.push(r)}else a=r.types.map((function(t){return{types:[t],name:t.name,hasAny:t.isAny,hasConversion:t.conversion,restParam:!1}}));return u=a,s=function(r){return t(e,n+1,i.concat([r]))},Array.prototype.concat.apply([],u.map(s))}return[i];var u,s}(t,0,[])}function O(t,e,n){var i,r,a=[],o=f(t);try{for(o.s();!(r=o.n()).done;){var u=n[i=r.value];if("number"!=typeof u)throw new TypeError('No definition for referenced signature "'+i+'"');if("function"!=typeof(u=e[u]))return!1;a.push(u)}}catch(s){o.e(s)}finally{o.f()}return a}function M(t,e,n){for(var i=function(t){return t.map((function(t){return H(t)?$(t.referToSelf.callback):K(t)?V(t.referTo.references,t.referTo.callback):t}))}(t),r=new Array(i.length).fill(!1),a=!0;a;){a=!1;for(var o=!0,u=0;u<i.length;++u)if(!r[u]){var s=i[u];if(H(s))i[u]=s.referToSelf.callback(n),i[u].referToSelf=s.referToSelf,r[u]=!0,o=!1;else if(K(s)){var l=O(s.referTo.references,i,e);l?(i[u]=s.referTo.callback.apply(this,l),i[u].referTo=s.referTo,r[u]=!0,o=!1):a=!0}}if(o&&a)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return i}function L(t,e){if(u.createCount++,0===Object.keys(e).length)throw new SyntaxError("No signatures provided");u.warnAgainstDeprecatedThis&&function(t){var e=/\bthis(\(|\.signatures\b)/;Object.keys(t).forEach((function(n){var i=t[n];if(e.test(i.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")}))}(e);var n,i=[],r=[],a={},o=[],s=function(){if(!Object.prototype.hasOwnProperty.call(e,n))return 0;var t=y(n);if(!t)return 0;i.forEach((function(e){if(function(t,e){for(var n=Math.max(t.length,e.length),i=0;i<n;i++){var r,a=C(t,i),o=!1,u=void 0,s=f(C(e,i));try{for(s.s();!(r=s.n()).done;)if(u=r.value,a.has(u)){o=!0;break}}catch(h){s.e(h)}finally{s.f()}if(!o)return!1}var l=t.length,c=e.length,d=_(t),p=_(e);return d?p?l===c:c>=l:p?l>=c:l===c}(e,t))throw new TypeError('Conflicting signatures "'+v(e)+'" and "'+v(t)+'".')})),i.push(t);var u=r.length;r.push(e[n]);var s,l,c=f(z(t.map(g)));try{for(c.s();!(l=c.n()).done;){var d=v(s=l.value);o.push({params:s,name:d,fn:u}),s.every((function(t){return!t.hasConversion}))&&(a[d]=u)}}catch(p){c.e(p)}finally{c.f()}};for(n in e)s();o.sort(P);var l,c=M(r,a,dt);for(l in a)Object.prototype.hasOwnProperty.call(a,l)&&(a[l]=c[a[l]]);for(var d=[],p=new Map,h=0,m=o;h<m.length;h++)l=m[h],p.has(l.name)||(l.fn=c[l.fn],d.push(l),p.set(l.name,l));for(var b=d[0]&&d[0].params.length<=2&&!_(d[0].params),w=d[1]&&d[1].params.length<=2&&!_(d[1].params),k=d[2]&&d[2].params.length<=2&&!_(d[2].params),A=d[3]&&d[3].params.length<=2&&!_(d[3].params),E=d[4]&&d[4].params.length<=2&&!_(d[4].params),F=d[5]&&d[5].params.length<=2&&!_(d[5].params),I=b&&w&&k&&A&&E&&F,S=0;S<d.length;++S)d[S].test=D(d[S].params);for(var T=b?x(d[0].params[0]):Xa,N=w?x(d[1].params[0]):Xa,O=k?x(d[2].params[0]):Xa,L=A?x(d[3].params[0]):Xa,j=E?x(d[4].params[0]):Xa,U=F?x(d[5].params[0]):Xa,R=b?x(d[0].params[1]):Xa,q=w?x(d[1].params[1]):Xa,V=k?x(d[2].params[1]):Xa,$=A?x(d[3].params[1]):Xa,K=E?x(d[4].params[1]):Xa,H=F?x(d[5].params[1]):Xa,W=0;W<d.length;++W)d[W].implementation=B(d[W].params,d[W].fn);var J=b?d[0].implementation:to,Z=w?d[1].implementation:to,Y=k?d[2].implementation:to,G=A?d[3].implementation:to,Q=E?d[4].implementation:to,X=F?d[5].implementation:to,tt=b?d[0].params.length:-1,et=w?d[1].params.length:-1,nt=k?d[2].params.length:-1,it=A?d[3].params.length:-1,rt=E?d[4].params.length:-1,at=F?d[5].params.length:-1,ot=I?6:0,ut=d.length,st=d.map((function(t){return t.test})),lt=d.map((function(t){return t.implementation})),ct=function(){for(var e=ot;e<ut;e++)if(st[e](arguments))return lt[e].apply(this,arguments);return u.onMismatch(t,arguments,d)};function dt(t,e){return arguments.length===tt&&T(t)&&R(e)?J.apply(this,arguments):arguments.length===et&&N(t)&&q(e)?Z.apply(this,arguments):arguments.length===nt&&O(t)&&V(e)?Y.apply(this,arguments):arguments.length===it&&L(t)&&$(e)?G.apply(this,arguments):arguments.length===rt&&j(t)&&K(e)?Q.apply(this,arguments):arguments.length===at&&U(t)&&H(e)?X.apply(this,arguments):ct.apply(this,arguments)}try{Object.defineProperty(dt,"name",{value:t})}catch(ft){}return dt.signatures=a,dt._typedFunctionData={signatures:d,signatureMap:p},dt}function j(t,e,n){throw F(t,e,n)}function U(t){return q(t,0,t.length-1)}function R(t){return t[t.length-1]}function q(t,e,n){return Array.prototype.slice.call(t,e,n)}function V(t,e){return{referTo:{references:t,callback:e}}}function $(t){if("function"!=typeof t)throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:t}}}function K(t){return t&&"object"===w(t.referTo)&&Array.isArray(t.referTo.references)&&"function"==typeof t.referTo.callback}function H(t){return t&&"object"===w(t.referToSelf)&&"function"==typeof t.referToSelf.callback}function W(t,e){if(!t)return e;if(e&&e!==t){var n=new Error("Function names do not match (expected: "+t+", actual: "+e+")");throw n.data={actual:e,expected:t},n}return t}function J(t){var e;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(p(t[n])||"string"==typeof t[n].signature)&&(e=W(e,t[n].name));return e}function Z(t,e){var n;for(n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(n in t&&e[n]!==t[n]){var i=new Error('Signature "'+n+'" is defined twice');throw i.data={signature:n,sourceFunction:e[n],destFunction:t[n]},i}t[n]=e[n]}}c(),l(r);var Y=u;function G(t){if(!t||"string"!=typeof t.from||"string"!=typeof t.to||"function"!=typeof t.convert)throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(t.to===t.from)throw new SyntaxError('Illegal to define conversion from "'+t.from+'" to itself.')}return u=function(t){for(var n="string"==typeof t,i=n?t:"",r={},a=n?1:0;a<arguments.length;++a){var o=arguments[a],u={},s=void 0;if("function"==typeof o?(s=o.name,"string"==typeof o.signature?u[o.signature]=o:p(o)&&(u=o.signatures)):e(o)&&(u=o,n||(s=J(o))),0===Object.keys(u).length){var l=new TypeError("Argument to 'typed' at index "+a+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw l.data={index:a,argument:o},l}n||(i=W(i,s)),Z(r,u)}return L(i||"",r)},u.create=t,u.createCount=Y.createCount,u.onMismatch=j,u.throwMismatchError=j,u.createError=F,u.clear=c,u.clearConversions=function(){var t,e,r=f(i);try{for(r.s();!(e=r.n()).done;)t=e.value,n.get(t).conversionsTo=[]}catch(a){r.e(a)}finally{r.f()}o=0},u.addTypes=l,u._findType=s,u.referTo=function(){var t=U(arguments).map((function(t){return v(y(t))})),e=R(arguments);if("function"!=typeof e)throw new TypeError("Callback function expected as last argument");return V(t,e)},u.referToSelf=$,u.convert=function(t,e){var n=s(e);if(n.test(t))return t;var i=n.conversionsTo;if(0===i.length)throw new Error("There are no conversions to "+e+" defined.");for(var r=0;r<i.length;r++){if(s(i[r].from).test(t))return i[r].convert(t)}throw new Error("Cannot convert "+t+" to "+e)},u.findSignature=h,u.find=function(t,e,n){return h(t,e,n).implementation},u.isTypedFunction=p,u.warnAgainstDeprecatedThis=!0,u.addType=function(t,e){var i="any";!1!==e&&n.has("Object")&&(i="Object"),u.addTypes([t],i)},u.addConversion=function(t){G(t);var e=s(t.to);if(!e.conversionsTo.every((function(e){return e.from!==t.from})))throw new Error('There is already a conversion from "'+t.from+'" to "'+e.name+'"');e.conversionsTo.push({from:t.from,convert:t.convert,index:o++})},u.addConversions=function(t){t.forEach(u.addConversion)},u.removeConversion=function(t){G(t);var e=s(t.to),n=function(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return t[n]}(e.conversionsTo,(function(e){return e.from===t.from}));if(!n)throw new Error("Attempt to remove nonexistent conversion from "+t.from+" to "+t.to);if(n.convert!==t.convert)throw new Error("Conversion to remove does not match existing conversion");var i=e.conversionsTo.indexOf(n);e.conversionsTo.splice(i,1)},u.resolve=function(t,e){if(!p(t))throw new TypeError(eo);for(var n=t._typedFunctionData.signatures,i=0;i<n.length;++i)if(n[i].test(e))return n[i];return null},u}();function io(t){return"boolean"==typeof t||!!isFinite(t)&&t===Math.round(t)}function ro(t,e,n){var i={2:"0b",8:"0o",16:"0x"}[e],r="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!io(n))throw new Error("size must be an integer");if(t>Math.pow(2,n-1)-1||t<-Math.pow(2,n-1))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!io(t))throw new Error("Value must be an integer");t<0&&(t+=Math.pow(2,n)),r="i".concat(n)}var a="";return t<0&&(t=-t,a="-"),"".concat(a).concat(i).concat(t.toString(e)).concat(r)}function ao(t,e){if("function"==typeof e)return e(t);if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity";if(isNaN(t))return"NaN";var n,i,r="auto";if(e&&(e.notation&&(r=e.notation),sa(e)?n=e:sa(e.precision)&&(n=e.precision),e.wordSize&&"number"!=typeof(i=e.wordSize)))throw new Error('Option "wordSize" must be a number');switch(r){case"fixed":return function(t,e){if(isNaN(t)||!isFinite(t))return String(t);var n=oo(t),i="number"==typeof e?so(n,n.exponent+1+e):n,r=i.coefficients,a=i.exponent+1,o=a+(e||0);r.length<o&&(r=r.concat(lo(o-r.length)));a<0&&(r=lo(1-a).concat(r),a=1);a<r.length&&r.splice(a,0,0===a?"0.":".");return i.sign+r.join("")}(t,n);case"exponential":return uo(t,n);case"engineering":return function(t,e){if(isNaN(t)||!isFinite(t))return String(t);var n=oo(t),i=so(n,e),r=i.exponent,a=i.coefficients,o=r%3==0?r:r<0?r-3-r%3:r-r%3;if(sa(e))for(;e>a.length||r-o+1>a.length;)a.push(0);else for(var u=Math.abs(r-o)-(a.length-1),s=0;s<u;s++)a.push(0);var l=Math.abs(r-o),c=1;for(;l>0;)c++,l--;var d=a.slice(c).join(""),f=sa(e)&&d.length||d.match(/[1-9]/)?"."+d:"",p=a.slice(0,c).join("")+f+"e"+(r>=0?"+":"")+o.toString();return i.sign+p}(t,n);case"bin":return ro(t,2,i);case"oct":return ro(t,8,i);case"hex":return ro(t,16,i);case"auto":return function(t,e,n){if(isNaN(t)||!isFinite(t))return String(t);var i=n&&void 0!==n.lowerExp?n.lowerExp:-3,r=n&&void 0!==n.upperExp?n.upperExp:5,a=oo(t),o=e?so(a,e):a;if(o.exponent<i||o.exponent>=r)return uo(t,e);var u=o.coefficients,s=o.exponent;u.length<e&&(u=u.concat(lo(e-u.length))),u=u.concat(lo(s-u.length+1+(u.length<e?e-u.length:0)));var l=s>0?s:0;return l<(u=lo(-s).concat(u)).length-1&&u.splice(l+1,0,"."),o.sign+u.join("")}(t,n,e&&e).replace(/((\.\d*?)(0+))($|e)/,(function(){var t=arguments[2],e=arguments[4];return"."!==t?t+e:e}));default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function oo(t){var e=String(t).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+t);var n=e[1],i=e[2],r=parseFloat(e[4]||"0"),a=i.indexOf(".");r+=-1!==a?a-1:i.length-1;var o=i.replace(".","").replace(/^0*/,(function(t){return r-=t.length,""})).replace(/0*$/,"").split("").map((function(t){return parseInt(t)}));return 0===o.length&&(o.push(0),r++),{sign:n,coefficients:o,exponent:r}}function uo(t,e){if(isNaN(t)||!isFinite(t))return String(t);var n=oo(t),i=e?so(n,e):n,r=i.coefficients,a=i.exponent;r.length<e&&(r=r.concat(lo(e-r.length)));var o=r.shift();return i.sign+o+(r.length>0?"."+r.join(""):"")+"e"+(a>=0?"+":"")+a}function so(t,e){for(var n={sign:t.sign,coefficients:t.coefficients,exponent:t.exponent},i=n.coefficients;e<=0;)i.unshift(0),n.exponent++,e++;if(i.length>e&&i.splice(e,i.length-e)[0]>=5){var r=e-1;for(i[r]++;10===i[r];)i.pop(),0===r&&(i.unshift(0),n.exponent++,r++),i[--r]++}return n}function lo(t){for(var e=[],n=0;n<t;n++)e.push(0);return e}var co=Number.EPSILON||2220446049250313e-31;function fo(t,e,n){if(null==n)return t===e;if(t===e)return!0;if(isNaN(t)||isNaN(e))return!1;if(isFinite(t)&&isFinite(e)){var i=Math.abs(t-e);return i<=co||i<=Math.max(Math.abs(t),Math.abs(e))*n}return!1}function po(t,e,n){var i=new(0,t.constructor)(2),r="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!io(n))throw new Error("size must be an integer");if(t.greaterThan(i.pow(n-1).sub(1))||t.lessThan(i.pow(n-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!t.isInteger())throw new Error("Value must be an integer");t.lessThan(0)&&(t=t.add(i.pow(n))),r="i".concat(n)}switch(e){case 2:return"".concat(t.toBinary()).concat(r);case 8:return"".concat(t.toOctal()).concat(r);case 16:return"".concat(t.toHexadecimal()).concat(r);default:throw new Error("Base ".concat(e," not supported "))}}function ho(t,e){if("function"==typeof e)return e(t);if(!t.isFinite())return t.isNaN()?"NaN":t.gt(0)?"Infinity":"-Infinity";var n,i,r="auto";if(void 0!==e&&(e.notation&&(r=e.notation),"number"==typeof e?n=e:void 0!==e.precision&&(n=e.precision),e.wordSize&&"number"!=typeof(i=e.wordSize)))throw new Error('Option "wordSize" must be a number');switch(r){case"fixed":return function(t,e){return t.toFixed(e)}(t,n);case"exponential":return vo(t,n);case"engineering":return function(t,e){var n=t.e,i=n%3==0?n:n<0?n-3-n%3:n-n%3,r=t.mul(Math.pow(10,-i)),a=r.toPrecision(e);if(-1!==a.indexOf("e")){a=new(0,t.constructor)(a).toFixed()}return a+"e"+(n>=0?"+":"")+i.toString()}(t,n);case"bin":return po(t,2,i);case"oct":return po(t,8,i);case"hex":return po(t,16,i);case"auto":var a=e&&void 0!==e.lowerExp?e.lowerExp:-3,o=e&&void 0!==e.upperExp?e.upperExp:5;if(t.isZero())return"0";var u=t.toSignificantDigits(n),s=u.e;return(s>=a&&s<o?u.toFixed():vo(t,n)).replace(/((\.\d*?)(0+))($|e)/,(function(){var t=arguments[2],e=arguments[4];return"."!==t?t+e:e}));default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function vo(t,e){return void 0!==e?t.toExponential(e-1):t.toExponential()}function mo(t,e){var n=function(t,e){if("number"==typeof t)return ao(t,e);if(la(t))return ho(t,e);if(function(t){return t&&"object"===w(t)&&"number"==typeof t.s&&"number"==typeof t.n&&"number"==typeof t.d||!1}(t))return e&&"decimal"===e.fraction?t.toString():t.s*t.n+"/"+t.d;if(Array.isArray(t))return yo(t,e);if(pa(t))return go(t);if("function"==typeof t)return t.syntax?String(t.syntax):"function";if(t&&"object"===w(t)){return"function"==typeof t.format?t.format(e):t&&t.toString(e)!=={}.toString()?t.toString(e):"{"+Object.keys(t).map((function(n){return go(n)+": "+mo(t[n],e)})).join(", ")+"}"}return String(t)}(t,e);return e&&"object"===w(e)&&"truncate"in e&&n.length>e.truncate?n.substring(0,e.truncate-3)+"...":n}function go(t){for(var e=String(t),n="",i=0;i<e.length;){var r=e.charAt(i);n+=r in bo?bo[r]:r,i++}return'"'+n+'"'}var bo={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"};function yo(t,e){if(Array.isArray(t)){for(var n="[",i=t.length,r=0;r<i;r++)0!==r&&(n+=", "),n+=yo(t[r],e);return n+="]"}return mo(t,e)}function _o(t,e,n){if(!(this instanceof _o))throw new SyntaxError("Constructor must be called with the new operator");this.actual=t,this.expected=e,this.relation=n,this.message="Dimension mismatch ("+(Array.isArray(t)?"["+t.join(", ")+"]":t)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=(new Error).stack}function xo(t,e,n){if(!(this instanceof xo))throw new SyntaxError("Constructor must be called with the new operator");this.index=t,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=n),void 0!==this.min&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":void 0!==this.max&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=(new Error).stack}function wo(t){for(var e=[];Array.isArray(t);)e.push(t.length),t=t[0];return e}function Do(t,e,n){var i,r=t.length;if(r!==e[n])throw new _o(r,e[n]);if(n<e.length-1){var a=n+1;for(i=0;i<r;i++){var o=t[i];if(!Array.isArray(o))throw new _o(e.length-1,e.length,"<");Do(t[i],e,a)}}else for(i=0;i<r;i++)if(Array.isArray(t[i]))throw new _o(e.length+1,e.length,">")}function ko(t,e){if(0===e.length){if(Array.isArray(t))throw new _o(t.length,0)}else Do(t,e,0)}function Co(t,e){if(void 0!==t){if(!sa(t)||!io(t))throw new TypeError("Index must be an integer (value: "+t+")");if(t<0||"number"==typeof e&&t>=e)throw new xo(t,e)}}function Ao(t,e,n){if(!Array.isArray(e))throw new TypeError("Array expected");if(0===e.length)throw new Error("Resizing to scalar is not supported");return e.forEach((function(t){if(!sa(t)||!io(t)||t<0)throw new TypeError("Invalid size, must contain positive integers (size: "+mo(e)+")")})),(sa(t)||la(t))&&(t=[t]),Eo(t,e,0,void 0!==n?n:0),t}function Eo(t,e,n,i){var r,a,o=t.length,u=e[n],s=Math.min(o,u);if(t.length=u,n<e.length-1){var l=n+1;for(r=0;r<s;r++)a=t[r],Array.isArray(a)||(a=[a],t[r]=a),Eo(a,e,l,i);for(r=s;r<u;r++)a=[],t[r]=a,Eo(a,e,l,i)}else{for(r=0;r<s;r++)for(;Array.isArray(t[r]);)t[r]=t[r][0];for(r=s;r<u;r++)t[r]=i}}function Fo(t,e){var n=function(t){if(!Array.isArray(t))return t;var e=[];return t.forEach((function t(n){Array.isArray(n)?n.forEach(t):e.push(n)})),e}(t),i=n.length;if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Array expected");if(0===e.length)throw new _o(0,i,"!=");var r=So(e=Io(e,i));if(i!==r)throw new _o(r,i,"!=");try{return function(t,e){for(var n,i=t,r=e.length-1;r>0;r--){var a=e[r];n=[];for(var o=i.length/a,u=0;u<o;u++)n.push(i.slice(u*a,(u+1)*a));i=n}return i}(n,e)}catch(Uc){if(Uc instanceof _o)throw new _o(r,i,"!=");throw Uc}}function Io(t,e){var n=So(t),i=t.slice(),r=t.indexOf(-1);if(t.indexOf(-1,r+1)>=0)throw new Error("More than one wildcard in sizes");if(r>=0){if(!(e%n==0))throw new Error("Could not replace wildcard, since "+e+" is no multiple of "+-n);i[r]=-e/n}return i}function So(t){return t.reduce((function(t,e){return t*e}),1)}function To(t,e,n,i){var r=i||wo(t);if(n)for(var a=0;a<n;a++)t=[t],r.unshift(1);for(t=Po(t,e,0);r.length<e;)r.push(1);return t}function Po(t,e,n){var i,r;if(Array.isArray(t)){var a=n+1;for(i=0,r=t.length;i<r;i++)t[i]=Po(t[i],e,a)}else for(var o=n;o<e;o++)t=[t];return t}function Bo(t,e){for(var n,i=0,r=0;r<t.length;r++){var a=t[r],o=Array.isArray(a);if(0===r&&o&&(i=a.length),o&&a.length!==i)return;var u=o?Bo(a,e):e(a);if(void 0===n)n=u;else if(n!==u)return"mixed"}return n}function No(t,e,n,i){if(i<n){if(t.length!==e.length)throw new _o(t.length,e.length);for(var r=[],a=0;a<t.length;a++)r[a]=No(t[a],e[a],n,i+1);return r}return t.concat(e)}function zo(){var t=Array.prototype.slice.call(arguments,0,-1),e=Array.prototype.slice.call(arguments,-1);if(1===t.length)return t[0];if(t.length>1)return t.slice(1).reduce((function(t,n){return No(t,n,e,0)}),t[0]);throw new Error("Wrong number of arguments in function concat")}function Oo(t,e){for(var n=e.length,i=t.length,r=0;r<i;r++){var a=n-i+r;if(t[r]<e[a]&&t[r]>1||t[r]>e[a])throw new Error("shape missmatch: missmatch is found in arg with shape (".concat(t,") not possible to broadcast dimension ").concat(i," with size ").concat(t[r]," to size ").concat(e[a]))}}function Mo(t,e){var n=wo(t);if(Za(n,e))return t;Oo(n,e);var i,r,a,o=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var i=e.map((function(t){return t.length})),r=Math.max.apply(Math,d(i)),a=new Array(r).fill(null),o=0;o<e.length;o++)for(var u=e[o],s=i[o],l=0;l<s;l++){var c=r-s+l;u[l]>a[c]&&(a[c]=u[l])}for(var f=0;f<e.length;f++)Oo(e[f],a);return a}(n,e),u=o.length,s=[].concat(d(Array(u-n.length).fill(1)),d(n)),l=function(t){return oa([],t)}(t);n.length<u&&(n=wo(l=Fo(l,s)));for(var c=0;c<u;c++)n[c]<o[c]&&(i=l,r=o[c],a=c,n=wo(l=zo.apply(void 0,d(Array(r).fill(i)).concat([a]))));return l}function Lo(t,e,n,i){function r(i){var r=function(t,e){for(var n={},i=0;i<e.length;i++){var r=e[i],a=t[r];void 0!==a&&(n[r]=a)}return n}(i,e.map(jo));return function(t,e,n){var i=e.filter((function(t){return!function(t){return t&&"?"===t[0]}(t)})).every((function(t){return void 0!==n[t]}));if(!i){var r=e.filter((function(t){return void 0===n[t]}));throw new Error('Cannot create function "'.concat(t,'", ')+"some dependencies are missing: ".concat(r.map((function(t){return'"'.concat(t,'"')})).join(", "),"."))}}(t,e,i),n(r)}return r.isFactory=!0,r.fn=t,r.dependencies=e.slice().sort(),i&&(r.meta=i),r}function jo(t){return t&&"?"===t[0]?t.slice(1):t}function Uo(t,e){if(qo(t)&&Ro(t,e))return t[e];if("function"==typeof t[e]&&function(t,e){if(null==t||"function"!=typeof t[e])return!1;if(Ya(t,e)&&Object.getPrototypeOf&&e in Object.getPrototypeOf(t))return!1;if(Ya($o,e))return!0;if(e in Object.prototype)return!1;if(e in Function.prototype)return!1;return!0}(t,e))throw new Error('Cannot access method "'+e+'" as a property');throw new Error('No access to property "'+e+'"')}function Ro(t,e){return!(!t||"object"!==w(t))&&(!!Ya(Vo,e)||!(e in Object.prototype)&&!(e in Function.prototype))}function qo(t){return"object"===w(t)&&t&&t.constructor===Object}_o.prototype=new RangeError,_o.prototype.constructor=RangeError,_o.prototype.name="DimensionError",_o.prototype.isDimensionError=!0,xo.prototype=new RangeError,xo.prototype.constructor=RangeError,xo.prototype.name="IndexError",xo.prototype.isIndexError=!0;var Vo={length:!0,name:!0},$o={toString:!0,valueOf:!0,toLocaleString:!0},Ko=function(){function t(e){s(this,t),this.wrappedObject=e}return c(t,[{key:"keys",value:function(){return Object.keys(this.wrappedObject)}},{key:"get",value:function(t){return Uo(this.wrappedObject,t)}},{key:"set",value:function(t,e){return function(t,e,n){if(qo(t)&&Ro(t,e))return t[e]=n,n;throw new Error('No access to property "'+e+'"')}(this.wrappedObject,t,e),this}},{key:"has",value:function(t){return e=this.wrappedObject,t in e;var e}}]),t}();function Ho(t){return!!t&&(t instanceof Map||t instanceof Ko||"function"==typeof t.set&&"function"==typeof t.get&&"function"==typeof t.keys&&"function"==typeof t.has)}var Wo=function(){return Wo=no.create,no},Jo=Lo("typed",["?BigNumber","?Complex","?DenseMatrix","?Fraction"],(function(t){var e=t.BigNumber,n=t.Complex,i=t.DenseMatrix,r=t.Fraction,a=Wo();return a.clear(),a.addTypes([{name:"number",test:sa},{name:"Complex",test:ca},{name:"BigNumber",test:la},{name:"Fraction",test:da},{name:"Unit",test:fa},{name:"identifier",test:function(t){return pa&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*$/.test(t)}},{name:"string",test:pa},{name:"Chain",test:Ha},{name:"Array",test:ha},{name:"Matrix",test:va},{name:"DenseMatrix",test:ga},{name:"SparseMatrix",test:ba},{name:"Range",test:ya},{name:"Index",test:_a},{name:"boolean",test:xa},{name:"ResultSet",test:wa},{name:"Help",test:Da},{name:"function",test:ka},{name:"Date",test:Ca},{name:"RegExp",test:Aa},{name:"null",test:Fa},{name:"undefined",test:Ia},{name:"AccessorNode",test:Sa},{name:"ArrayNode",test:Ta},{name:"AssignmentNode",test:Pa},{name:"BlockNode",test:Ba},{name:"ConditionalNode",test:Na},{name:"ConstantNode",test:za},{name:"FunctionNode",test:Ma},{name:"FunctionAssignmentNode",test:Oa},{name:"IndexNode",test:La},{name:"Node",test:ja},{name:"ObjectNode",test:Ua},{name:"OperatorNode",test:Ra},{name:"ParenthesisNode",test:qa},{name:"RangeNode",test:Va},{name:"RelationalNode",test:$a},{name:"SymbolNode",test:Ka},{name:"Map",test:Ho},{name:"Object",test:Ea}]),a.addConversions([{from:"number",to:"BigNumber",convert:function(t){if(e||Zo(t),t.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+t+"). Use function bignumber(x) to convert to BigNumber.");return new e(t)}},{from:"number",to:"Complex",convert:function(t){return n||Yo(t),new n(t,0)}},{from:"BigNumber",to:"Complex",convert:function(t){return n||Yo(t),new n(t.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(t){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(t){return n||Yo(t),new n(t.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(t){r||Go(t);var e=new r(t);if(e.valueOf()!==t)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+t+"). Use function fraction(x) to convert to Fraction.");return e}},{from:"string",to:"number",convert:function(t){var e=Number(t);if(isNaN(e))throw new Error('Cannot convert "'+t+'" to a number');return e}},{from:"string",to:"BigNumber",convert:function(t){e||Zo(t);try{return new e(t)}catch(n){throw new Error('Cannot convert "'+t+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(t){r||Go(t);try{return new r(t)}catch(e){throw new Error('Cannot convert "'+t+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(t){n||Yo(t);try{return new n(t)}catch(e){throw new Error('Cannot convert "'+t+'" to Complex')}}},{from:"boolean",to:"number",convert:function(t){return+t}},{from:"boolean",to:"BigNumber",convert:function(t){return e||Zo(t),new e(+t)}},{from:"boolean",to:"Fraction",convert:function(t){return r||Go(t),new r(+t)}},{from:"boolean",to:"string",convert:function(t){return String(t)}},{from:"Array",to:"Matrix",convert:function(t){return i||function(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}(),new i(t)}},{from:"Matrix",to:"Array",convert:function(t){return t.valueOf()}}]),a.onMismatch=function(t,e,n){var i=a.createError(t,e,n);if(["wrongType","mismatch"].includes(i.data.category)&&1===e.length&&ma(e[0])&&n.some((function(t){return!t.params.includes(",")}))){var r=new TypeError("Function '".concat(t,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(t,")'."));throw r.data=i.data,r}throw i},a.onMismatch=function(t,e,n){var i=a.createError(t,e,n);if(["wrongType","mismatch"].includes(i.data.category)&&1===e.length&&ma(e[0])&&n.some((function(t){return!t.params.includes(",")}))){var r=new TypeError("Function '".concat(t,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(t,")'."));throw r.data=i.data,r}throw i},a}));function Zo(t){throw new Error("Cannot convert value ".concat(t," into a BigNumber: no class 'BigNumber' provided"))}function Yo(t){throw new Error("Cannot convert value ".concat(t," into a Complex number: no class 'Complex' provided"))}function Go(t){throw new Error("Cannot convert value ".concat(t," into a Fraction, no class 'Fraction' provided."))}
/*!
       *  decimal.js v10.4.3
       *  An arbitrary-precision Decimal type for JavaScript.
       *  https://github.com/MikeMcl/decimal.js
       *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
       *  MIT Licence
       */var Qo,Xo,tu=9e15,eu=1e9,nu="0123456789abcdef",iu="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",ru="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",au={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-tu,maxE:tu,crypto:!1},ou=!0,uu="[DecimalError] ",su=uu+"Invalid argument: ",lu=uu+"Precision limit exceeded",cu=uu+"crypto unavailable",du="[object Decimal]",fu=Math.floor,pu=Math.pow,hu=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,vu=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,mu=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,gu=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,bu=1e7,yu=7,_u=iu.length-1,xu=ru.length-1,wu={toStringTag:du};function Du(t){var e,n,i,r=t.length-1,a="",o=t[0];if(r>0){for(a+=o,e=1;e<r;e++)i=t[e]+"",(n=yu-i.length)&&(a+=Nu(n)),a+=i;o=t[e],(n=yu-(i=o+"").length)&&(a+=Nu(n))}else if(0===o)return"0";for(;o%10==0;)o/=10;return a+o}function ku(t,e,n){if(t!==~~t||t<e||t>n)throw Error(su+t)}function Cu(t,e,n,i){var r,a,o,u;for(a=t[0];a>=10;a/=10)--e;return--e<0?(e+=yu,r=0):(r=Math.ceil((e+1)/yu),e%=yu),a=pu(10,yu-e),u=t[r]%a|0,null==i?e<3?(0==e?u=u/100|0:1==e&&(u=u/10|0),o=n<4&&99999==u||n>3&&49999==u||5e4==u||0==u):o=(n<4&&u+1==a||n>3&&u+1==a/2)&&(t[r+1]/a/100|0)==pu(10,e-2)-1||(u==a/2||0==u)&&!(t[r+1]/a/100|0):e<4?(0==e?u=u/1e3|0:1==e?u=u/100|0:2==e&&(u=u/10|0),o=(i||n<4)&&9999==u||!i&&n>3&&4999==u):o=((i||n<4)&&u+1==a||!i&&n>3&&u+1==a/2)&&(t[r+1]/a/1e3|0)==pu(10,e-3)-1,o}function Au(t,e,n){for(var i,r,a=[0],o=0,u=t.length;o<u;){for(r=a.length;r--;)a[r]*=e;for(a[0]+=nu.indexOf(t.charAt(o++)),i=0;i<a.length;i++)a[i]>n-1&&(void 0===a[i+1]&&(a[i+1]=0),a[i+1]+=a[i]/n|0,a[i]%=n)}return a.reverse()}wu.absoluteValue=wu.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),Fu(t)},wu.ceil=function(){return Fu(new this.constructor(this),this.e+1,2)},wu.clampedTo=wu.clamp=function(t,e){var n=this,i=n.constructor;if(t=new i(t),e=new i(e),!t.s||!e.s)return new i(NaN);if(t.gt(e))throw Error(su+e);return n.cmp(t)<0?t:n.cmp(e)>0?e:new i(n)},wu.comparedTo=wu.cmp=function(t){var e,n,i,r,a=this,o=a.d,u=(t=new a.constructor(t)).d,s=a.s,l=t.s;if(!o||!u)return s&&l?s!==l?s:o===u?0:!o^s<0?1:-1:NaN;if(!o[0]||!u[0])return o[0]?s:u[0]?-l:0;if(s!==l)return s;if(a.e!==t.e)return a.e>t.e^s<0?1:-1;for(e=0,n=(i=o.length)<(r=u.length)?i:r;e<n;++e)if(o[e]!==u[e])return o[e]>u[e]^s<0?1:-1;return i===r?0:i>r^s<0?1:-1},wu.cosine=wu.cos=function(){var t,e,n=this,i=n.constructor;return n.d?n.d[0]?(t=i.precision,e=i.rounding,i.precision=t+Math.max(n.e,n.sd())+yu,i.rounding=1,n=function(t,e){var n,i,r;if(e.isZero())return e;i=e.d.length,i<32?r=(1/$u(4,n=Math.ceil(i/3))).toString():(n=16,r="2.3283064365386962890625e-10");t.precision+=n,e=Vu(t,1,e.times(r),new t(1));for(var a=n;a--;){var o=e.times(e);e=o.times(o).minus(o).times(8).plus(1)}return t.precision-=n,e}(i,Ku(i,n)),i.precision=t,i.rounding=e,Fu(2==Xo||3==Xo?n.neg():n,t,e,!0)):new i(1):new i(NaN)},wu.cubeRoot=wu.cbrt=function(){var t,e,n,i,r,a,o,u,s,l,c=this,d=c.constructor;if(!c.isFinite()||c.isZero())return new d(c);for(ou=!1,(a=c.s*pu(c.s*c,1/3))&&Math.abs(a)!=1/0?i=new d(a.toString()):(n=Du(c.d),(a=((t=c.e)-n.length+1)%3)&&(n+=1==a||-2==a?"0":"00"),a=pu(n,1/3),t=fu((t+1)/3)-(t%3==(t<0?-1:2)),(i=new d(n=a==1/0?"5e"+t:(n=a.toExponential()).slice(0,n.indexOf("e")+1)+t)).s=c.s),o=(t=d.precision)+3;;)if(l=(s=(u=i).times(u).times(u)).plus(c),i=Eu(l.plus(c).times(u),l.plus(s),o+2,1),Du(u.d).slice(0,o)===(n=Du(i.d)).slice(0,o)){if("9999"!=(n=n.slice(o-3,o+1))&&(r||"4999"!=n)){+n&&(+n.slice(1)||"5"!=n.charAt(0))||(Fu(i,t+1,1),e=!i.times(i).times(i).eq(c));break}if(!r&&(Fu(u,t+1,0),u.times(u).times(u).eq(c))){i=u;break}o+=4,r=1}return ou=!0,Fu(i,t,d.rounding,e)},wu.decimalPlaces=wu.dp=function(){var t,e=this.d,n=NaN;if(e){if(n=((t=e.length-1)-fu(this.e/yu))*yu,t=e[t])for(;t%10==0;t/=10)n--;n<0&&(n=0)}return n},wu.dividedBy=wu.div=function(t){return Eu(this,new this.constructor(t))},wu.dividedToIntegerBy=wu.divToInt=function(t){var e=this.constructor;return Fu(Eu(this,new e(t),0,1,1),e.precision,e.rounding)},wu.equals=wu.eq=function(t){return 0===this.cmp(t)},wu.floor=function(){return Fu(new this.constructor(this),this.e+1,3)},wu.greaterThan=wu.gt=function(t){return this.cmp(t)>0},wu.greaterThanOrEqualTo=wu.gte=function(t){var e=this.cmp(t);return 1==e||0===e},wu.hyperbolicCosine=wu.cosh=function(){var t,e,n,i,r,a=this,o=a.constructor,u=new o(1);if(!a.isFinite())return new o(a.s?1/0:NaN);if(a.isZero())return u;n=o.precision,i=o.rounding,o.precision=n+Math.max(a.e,a.sd())+4,o.rounding=1,(r=a.d.length)<32?e=(1/$u(4,t=Math.ceil(r/3))).toString():(t=16,e="2.3283064365386962890625e-10"),a=Vu(o,1,a.times(e),new o(1),!0);for(var s,l=t,c=new o(8);l--;)s=a.times(a),a=u.minus(s.times(c.minus(s.times(c))));return Fu(a,o.precision=n,o.rounding=i,!0)},wu.hyperbolicSine=wu.sinh=function(){var t,e,n,i,r=this,a=r.constructor;if(!r.isFinite()||r.isZero())return new a(r);if(e=a.precision,n=a.rounding,a.precision=e+Math.max(r.e,r.sd())+4,a.rounding=1,(i=r.d.length)<3)r=Vu(a,2,r,r,!0);else{t=(t=1.4*Math.sqrt(i))>16?16:0|t,r=Vu(a,2,r=r.times(1/$u(5,t)),r,!0);for(var o,u=new a(5),s=new a(16),l=new a(20);t--;)o=r.times(r),r=r.times(u.plus(o.times(s.times(o).plus(l))))}return a.precision=e,a.rounding=n,Fu(r,e,n,!0)},wu.hyperbolicTangent=wu.tanh=function(){var t,e,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(t=i.precision,e=i.rounding,i.precision=t+7,i.rounding=1,Eu(n.sinh(),n.cosh(),i.precision=t,i.rounding=e)):new i(n.s)},wu.inverseCosine=wu.acos=function(){var t,e=this,n=e.constructor,i=e.abs().cmp(1),r=n.precision,a=n.rounding;return-1!==i?0===i?e.isNeg()?Pu(n,r,a):new n(0):new n(NaN):e.isZero()?Pu(n,r+4,a).times(.5):(n.precision=r+6,n.rounding=1,e=e.asin(),t=Pu(n,r+4,a).times(.5),n.precision=r,n.rounding=a,t.minus(e))},wu.inverseHyperbolicCosine=wu.acosh=function(){var t,e,n=this,i=n.constructor;return n.lte(1)?new i(n.eq(1)?0:NaN):n.isFinite()?(t=i.precision,e=i.rounding,i.precision=t+Math.max(Math.abs(n.e),n.sd())+4,i.rounding=1,ou=!1,n=n.times(n).minus(1).sqrt().plus(n),ou=!0,i.precision=t,i.rounding=e,n.ln()):new i(n)},wu.inverseHyperbolicSine=wu.asinh=function(){var t,e,n=this,i=n.constructor;return!n.isFinite()||n.isZero()?new i(n):(t=i.precision,e=i.rounding,i.precision=t+2*Math.max(Math.abs(n.e),n.sd())+6,i.rounding=1,ou=!1,n=n.times(n).plus(1).sqrt().plus(n),ou=!0,i.precision=t,i.rounding=e,n.ln())},wu.inverseHyperbolicTangent=wu.atanh=function(){var t,e,n,i,r=this,a=r.constructor;return r.isFinite()?r.e>=0?new a(r.abs().eq(1)?r.s/0:r.isZero()?r:NaN):(t=a.precision,e=a.rounding,i=r.sd(),Math.max(i,t)<2*-r.e-1?Fu(new a(r),t,e,!0):(a.precision=n=i-r.e,r=Eu(r.plus(1),new a(1).minus(r),n+t,1),a.precision=t+4,a.rounding=1,r=r.ln(),a.precision=t,a.rounding=e,r.times(.5))):new a(NaN)},wu.inverseSine=wu.asin=function(){var t,e,n,i,r=this,a=r.constructor;return r.isZero()?new a(r):(e=r.abs().cmp(1),n=a.precision,i=a.rounding,-1!==e?0===e?((t=Pu(a,n+4,i).times(.5)).s=r.s,t):new a(NaN):(a.precision=n+6,a.rounding=1,r=r.div(new a(1).minus(r.times(r)).sqrt().plus(1)).atan(),a.precision=n,a.rounding=i,r.times(2)))},wu.inverseTangent=wu.atan=function(){var t,e,n,i,r,a,o,u,s,l=this,c=l.constructor,d=c.precision,f=c.rounding;if(l.isFinite()){if(l.isZero())return new c(l);if(l.abs().eq(1)&&d+4<=xu)return(o=Pu(c,d+4,f).times(.25)).s=l.s,o}else{if(!l.s)return new c(NaN);if(d+4<=xu)return(o=Pu(c,d+4,f).times(.5)).s=l.s,o}for(c.precision=u=d+10,c.rounding=1,t=n=Math.min(28,u/yu+2|0);t;--t)l=l.div(l.times(l).plus(1).sqrt().plus(1));for(ou=!1,e=Math.ceil(u/yu),i=1,s=l.times(l),o=new c(l),r=l;-1!==t;)if(r=r.times(s),a=o.minus(r.div(i+=2)),r=r.times(s),void 0!==(o=a.plus(r.div(i+=2))).d[e])for(t=e;o.d[t]===a.d[t]&&t--;);return n&&(o=o.times(2<<n-1)),ou=!0,Fu(o,c.precision=d,c.rounding=f,!0)},wu.isFinite=function(){return!!this.d},wu.isInteger=wu.isInt=function(){return!!this.d&&fu(this.e/yu)>this.d.length-2},wu.isNaN=function(){return!this.s},wu.isNegative=wu.isNeg=function(){return this.s<0},wu.isPositive=wu.isPos=function(){return this.s>0},wu.isZero=function(){return!!this.d&&0===this.d[0]},wu.lessThan=wu.lt=function(t){return this.cmp(t)<0},wu.lessThanOrEqualTo=wu.lte=function(t){return this.cmp(t)<1},wu.logarithm=wu.log=function(t){var e,n,i,r,a,o,u,s,l=this,c=l.constructor,d=c.precision,f=c.rounding;if(null==t)t=new c(10),e=!0;else{if(n=(t=new c(t)).d,t.s<0||!n||!n[0]||t.eq(1))return new c(NaN);e=t.eq(10)}if(n=l.d,l.s<0||!n||!n[0]||l.eq(1))return new c(n&&!n[0]?-1/0:1!=l.s?NaN:n?0:1/0);if(e)if(n.length>1)a=!0;else{for(r=n[0];r%10==0;)r/=10;a=1!==r}if(ou=!1,o=ju(l,u=d+5),i=e?Tu(c,u+10):ju(t,u),Cu((s=Eu(o,i,u,1)).d,r=d,f))do{if(o=ju(l,u+=10),i=e?Tu(c,u+10):ju(t,u),s=Eu(o,i,u,1),!a){+Du(s.d).slice(r+1,r+15)+1==1e14&&(s=Fu(s,d+1,0));break}}while(Cu(s.d,r+=10,f));return ou=!0,Fu(s,d,f)},wu.minus=wu.sub=function(t){var e,n,i,r,a,o,u,s,l,c,d,f,p=this,h=p.constructor;if(t=new h(t),!p.d||!t.d)return p.s&&t.s?p.d?t.s=-t.s:t=new h(t.d||p.s!==t.s?p:NaN):t=new h(NaN),t;if(p.s!=t.s)return t.s=-t.s,p.plus(t);if(l=p.d,f=t.d,u=h.precision,s=h.rounding,!l[0]||!f[0]){if(f[0])t.s=-t.s;else{if(!l[0])return new h(3===s?-0:0);t=new h(p)}return ou?Fu(t,u,s):t}if(n=fu(t.e/yu),c=fu(p.e/yu),l=l.slice(),a=c-n){for((d=a<0)?(e=l,a=-a,o=f.length):(e=f,n=c,o=l.length),a>(i=Math.max(Math.ceil(u/yu),o)+2)&&(a=i,e.length=1),e.reverse(),i=a;i--;)e.push(0);e.reverse()}else{for((d=(i=l.length)<(o=f.length))&&(o=i),i=0;i<o;i++)if(l[i]!=f[i]){d=l[i]<f[i];break}a=0}for(d&&(e=l,l=f,f=e,t.s=-t.s),o=l.length,i=f.length-o;i>0;--i)l[o++]=0;for(i=f.length;i>a;){if(l[--i]<f[i]){for(r=i;r&&0===l[--r];)l[r]=bu-1;--l[r],l[i]+=bu}l[i]-=f[i]}for(;0===l[--o];)l.pop();for(;0===l[0];l.shift())--n;return l[0]?(t.d=l,t.e=Su(l,n),ou?Fu(t,u,s):t):new h(3===s?-0:0)},wu.modulo=wu.mod=function(t){var e,n=this,i=n.constructor;return t=new i(t),!n.d||!t.s||t.d&&!t.d[0]?new i(NaN):!t.d||n.d&&!n.d[0]?Fu(new i(n),i.precision,i.rounding):(ou=!1,9==i.modulo?(e=Eu(n,t.abs(),0,3,1)).s*=t.s:e=Eu(n,t,0,i.modulo,1),e=e.times(t),ou=!0,n.minus(e))},wu.naturalExponential=wu.exp=function(){return Lu(this)},wu.naturalLogarithm=wu.ln=function(){return ju(this)},wu.negated=wu.neg=function(){var t=new this.constructor(this);return t.s=-t.s,Fu(t)},wu.plus=wu.add=function(t){var e,n,i,r,a,o,u,s,l,c,d=this,f=d.constructor;if(t=new f(t),!d.d||!t.d)return d.s&&t.s?d.d||(t=new f(t.d||d.s===t.s?d:NaN)):t=new f(NaN),t;if(d.s!=t.s)return t.s=-t.s,d.minus(t);if(l=d.d,c=t.d,u=f.precision,s=f.rounding,!l[0]||!c[0])return c[0]||(t=new f(d)),ou?Fu(t,u,s):t;if(a=fu(d.e/yu),i=fu(t.e/yu),l=l.slice(),r=a-i){for(r<0?(n=l,r=-r,o=c.length):(n=c,i=a,o=l.length),r>(o=(a=Math.ceil(u/yu))>o?a+1:o+1)&&(r=o,n.length=1),n.reverse();r--;)n.push(0);n.reverse()}for((o=l.length)-(r=c.length)<0&&(r=o,n=c,c=l,l=n),e=0;r;)e=(l[--r]=l[r]+c[r]+e)/bu|0,l[r]%=bu;for(e&&(l.unshift(e),++i),o=l.length;0==l[--o];)l.pop();return t.d=l,t.e=Su(l,i),ou?Fu(t,u,s):t},wu.precision=wu.sd=function(t){var e,n=this;if(void 0!==t&&t!==!!t&&1!==t&&0!==t)throw Error(su+t);return n.d?(e=Bu(n.d),t&&n.e+1>e&&(e=n.e+1)):e=NaN,e},wu.round=function(){var t=this,e=t.constructor;return Fu(new e(t),t.e+1,e.rounding)},wu.sine=wu.sin=function(){var t,e,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(t=i.precision,e=i.rounding,i.precision=t+Math.max(n.e,n.sd())+yu,i.rounding=1,n=function(t,e){var n,i=e.d.length;if(i<3)return e.isZero()?e:Vu(t,2,e,e);n=(n=1.4*Math.sqrt(i))>16?16:0|n,e=e.times(1/$u(5,n)),e=Vu(t,2,e,e);for(var r,a=new t(5),o=new t(16),u=new t(20);n--;)r=e.times(e),e=e.times(a.plus(r.times(o.times(r).minus(u))));return e}(i,Ku(i,n)),i.precision=t,i.rounding=e,Fu(Xo>2?n.neg():n,t,e,!0)):new i(NaN)},wu.squareRoot=wu.sqrt=function(){var t,e,n,i,r,a,o=this,u=o.d,s=o.e,l=o.s,c=o.constructor;if(1!==l||!u||!u[0])return new c(!l||l<0&&(!u||u[0])?NaN:u?o:1/0);for(ou=!1,0==(l=Math.sqrt(+o))||l==1/0?(((e=Du(u)).length+s)%2==0&&(e+="0"),l=Math.sqrt(e),s=fu((s+1)/2)-(s<0||s%2),i=new c(e=l==1/0?"5e"+s:(e=l.toExponential()).slice(0,e.indexOf("e")+1)+s)):i=new c(l.toString()),n=(s=c.precision)+3;;)if(i=(a=i).plus(Eu(o,a,n+2,1)).times(.5),Du(a.d).slice(0,n)===(e=Du(i.d)).slice(0,n)){if("9999"!=(e=e.slice(n-3,n+1))&&(r||"4999"!=e)){+e&&(+e.slice(1)||"5"!=e.charAt(0))||(Fu(i,s+1,1),t=!i.times(i).eq(o));break}if(!r&&(Fu(a,s+1,0),a.times(a).eq(o))){i=a;break}n+=4,r=1}return ou=!0,Fu(i,s,c.rounding,t)},wu.tangent=wu.tan=function(){var t,e,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(t=i.precision,e=i.rounding,i.precision=t+10,i.rounding=1,(n=n.sin()).s=1,n=Eu(n,new i(1).minus(n.times(n)).sqrt(),t+10,0),i.precision=t,i.rounding=e,Fu(2==Xo||4==Xo?n.neg():n,t,e,!0)):new i(NaN)},wu.times=wu.mul=function(t){var e,n,i,r,a,o,u,s,l,c=this,d=c.constructor,f=c.d,p=(t=new d(t)).d;if(t.s*=c.s,!(f&&f[0]&&p&&p[0]))return new d(!t.s||f&&!f[0]&&!p||p&&!p[0]&&!f?NaN:f&&p?0*t.s:t.s/0);for(n=fu(c.e/yu)+fu(t.e/yu),(s=f.length)<(l=p.length)&&(a=f,f=p,p=a,o=s,s=l,l=o),a=[],i=o=s+l;i--;)a.push(0);for(i=l;--i>=0;){for(e=0,r=s+i;r>i;)u=a[r]+p[i]*f[r-i-1]+e,a[r--]=u%bu|0,e=u/bu|0;a[r]=(a[r]+e)%bu|0}for(;!a[--o];)a.pop();return e?++n:a.shift(),t.d=a,t.e=Su(a,n),ou?Fu(t,d.precision,d.rounding):t},wu.toBinary=function(t,e){return Hu(this,2,t,e)},wu.toDecimalPlaces=wu.toDP=function(t,e){var n=this,i=n.constructor;return n=new i(n),void 0===t?n:(ku(t,0,eu),void 0===e?e=i.rounding:ku(e,0,8),Fu(n,t+n.e+1,e))},wu.toExponential=function(t,e){var n,i=this,r=i.constructor;return void 0===t?n=Iu(i,!0):(ku(t,0,eu),void 0===e?e=r.rounding:ku(e,0,8),n=Iu(i=Fu(new r(i),t+1,e),!0,t+1)),i.isNeg()&&!i.isZero()?"-"+n:n},wu.toFixed=function(t,e){var n,i,r=this,a=r.constructor;return void 0===t?n=Iu(r):(ku(t,0,eu),void 0===e?e=a.rounding:ku(e,0,8),n=Iu(i=Fu(new a(r),t+r.e+1,e),!1,t+i.e+1)),r.isNeg()&&!r.isZero()?"-"+n:n},wu.toFraction=function(t){var e,n,i,r,a,o,u,s,l,c,d,f,p=this,h=p.d,v=p.constructor;if(!h)return new v(p);if(l=n=new v(1),i=s=new v(0),o=(a=(e=new v(i)).e=Bu(h)-p.e-1)%yu,e.d[0]=pu(10,o<0?yu+o:o),null==t)t=a>0?e:l;else{if(!(u=new v(t)).isInt()||u.lt(l))throw Error(su+u);t=u.gt(e)?a>0?e:l:u}for(ou=!1,u=new v(Du(h)),c=v.precision,v.precision=a=h.length*yu*2;d=Eu(u,e,0,1,1),1!=(r=n.plus(d.times(i))).cmp(t);)n=i,i=r,r=l,l=s.plus(d.times(r)),s=r,r=e,e=u.minus(d.times(r)),u=r;return r=Eu(t.minus(n),i,0,1,1),s=s.plus(r.times(l)),n=n.plus(r.times(i)),s.s=l.s=p.s,f=Eu(l,i,a,1).minus(p).abs().cmp(Eu(s,n,a,1).minus(p).abs())<1?[l,i]:[s,n],v.precision=c,ou=!0,f},wu.toHexadecimal=wu.toHex=function(t,e){return Hu(this,16,t,e)},wu.toNearest=function(t,e){var n=this,i=n.constructor;if(n=new i(n),null==t){if(!n.d)return n;t=new i(1),e=i.rounding}else{if(t=new i(t),void 0===e?e=i.rounding:ku(e,0,8),!n.d)return t.s?n:t;if(!t.d)return t.s&&(t.s=n.s),t}return t.d[0]?(ou=!1,n=Eu(n,t,0,e,1).times(t),ou=!0,Fu(n)):(t.s=n.s,n=t),n},wu.toNumber=function(){return+this},wu.toOctal=function(t,e){return Hu(this,8,t,e)},wu.toPower=wu.pow=function(t){var e,n,i,r,a,o,u=this,s=u.constructor,l=+(t=new s(t));if(!(u.d&&t.d&&u.d[0]&&t.d[0]))return new s(pu(+u,l));if((u=new s(u)).eq(1))return u;if(i=s.precision,a=s.rounding,t.eq(1))return Fu(u,i,a);if((e=fu(t.e/yu))>=t.d.length-1&&(n=l<0?-l:l)<=9007199254740991)return r=zu(s,u,n,i),t.s<0?new s(1).div(r):Fu(r,i,a);if((o=u.s)<0){if(e<t.d.length-1)return new s(NaN);if(1&t.d[e]||(o=1),0==u.e&&1==u.d[0]&&1==u.d.length)return u.s=o,u}return(e=0!=(n=pu(+u,l))&&isFinite(n)?new s(n+"").e:fu(l*(Math.log("0."+Du(u.d))/Math.LN10+u.e+1)))>s.maxE+1||e<s.minE-1?new s(e>0?o/0:0):(ou=!1,s.rounding=u.s=1,n=Math.min(12,(e+"").length),(r=Lu(t.times(ju(u,i+n)),i)).d&&Cu((r=Fu(r,i+5,1)).d,i,a)&&(e=i+10,+Du((r=Fu(Lu(t.times(ju(u,e+n)),e),e+5,1)).d).slice(i+1,i+15)+1==1e14&&(r=Fu(r,i+1,0))),r.s=o,ou=!0,s.rounding=a,Fu(r,i,a))},wu.toPrecision=function(t,e){var n,i=this,r=i.constructor;return void 0===t?n=Iu(i,i.e<=r.toExpNeg||i.e>=r.toExpPos):(ku(t,1,eu),void 0===e?e=r.rounding:ku(e,0,8),n=Iu(i=Fu(new r(i),t,e),t<=i.e||i.e<=r.toExpNeg,t)),i.isNeg()&&!i.isZero()?"-"+n:n},wu.toSignificantDigits=wu.toSD=function(t,e){var n=this.constructor;return void 0===t?(t=n.precision,e=n.rounding):(ku(t,1,eu),void 0===e?e=n.rounding:ku(e,0,8)),Fu(new n(this),t,e)},wu.toString=function(){var t=this,e=t.constructor,n=Iu(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+n:n},wu.truncated=wu.trunc=function(){return Fu(new this.constructor(this),this.e+1,1)},wu.valueOf=wu.toJSON=function(){var t=this,e=t.constructor,n=Iu(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+n:n};var Eu=function(){function t(t,e,n){var i,r=0,a=t.length;for(t=t.slice();a--;)i=t[a]*e+r,t[a]=i%n|0,r=i/n|0;return r&&t.unshift(r),t}function e(t,e,n,i){var r,a;if(n!=i)a=n>i?1:-1;else for(r=a=0;r<n;r++)if(t[r]!=e[r]){a=t[r]>e[r]?1:-1;break}return a}function n(t,e,n,i){for(var r=0;n--;)t[n]-=r,r=t[n]<e[n]?1:0,t[n]=r*i+t[n]-e[n];for(;!t[0]&&t.length>1;)t.shift()}return function(i,r,a,o,u,s){var l,c,d,f,p,h,v,m,g,b,y,_,x,w,D,k,C,A,E,F,I=i.constructor,S=i.s==r.s?1:-1,T=i.d,P=r.d;if(!(T&&T[0]&&P&&P[0]))return new I(i.s&&r.s&&(T?!P||T[0]!=P[0]:P)?T&&0==T[0]||!P?0*S:S/0:NaN);for(s?(p=1,c=i.e-r.e):(s=bu,p=yu,c=fu(i.e/p)-fu(r.e/p)),E=P.length,C=T.length,b=(g=new I(S)).d=[],d=0;P[d]==(T[d]||0);d++);if(P[d]>(T[d]||0)&&c--,null==a?(w=a=I.precision,o=I.rounding):w=u?a+(i.e-r.e)+1:a,w<0)b.push(1),h=!0;else{if(w=w/p+2|0,d=0,1==E){for(f=0,P=P[0],w++;(d<C||f)&&w--;d++)D=f*s+(T[d]||0),b[d]=D/P|0,f=D%P|0;h=f||d<C}else{for((f=s/(P[0]+1)|0)>1&&(P=t(P,f,s),T=t(T,f,s),E=P.length,C=T.length),k=E,_=(y=T.slice(0,E)).length;_<E;)y[_++]=0;(F=P.slice()).unshift(0),A=P[0],P[1]>=s/2&&++A;do{f=0,(l=e(P,y,E,_))<0?(x=y[0],E!=_&&(x=x*s+(y[1]||0)),(f=x/A|0)>1?(f>=s&&(f=s-1),1==(l=e(v=t(P,f,s),y,m=v.length,_=y.length))&&(f--,n(v,E<m?F:P,m,s))):(0==f&&(l=f=1),v=P.slice()),(m=v.length)<_&&v.unshift(0),n(y,v,_,s),-1==l&&(l=e(P,y,E,_=y.length))<1&&(f++,n(y,E<_?F:P,_,s)),_=y.length):0===l&&(f++,y=[0]),b[d++]=f,l&&y[0]?y[_++]=T[k]||0:(y=[T[k]],_=1)}while((k++<C||void 0!==y[0])&&w--);h=void 0!==y[0]}b[0]||b.shift()}if(1==p)g.e=c,Qo=h;else{for(d=1,f=b[0];f>=10;f/=10)d++;g.e=d+c*p-1,Fu(g,u?a+g.e+1:a,o,h)}return g}}();function Fu(t,e,n,i){var r,a,o,u,s,l,c,d,f,p=t.constructor;t:if(null!=e){if(!(d=t.d))return t;for(r=1,u=d[0];u>=10;u/=10)r++;if((a=e-r)<0)a+=yu,o=e,s=(c=d[f=0])/pu(10,r-o-1)%10|0;else if((f=Math.ceil((a+1)/yu))>=(u=d.length)){if(!i)break t;for(;u++<=f;)d.push(0);c=s=0,r=1,o=(a%=yu)-yu+1}else{for(c=u=d[f],r=1;u>=10;u/=10)r++;s=(o=(a%=yu)-yu+r)<0?0:c/pu(10,r-o-1)%10|0}if(i=i||e<0||void 0!==d[f+1]||(o<0?c:c%pu(10,r-o-1)),l=n<4?(s||i)&&(0==n||n==(t.s<0?3:2)):s>5||5==s&&(4==n||i||6==n&&(a>0?o>0?c/pu(10,r-o):0:d[f-1])%10&1||n==(t.s<0?8:7)),e<1||!d[0])return d.length=0,l?(e-=t.e+1,d[0]=pu(10,(yu-e%yu)%yu),t.e=-e||0):d[0]=t.e=0,t;if(0==a?(d.length=f,u=1,f--):(d.length=f+1,u=pu(10,yu-a),d[f]=o>0?(c/pu(10,r-o)%pu(10,o)|0)*u:0),l)for(;;){if(0==f){for(a=1,o=d[0];o>=10;o/=10)a++;for(o=d[0]+=u,u=1;o>=10;o/=10)u++;a!=u&&(t.e++,d[0]==bu&&(d[0]=1));break}if(d[f]+=u,d[f]!=bu)break;d[f--]=0,u=1}for(a=d.length;0===d[--a];)d.pop()}return ou&&(t.e>p.maxE?(t.d=null,t.e=NaN):t.e<p.minE&&(t.e=0,t.d=[0])),t}function Iu(t,e,n){if(!t.isFinite())return Uu(t);var i,r=t.e,a=Du(t.d),o=a.length;return e?(n&&(i=n-o)>0?a=a.charAt(0)+"."+a.slice(1)+Nu(i):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(t.e<0?"e":"e+")+t.e):r<0?(a="0."+Nu(-r-1)+a,n&&(i=n-o)>0&&(a+=Nu(i))):r>=o?(a+=Nu(r+1-o),n&&(i=n-r-1)>0&&(a=a+"."+Nu(i))):((i=r+1)<o&&(a=a.slice(0,i)+"."+a.slice(i)),n&&(i=n-o)>0&&(r+1===o&&(a+="."),a+=Nu(i))),a}function Su(t,e){var n=t[0];for(e*=yu;n>=10;n/=10)e++;return e}function Tu(t,e,n){if(e>_u)throw ou=!0,n&&(t.precision=n),Error(lu);return Fu(new t(iu),e,1,!0)}function Pu(t,e,n){if(e>xu)throw Error(lu);return Fu(new t(ru),e,n,!0)}function Bu(t){var e=t.length-1,n=e*yu+1;if(e=t[e]){for(;e%10==0;e/=10)n--;for(e=t[0];e>=10;e/=10)n++}return n}function Nu(t){for(var e="";t--;)e+="0";return e}function zu(t,e,n,i){var r,a=new t(1),o=Math.ceil(i/yu+4);for(ou=!1;;){if(n%2&&Wu((a=a.times(e)).d,o)&&(r=!0),0===(n=fu(n/2))){n=a.d.length-1,r&&0===a.d[n]&&++a.d[n];break}Wu((e=e.times(e)).d,o)}return ou=!0,a}function Ou(t){return 1&t.d[t.d.length-1]}function Mu(t,e,n){for(var i,r=new t(e[0]),a=0;++a<e.length;){if(!(i=new t(e[a])).s){r=i;break}r[n](i)&&(r=i)}return r}function Lu(t,e){var n,i,r,a,o,u,s,l=0,c=0,d=0,f=t.constructor,p=f.rounding,h=f.precision;if(!t.d||!t.d[0]||t.e>17)return new f(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:NaN);for(null==e?(ou=!1,s=h):s=e,u=new f(.03125);t.e>-2;)t=t.times(u),d+=5;for(s+=i=Math.log(pu(2,d))/Math.LN10*2+5|0,n=a=o=new f(1),f.precision=s;;){if(a=Fu(a.times(t),s,1),n=n.times(++c),Du((u=o.plus(Eu(a,n,s,1))).d).slice(0,s)===Du(o.d).slice(0,s)){for(r=d;r--;)o=Fu(o.times(o),s,1);if(null!=e)return f.precision=h,o;if(!(l<3&&Cu(o.d,s-i,p,l)))return Fu(o,f.precision=h,p,ou=!0);f.precision=s+=10,n=a=u=new f(1),c=0,l++}o=u}}function ju(t,e){var n,i,r,a,o,u,s,l,c,d,f,p=1,h=t,v=h.d,m=h.constructor,g=m.rounding,b=m.precision;if(h.s<0||!v||!v[0]||!h.e&&1==v[0]&&1==v.length)return new m(v&&!v[0]?-1/0:1!=h.s?NaN:v?0:h);if(null==e?(ou=!1,c=b):c=e,m.precision=c+=10,i=(n=Du(v)).charAt(0),!(Math.abs(a=h.e)<15e14))return l=Tu(m,c+2,b).times(a+""),h=ju(new m(i+"."+n.slice(1)),c-10).plus(l),m.precision=b,null==e?Fu(h,b,g,ou=!0):h;for(;i<7&&1!=i||1==i&&n.charAt(1)>3;)i=(n=Du((h=h.times(t)).d)).charAt(0),p++;for(a=h.e,i>1?(h=new m("0."+n),a++):h=new m(i+"."+n.slice(1)),d=h,s=o=h=Eu(h.minus(1),h.plus(1),c,1),f=Fu(h.times(h),c,1),r=3;;){if(o=Fu(o.times(f),c,1),Du((l=s.plus(Eu(o,new m(r),c,1))).d).slice(0,c)===Du(s.d).slice(0,c)){if(s=s.times(2),0!==a&&(s=s.plus(Tu(m,c+2,b).times(a+""))),s=Eu(s,new m(p),c,1),null!=e)return m.precision=b,s;if(!Cu(s.d,c-10,g,u))return Fu(s,m.precision=b,g,ou=!0);m.precision=c+=10,l=o=h=Eu(d.minus(1),d.plus(1),c,1),f=Fu(h.times(h),c,1),r=u=1}s=l,r+=2}}function Uu(t){return String(t.s*t.s/0)}function Ru(t,e){var n,i,r;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(i=e.search(/e/i))>0?(n<0&&(n=i),n+=+e.slice(i+1),e=e.substring(0,i)):n<0&&(n=e.length),i=0;48===e.charCodeAt(i);i++);for(r=e.length;48===e.charCodeAt(r-1);--r);if(e=e.slice(i,r)){if(r-=i,t.e=n=n-i-1,t.d=[],i=(n+1)%yu,n<0&&(i+=yu),i<r){for(i&&t.d.push(+e.slice(0,i)),r-=yu;i<r;)t.d.push(+e.slice(i,i+=yu));e=e.slice(i),i=yu-e.length}else i-=r;for(;i--;)e+="0";t.d.push(+e),ou&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function qu(t,e){var n,i,r,a,o,u,s,l,c;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),gu.test(e))return Ru(t,e)}else if("Infinity"===e||"NaN"===e)return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(vu.test(e))n=16,e=e.toLowerCase();else if(hu.test(e))n=2;else{if(!mu.test(e))throw Error(su+e);n=8}for((a=e.search(/p/i))>0?(s=+e.slice(a+1),e=e.substring(2,a)):e=e.slice(2),o=(a=e.indexOf("."))>=0,i=t.constructor,o&&(a=(u=(e=e.replace(".","")).length)-a,r=zu(i,new i(n),a,2*a)),a=c=(l=Au(e,n,bu)).length-1;0===l[a];--a)l.pop();return a<0?new i(0*t.s):(t.e=Su(l,c),t.d=l,ou=!1,o&&(t=Eu(t,r,4*u)),s&&(t=t.times(Math.abs(s)<54?pu(2,s):Ns.pow(2,s))),ou=!0,t)}function Vu(t,e,n,i,r){var a,o,u,s,l=t.precision,c=Math.ceil(l/yu);for(ou=!1,s=n.times(n),u=new t(i);;){if(o=Eu(u.times(s),new t(e++*e++),l,1),u=r?i.plus(o):i.minus(o),i=Eu(o.times(s),new t(e++*e++),l,1),void 0!==(o=u.plus(i)).d[c]){for(a=c;o.d[a]===u.d[a]&&a--;);if(-1==a)break}a=u,u=i,i=o,o=a}return ou=!0,o.d.length=c+1,o}function $u(t,e){for(var n=t;--e;)n*=t;return n}function Ku(t,e){var n,i=e.s<0,r=Pu(t,t.precision,1),a=r.times(.5);if((e=e.abs()).lte(a))return Xo=i?4:1,e;if((n=e.divToInt(r)).isZero())Xo=i?3:2;else{if((e=e.minus(n.times(r))).lte(a))return Xo=Ou(n)?i?2:3:i?4:1,e;Xo=Ou(n)?i?1:4:i?3:2}return e.minus(r).abs()}function Hu(t,e,n,i){var r,a,o,u,s,l,c,d,f,p=t.constructor,h=void 0!==n;if(h?(ku(n,1,eu),void 0===i?i=p.rounding:ku(i,0,8)):(n=p.precision,i=p.rounding),t.isFinite()){for(h?(r=2,16==e?n=4*n-3:8==e&&(n=3*n-2)):r=e,(o=(c=Iu(t)).indexOf("."))>=0&&(c=c.replace(".",""),(f=new p(1)).e=c.length-o,f.d=Au(Iu(f),10,r),f.e=f.d.length),a=s=(d=Au(c,10,r)).length;0==d[--s];)d.pop();if(d[0]){if(o<0?a--:((t=new p(t)).d=d,t.e=a,d=(t=Eu(t,f,n,i,0,r)).d,a=t.e,l=Qo),o=d[n],u=r/2,l=l||void 0!==d[n+1],l=i<4?(void 0!==o||l)&&(0===i||i===(t.s<0?3:2)):o>u||o===u&&(4===i||l||6===i&&1&d[n-1]||i===(t.s<0?8:7)),d.length=n,l)for(;++d[--n]>r-1;)d[n]=0,n||(++a,d.unshift(1));for(s=d.length;!d[s-1];--s);for(o=0,c="";o<s;o++)c+=nu.charAt(d[o]);if(h){if(s>1)if(16==e||8==e){for(o=16==e?4:3,--s;s%o;s++)c+="0";for(s=(d=Au(c,r,e)).length;!d[s-1];--s);for(o=1,c="1.";o<s;o++)c+=nu.charAt(d[o])}else c=c.charAt(0)+"."+c.slice(1);c=c+(a<0?"p":"p+")+a}else if(a<0){for(;++a;)c="0"+c;c="0."+c}else if(++a>s)for(a-=s;a--;)c+="0";else a<s&&(c=c.slice(0,a)+"."+c.slice(a))}else c=h?"0p+0":"0";c=(16==e?"0x":2==e?"0b":8==e?"0o":"")+c}else c=Uu(t);return t.s<0?"-"+c:c}function Wu(t,e){if(t.length>e)return t.length=e,!0}function Ju(t){return new this(t).abs()}function Zu(t){return new this(t).acos()}function Yu(t){return new this(t).acosh()}function Gu(t,e){return new this(t).plus(e)}function Qu(t){return new this(t).asin()}function Xu(t){return new this(t).asinh()}function ts(t){return new this(t).atan()}function es(t){return new this(t).atanh()}function ns(t,e){t=new this(t),e=new this(e);var n,i=this.precision,r=this.rounding,a=i+4;return t.s&&e.s?t.d||e.d?!e.d||t.isZero()?(n=e.s<0?Pu(this,i,r):new this(0)).s=t.s:!t.d||e.isZero()?(n=Pu(this,a,1).times(.5)).s=t.s:e.s<0?(this.precision=a,this.rounding=1,n=this.atan(Eu(t,e,a,1)),e=Pu(this,a,1),this.precision=i,this.rounding=r,n=t.s<0?n.minus(e):n.plus(e)):n=this.atan(Eu(t,e,a,1)):(n=Pu(this,a,1).times(e.s>0?.25:.75)).s=t.s:n=new this(NaN),n}function is(t){return new this(t).cbrt()}function rs(t){return Fu(t=new this(t),t.e+1,2)}function as(t,e,n){return new this(t).clamp(e,n)}function os(t){if(!t||"object"!==w(t))throw Error(uu+"Object expected");var e,n,i,r=!0===t.defaults,a=["precision",1,eu,"rounding",0,8,"toExpNeg",-tu,0,"toExpPos",0,tu,"maxE",0,tu,"minE",-tu,0,"modulo",0,9];for(e=0;e<a.length;e+=3)if(n=a[e],r&&(this[n]=au[n]),void 0!==(i=t[n])){if(!(fu(i)===i&&i>=a[e+1]&&i<=a[e+2]))throw Error(su+n+": "+i);this[n]=i}if(n="crypto",r&&(this[n]=au[n]),void 0!==(i=t[n])){if(!0!==i&&!1!==i&&0!==i&&1!==i)throw Error(su+n+": "+i);if(i){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Error(cu);this[n]=!0}else this[n]=!1}return this}function us(t){return new this(t).cos()}function ss(t){return new this(t).cosh()}function ls(t,e){return new this(t).div(e)}function cs(t){return new this(t).exp()}function ds(t){return Fu(t=new this(t),t.e+1,3)}function fs(){var t,e,n=new this(0);for(ou=!1,t=0;t<arguments.length;)if((e=new this(arguments[t++])).d)n.d&&(n=n.plus(e.times(e)));else{if(e.s)return ou=!0,new this(1/0);n=e}return ou=!0,n.sqrt()}function ps(t){return t instanceof Ns||t&&t.toStringTag===du||!1}function hs(t){return new this(t).ln()}function vs(t,e){return new this(t).log(e)}function ms(t){return new this(t).log(2)}function gs(t){return new this(t).log(10)}function bs(){return Mu(this,arguments,"lt")}function ys(){return Mu(this,arguments,"gt")}function _s(t,e){return new this(t).mod(e)}function xs(t,e){return new this(t).mul(e)}function ws(t,e){return new this(t).pow(e)}function Ds(t){var e,n,i,r,a=0,o=new this(1),u=[];if(void 0===t?t=this.precision:ku(t,1,eu),i=Math.ceil(t/yu),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(i));a<i;)(r=e[a])>=429e7?e[a]=crypto.getRandomValues(new Uint32Array(1))[0]:u[a++]=r%1e7;else{if(!crypto.randomBytes)throw Error(cu);for(e=crypto.randomBytes(i*=4);a<i;)(r=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+((127&e[a+3])<<24))>=214e7?crypto.randomBytes(4).copy(e,a):(u.push(r%1e7),a+=4);a=i/4}else for(;a<i;)u[a++]=1e7*Math.random()|0;for(i=u[--a],t%=yu,i&&t&&(r=pu(10,yu-t),u[a]=(i/r|0)*r);0===u[a];a--)u.pop();if(a<0)n=0,u=[0];else{for(n=-1;0===u[0];n-=yu)u.shift();for(i=1,r=u[0];r>=10;r/=10)i++;i<yu&&(n-=yu-i)}return o.e=n,o.d=u,o}function ks(t){return Fu(t=new this(t),t.e+1,this.rounding)}function Cs(t){return(t=new this(t)).d?t.d[0]?t.s:0*t.s:t.s||NaN}function As(t){return new this(t).sin()}function Es(t){return new this(t).sinh()}function Fs(t){return new this(t).sqrt()}function Is(t,e){return new this(t).sub(e)}function Ss(){var t=0,e=arguments,n=new this(e[t]);for(ou=!1;n.s&&++t<e.length;)n=n.plus(e[t]);return ou=!0,Fu(n,this.precision,this.rounding)}function Ts(t){return new this(t).tan()}function Ps(t){return new this(t).tanh()}function Bs(t){return Fu(t=new this(t),t.e+1,1)}wu[Symbol.for("nodejs.util.inspect.custom")]=wu.toString,wu[Symbol.toStringTag]="Decimal";var Ns=wu.constructor=function t(e){var n,i,r;function a(t){var e,n,i,r=this;if(!(r instanceof a))return new a(t);if(r.constructor=a,ps(t))return r.s=t.s,void(ou?!t.d||t.e>a.maxE?(r.e=NaN,r.d=null):t.e<a.minE?(r.e=0,r.d=[0]):(r.e=t.e,r.d=t.d.slice()):(r.e=t.e,r.d=t.d?t.d.slice():t.d));if("number"===(i=w(t))){if(0===t)return r.s=1/t<0?-1:1,r.e=0,void(r.d=[0]);if(t<0?(t=-t,r.s=-1):r.s=1,t===~~t&&t<1e7){for(e=0,n=t;n>=10;n/=10)e++;return void(ou?e>a.maxE?(r.e=NaN,r.d=null):e<a.minE?(r.e=0,r.d=[0]):(r.e=e,r.d=[t]):(r.e=e,r.d=[t]))}return 0*t!=0?(t||(r.s=NaN),r.e=NaN,void(r.d=null)):Ru(r,t.toString())}if("string"!==i)throw Error(su+t);return 45===(n=t.charCodeAt(0))?(t=t.slice(1),r.s=-1):(43===n&&(t=t.slice(1)),r.s=1),gu.test(t)?Ru(r,t):qu(r,t)}if(a.prototype=wu,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.EUCLID=9,a.config=a.set=os,a.clone=t,a.isDecimal=ps,a.abs=Ju,a.acos=Zu,a.acosh=Yu,a.add=Gu,a.asin=Qu,a.asinh=Xu,a.atan=ts,a.atanh=es,a.atan2=ns,a.cbrt=is,a.ceil=rs,a.clamp=as,a.cos=us,a.cosh=ss,a.div=ls,a.exp=cs,a.floor=ds,a.hypot=fs,a.ln=hs,a.log=vs,a.log10=gs,a.log2=ms,a.max=bs,a.min=ys,a.mod=_s,a.mul=xs,a.pow=ws,a.random=Ds,a.round=ks,a.sign=Cs,a.sin=As,a.sinh=Es,a.sqrt=Fs,a.sub=Is,a.sum=Ss,a.tan=Ts,a.tanh=Ps,a.trunc=Bs,void 0===e&&(e={}),e&&!0!==e.defaults)for(r=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],n=0;n<r.length;)e.hasOwnProperty(i=r[n++])||(e[i]=this[i]);return a.config(e),a}(au);iu=new Ns(iu),ru=new Ns(ru);var zs=Lo("BigNumber",["?on","config"],(function(t){var e=t.on,n=t.config,i=Ns.clone({precision:n.precision,modulo:Ns.EUCLID});return i.prototype=Object.create(i.prototype),i.prototype.type="BigNumber",i.prototype.isBigNumber=!0,i.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},i.fromJSON=function(t){return new i(t.value)},e&&e("config",(function(t,e){t.precision!==e.precision&&i.config({precision:t.precision})})),i}),{isClass:!0}),Os={exports:{}};
/**
       * @license Complex.js v2.1.1 12/05/2020
       *
       * Copyright (c) 2020, Robert Eisele (robert@xarg.org)
       * Dual licensed under the MIT or GPL Version 2 licenses.
       **/
!function(t,e){!function(e){var n=Math.cosh||function(t){return Math.abs(t)<1e-9?1-t:.5*(Math.exp(t)+Math.exp(-t))},i=Math.sinh||function(t){return Math.abs(t)<1e-9?t:.5*(Math.exp(t)-Math.exp(-t))},r=function(){throw SyntaxError("Invalid Param")};function a(t,e){var n=Math.abs(t),i=Math.abs(e);return 0===t?Math.log(i):0===e?Math.log(n):n<3e3&&i<3e3?.5*Math.log(t*t+e*e):(t/=2,e/=2,.5*Math.log(t*t+e*e)+Math.LN2)}function o(t,e){if(!(this instanceof o))return new o(t,e);var n=function(t,e){var n={re:0,im:0};if(null==t)n.re=n.im=0;else if(void 0!==e)n.re=t,n.im=e;else switch(w(t)){case"object":if("im"in t&&"re"in t)n.re=t.re,n.im=t.im;else if("abs"in t&&"arg"in t){if(!Number.isFinite(t.abs)&&Number.isFinite(t.arg))return o.INFINITY;n.re=t.abs*Math.cos(t.arg),n.im=t.abs*Math.sin(t.arg)}else if("r"in t&&"phi"in t){if(!Number.isFinite(t.r)&&Number.isFinite(t.phi))return o.INFINITY;n.re=t.r*Math.cos(t.phi),n.im=t.r*Math.sin(t.phi)}else 2===t.length?(n.re=t[0],n.im=t[1]):r();break;case"string":n.im=n.re=0;var i=t.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),a=1,u=0;null===i&&r();for(var s=0;s<i.length;s++){var l=i[s];" "===l||"\t"===l||"\n"===l||("+"===l?a++:"-"===l?u++:"i"===l||"I"===l?(a+u===0&&r()," "===i[s+1]||isNaN(i[s+1])?n.im+=parseFloat((u%2?"-":"")+"1"):(n.im+=parseFloat((u%2?"-":"")+i[s+1]),s++),a=u=0):((a+u===0||isNaN(l))&&r(),"i"===i[s+1]||"I"===i[s+1]?(n.im+=parseFloat((u%2?"-":"")+l),s++):n.re+=parseFloat((u%2?"-":"")+l),a=u=0))}a+u>0&&r();break;case"number":n.im=0,n.re=t;break;default:r()}return isNaN(n.re)||isNaN(n.im),n}(t,e);this.re=n.re,this.im=n.im}o.prototype={re:0,im:0,sign:function(){var t=this.abs();return new o(this.re/t,this.im/t)},add:function(t,e){var n=new o(t,e);return this.isInfinite()&&n.isInfinite()?o.NAN:this.isInfinite()||n.isInfinite()?o.INFINITY:new o(this.re+n.re,this.im+n.im)},sub:function(t,e){var n=new o(t,e);return this.isInfinite()&&n.isInfinite()?o.NAN:this.isInfinite()||n.isInfinite()?o.INFINITY:new o(this.re-n.re,this.im-n.im)},mul:function(t,e){var n=new o(t,e);return this.isInfinite()&&n.isZero()||this.isZero()&&n.isInfinite()?o.NAN:this.isInfinite()||n.isInfinite()?o.INFINITY:0===n.im&&0===this.im?new o(this.re*n.re,0):new o(this.re*n.re-this.im*n.im,this.re*n.im+this.im*n.re)},div:function(t,e){var n=new o(t,e);if(this.isZero()&&n.isZero()||this.isInfinite()&&n.isInfinite())return o.NAN;if(this.isInfinite()||n.isZero())return o.INFINITY;if(this.isZero()||n.isInfinite())return o.ZERO;t=this.re,e=this.im;var i,r,a=n.re,u=n.im;return 0===u?new o(t/a,e/a):Math.abs(a)<Math.abs(u)?new o((t*(r=a/u)+e)/(i=a*r+u),(e*r-t)/i):new o((t+e*(r=u/a))/(i=u*r+a),(e-t*r)/i)},pow:function(t,e){var n=new o(t,e);if(t=this.re,e=this.im,n.isZero())return o.ONE;if(0===n.im){if(0===e&&t>0)return new o(Math.pow(t,n.re),0);if(0===t)switch((n.re%4+4)%4){case 0:return new o(Math.pow(e,n.re),0);case 1:return new o(0,Math.pow(e,n.re));case 2:return new o(-Math.pow(e,n.re),0);case 3:return new o(0,-Math.pow(e,n.re))}}if(0===t&&0===e&&n.re>0&&n.im>=0)return o.ZERO;var i=Math.atan2(e,t),r=a(t,e);return t=Math.exp(n.re*r-n.im*i),e=n.im*r+n.re*i,new o(t*Math.cos(e),t*Math.sin(e))},sqrt:function(){var t,e,n=this.re,i=this.im,r=this.abs();if(n>=0){if(0===i)return new o(Math.sqrt(n),0);t=.5*Math.sqrt(2*(r+n))}else t=Math.abs(i)/Math.sqrt(2*(r-n));return e=n<=0?.5*Math.sqrt(2*(r-n)):Math.abs(i)/Math.sqrt(2*(r+n)),new o(t,i<0?-e:e)},exp:function(){var t=Math.exp(this.re);return this.im,new o(t*Math.cos(this.im),t*Math.sin(this.im))},expm1:function(){var t=this.re,e=this.im;return new o(Math.expm1(t)*Math.cos(e)+function(t){var e=Math.PI/4;if(-e>t||t>e)return Math.cos(t)-1;var n=t*t;return n*(n*(n*(n*(n*(n*(n*(n/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-.5)}(e),Math.exp(t)*Math.sin(e))},log:function(){var t=this.re,e=this.im;return new o(a(t,e),Math.atan2(e,t))},abs:function(){return function(t,e){var n=Math.abs(t),i=Math.abs(e);return n<3e3&&i<3e3?Math.sqrt(n*n+i*i):(n<i?(n=i,i=t/e):i=e/t,n*Math.sqrt(1+i*i))}(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var t=this.re,e=this.im;return new o(Math.sin(t)*n(e),Math.cos(t)*i(e))},cos:function(){var t=this.re,e=this.im;return new o(Math.cos(t)*n(e),-Math.sin(t)*i(e))},tan:function(){var t=2*this.re,e=2*this.im,r=Math.cos(t)+n(e);return new o(Math.sin(t)/r,i(e)/r)},cot:function(){var t=2*this.re,e=2*this.im,r=Math.cos(t)-n(e);return new o(-Math.sin(t)/r,i(e)/r)},sec:function(){var t=this.re,e=this.im,r=.5*n(2*e)+.5*Math.cos(2*t);return new o(Math.cos(t)*n(e)/r,Math.sin(t)*i(e)/r)},csc:function(){var t=this.re,e=this.im,r=.5*n(2*e)-.5*Math.cos(2*t);return new o(Math.sin(t)*n(e)/r,-Math.cos(t)*i(e)/r)},asin:function(){var t=this.re,e=this.im,n=new o(e*e-t*t+1,-2*t*e).sqrt(),i=new o(n.re-e,n.im+t).log();return new o(i.im,-i.re)},acos:function(){var t=this.re,e=this.im,n=new o(e*e-t*t+1,-2*t*e).sqrt(),i=new o(n.re-e,n.im+t).log();return new o(Math.PI/2-i.im,i.re)},atan:function(){var t=this.re,e=this.im;if(0===t){if(1===e)return new o(0,1/0);if(-1===e)return new o(0,-1/0)}var n=t*t+(1-e)*(1-e),i=new o((1-e*e-t*t)/n,-2*t/n).log();return new o(-.5*i.im,.5*i.re)},acot:function(){var t=this.re,e=this.im;if(0===e)return new o(Math.atan2(1,t),0);var n=t*t+e*e;return 0!==n?new o(t/n,-e/n).atan():new o(0!==t?t/0:0,0!==e?-e/0:0).atan()},asec:function(){var t=this.re,e=this.im;if(0===t&&0===e)return new o(0,1/0);var n=t*t+e*e;return 0!==n?new o(t/n,-e/n).acos():new o(0!==t?t/0:0,0!==e?-e/0:0).acos()},acsc:function(){var t=this.re,e=this.im;if(0===t&&0===e)return new o(Math.PI/2,1/0);var n=t*t+e*e;return 0!==n?new o(t/n,-e/n).asin():new o(0!==t?t/0:0,0!==e?-e/0:0).asin()},sinh:function(){var t=this.re,e=this.im;return new o(i(t)*Math.cos(e),n(t)*Math.sin(e))},cosh:function(){var t=this.re,e=this.im;return new o(n(t)*Math.cos(e),i(t)*Math.sin(e))},tanh:function(){var t=2*this.re,e=2*this.im,r=n(t)+Math.cos(e);return new o(i(t)/r,Math.sin(e)/r)},coth:function(){var t=2*this.re,e=2*this.im,r=n(t)-Math.cos(e);return new o(i(t)/r,-Math.sin(e)/r)},csch:function(){var t=this.re,e=this.im,r=Math.cos(2*e)-n(2*t);return new o(-2*i(t)*Math.cos(e)/r,2*n(t)*Math.sin(e)/r)},sech:function(){var t=this.re,e=this.im,r=Math.cos(2*e)+n(2*t);return new o(2*n(t)*Math.cos(e)/r,-2*i(t)*Math.sin(e)/r)},asinh:function(){var t=this.im;this.im=-this.re,this.re=t;var e=this.asin();return this.re=-this.im,this.im=t,t=e.re,e.re=-e.im,e.im=t,e},acosh:function(){var t=this.acos();if(t.im<=0){var e=t.re;t.re=-t.im,t.im=e}else{e=t.im;t.im=-t.re,t.re=e}return t},atanh:function(){var t=this.re,e=this.im,n=t>1&&0===e,i=1-t,r=1+t,u=i*i+e*e,s=0!==u?new o((r*i-e*e)/u,(e*i+r*e)/u):new o(-1!==t?t/0:0,0!==e?e/0:0),l=s.re;return s.re=a(s.re,s.im)/2,s.im=Math.atan2(s.im,l)/2,n&&(s.im=-s.im),s},acoth:function(){var t=this.re,e=this.im;if(0===t&&0===e)return new o(0,Math.PI/2);var n=t*t+e*e;return 0!==n?new o(t/n,-e/n).atanh():new o(0!==t?t/0:0,0!==e?-e/0:0).atanh()},acsch:function(){var t=this.re,e=this.im;if(0===e)return new o(0!==t?Math.log(t+Math.sqrt(t*t+1)):1/0,0);var n=t*t+e*e;return 0!==n?new o(t/n,-e/n).asinh():new o(0!==t?t/0:0,0!==e?-e/0:0).asinh()},asech:function(){var t=this.re,e=this.im;if(this.isZero())return o.INFINITY;var n=t*t+e*e;return 0!==n?new o(t/n,-e/n).acosh():new o(0!==t?t/0:0,0!==e?-e/0:0).acosh()},inverse:function(){if(this.isZero())return o.INFINITY;if(this.isInfinite())return o.ZERO;var t=this.re,e=this.im,n=t*t+e*e;return new o(t/n,-e/n)},conjugate:function(){return new o(this.re,-this.im)},neg:function(){return new o(-this.re,-this.im)},ceil:function(t){return t=Math.pow(10,t||0),new o(Math.ceil(this.re*t)/t,Math.ceil(this.im*t)/t)},floor:function(t){return t=Math.pow(10,t||0),new o(Math.floor(this.re*t)/t,Math.floor(this.im*t)/t)},round:function(t){return t=Math.pow(10,t||0),new o(Math.round(this.re*t)/t,Math.round(this.im*t)/t)},equals:function(t,e){var n=new o(t,e);return Math.abs(n.re-this.re)<=o.EPSILON&&Math.abs(n.im-this.im)<=o.EPSILON},clone:function(){return new o(this.re,this.im)},toString:function(){var t=this.re,e=this.im,n="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(t)<o.EPSILON&&(t=0),Math.abs(e)<o.EPSILON&&(e=0),0===e?n+t:(0!==t?(n+=t,n+=" ",e<0?(e=-e,n+="-"):n+="+",n+=" "):e<0&&(e=-e,n+="-"),1!==e&&(n+=e),n+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return 0===this.im?this.re:null},isNaN:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(){return isNaN(this.re)||isNaN(this.im)})),isZero:function(){return 0===this.im&&0===this.re},isFinite:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(){return isFinite(this.re)&&isFinite(this.im)})),isInfinite:function(){return!(this.isNaN()||this.isFinite())}},o.ZERO=new o(0,0),o.ONE=new o(1,0),o.I=new o(0,1),o.PI=new o(Math.PI,0),o.E=new o(Math.E,0),o.INFINITY=new o(1/0,1/0),o.NAN=new o(NaN,NaN),o.EPSILON=1e-15,Object.defineProperty(o,"__esModule",{value:!0}),o.default=o,o.Complex=o,t.exports=o}()}(Os);var Ms=de(Os.exports),Ls=Lo("Complex",[],(function(){return Object.defineProperty(Ms,"name",{value:"Complex"}),Ms.prototype.constructor=Ms,Ms.prototype.type="Complex",Ms.prototype.isComplex=!0,Ms.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},Ms.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},Ms.prototype.format=function(t){var e=this.im,n=this.re,i=ao(this.re,t),r=ao(this.im,t),a=sa(t)?t:t?t.precision:null;if(null!==a){var o=Math.pow(10,-a);Math.abs(n/e)<o&&(n=0),Math.abs(e/n)<o&&(e=0)}return 0===e?i:0===n?1===e?"i":-1===e?"-i":r+"i":e<0?-1===e?i+" - i":i+" - "+r.substring(1)+"i":1===e?i+" + i":i+" + "+r+"i"},Ms.fromPolar=function(t){switch(arguments.length){case 1:var e=arguments[0];if("object"===w(e))return Ms(e);throw new TypeError("Input has to be an object with r and phi keys.");case 2:var n=arguments[0],i=arguments[1];if(sa(n)){if(fa(i)&&i.hasBase("ANGLE")&&(i=i.toNumber("rad")),sa(i))return new Ms({r:n,phi:i});throw new TypeError("Phi is not a number nor an angle unit.")}throw new TypeError("Radius r is not a number.");default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},Ms.prototype.valueOf=Ms.prototype.toString,Ms.fromJSON=function(t){return new Ms(t)},Ms.compare=function(t,e){return t.re>e.re?1:t.re<e.re?-1:t.im>e.im?1:t.im<e.im?-1:0},Ms}),{isClass:!0}),js={exports:{}};
/**
       * @license Fraction.js v4.3.0 20/08/2023
       * https://www.xarg.org/2014/03/rational-numbers-in-javascript/
       *
       * Copyright (c) 2023, Robert Eisele (robert@raw.org)
       * Dual licensed under the MIT or GPL Version 2 licenses.
       **/
!function(t,e){!function(e){var n={s:1,n:0,d:1};function i(t,e){if(isNaN(t=parseInt(t,10)))throw c();return t*e}function r(t,e){if(0===e)throw l();var n=Object.create(s.prototype);n.s=t<0?-1:1;var i=u(t=t<0?-t:t,e);return n.n=t/i,n.d=e/i,n}function a(t){for(var e={},n=t,i=2,r=4;r<=n;){for(;n%i==0;)n/=i,e[i]=(e[i]||0)+1;r+=1+2*i++}return n!==t?n>1&&(e[n]=(e[n]||0)+1):e[t]=(e[t]||0)+1,e}var o=function(t,e){var r,a=0,o=1,u=1,s=0,f=0,p=0,h=1,v=1,m=0,g=1,b=1,y=1,_=1e7;if(null==t);else if(void 0!==e){if(u=(a=t)*(o=e),a%1!=0||o%1!=0)throw d()}else switch(w(t)){case"object":if("d"in t&&"n"in t)a=t.n,o=t.d,"s"in t&&(a*=t.s);else{if(!(0 in t))throw c();a=t[0],1 in t&&(o=t[1])}u=a*o;break;case"number":if(t<0&&(u=t,t=-t),t%1==0)a=t;else if(t>0){for(t>=1&&(t/=v=Math.pow(10,Math.floor(1+Math.log(t)/Math.LN10)));g<=_&&y<=_;){if(t===(r=(m+b)/(g+y))){g+y<=_?(a=m+b,o=g+y):y>g?(a=b,o=y):(a=m,o=g);break}t>r?(m+=b,g+=y):(b+=m,y+=g),g>_?(a=b,o=y):(a=m,o=g)}a*=v}else(isNaN(t)||isNaN(e))&&(o=a=NaN);break;case"string":if(null===(g=t.match(/\d+|./g)))throw c();if("-"===g[m]?(u=-1,m++):"+"===g[m]&&m++,g.length===m+1?f=i(g[m++],u):"."===g[m+1]||"."===g[m]?("."!==g[m]&&(s=i(g[m++],u)),(++m+1===g.length||"("===g[m+1]&&")"===g[m+3]||"'"===g[m+1]&&"'"===g[m+3])&&(f=i(g[m],u),h=Math.pow(10,g[m].length),m++),("("===g[m]&&")"===g[m+2]||"'"===g[m]&&"'"===g[m+2])&&(p=i(g[m+1],u),v=Math.pow(10,g[m+1].length)-1,m+=3)):"/"===g[m+1]||":"===g[m+1]?(f=i(g[m],u),h=i(g[m+2],1),m+=3):"/"===g[m+3]&&" "===g[m+1]&&(s=i(g[m],u),f=i(g[m+2],u),h=i(g[m+4],1),m+=5),g.length<=m){u=a=p+(o=h*v)*s+v*f;break}default:throw c()}if(0===o)throw l();n.s=u<0?-1:1,n.n=Math.abs(a),n.d=Math.abs(o)};function u(t,e){if(!t)return e;if(!e)return t;for(;;){if(!(t%=e))return e;if(!(e%=t))return t}}function s(t,e){if(o(t,e),!(this instanceof s))return r(n.s*n.n,n.d);t=u(n.d,n.n),this.s=n.s,this.n=n.n/t,this.d=n.d/t}var l=function(){return new Error("Division by Zero")},c=function(){return new Error("Invalid argument")},d=function(){return new Error("Parameters must be integer")};s.prototype={s:1,n:0,d:1,abs:function(){return r(this.n,this.d)},neg:function(){return r(-this.s*this.n,this.d)},add:function(t,e){return o(t,e),r(this.s*this.n*n.d+n.s*this.d*n.n,this.d*n.d)},sub:function(t,e){return o(t,e),r(this.s*this.n*n.d-n.s*this.d*n.n,this.d*n.d)},mul:function(t,e){return o(t,e),r(this.s*n.s*this.n*n.n,this.d*n.d)},div:function(t,e){return o(t,e),r(this.s*n.s*this.n*n.d,this.d*n.n)},clone:function(){return r(this.s*this.n,this.d)},mod:function(t,e){if(isNaN(this.n)||isNaN(this.d))return new s(NaN);if(void 0===t)return r(this.s*this.n%this.d,1);if(o(t,e),0===n.n&&0===this.d)throw l();return r(this.s*(n.d*this.n)%(n.n*this.d),n.d*this.d)},gcd:function(t,e){return o(t,e),r(u(n.n,this.n)*u(n.d,this.d),n.d*this.d)},lcm:function(t,e){return o(t,e),0===n.n&&0===this.n?r(0,1):r(n.n*this.n,u(n.n,this.n)*u(n.d,this.d))},ceil:function(t){return t=Math.pow(10,t||0),isNaN(this.n)||isNaN(this.d)?new s(NaN):r(Math.ceil(t*this.s*this.n/this.d),t)},floor:function(t){return t=Math.pow(10,t||0),isNaN(this.n)||isNaN(this.d)?new s(NaN):r(Math.floor(t*this.s*this.n/this.d),t)},round:function(t){return t=Math.pow(10,t||0),isNaN(this.n)||isNaN(this.d)?new s(NaN):r(Math.round(t*this.s*this.n/this.d),t)},inverse:function(){return r(this.s*this.d,this.n)},pow:function(t,e){if(o(t,e),1===n.d)return n.s<0?r(Math.pow(this.s*this.d,n.n),Math.pow(this.n,n.n)):r(Math.pow(this.s*this.n,n.n),Math.pow(this.d,n.n));if(this.s<0)return null;var i=a(this.n),u=a(this.d),s=1,l=1;for(var c in i)if("1"!==c){if("0"===c){s=0;break}if(i[c]*=n.n,i[c]%n.d!=0)return null;i[c]/=n.d,s*=Math.pow(c,i[c])}for(var c in u)if("1"!==c){if(u[c]*=n.n,u[c]%n.d!=0)return null;u[c]/=n.d,l*=Math.pow(c,u[c])}return n.s<0?r(l,s):r(s,l)},equals:function(t,e){return o(t,e),this.s*this.n*n.d==n.s*n.n*this.d},compare:function(t,e){o(t,e);var i=this.s*this.n*n.d-n.s*n.n*this.d;return(0<i)-(i<0)},simplify:function(t){if(isNaN(this.n)||isNaN(this.d))return this;t=t||.001;for(var e=this.abs(),n=e.toContinued(),i=1;i<n.length;i++){for(var a=r(n[i-1],1),o=i-2;o>=0;o--)a=a.inverse().add(n[o]);if(Math.abs(a.sub(e).valueOf())<t)return a.mul(this.s)}return this},divisible:function(t,e){return o(t,e),!(!(n.n*this.d)||this.n*n.d%(n.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(t){var e,n="",i=this.n,r=this.d;return this.s<0&&(n+="-"),1===r?n+=i:(t&&(e=Math.floor(i/r))>0&&(n+=e,n+=" ",i%=r),n+=i,n+="/",n+=r),n},toLatex:function(t){var e,n="",i=this.n,r=this.d;return this.s<0&&(n+="-"),1===r?n+=i:(t&&(e=Math.floor(i/r))>0&&(n+=e,i%=r),n+="\\frac{",n+=i,n+="}{",n+=r,n+="}"),n},toContinued:function(){var t,e=this.n,n=this.d,i=[];if(isNaN(e)||isNaN(n))return i;do{i.push(Math.floor(e/n)),t=e%n,e=n,n=t}while(1!==e);return i},toString:function(t){var e=this.n,n=this.d;if(isNaN(e)||isNaN(n))return"NaN";t=t||15;var i=function(t,e){for(;e%2==0;e/=2);for(;e%5==0;e/=5);if(1===e)return 0;for(var n=10%e,i=1;1!==n;i++)if(n=10*n%e,i>2e3)return 0;return i}(0,n),r=function(t,e,n){for(var i=1,r=function(t,e,n){for(var i=1;e>0;t=t*t%n,e>>=1)1&e&&(i=i*t%n);return i}(10,n,e),a=0;a<300;a++){if(i===r)return a;i=10*i%e,r=10*r%e}return 0}(0,n,i),a=this.s<0?"-":"";if(a+=e/n|0,e%=n,(e*=10)&&(a+="."),i){for(var o=r;o--;)a+=e/n|0,e%=n,e*=10;a+="(";for(o=i;o--;)a+=e/n|0,e%=n,e*=10;a+=")"}else for(o=t;e&&o--;)a+=e/n|0,e%=n,e*=10;return a}},Object.defineProperty(s,"__esModule",{value:!0}),s.default=s,s.Fraction=s,t.exports=s}()}(js);var Us=de(js.exports),Rs=Lo("Fraction",[],(function(){return Object.defineProperty(Us,"name",{value:"Fraction"}),Us.prototype.constructor=Us,Us.prototype.type="Fraction",Us.prototype.isFraction=!0,Us.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},Us.fromJSON=function(t){return new Us(t)},Us}),{isClass:!0}),qs=Lo("Matrix",[],(function(){function t(){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator")}return t.prototype.type="Matrix",t.prototype.isMatrix=!0,t.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},t.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},t.prototype.create=function(t,e){throw new Error("Cannot invoke create on a Matrix interface")},t.prototype.subset=function(t,e,n){throw new Error("Cannot invoke subset on a Matrix interface")},t.prototype.get=function(t){throw new Error("Cannot invoke get on a Matrix interface")},t.prototype.set=function(t,e,n){throw new Error("Cannot invoke set on a Matrix interface")},t.prototype.resize=function(t,e){throw new Error("Cannot invoke resize on a Matrix interface")},t.prototype.reshape=function(t,e){throw new Error("Cannot invoke reshape on a Matrix interface")},t.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},t.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},t.prototype.map=function(t,e){throw new Error("Cannot invoke map on a Matrix interface")},t.prototype.forEach=function(t){throw new Error("Cannot invoke forEach on a Matrix interface")},t.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},t.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},t.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},t.prototype.format=function(t){throw new Error("Cannot invoke format on a Matrix interface")},t.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},t}),{isClass:!0});function Vs(t){return Object.keys(t.signatures||{}).reduce((function(t,e){var n=(e.match(/,/g)||[]).length+1;return Math.max(t,n)}),-1)}var $s=Lo("DenseMatrix",["Matrix"],(function(t){var e=t.Matrix;function n(t,e){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(e&&!pa(e))throw new Error("Invalid datatype: "+e);if(va(t))"DenseMatrix"===t.type?(this._data=Ja(t._data),this._size=Ja(t._size),this._datatype=e||t._datatype):(this._data=t.toArray(),this._size=t.size(),this._datatype=e||t._datatype);else if(t&&ha(t.data)&&ha(t.size))this._data=t.data,this._size=t.size,ko(this._data,this._size),this._datatype=e||t.datatype;else if(ha(t))this._data=u(t),this._size=wo(this._data),ko(this._data,this._size),this._datatype=e;else{if(t)throw new TypeError("Unsupported type of data ("+Wa(t)+")");this._data=[],this._size=[0],this._datatype=e}}function i(t,e,n,r){var a=r===n-1,o=e.dimension(r);return a?o.map((function(e){return Co(e,t.length),t[e]})).valueOf():o.map((function(a){return Co(a,t.length),i(t[a],e,n,r+1)})).valueOf()}function r(t,e,n,i,a){var o=a===i-1,u=e.dimension(a);o?u.forEach((function(e,i){Co(e),t[e]=n[i[0]]})):u.forEach((function(o,u){Co(o),r(t[o],e,n[u[0]],i,a+1)}))}function a(t,e,n){if(0===e.length){for(var i=t._data;ha(i);)i=i[0];return i}return t._size=e.slice(0),t._data=Ao(t._data,t._size,n),t}function o(t,e,n){for(var i=t._size.slice(0),r=!1;i.length<e.length;)i.push(0),r=!0;for(var o=0,u=e.length;o<u;o++)e[o]>i[o]&&(i[o]=e[o],r=!0);r&&a(t,i,n)}function u(t){return va(t)?u(t.valueOf()):ha(t)?t.map(u):t}return n.prototype=new e,n.prototype.createDenseMatrix=function(t,e){return new n(t,e)},Object.defineProperty(n,"name",{value:"DenseMatrix"}),n.prototype.constructor=n,n.prototype.type="DenseMatrix",n.prototype.isDenseMatrix=!0,n.prototype.getDataType=function(){return Bo(this._data,Wa)},n.prototype.storage=function(){return"dense"},n.prototype.datatype=function(){return this._datatype},n.prototype.create=function(t,e){return new n(t,e)},n.prototype.subset=function(t,e,a){switch(arguments.length){case 1:return function(t,e){if(!_a(e))throw new TypeError("Invalid index");var r=e.isScalar();if(r)return t.get(e.min());var a=e.size();if(a.length!==t._size.length)throw new _o(a.length,t._size.length);for(var o=e.min(),u=e.max(),s=0,l=t._size.length;s<l;s++)Co(o[s],t._size[s]),Co(u[s],t._size[s]);return new n(i(t._data,e,a.length,0),t._datatype)}(this,t);case 2:case 3:return function(t,e,n,i){if(!e||!0!==e.isIndex)throw new TypeError("Invalid index");var a,u=e.size(),s=e.isScalar();va(n)?(a=n.size(),n=n.valueOf()):a=wo(n);if(s){if(0!==a.length)throw new TypeError("Scalar expected");t.set(e.min(),n,i)}else{if(!Za(a,u))try{a=wo(n=0===a.length?Mo([n],u):Mo(n,u))}catch(h){}if(u.length<t._size.length)throw new _o(u.length,t._size.length,"<");if(a.length<u.length){for(var l=0,c=0;1===u[l]&&1===a[l];)l++;for(;1===u[l];)c++,l++;n=To(n,u.length,c,a)}if(!Za(u,a))throw new _o(u,a,">");var d=e.max().map((function(t){return t+1}));o(t,d,i);var f=u.length,p=0;r(t._data,e,n,f,p)}return t}(this,t,e,a);default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.get=function(t){if(!ha(t))throw new TypeError("Array expected");if(t.length!==this._size.length)throw new _o(t.length,this._size.length);for(var e=0;e<t.length;e++)Co(t[e],this._size[e]);for(var n=this._data,i=0,r=t.length;i<r;i++){var a=t[i];Co(a,n.length),n=n[a]}return n},n.prototype.set=function(t,e,n){if(!ha(t))throw new TypeError("Array expected");if(t.length<this._size.length)throw new _o(t.length,this._size.length,"<");var i,r,a,u=t.map((function(t){return t+1}));o(this,u,n);var s=this._data;for(i=0,r=t.length-1;i<r;i++)Co(a=t[i],s.length),s=s[a];return Co(a=t[t.length-1],s.length),s[a]=e,this},n.prototype.resize=function(t,e,n){if(!ma(t))throw new TypeError("Array or Matrix expected");var i=t.valueOf().map((function(t){return Array.isArray(t)&&1===t.length?t[0]:t}));return a(n?this.clone():this,i,e)},n.prototype.reshape=function(t,e){var n=e?this.clone():this;n._data=Fo(n._data,t);var i=n._size.reduce((function(t,e){return t*e}));return n._size=Io(t,i),n},n.prototype.clone=function(){return new n({data:Ja(this._data),size:Ja(this._size),datatype:this._datatype})},n.prototype.size=function(){return this._size.slice(0)},n.prototype.map=function(t){var e=this,i=Vs(t),r=function n(r,a){return ha(r)?r.map((function(t,e){return n(t,a.concat(e))})):1===i?t(r):2===i?t(r,a):t(r,a,e)}(this._data,[]);return new n(r,void 0!==this._datatype?Bo(r,Wa):void 0)},n.prototype.forEach=function(t){var e=this;!function n(i,r){ha(i)?i.forEach((function(t,e){n(t,r.concat(e))})):t(i,r,e)}(this._data,[])},n.prototype[Symbol.iterator]=y().mark((function t(){var e;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=y().mark((function t(e,n){var i;return y().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!ha(e)){r.next=9;break}i=0;case 2:if(!(i<e.length)){r.next=7;break}return r.delegateYield(t(e[i],n.concat(i)),"t0",4);case 4:i++,r.next=2;break;case 7:r.next=11;break;case 9:return r.next=11,{value:e,index:n};case 11:case"end":return r.stop()}}),t)})),t.delegateYield(e(this._data,[]),"t0",2);case 2:case"end":return t.stop()}}),t,this)})),n.prototype.rows=function(){var t=[];if(2!==this.size().length)throw new TypeError("Rows can only be returned for a 2D matrix.");var e,i=f(this._data);try{for(i.s();!(e=i.n()).done;){var r=e.value;t.push(new n([r],this._datatype))}}catch(a){i.e(a)}finally{i.f()}return t},n.prototype.columns=function(){var t=this,e=[],i=this.size();if(2!==i.length)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var r=this._data,a=function(i){var a=r.map((function(t){return[t[i]]}));e.push(new n(a,t._datatype))},o=0;o<i[1];o++)a(o);return e},n.prototype.toArray=function(){return Ja(this._data)},n.prototype.valueOf=function(){return this._data},n.prototype.format=function(t){return mo(this._data,t)},n.prototype.toString=function(){return mo(this._data)},n.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.prototype.diagonal=function(t){if(t){if(la(t)&&(t=t.toNumber()),!sa(t)||!io(t))throw new TypeError("The parameter k must be an integer number")}else t=0;for(var e=t>0?t:0,i=t<0?-t:0,r=this._size[0],a=this._size[1],o=Math.min(r-i,a-e),u=[],s=0;s<o;s++)u[s]=this._data[s+i][s+e];return new n({data:u,size:[o],datatype:this._datatype})},n.diagonal=function(t,e,i,r){if(!ha(t))throw new TypeError("Array expected, size parameter");if(2!==t.length)throw new Error("Only two dimensions matrix are supported");if(t=t.map((function(t){if(la(t)&&(t=t.toNumber()),!sa(t)||!io(t)||t<1)throw new Error("Size values must be positive integers");return t})),i){if(la(i)&&(i=i.toNumber()),!sa(i)||!io(i))throw new TypeError("The parameter k must be an integer number")}else i=0;var a,o=i>0?i:0,u=i<0?-i:0,s=t[0],l=t[1],c=Math.min(s-u,l-o);if(ha(e)){if(e.length!==c)throw new Error("Invalid value array length");a=function(t){return e[t]}}else if(va(e)){var d=e.size();if(1!==d.length||d[0]!==c)throw new Error("Invalid matrix length");a=function(t){return e.get([t])}}else a=function(){return e};r||(r=la(a(0))?a(0).mul(0):0);var f=[];if(t.length>0){f=Ao(f,t,r);for(var p=0;p<c;p++)f[p+u][p+o]=a(p)}return new n({data:f,size:[s,l]})},n.fromJSON=function(t){return new n(t)},n.prototype.swapRows=function(t,e){if(!(sa(t)&&io(t)&&sa(e)&&io(e)))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return Co(t,this._size[0]),Co(e,this._size[0]),n._swapRows(t,e,this._data),this},n._swapRows=function(t,e,n){var i=n[t];n[t]=n[e],n[e]=i},n}),{isClass:!0});function Ks(t,e,n){return t&&"function"==typeof t.map?t.map((function(t){return Ks(t,e)})):e(t)}var Hs="isInteger",Ws=Lo(Hs,["typed"],(function(t){var e=t.typed;return e(Hs,{number:io,BigNumber:function(t){return t.isInt()},Fraction:function(t){return 1===t.d&&isFinite(t.n)},"Array | Matrix":e.referToSelf((function(t){return function(e){return Ks(e,t)}}))})}));function Js(t,e){return t+e}Js.signature="number, number";var Zs=Lo("compareUnits",["typed"],(function(t){var e=t.typed;return{"Unit, Unit":e.referToSelf((function(t){return function(n,i){if(!n.equalBase(i))throw new Error("Cannot compare units with different base");return e.find(t,[n.valueType(),i.valueType()])(n.value,i.value)}}))}})),Ys="equalScalar",Gs=Lo(Ys,["typed","config"],(function(t){var e=t.typed,n=t.config,i=Zs({typed:e});return e(Ys,{"boolean, boolean":function(t,e){return t===e},"number, number":function(t,e){return fo(t,e,n.epsilon)},"BigNumber, BigNumber":function(t,e){return t.eq(e)||function(t,e,n){if(null==n)return t.eq(e);if(t.eq(e))return!0;if(t.isNaN()||e.isNaN())return!1;if(t.isFinite()&&e.isFinite()){var i=t.minus(e).abs();if(i.isZero())return!0;var r=t.constructor.max(t.abs(),e.abs());return i.lte(r.times(n))}return!1}(t,e,n.epsilon)},"Fraction, Fraction":function(t,e){return t.equals(e)},"Complex, Complex":function(t,e){return function(t,e,n){return fo(t.re,e.re,n)&&fo(t.im,e.im,n)}(t,e,n.epsilon)}},i)}));Lo(Ys,["typed","config"],(function(t){var e=t.typed,n=t.config;return e(Ys,{"number, number":function(t,e){return fo(t,e,n.epsilon)}})}));var Qs=Lo("SparseMatrix",["typed","equalScalar","Matrix"],(function(t){var e=t.typed,n=t.equalScalar,i=t.Matrix;function r(t,e){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(e&&!pa(e))throw new Error("Invalid datatype: "+e);if(va(t))!function(t,e,n){"SparseMatrix"===e.type?(t._values=e._values?Ja(e._values):void 0,t._index=Ja(e._index),t._ptr=Ja(e._ptr),t._size=Ja(e._size),t._datatype=n||e._datatype):a(t,e.valueOf(),n||e._datatype)}(this,t,e);else if(t&&ha(t.index)&&ha(t.ptr)&&ha(t.size))this._values=t.values,this._index=t.index,this._ptr=t.ptr,this._size=t.size,this._datatype=e||t.datatype;else if(ha(t))a(this,t,e);else{if(t)throw new TypeError("Unsupported type of data ("+Wa(t)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=e}}function a(t,i,r){t._values=[],t._index=[],t._ptr=[],t._datatype=r;var a=i.length,o=0,u=n,s=0;if(pa(r)&&(u=e.find(n,[r,r])||n,s=e.convert(0,r)),a>0){var l=0;do{t._ptr.push(t._index.length);for(var c=0;c<a;c++){var d=i[c];if(ha(d)){if(0===l&&o<d.length&&(o=d.length),l<d.length){var f=d[l];u(f,s)||(t._values.push(f),t._index.push(c))}}else 0===l&&o<1&&(o=1),u(d,s)||(t._values.push(d),t._index.push(c))}l++}while(l<o)}t._ptr.push(t._index.length),t._size=[a,o]}function o(t,e,n,i){if(n-e==0)return n;for(var r=e;r<n;r++)if(i[r]===t)return r;return e}function u(t,e,n,i,r,a,o){r.splice(t,0,i),a.splice(t,0,e);for(var u=n+1;u<o.length;u++)o[u]++}function s(t,i,r,a){var o=a||0,u=n,s=0;pa(t._datatype)&&(u=e.find(n,[t._datatype,t._datatype])||n,s=e.convert(0,t._datatype),o=e.convert(o,t._datatype));var l,c,d,f=!u(o,s),p=t._size[0],h=t._size[1];if(r>h){for(c=h;c<r;c++)if(t._ptr[c]=t._values.length,f)for(l=0;l<p;l++)t._values.push(o),t._index.push(l);t._ptr[r]=t._values.length}else r<h&&(t._ptr.splice(r+1,h-r),t._values.splice(t._ptr[r],t._values.length),t._index.splice(t._ptr[r],t._index.length));if(h=r,i>p){if(f){var v=0;for(c=0;c<h;c++){t._ptr[c]=t._ptr[c]+v,d=t._ptr[c+1]+v;var m=0;for(l=p;l<i;l++,m++)t._values.splice(d+m,0,o),t._index.splice(d+m,0,l),v++}t._ptr[h]=t._values.length}}else if(i<p){var g=0;for(c=0;c<h;c++){t._ptr[c]=t._ptr[c]-g;var b=t._ptr[c],y=t._ptr[c+1]-g;for(d=b;d<y;d++)(l=t._index[d])>i-1&&(t._values.splice(d,1),t._index.splice(d,1),g++)}t._ptr[c]=t._values.length}return t._size[0]=i,t._size[1]=r,t}function l(t,e,n,i,r){var a,o,u=i[0],s=i[1],l=[];for(a=0;a<u;a++)for(l[a]=[],o=0;o<s;o++)l[a][o]=0;for(o=0;o<s;o++)for(var c=n[o],d=n[o+1],f=c;f<d;f++)l[a=e[f]][o]=t?r?Ja(t[f]):t[f]:1;return l}return r.prototype=new i,r.prototype.createSparseMatrix=function(t,e){return new r(t,e)},Object.defineProperty(r,"name",{value:"SparseMatrix"}),r.prototype.constructor=r,r.prototype.type="SparseMatrix",r.prototype.isSparseMatrix=!0,r.prototype.getDataType=function(){return Bo(this._values,Wa)},r.prototype.storage=function(){return"sparse"},r.prototype.datatype=function(){return this._datatype},r.prototype.create=function(t,e){return new r(t,e)},r.prototype.density=function(){var t=this._size[0],e=this._size[1];return 0!==t&&0!==e?this._index.length/(t*e):0},r.prototype.subset=function(t,e,n){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return function(t,e){if(!_a(e))throw new TypeError("Invalid index");if(e.isScalar())return t.get(e.min());var n,i,a,o,u=e.size();if(u.length!==t._size.length)throw new _o(u.length,t._size.length);var s=e.min(),l=e.max();for(n=0,i=t._size.length;n<i;n++)Co(s[n],t._size[n]),Co(l[n],t._size[n]);var c=t._values,d=t._index,f=t._ptr,p=e.dimension(0),h=e.dimension(1),v=[],m=[];p.forEach((function(t,e){m[t]=e[0],v[t]=!0}));var g=c?[]:void 0,b=[],y=[];return h.forEach((function(t){for(y.push(b.length),a=f[t],o=f[t+1];a<o;a++)n=d[a],!0===v[n]&&(b.push(m[n]),g&&g.push(c[a]))})),y.push(b.length),new r({values:g,index:b,ptr:y,size:u,datatype:t._datatype})}(this,t);case 2:case 3:return function(t,e,n,i){if(!e||!0!==e.isIndex)throw new TypeError("Invalid index");var r,a=e.size(),o=e.isScalar();va(n)?(r=n.size(),n=n.toArray()):r=wo(n);if(o){if(0!==r.length)throw new TypeError("Scalar expected");t.set(e.min(),n,i)}else{if(1!==a.length&&2!==a.length)throw new _o(a.length,t._size.length,"<");if(r.length<a.length){for(var u=0,s=0;1===a[u]&&1===r[u];)u++;for(;1===a[u];)s++,u++;n=To(n,a.length,s,r)}if(!Za(a,r))throw new _o(a,r,">");if(1===a.length){e.dimension(0).forEach((function(e,r){Co(e),t.set([e,0],n[r[0]],i)}))}else{var l=e.dimension(0),c=e.dimension(1);l.forEach((function(e,r){Co(e),c.forEach((function(a,o){Co(a),t.set([e,a],n[r[0]][o[0]],i)}))}))}}return t}(this,t,e,n);default:throw new SyntaxError("Wrong number of arguments")}},r.prototype.get=function(t){if(!ha(t))throw new TypeError("Array expected");if(t.length!==this._size.length)throw new _o(t.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var e=t[0],n=t[1];Co(e,this._size[0]),Co(n,this._size[1]);var i=o(e,this._ptr[n],this._ptr[n+1],this._index);return i<this._ptr[n+1]&&this._index[i]===e?this._values[i]:0},r.prototype.set=function(t,i,r){if(!ha(t))throw new TypeError("Array expected");if(t.length!==this._size.length)throw new _o(t.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var a=t[0],l=t[1],c=this._size[0],d=this._size[1],f=n,p=0;pa(this._datatype)&&(f=e.find(n,[this._datatype,this._datatype])||n,p=e.convert(0,this._datatype)),(a>c-1||l>d-1)&&(s(this,Math.max(a+1,c),Math.max(l+1,d),r),c=this._size[0],d=this._size[1]),Co(a,c),Co(l,d);var h=o(a,this._ptr[l],this._ptr[l+1],this._index);return h<this._ptr[l+1]&&this._index[h]===a?f(i,p)?function(t,e,n,i,r){n.splice(t,1),i.splice(t,1);for(var a=e+1;a<r.length;a++)r[a]--}(h,l,this._values,this._index,this._ptr):this._values[h]=i:f(i,p)||u(h,a,l,i,this._values,this._index,this._ptr),this},r.prototype.resize=function(t,e,n){if(!ma(t))throw new TypeError("Array or Matrix expected");var i=t.valueOf().map((function(t){return Array.isArray(t)&&1===t.length?t[0]:t}));if(2!==i.length)throw new Error("Only two dimensions matrix are supported");return i.forEach((function(t){if(!sa(t)||!io(t)||t<0)throw new TypeError("Invalid size, must contain positive integers (size: "+mo(i)+")")})),s(n?this.clone():this,i[0],i[1],e)},r.prototype.reshape=function(t,e){if(!ha(t))throw new TypeError("Array expected");if(2!==t.length)throw new Error("Sparse matrices can only be reshaped in two dimensions");t.forEach((function(e){if(!sa(e)||!io(e)||e<=-2||0===e)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+mo(t)+")")}));var n=this._size[0]*this._size[1];if(n!==(t=Io(t,n))[0]*t[1])throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var i=e?this.clone():this;if(this._size[0]===t[0]&&this._size[1]===t[1])return i;for(var r=[],a=0;a<i._ptr.length;a++)for(var s=0;s<i._ptr[a+1]-i._ptr[a];s++)r.push(a);for(var l=i._values.slice(),c=i._index.slice(),d=0;d<i._index.length;d++){var f=c[d],p=r[d],h=f*i._size[1]+p;r[d]=h%t[1],c[d]=Math.floor(h/t[1])}i._values.length=0,i._index.length=0,i._ptr.length=t[1]+1,i._size=t.slice();for(var v=0;v<i._ptr.length;v++)i._ptr[v]=0;for(var m=0;m<l.length;m++){var g=c[m],b=r[m],y=l[m];u(o(g,i._ptr[b],i._ptr[b+1],i._index),g,b,y,i._values,i._index,i._ptr)}return i},r.prototype.clone=function(){return new r({values:this._values?Ja(this._values):void 0,index:Ja(this._index),ptr:Ja(this._ptr),size:Ja(this._size),datatype:this._datatype})},r.prototype.size=function(){return this._size.slice(0)},r.prototype.map=function(t,i){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var a=this,o=this._size[0],u=this._size[1],s=Vs(t);return function(t,i,a,o,u,s,l){var c=[],d=[],f=[],p=n,h=0;pa(t._datatype)&&(p=e.find(n,[t._datatype,t._datatype])||n,h=e.convert(0,t._datatype));for(var v=function(t,e,n){t=s(t,e,n),p(t,h)||(c.push(t),d.push(e))},m=o;m<=u;m++){f.push(c.length);var g=t._ptr[m],b=t._ptr[m+1];if(l)for(var y=g;y<b;y++){var _=t._index[y];_>=i&&_<=a&&v(t._values[y],_-i,m-o)}else{for(var x={},w=g;w<b;w++){x[t._index[w]]=t._values[w]}for(var D=i;D<=a;D++){v(D in x?x[D]:0,D-i,m-o)}}}return f.push(c.length),new r({values:c,index:d,ptr:f,size:[a-i+1,u-o+1]})}(this,0,o-1,0,u-1,(function(e,n,i){return 1===s?t(e):2===s?t(e,[n,i]):t(e,[n,i],a)}),i)},r.prototype.forEach=function(t,e){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var n=this._size[0],i=this._size[1],r=0;r<i;r++){var a=this._ptr[r],o=this._ptr[r+1];if(e)for(var u=a;u<o;u++){var s=this._index[u];t(this._values[u],[s,r],this)}else{for(var l={},c=a;c<o;c++){l[this._index[c]]=this._values[c]}for(var d=0;d<n;d++){t(d in l?l[d]:0,[d,r],this)}}}},r.prototype[Symbol.iterator]=y().mark((function t(){var e,n,i,r,a,o;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._values){t.next=2;break}throw new Error("Cannot iterate a Pattern only matrix");case 2:e=this._size[1],n=0;case 4:if(!(n<e)){t.next=18;break}i=this._ptr[n],r=this._ptr[n+1],a=i;case 8:if(!(a<r)){t.next=15;break}return o=this._index[a],t.next=12,{value:this._values[a],index:[o,n]};case 12:a++,t.next=8;break;case 15:n++,t.next=4;break;case 18:case"end":return t.stop()}}),t,this)})),r.prototype.toArray=function(){return l(this._values,this._index,this._ptr,this._size,!0)},r.prototype.valueOf=function(){return l(this._values,this._index,this._ptr,this._size,!1)},r.prototype.format=function(t){for(var e=this._size[0],n=this._size[1],i=this.density(),r="Sparse Matrix ["+mo(e,t)+" x "+mo(n,t)+"] density: "+mo(i,t)+"\n",a=0;a<n;a++)for(var o=this._ptr[a],u=this._ptr[a+1],s=o;s<u;s++){r+="\n    ("+mo(this._index[s],t)+", "+mo(a,t)+") ==> "+(this._values?mo(this._values[s],t):"X")}return r},r.prototype.toString=function(){return mo(this.toArray())},r.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},r.prototype.diagonal=function(t){if(t){if(la(t)&&(t=t.toNumber()),!sa(t)||!io(t))throw new TypeError("The parameter k must be an integer number")}else t=0;var e=t>0?t:0,n=t<0?-t:0,i=this._size[0],a=this._size[1],o=Math.min(i-n,a-e),u=[],s=[],l=[];l[0]=0;for(var c=e;c<a&&u.length<o;c++)for(var d=this._ptr[c],f=this._ptr[c+1],p=d;p<f;p++){var h=this._index[p];if(h===c-e+n){u.push(this._values[p]),s[u.length-1]=h-n;break}}return l.push(u.length),new r({values:u,index:s,ptr:l,size:[o,1]})},r.fromJSON=function(t){return new r(t)},r.diagonal=function(t,i,a,o,u){if(!ha(t))throw new TypeError("Array expected, size parameter");if(2!==t.length)throw new Error("Only two dimensions matrix are supported");if(t=t.map((function(t){if(la(t)&&(t=t.toNumber()),!sa(t)||!io(t)||t<1)throw new Error("Size values must be positive integers");return t})),a){if(la(a)&&(a=a.toNumber()),!sa(a)||!io(a))throw new TypeError("The parameter k must be an integer number")}else a=0;var s=n,l=0;pa(u)&&(s=e.find(n,[u,u])||n,l=e.convert(0,u));var c,d=a>0?a:0,f=a<0?-a:0,p=t[0],h=t[1],v=Math.min(p-f,h-d);if(ha(i)){if(i.length!==v)throw new Error("Invalid value array length");c=function(t){return i[t]}}else if(va(i)){var m=i.size();if(1!==m.length||m[0]!==v)throw new Error("Invalid matrix length");c=function(t){return i.get([t])}}else c=function(){return i};for(var g=[],b=[],y=[],_=0;_<h;_++){y.push(g.length);var x=_-d;if(x>=0&&x<v){var w=c(x);s(w,l)||(b.push(x+f),g.push(w))}}return y.push(g.length),new r({values:g,index:b,ptr:y,size:[p,h]})},r.prototype.swapRows=function(t,e){if(!(sa(t)&&io(t)&&sa(e)&&io(e)))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return Co(t,this._size[0]),Co(e,this._size[0]),r._swapRows(t,e,this._size[1],this._values,this._index,this._ptr),this},r._forEachRow=function(t,e,n,i,r){for(var a=i[t],o=i[t+1],u=a;u<o;u++)r(n[u],e[u])},r._swapRows=function(t,e,n,i,r,a){for(var u=0;u<n;u++){var s=a[u],l=a[u+1],c=o(t,s,l,r),d=o(e,s,l,r);if(c<l&&d<l&&r[c]===t&&r[d]===e){if(i){var f=i[c];i[c]=i[d],i[d]=f}}else if(c<l&&r[c]===t&&(d>=l||r[d]!==e)){var p=i?i[c]:void 0;r.splice(d,0,e),i&&i.splice(d,0,p),r.splice(d<=c?c+1:c,1),i&&i.splice(d<=c?c+1:c,1)}else if(d<l&&r[d]===e&&(c>=l||r[c]!==t)){var h=i?i[d]:void 0;r.splice(c,0,t),i&&i.splice(c,0,h),r.splice(c<=d?d+1:d,1),i&&i.splice(c<=d?d+1:d,1)}}},r}),{isClass:!0}),Xs="matrix",tl=Lo(Xs,["typed","Matrix","DenseMatrix","SparseMatrix"],(function(t){var e=t.typed,n=(t.Matrix,t.DenseMatrix),i=t.SparseMatrix;return e(Xs,{"":function(){return r([])},string:function(t){return r([],t)},"string, string":function(t,e){return r([],t,e)},Array:function(t){return r(t)},Matrix:function(t){return r(t,t.storage())},"Array | Matrix, string":r,"Array | Matrix, string, string":r});function r(t,e,r){if("dense"===e||"default"===e||void 0===e)return new n(t,r);if("sparse"===e)return new i(t,r);throw new TypeError("Unknown matrix type "+JSON.stringify(e)+".")}})),el="addScalar",nl=Lo(el,["typed"],(function(t){var e=t.typed;return e(el,{"number, number":Js,"Complex, Complex":function(t,e){return t.add(e)},"BigNumber, BigNumber":function(t,e){return t.plus(e)},"Fraction, Fraction":function(t,e){return t.add(e)},"Unit, Unit":e.referToSelf((function(t){return function(n,i){if(null===n.value||void 0===n.value)throw new Error("Parameter x contains a unit with undefined value");if(null===i.value||void 0===i.value)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(i))throw new Error("Units do not match");var r=n.clone();return r.value=e.find(t,[r.valueType(),i.valueType()])(r.value,i.value),r.fixPrefix=!1,r}}))})})),il=Lo("matAlgo14xDs",["typed"],(function(t){var e=t.typed;return function(t,i,r,a){var o,u=t._data,s=t._size,l=t._datatype,c=r;"string"==typeof l&&(o=l,i=e.convert(i,o),c=e.find(r,[o,o]));var d=s.length>0?n(c,0,s,s[0],u,i,a):[];return t.createDenseMatrix({data:d,size:Ja(s),datatype:o})};function n(t,e,i,r,a,o,u){var s=[];if(e===i.length-1)for(var l=0;l<r;l++)s[l]=u?t(o,a[l]):t(a[l],o);else for(var c=0;c<r;c++)s[c]=n(t,e+1,i,i[e+1],a[c],o,u);return s}})),rl=Lo("matAlgo13xDD",["typed"],(function(t){var e=t.typed;return function(t,i,r){var a,o=t._data,u=t._size,s=t._datatype,l=i._data,c=i._size,d=i._datatype,f=[];if(u.length!==c.length)throw new _o(u.length,c.length);for(var p=0;p<u.length;p++){if(u[p]!==c[p])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+c+")");f[p]=u[p]}var h=r;"string"==typeof s&&s===d&&(a=s,h=e.find(r,[a,a]));var v=f.length>0?n(h,0,f,f[0],o,l):[];return t.createDenseMatrix({data:v,size:f,datatype:a})};function n(t,e,i,r,a,o){var u=[];if(e===i.length-1)for(var s=0;s<r;s++)u[s]=t(a[s],o[s]);else for(var l=0;l<r;l++)u[l]=n(t,e+1,i,i[e+1],a[l],o[l]);return u}})),al=Lo("broadcast",["concat"],(function(t){var e=t.concat;return function(t,e){var r=Math.max(t._size.length,e._size.length);if(t._size.length===e._size.length&&t._size.every((function(t,n){return t===e._size[n]})))return[t,e];for(var a=n(t._size,r,0),o=n(e._size,r,0),u=[],s=0;s<r;s++)u[s]=Math.max(a[s],o[s]);Oo(a,u),Oo(o,u);var l=t.clone(),c=e.clone();l._size.length<r?l.reshape(n(l._size,r,1)):c._size.length<r&&c.reshape(n(c._size,r,1));for(var d=0;d<r;d++)l._size[d]<u[d]&&(l=i(l,u[d],d)),c._size[d]<u[d]&&(c=i(c,u[d],d));return[l,c]};function n(t,e,n){return[].concat(d(Array(e-t.length).fill(n)),d(t))}function i(t,n,i){return e.apply(void 0,d(Array(n).fill(t)).concat([i]))}})),ol=Lo("matrixAlgorithmSuite",["typed","matrix","concat"],(function(t){var e=t.typed,n=t.matrix,i=t.concat,r=rl({typed:e}),a=il({typed:e}),o=al({concat:i});return function(t){var i,u=t.elop,s=t.SD||t.DS;u?(i={"DenseMatrix, DenseMatrix":function(t,e){return r.apply(void 0,d(o(t,e)).concat([u]))},"Array, Array":function(t,e){return r.apply(void 0,d(o(n(t),n(e))).concat([u])).valueOf()},"Array, DenseMatrix":function(t,e){return r.apply(void 0,d(o(n(t),e)).concat([u]))},"DenseMatrix, Array":function(t,e){return r.apply(void 0,d(o(t,n(e))).concat([u]))}},t.SS&&(i["SparseMatrix, SparseMatrix"]=function(e,n){return t.SS.apply(t,d(o(e,n)).concat([u,!1]))}),t.DS&&(i["DenseMatrix, SparseMatrix"]=function(e,n){return t.DS.apply(t,d(o(e,n)).concat([u,!1]))},i["Array, SparseMatrix"]=function(e,i){return t.DS.apply(t,d(o(n(e),i)).concat([u,!1]))}),s&&(i["SparseMatrix, DenseMatrix"]=function(t,e){return s.apply(void 0,d(o(e,t)).concat([u,!0]))},i["SparseMatrix, Array"]=function(t,e){return s.apply(void 0,d(o(n(e),t)).concat([u,!0]))})):(i={"DenseMatrix, DenseMatrix":e.referToSelf((function(t){return function(e,n){return r.apply(void 0,d(o(e,n)).concat([t]))}})),"Array, Array":e.referToSelf((function(t){return function(e,i){return r.apply(void 0,d(o(n(e),n(i))).concat([t])).valueOf()}})),"Array, DenseMatrix":e.referToSelf((function(t){return function(e,i){return r.apply(void 0,d(o(n(e),i)).concat([t]))}})),"DenseMatrix, Array":e.referToSelf((function(t){return function(e,i){return r.apply(void 0,d(o(e,n(i))).concat([t]))}}))},t.SS&&(i["SparseMatrix, SparseMatrix"]=e.referToSelf((function(e){return function(n,i){return t.SS.apply(t,d(o(n,i)).concat([e,!1]))}}))),t.DS&&(i["DenseMatrix, SparseMatrix"]=e.referToSelf((function(e){return function(n,i){return t.DS.apply(t,d(o(n,i)).concat([e,!1]))}})),i["Array, SparseMatrix"]=e.referToSelf((function(e){return function(i,r){return t.DS.apply(t,d(o(n(i),r)).concat([e,!1]))}}))),s&&(i["SparseMatrix, DenseMatrix"]=e.referToSelf((function(t){return function(e,n){return s.apply(void 0,d(o(n,e)).concat([t,!0]))}})),i["SparseMatrix, Array"]=e.referToSelf((function(t){return function(e,i){return s.apply(void 0,d(o(n(i),e)).concat([t,!0]))}}))));var l=t.scalar||"any";(t.Ds||t.Ss)&&(u?(i["DenseMatrix,"+l]=function(t,e){return a(t,e,u,!1)},i[l+", DenseMatrix"]=function(t,e){return a(e,t,u,!0)},i["Array,"+l]=function(t,e){return a(n(t),e,u,!1).valueOf()},i[l+", Array"]=function(t,e){return a(n(e),t,u,!0).valueOf()}):(i["DenseMatrix,"+l]=e.referToSelf((function(t){return function(e,n){return a(e,n,t,!1)}})),i[l+", DenseMatrix"]=e.referToSelf((function(t){return function(e,n){return a(n,e,t,!0)}})),i["Array,"+l]=e.referToSelf((function(t){return function(e,i){return a(n(e),i,t,!1).valueOf()}})),i[l+", Array"]=e.referToSelf((function(t){return function(e,i){return a(n(i),e,t,!0).valueOf()}}))));var c=void 0!==t.sS?t.sS:t.Ss;return u?(t.Ss&&(i["SparseMatrix,"+l]=function(e,n){return t.Ss(e,n,u,!1)}),c&&(i[l+", SparseMatrix"]=function(t,e){return c(e,t,u,!0)})):(t.Ss&&(i["SparseMatrix,"+l]=e.referToSelf((function(e){return function(n,i){return t.Ss(n,i,e,!1)}}))),c&&(i[l+", SparseMatrix"]=e.referToSelf((function(t){return function(e,n){return c(n,e,t,!0)}})))),u&&u.signatures&&function(t,e){for(var n in e)Ya(e,n)&&(t[n]=e[n])}(i,u.signatures),i}})),ul=Lo("matAlgo01xDSid",["typed"],(function(t){var e=t.typed;return function(t,n,i,r){var a=t._data,o=t._size,u=t._datatype,s=n._values,l=n._index,c=n._ptr,d=n._size,f=n._datatype;if(o.length!==d.length)throw new _o(o.length,d.length);if(o[0]!==d[0]||o[1]!==d[1])throw new RangeError("Dimension mismatch. Matrix A ("+o+") must match Matrix B ("+d+")");if(!s)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var p,h,v=o[0],m=o[1],g="string"==typeof u&&u===f?u:void 0,b=g?e.find(i,[g,g]):i,y=[];for(p=0;p<v;p++)y[p]=[];var _=[],x=[];for(h=0;h<m;h++){for(var w=h+1,D=c[h],k=c[h+1],C=D;C<k;C++)_[p=l[C]]=r?b(s[C],a[p][h]):b(a[p][h],s[C]),x[p]=w;for(p=0;p<v;p++)x[p]===w?y[p][h]=_[p]:y[p][h]=a[p][h]}return t.createDenseMatrix({data:y,size:[v,m],datatype:g})}})),sl=Lo("matAlgo04xSidSid",["typed","equalScalar"],(function(t){var e=t.typed,n=t.equalScalar;return function(t,i,r){var a=t._values,o=t._index,u=t._ptr,s=t._size,l=t._datatype,c=i._values,d=i._index,f=i._ptr,p=i._size,h=i._datatype;if(s.length!==p.length)throw new _o(s.length,p.length);if(s[0]!==p[0]||s[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+s+") must match Matrix B ("+p+")");var v,m=s[0],g=s[1],b=n,y=0,_=r;"string"==typeof l&&l===h&&(v=l,b=e.find(n,[v,v]),y=e.convert(0,v),_=e.find(r,[v,v]));var x,w,D,k,C,A=a&&c?[]:void 0,E=[],F=[],I=a&&c?[]:void 0,S=a&&c?[]:void 0,T=[],P=[];for(w=0;w<g;w++){F[w]=E.length;var B=w+1;for(k=u[w],C=u[w+1],D=k;D<C;D++)x=o[D],E.push(x),T[x]=B,I&&(I[x]=a[D]);for(k=f[w],C=f[w+1],D=k;D<C;D++)if(T[x=d[D]]===B){if(I){var N=_(I[x],c[D]);b(N,y)?T[x]=null:I[x]=N}}else E.push(x),P[x]=B,S&&(S[x]=c[D]);if(I&&S)for(D=F[w];D<E.length;)T[x=E[D]]===B?(A[D]=I[x],D++):P[x]===B?(A[D]=S[x],D++):E.splice(D,1)}return F[g]=E.length,t.createSparseMatrix({values:A,index:E,ptr:F,size:[m,g],datatype:v})}})),ll=Lo("matAlgo10xSids",["typed","DenseMatrix"],(function(t){var e=t.typed,n=t.DenseMatrix;return function(t,i,r,a){var o=t._values,u=t._index,s=t._ptr,l=t._size,c=t._datatype;if(!o)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var d,f=l[0],p=l[1],h=r;"string"==typeof c&&(d=c,i=e.convert(i,d),h=e.find(r,[d,d]));for(var v=[],m=[],g=[],b=0;b<p;b++){for(var y=b+1,_=s[b],x=s[b+1],w=_;w<x;w++){var D=u[w];m[D]=o[w],g[D]=y}for(var k=0;k<f;k++)0===b&&(v[k]=[]),g[k]===y?v[k][b]=a?h(i,m[k]):h(m[k],i):v[k][b]=i}return new n({data:v,size:[f,p],datatype:d})}})),cl="concat",dl=Lo(cl,["typed","matrix","isInteger"],(function(t){var e=t.typed,n=t.matrix,i=t.isInteger;return e(cl,{"...Array | Matrix | number | BigNumber":function(t){var e,r,a=t.length,o=-1,u=!1,s=[];for(e=0;e<a;e++){var l=t[e];if(va(l)&&(u=!0),sa(l)||la(l)){if(e!==a-1)throw new Error("Dimension must be specified as last argument");if(r=o,o=l.valueOf(),!i(o))throw new TypeError("Integer number expected for dimension");if(o<0||e>0&&o>r)throw new xo(o,r+1)}else{var c=Ja(l).valueOf(),d=wo(c);if(s[e]=c,r=o,o=d.length-1,e>0&&o!==r)throw new _o(r+1,o+1)}}if(0===s.length)throw new SyntaxError("At least one matrix expected");for(var f=s.shift();s.length;)f=zo(f,s.shift(),o);return u?n(f):f},"...string":function(t){return t.join("")}})})),fl=Lo("add",["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix","concat"],(function(t){var e=t.typed,n=t.matrix,i=t.addScalar,r=t.equalScalar,a=t.DenseMatrix,o=(t.SparseMatrix,t.concat),u=ul({typed:e}),s=sl({typed:e,equalScalar:r}),l=ll({typed:e,DenseMatrix:a}),c=ol({typed:e,matrix:n,concat:o});return e("add",{"any, any":i,"any, any, ...any":e.referToSelf((function(t){return function(e,n,i){for(var r=t(e,n),a=0;a<i.length;a++)r=t(r,i[a]);return r}}))},c({elop:i,DS:u,SS:s,Ss:l}))})),pl=zs({config:Ga}),hl=Ls({}),vl=Rs({}),ml=qs({}),gl=$s({Matrix:ml}),bl=Jo({BigNumber:pl,Complex:hl,DenseMatrix:gl,Fraction:vl}),yl=nl({typed:bl}),_l=Gs({config:Ga,typed:bl}),xl=Ws({typed:bl}),wl=Qs({Matrix:ml,equalScalar:_l,typed:bl}),Dl=tl({DenseMatrix:gl,Matrix:ml,SparseMatrix:wl,typed:bl}),kl=fl({DenseMatrix:gl,SparseMatrix:wl,addScalar:yl,concat:dl({isInteger:xl,matrix:Dl,typed:bl}),equalScalar:_l,matrix:Dl,typed:bl}),Cl={__name:"goods-detail",props:{show:{type:Boolean,default:!1},goodsDetail:{type:Object,default:function(){return{}}}},emits:["update:show","success","reload"],setup:function(t,e){var n=e.emit,i=t,r=$({}),a=$(!1),o=$({product_id:null,product_num:1,price:null,product_price:null,product_sku_id:null,attr:[],feed_uuids:[],bag_price:0,delivery:Pt()?30:40,describe:null});at((function(){return i.show}),(function(){i.show&&u()}));var u=function(){var t=x(y().mark((function t(){var e,n,a,u,s,l,c,d,f;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r.value=i.goodsDetail,o.value.product_id=null===(e=r.value)||void 0===e?void 0:e.product_id,o.value.price=null===(n=r.value)||void 0===n?void 0:n.product_price,o.value.product_price=null===(a=r.value)||void 0===a?void 0:a.product_price,null!==(u=r.value)&&void 0!==u&&u.sku&&(null===(s=r.value)||void 0===s?void 0:s.sku.length)>0&&(null===(d=r.value)||void 0===d||d.sku.some((function(t){if(t.stock_num>0)return o.value.product_sku_id=t.product_sku_id,!0}))),null!==(l=r.value)&&void 0!==l&&l.product_attr&&(null===(c=r.value)||void 0===c?void 0:c.product_attr.length)>0&&(null===(f=r.value)||void 0===f||f.product_attr.map((function(t,e){null!=t&&t.attribute_value_text&&(null==t?void 0:t.attribute_value_text.length)>0?o.value.attr[e]=0:o.value.attr[e]=null}))),o.value.feed_uuids&&o.value.feed_uuids.length>0&&(o.value.feed_uuids=[]);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),s=function(){var t=x(y().mark((function t(){var e,i,u,s,l,c,d;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a.value){t.next=2;break}return t.abrupt("return");case 2:return(u=m({},o.value)).attr=u.attr.join(","),s=[],o.value.product_sku_id&&null!==(e=r.value)&&void 0!==e&&e.sku&&(null===(i=r.value)||void 0===i?void 0:i.sku.length)>0&&(c=null===(l=r.value)||void 0===l?void 0:l.sku.find((function(t){return t.product_sku_id==o.value.product_sku_id})),u.price=(null==c?void 0:c.product_price)||0,s.push(null==c?void 0:c.spec_name)),o.value.attr&&o.value.attr.length>0&&o.value.attr.map((function(t,e){var n,i=null===(n=r.value)||void 0===n?void 0:n.product_attr[e];null!=i&&i.attribute_value&&i.attribute_value[t]&&s.push(i.attribute_value[t])})),o.value.feed_uuids&&o.value.feed_uuids.length>0&&o.value.feed_uuids.map((function(t){var e,n=((null===(e=r.value)||void 0===e?void 0:e.feed)||[]).find((function(e){return e.product_feed_id==t}));s.push(null==n?void 0:n.feed_name),u.price=kl(u.price,null==n?void 0:n.price)})),u.describe=s.join(";"),u.delivery=Pt()?30:40,u.order_id=Mt(),t.prev=11,a.value=!0,t.next=15,ir(u);case 15:d=t.sent,uni.showToast({title:d.msg,icon:"none"}),n("update:show",!1),Ct(d.data.order_id),setTimeout((function(){n("success",d.data.res,"add")}),300),t.next=24;break;case 22:t.prev=22,t.t0=t.catch(11);case 24:return t.prev=24,a.value=!1,t.finish(24);case 27:case"end":return t.stop()}}),t,null,[[11,22,24,27]])})));return function(){return t.apply(this,arguments)}}(),l=function(t,e){return o.value.attr[t]==e};return function(t,e){var u=Z(G("ti-image"),fe),c=rt,d=At,f=bt,p=Z(G("ti-modal"),st);return Q(),X(p,{show:i.show,title:dt(ft)("商品详情"),class:"ti-goods-detail",confirmLoading:a.value,onCancel:e[0]||(e[0]=function(t){return n("update:show",!1)}),onConfirm:s},{content:tt((function(){return[et(c,{class:"ti-dialog-content"},{default:tt((function(){return[et(c,{class:"ti-detail-box"},{default:tt((function(){var t;return[et(u,{class:"ti-detail-image",src:dt($t)(null===(t=r.value)||void 0===t||null===(t=t.image[0])||void 0===t?void 0:t.file_path,107,80)||""},null,8,["src"]),et(c,{class:"ti-detail-con"},{default:tt((function(){return[et(c,{class:"ti-detail-title text-ellipsis"},{default:tt((function(){var t,e;return[lt(ct((null===(t=r.value)||void 0===t?void 0:t.product_name[dt(Ft)()])||(null===(e=r.value)||void 0===e?void 0:e.product_name_text)),1)]})),_:1}),et(c,{class:"ti-price-box"},{default:tt((function(){return[et(d,{class:"ti-detail-unit"},{default:tt((function(){return[lt(ct(dt(ft)("單價：")),1)]})),_:1}),et(d,{class:"ti-detail-price"},{default:tt((function(){var t;return[lt(ct(dt(Dt)((null===(t=r.value)||void 0===t?void 0:t.product_price)||0)),1)]})),_:1}),et(d,{class:"ti-detail-subPrice"},{default:tt((function(){var t;return[lt(ct(dt(kt)((null===(t=r.value)||void 0===t?void 0:t.product_price)||0)),1)]})),_:1})]})),_:1}),et(c,{class:"ti-price-box"},{default:tt((function(){return[et(d,{class:"ti-detail-unit"},{default:tt((function(){return[lt(ct(dt(ft)("單位：")),1)]})),_:1}),et(d,{class:"ti-detail-price"},{default:tt((function(){var t,e;return[lt(ct((null===(t=r.value)||void 0===t?void 0:t.product_unit[dt(Ft)()])||(null===(e=r.value)||void 0===e?void 0:e.product_unit_text)),1)]})),_:1})]})),_:1})]})),_:1})]})),_:1}),et(c,{class:"ti-detail-specs"},{default:tt((function(){return[et(f,{"scroll-y":""},{default:tt((function(){return[et(c,{class:"ti-specs-box"},{default:tt((function(){var t,e,n,i,a,u,s;return[null!==(t=r.value)&&void 0!==t&&t.sku&&(null===(e=r.value)||void 0===e?void 0:e.sku.length)>0?(Q(),X(c,{key:0,class:"ti-specs-item"},{default:tt((function(){return[et(c,{class:"ti-specs-title"},{default:tt((function(){return[lt(ct(dt(ft)("規格")),1)]})),_:1}),et(c,{class:"ti-specs-child"},{default:tt((function(){var t;return[(Q(!0),vt(mt,null,gt(null===(t=r.value)||void 0===t?void 0:t.sku,(function(t){return Q(),X(c,{key:t.product_sku_id,class:it([{active:t.product_sku_id==o.value.product_sku_id,disabled:t.stock_num<=0},"ti-child-item"]),onClick:function(e){return function(t){t.stock_num<=0||o.value.product_sku_id!=t.product_sku_id&&(o.value.product_sku_id=t.product_sku_id)}(t)}},{default:tt((function(){return[et(d,{class:"ti-child-name"},{default:tt((function(){return[lt(ct(t.spec_name_i18n[dt(Ft)()]||t.spec_name_text),1)]})),_:2},1024),et(d,{class:"ti-child-price"},{default:tt((function(){return[lt(ct(dt(Dt)((null==t?void 0:t.product_price)||0,!0)),1)]})),_:2},1024),et(d,{class:"ti-child-subPrice"},{default:tt((function(){return[lt(ct(dt(kt)((null==t?void 0:t.product_price)||0,!0)),1)]})),_:2},1024)]})),_:2},1032,["class","onClick"])})),128))]})),_:1})]})),_:1})):Et("",!0),null!==(n=r.value)&&void 0!==n&&n.product_attr&&(null===(i=r.value)||void 0===i?void 0:i.product_attr.length)>0?(Q(!0),vt(mt,{key:1},gt(null===(a=r.value)||void 0===a?void 0:a.product_attr,(function(t,e){return Q(),X(c,{key:e,class:"ti-specs-item"},{default:tt((function(){return[et(c,{class:"ti-specs-title"},{default:tt((function(){return[lt(ct(t.attribute_name_i18n[dt(Ft)()]||t.attribute_name_text),1)]})),_:2},1024),et(c,{class:"ti-specs-child"},{default:tt((function(){return[(Q(!0),vt(mt,null,gt(null==t?void 0:t.attribute_value_i18n,(function(n,i){return Q(),X(c,{key:i,class:it([{active:l(e,i)},"ti-child-item"]),onClick:function(t){return function(t,e){o.value.attr[t]=e}(e,i)}},{default:tt((function(){return[et(d,{class:"ti-child-name"},{default:tt((function(){return[lt(ct(n[dt(Ft)()]||(null==t?void 0:t.attribute_value_text[i])),1)]})),_:2},1024)]})),_:2},1032,["class","onClick"])})),128))]})),_:2},1024)]})),_:2},1024)})),128)):Et("",!0),null!==(u=r.value)&&void 0!==u&&u.feed&&(null===(s=r.value)||void 0===s?void 0:s.feed.length)>0?(Q(),X(c,{key:2,class:"ti-specs-item"},{default:tt((function(){return[et(c,{class:"ti-specs-title"},{default:tt((function(){return[lt(ct(dt(ft)("加料")),1)]})),_:1}),et(c,{class:"ti-specs-child"},{default:tt((function(){var t;return[(Q(!0),vt(mt,null,gt(null===(t=r.value)||void 0===t?void 0:t.feed,(function(t){return Q(),X(c,{key:t.product_feed_id,class:it([{active:(o.value.feed_uuids||[]).indexOf(t.product_feed_id)>-1,disabled:t.stock_num<=0},"ti-child-item"]),onClick:function(e){return function(t){if(!(t.stock_num<=0)){var e=t.product_feed_id,n=o.value.feed_uuids.indexOf(e);n>=0?o.value.feed_uuids.splice(n,1):o.value.feed_uuids.push(e)}}(t)}},{default:tt((function(){return[et(d,{class:"ti-child-name"},{default:tt((function(){return[lt(ct(t.feed_name_i18n[dt(Ft)()]||t.feed_name_text),1)]})),_:2},1024),et(d,{class:"ti-child-price"},{default:tt((function(){return[lt(ct(dt(Dt)((null==t?void 0:t.price)||0,!0)),1)]})),_:2},1024),et(d,{class:"ti-child-subPrice"},{default:tt((function(){return[lt(ct(dt(kt)((null==t?void 0:t.price)||0,!0)),1)]})),_:2},1024)]})),_:2},1032,["class","onClick"])})),128))]})),_:1})]})),_:1})):Et("",!0)]})),_:1})]})),_:1})]})),_:1})]})),_:1})]})),_:1},8,["show","title","confirmLoading"])}}},Al=H(Cl,[["__scopeId","data-v-586ef4eb"]]),El={__name:"dish-list",emits:["success","add","error"],setup:function(t,e){var n=e.emit,i=pe(),r=Wt(br()).cashierIsLock,a=Wt(Qt()).pathName,o=$({page:1,list_rows:10,category_id:null}),u=$(0),s=$(!1),l=$([]),c=$(!1),d=$(!1),f=$({}),p=function(t,e){n("success",t,e)},h=function(){c.value&&(o.value.page++,b())},v=function(){var t=x(y().mark((function t(){var e,n;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(Mt()<=0)){t.next=2;break}return t.abrupt("return",uni.showToast({title:ft("订单ID不存在"),icon:"none"}));case 2:return t.prev=2,t.next=5,vr({order_id:Mt()});case 5:n=t.sent,uni.showToast({title:n.msg,icon:"none"}),r.value=(null===(e=n.data.res)||void 0===e||null===(e=e.orderInfo)||void 0===e?void 0:e.is_lock)||0,t.next=12;break;case 10:t.prev=10,t.t0=t.catch(2);case 12:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(){return t.apply(this,arguments)}}(),g=function(){var t=x(y().mark((function t(e){var n,i,a,o,u,s;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(1!=r.value){t.next=2;break}return t.abrupt("return",uni.showToast({title:ft("订单已被锁定，请解锁后重新操作"),icon:"none"}));case 2:if(!(e.product_stock<=0)){t.next=4;break}return t.abrupt("return",uni.showToast({title:ft("已售罄"),icon:"none"}));case 4:if(1!=e.limit_num_status){t.next=6;break}return t.abrupt("return",uni.showToast({title:ft("已限购"),icon:"none"}));case 6:if(!(null!=e&&e.sku&&(null==e?void 0:e.sku.length)<=1&&(null==e||!e.product_attr||(null==e?void 0:e.product_attr.length)<=0)&&(!e.feed||e.feed.length<=0))){t.next=20;break}return u={product_id:e.product_id,product_num:1,price:(null==e||null===(n=e.sku[0])||void 0===n?void 0:n.product_price)||0,product_price:(null==e||null===(i=e.sku[0])||void 0===i?void 0:i.product_price)||0,product_sku_id:null==e||null===(a=e.sku[0])||void 0===a?void 0:a.product_sku_id,attr:[],feed:[],bag_price:0,delivery:Pt()?30:40,describe:null==e||null===(o=e.sku[0])||void 0===o?void 0:o.spec_name,order_id:Mt()},t.prev=8,t.next=11,ir(u);case 11:s=t.sent,setTimeout((function(){uni.showToast({title:s.msg,icon:"none"})}),100),Ct(s.data.order_id),p(s.data.res,"add"),t.next=19;break;case 17:t.prev=17,t.t0=t.catch(8);case 19:return t.abrupt("return");case 20:d.value=!0,f.value=e;case 22:case"end":return t.stop()}}),t,null,[[8,17]])})));return function(e){return t.apply(this,arguments)}}(),b=function(){var t=x(y().mark((function t(){var e,n,r;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(e=m({},o.value)).category_id||(e.category_id="0"),1==u.value&&(e.is_special=1),t.prev=3,s.value=!0,t.next=7,null==i?void 0:i.getGoodsList(e);case 7:n=t.sent,r=i.getGoodsInfo((null==n?void 0:n.list)||[]),l.value=1==e.page?r:l.value.concat(r),c.value=(null==n?void 0:n.last_page)>(null==n?void 0:n.current_page),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(3),uni.showToast({title:t.t0.toString(),icon:"none"});case 16:return t.prev=16,s.value=!1,t.finish(16);case 19:case"end":return t.stop()}}),t,null,[[3,13,16,19]])})));return function(){return t.apply(this,arguments)}}(),_=function(){l.value=[],o.value.page=1,c.value=!1,b()};return at((function(){return o.value.category_id}),(function(){_()})),at((function(){return a.value}),(function(){"index"==a.value&&_()})),te("indexRefresh",(function(){o.value.page=1,s.value=!0,setTimeout((function(){_()}),300)})),function(t,e){var n=Z(G("ti-loading"),_t),i=rt,a=Z(G("ti-image"),fe),m=At,b=Z(G("ti-empty-data"),xt),y=bt;return Q(),vt(mt,null,[et(i,{class:"ti-dish-box"},{default:tt((function(){return[et(aa,{categoryId:o.value.category_id,"onUpdate:categoryId":e[0]||(e[0]=function(t){return o.value.category_id=t}),isSpecial:u.value,"onUpdate:isSpecial":e[1]||(e[1]=function(t){return u.value=t})},null,8,["categoryId","isSpecial"]),et(i,{class:"ti-dish-list"},{default:tt((function(){return[et(y,{class:"ti-scroll","scroll-y":"","lower-threshold":50,onScrolltolower:h},{default:tt((function(){return[s.value&&1==o.value.page?(Q(),X(n,{key:0})):l.value&&l.value.length>0?(Q(),vt(mt,{key:1},[et(i,{class:"ti-dish-goods"},{default:tt((function(){return[(Q(!0),vt(mt,null,gt(l.value,(function(t,e){return Q(),X(i,{key:e,class:"ti-goods-item",onClick:function(e){return g(t)}},{default:tt((function(){return[!t.product_stock||t.product_stock<=0?(Q(),X(i,{key:0,class:"ti-goods-sold-out"},{default:tt((function(){return[lt(ct(dt(ft)("已售罄")),1)]})),_:1})):1==t.limit_num_status?(Q(),X(i,{key:1,class:"ti-goods-sold-out"},{default:tt((function(){return[lt(ct(dt(ft)("已限购")),1)]})),_:1})):Et("",!0),et(i,{class:it(["ti-goods-box",{"ti-goods-disabled":t.product_stock<=0||1==t.limit_num_status}])},{default:tt((function(){return[t.limit_num&&t.limit_num>0?(Q(),X(i,{key:0,class:"ti-goods-quota"},{default:tt((function(){return[lt(ct(dt(zt)("限購{count}份",{count:t.limit_num||0})),1)]})),_:2},1024)):Et("",!0),et(i,{class:"ti-goods-image"},{default:tt((function(){var e;return[et(a,{src:dt($t)(null===(e=t.image[0])||void 0===e?void 0:e.file_path,147,110)||""},null,8,["src"])]})),_:2},1024),et(i,{class:"ti-goods-content"},{default:tt((function(){return[et(i,{class:"ti-goods-title line-clamp-2"},{default:tt((function(){return[lt(ct(t.product_name[dt(Ft)()]||t.product_name_text||"-"),1)]})),_:2},1024),et(i,{class:"ti-price-box"},{default:tt((function(){return[et(m,{class:"ti-goods-price"},{default:tt((function(){return[lt(ct(dt(Dt)((null==t?void 0:t.product_price)||0)),1)]})),_:2},1024),et(m,{class:"ti-goods-subPrice"},{default:tt((function(){return[lt(ct(dt(kt)((null==t?void 0:t.product_price)||0)),1)]})),_:2},1024)]})),_:2},1024)]})),_:2},1024)]})),_:2},1032,["class"])]})),_:2},1032,["onClick"])})),128))]})),_:1}),et(n,{status:c.value?"loading":"no-more"},null,8,["status"])],64)):(Q(),X(b,{key:2}))]})),_:1})]})),_:1}),1==dt(r)?(Q(),X(Zr,{key:0,onUnlock:v})):Et("",!0)]})),_:1}),et(Al,{show:d.value,"onUpdate:show":e[2]||(e[2]=function(t){return d.value=t}),goodsDetail:f.value,onSuccess:p},null,8,["show","goodsDetail"])],64)}}},Fl=H(El,[["__scopeId","data-v-5f261952"]]),Il=H({__name:"home",setup:function(t){var e=le(),n=$(),i=function(t,e){var i;null===(i=n.value)||void 0===i||i.handleResultCart(t,e)};te("reIndex",(function(){var t;null===(t=n.value)||void 0===t||t.getCartData(!0)})),te("langChange",(function(){null==e||e.getCategory()}));var r=function(t,e){var i;e.is_send_kitchen=0,e.total_product_price=e.product_price,null===(i=n.value)||void 0===i||i.handleAddCart(t,e)},a=function(){var t;null===(t=n.value)||void 0===t||t.handleError()};return function(t,e){var o=rt;return Q(),X(o,{class:"ti-index"},{default:tt((function(){return[et(Xr,{ref_key:"cartRef",ref:n},null,512),et(Fl,{onError:a,onAdd:r,onSuccess:i})]})),_:1})}}},[["__scopeId","data-v-3d459e7f"]]);function Sl(t){return R("order.HallCart/add",t,{isLoading:!1})}function Tl(t){return R("order.HallCart/delProduct",t,{isLoading:!1})}function Pl(t){return R("order.HallCart/cancel",t,{isLoading:!1})}function Bl(t){return R("order.HallCart/changeMoney",t,{isLoading:!1})}var Nl=V("buffetStore",(function(){var t=$(0),e=$(0),n=$(0),i=$();return at((function(){return n.value}),(function(){i.value&&clearInterval(i.value),1==t.value&&n.value>0&&(i.value=setInterval((function(){n.value<=0?i.value&&clearInterval(i.value):n.value--}),1e3))})),{isBuffet:t,buffetTime:n,isUnlimitedTime:e}})),zl={__name:"modify-price",props:{show:{type:Boolean,default:!1},productItem:{type:Object,default:function(){return{}}}},emits:["update:show","success"],setup:function(t,e){var n=e.emit,i=t,r=$(!1),a=$("");at((function(){return i.show}),(function(){i.show&&(a.value="")}));var o=function(t){if(t){var e=a.value+t;/^\d*\.?\d{0,2}$/.test(e)&&(a.value+=t)}},u=function(){var t=x(y().mark((function t(){var e,o;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.value){t.next=2;break}return t.abrupt("return",uni.showToast({title:ft("請輸入價格"),icon:"none"}));case 2:if((u=a.value)>=0&&u<=1e6){t.next=4;break}return t.abrupt("return",uni.showToast({title:ft("请输入0-1000000间的價格"),icon:"none"}));case 4:return t.prev=4,r.value=!0,t.next=8,or({order_product_id:null===(e=i.productItem)||void 0===e?void 0:e.order_product_id,price:a.value});case 8:o=t.sent,uni.showToast({title:o.msg,icon:"none"}),n("update:show",!1),n("success",m({order_id:o.data.order_id},o.data.res)),t.next=16;break;case 14:t.prev=14,t.t0=t.catch(4);case 16:return t.prev=16,r.value=!1,t.finish(16);case 19:case"end":return t.stop()}var u}),t,null,[[4,14,16,19]])})));return function(){return t.apply(this,arguments)}}();return function(e,s){var l=rt,c=Z(G("ti-input"),ot),d=Z(G("ti-keyboard"),ut),f=Z(G("ti-modal"),st);return Q(),X(f,{show:i.show,title:dt(ft)("價格")},{content:tt((function(){return[et(l,{class:"ti-dialog-content"},{default:tt((function(){return[et(l,{class:"ti-modify-title text-ellipsis"},{default:tt((function(){var e,n;return[lt(ct((null===(e=t.productItem)||void 0===e?void 0:e.product_name_text)||(null===(n=t.productItem)||void 0===n||null===(n=n.product)||void 0===n?void 0:n.product_name_text)),1)]})),_:1}),et(l,{class:"ti-modify-input"},{default:tt((function(){return[et(c,{modelValue:a.value,"onUpdate:modelValue":s[0]||(s[0]=function(t){return a.value=t}),placeholder:dt(ft)("請輸入價格"),focus:!0},null,8,["modelValue","placeholder"])]})),_:1})]})),_:1})]})),footer:tt((function(){return[et(l,{class:"ti-dialog-btn"},{default:tt((function(){return[et(d,{primaryLoading:r.value,isDoubleZero:!0,isCross:!1,isDrop:!0,onExit:s[1]||(s[1]=function(t){return n("update:show",!1)}),onClear:s[2]||(s[2]=function(t){return a.value=""}),onInput:o,onConfirm:u},null,8,["primaryLoading"])]})),_:1})]})),_:1},8,["show","title"])}}},Ol=H(zl,[["__scopeId","data-v-da17d970"]]),Ml={__name:"remark",props:{show:{type:Boolean,default:!1},productItem:{type:Object,default:function(){return{}}}},emits:["update:show","success"],setup:function(t,e){var n=e.emit,i=t,r=$(!1),a=$("");at((function(){return i.show}),(function(){var t;i.show&&(a.value=(null===(t=i.productItem)||void 0===t?void 0:t.remark)||"")}));var o=function(){var t=x(y().mark((function t(){var e,o;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r.value=!0,t.next=4,ur({order_product_id:null===(e=i.productItem)||void 0===e?void 0:e.order_product_id,remark:a.value.trim()});case 4:o=t.sent,uni.showToast({title:o.msg,icon:"none"}),n("update:show",!1),n("success",m({order_id:o.data.order_id},o.data.res)),t.next=12;break;case 10:t.prev=10,t.t0=t.catch(0);case 12:return t.prev=12,r.value=!1,t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[0,10,12,15]])})));return function(){return t.apply(this,arguments)}}();return function(e,u){var s=rt,l=ht,c=Z(G("ti-button"),pt),d=Z(G("ti-modal"),st);return Q(),X(d,{show:i.show,title:dt(ft)("備註")},{content:tt((function(){return[et(s,{class:"ti-dialog-content"},{default:tt((function(){return[et(s,{class:"ti-remark-title text-ellipsis"},{default:tt((function(){var e,n;return[lt(ct((null===(e=t.productItem)||void 0===e?void 0:e.product_name_text)||(null===(n=t.productItem)||void 0===n||null===(n=n.product)||void 0===n?void 0:n.product_name_text)),1)]})),_:1}),et(s,{class:"ti-remark-textarea"},{default:tt((function(){return[et(l,{modelValue:a.value,"onUpdate:modelValue":u[0]||(u[0]=function(t){return a.value=t}),focus:!0,maxlength:50,"placeholder-style":"color:rgba(16,10,5,.3)",placeholder:dt(ft)("请输入")},null,8,["modelValue","placeholder"])]})),_:1}),et(s,{class:"ti-remark-num"},{default:tt((function(){var t;return[lt(ct((null===(t=a.value)||void 0===t?void 0:t.trim().length)||0)+"/50 ",1)]})),_:1})]})),_:1})]})),footer:tt((function(){return[et(s,{class:"ti-dialog-btn"},{default:tt((function(){return[et(c,{onClick:u[1]||(u[1]=function(t){return n("update:show",!1)})},{default:tt((function(){return[lt(ct(dt(ft)("退出")),1)]})),_:1}),et(c,{onClick:u[2]||(u[2]=function(t){return a.value=""})},{default:tt((function(){return[lt(ct(dt(ft)("清空")),1)]})),_:1}),et(c,{loading:r.value,type:"primary",onClick:o},{default:tt((function(){return[lt(ct(dt(ft)("确定")),1)]})),_:1},8,["loading"])]})),_:1})]})),_:1},8,["show","title"])}}},Ll=H(Ml,[["__scopeId","data-v-3b3a5321"]]),jl={__name:"withdrawal",props:{show:{type:Boolean,default:!1},productItem:{type:Object,default:function(){return{}}}},emits:["update:show","success"],setup:function(t,e){var n=e.emit,i=t,r=$(!1),a=$(""),o=$([ft("等待時間長"),ft("口味不好"),ft("菜賣光了")]),u=$(0);at((function(){return i.show}),(function(){var t;i.show&&(a.value=(null===(t=i.productItem)||void 0===t?void 0:t.total_num)||"")}));var s=function(t){t&&(a.value+=t)},l=function(){var t=x(y().mark((function t(){var e,s;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.value){t.next=2;break}return t.abrupt("return",uni.showToast({title:ft("请输入退菜數量"),icon:"none"}));case 2:return t.prev=2,r.value=!0,t.next=6,l={table_id:he(),order_product_id:null===(e=i.productItem)||void 0===e?void 0:e.order_product_id,num:a.value,return_reason:o.value[u.value]},R("order.HallCart/moveProduct",l,{isLoading:!1});case 6:s=t.sent,uni.showToast({title:s.msg,icon:"none"}),n("update:show",!1),n("success",m({order_id:s.data.order_id},s.data.res)),t.next=14;break;case 12:t.prev=12,t.t0=t.catch(2);case 14:return t.prev=14,r.value=!1,t.finish(14);case 17:case"end":return t.stop()}var l}),t,null,[[2,12,14,17]])})));return function(){return t.apply(this,arguments)}}();return function(e,c){var d=rt,f=Z(G("ti-input"),ot),p=Z(G("ti-keyboard"),ut),h=Z(G("ti-modal"),st);return Q(),X(h,{show:i.show,title:dt(ft)("退菜")},{content:tt((function(){return[et(d,{class:"ti-dialog-content"},{default:tt((function(){return[et(d,{class:"ti-withdrawal-title text-ellipsis"},{default:tt((function(){var e,n;return[lt(ct((null===(e=t.productItem)||void 0===e?void 0:e.product_name_text)||(null===(n=t.productItem)||void 0===n||null===(n=n.product)||void 0===n?void 0:n.product_name_text)),1)]})),_:1}),et(d,{class:"ti-withdrawal-list"},{default:tt((function(){return[(Q(!0),vt(mt,null,gt(o.value,(function(t,e){return Q(),X(d,{key:e,class:it([{active:e==u.value},"ti-withdrawal-item"]),onClick:function(t){return function(t){u.value=t}(e)}},{default:tt((function(){return[lt(ct(t),1)]})),_:2},1032,["class","onClick"])})),128))]})),_:1}),et(d,{class:"ti-withdrawal-input"},{default:tt((function(){return[et(f,{modelValue:a.value,"onUpdate:modelValue":c[0]||(c[0]=function(t){return a.value=t}),placeholder:dt(ft)("请输入退菜數量"),focus:!0},null,8,["modelValue","placeholder"])]})),_:1})]})),_:1})]})),footer:tt((function(){return[et(d,{class:"ti-dialog-btn"},{default:tt((function(){return[et(p,{primaryLoading:r.value,isDoubleZero:!0,isCross:!1,isDrop:!0,onExit:c[1]||(c[1]=function(t){return n("update:show",!1)}),onClear:c[2]||(c[2]=function(t){return a.value=""}),onInput:s,onConfirm:l},null,8,["primaryLoading"])]})),_:1})]})),_:1},8,["show","title"])}}},Ul=H(jl,[["__scopeId","data-v-e8b23bc2"]]),Rl={__name:"preferential",props:{show:{type:Boolean,default:!1},totalPayPrice:{type:[Number,String],default:0},preferentialData:{type:Object,default:function(){return{}}}},emits:["update:show","success"],setup:function(t,e){var n=e.emit,i=t,r=$({type:1,money:"",rate:"",discountType:1}),a=$(!1);at((function(){return i.show}),(function(){if(i.show){var t,e,n={type:1,money:"",rate:"",discountType:1};if(null!==(t=i.preferentialData)&&void 0!==t&&t.discount_ratio)n.type=2,n.rate=Math.max(null===(e=i.preferentialData)||void 0===e?void 0:e.discount_ratio,0).toString();r.value=n}})),at((function(){return r.value.type}),(function(t,e){if(1==e)r.value.money="";else if(2==e){var n,a;if(null!==(n=i.preferentialData)&&void 0!==n&&n.discount_ratio)r.value.rate=Math.max(null===(a=i.preferentialData)||void 0===a?void 0:a.discount_ratio,0).toString();else r.value.rate=""}else 3==e&&(r.value.discountType=1)}));var o=function(t){r.value.discountType=t.detail.value},u=function(){1==r.value.type?r.value.money="":2==r.value.type&&(r.value.rate="")},s=function(t){if(t)if(1==r.value.type){var e=r.value.money+t;/^\d*\.?\d{0,2}$/.test(e)&&(r.value.money+=t)}else 2==r.value.type&&(r.value.rate+=t)},l=function(){var t=x(y().mark((function t(){var e,i;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=m(m({},r.value),{},{table_id:he()}),!a.value){t.next=3;break}return t.abrupt("return");case 3:if(1!=e.type){t.next=10;break}if(!(e.money<0)){t.next=6;break}return t.abrupt("return",uni.showToast({title:ft("请输入實付價格"),icon:"none"}));case 6:if((o=e.money)>=0&&o<=999999999){t.next=8;break}return t.abrupt("return",uni.showToast({title:ft("请输入0-999999999间的價格"),icon:"none"}));case 8:t.next=15;break;case 10:if(2!=e.type){t.next=15;break}if(e.rate){t.next=13;break}return t.abrupt("return",uni.showToast({title:ft("请输入折扣"),icon:"none"}));case 13:if(/^(?:[1-9][0-9]?|100|0)$/.test(e.rate)){t.next=15;break}return t.abrupt("return",uni.showToast({title:ft("请输入0-100间的正整数"),icon:"none"}));case 15:return t.prev=15,a.value=!0,t.next=19,Bl(e);case 19:i=t.sent,uni.showToast({title:i.msg,icon:"none"}),n("update:show",!1),n("success",m({order_id:i.data.order_id},i.data.res)),t.next=27;break;case 25:t.prev=25,t.t0=t.catch(15);case 27:return t.prev=27,a.value=!1,t.finish(27);case 30:case"end":return t.stop()}var o}),t,null,[[15,25,27,30]])})));return function(){return t.apply(this,arguments)}}();return function(e,c){var d=rt,f=At,p=Z(G("ti-input"),ot),h=It,v=St,m=Tt,g=Z(G("ti-button"),pt),b=Z(G("ti-keyboard"),ut),y=Z(G("ti-modal"),st);return Q(),X(y,{show:i.show,title:dt(ft)("優惠折扣")},{content:tt((function(){return[et(d,{class:"ti-dialog-content"},{default:tt((function(){return[et(d,{class:"ti-preferential-box"},{default:tt((function(){return[et(d,{class:"ti-preferential-label"},{default:tt((function(){return[lt(ct(dt(ft)("當前價格")),1)]})),_:1}),et(d,{class:"ti-preferential-input"},{default:tt((function(){return[et(f,{class:"ti-preferential-price"},{default:tt((function(){return[lt(ct(dt(Dt)(t.totalPayPrice)),1)]})),_:1}),et(f,{class:"ti-preferential-subPrice"},{default:tt((function(){return[lt(ct(dt(kt)(t.totalPayPrice)),1)]})),_:1})]})),_:1}),et(d,{class:"ti-preferential-label"},{default:tt((function(){return[lt(ct(dt(ft)("優惠方式")),1)]})),_:1}),et(d,{class:"ti-preferential-input ti-preferential-type"},{default:tt((function(){return[(Q(!0),vt(mt,null,gt([dt(ft)("改價"),dt(ft)("折扣"),dt(ft)("抹零")],(function(t,e){return Q(),X(d,{key:e,class:it([{active:r.value.type==e+1},"ti-preferential-type-item"]),onClick:function(t){return r.value.type=e+1}},{default:tt((function(){return[lt(ct(t),1)]})),_:2},1032,["class","onClick"])})),128))]})),_:1}),1==r.value.type?(Q(),vt(mt,{key:0},[et(d,{class:"ti-preferential-label"},{default:tt((function(){return[lt(ct(dt(ft)("實付價格")),1)]})),_:1}),et(d,{class:"ti-preferential-input"},{default:tt((function(){return[et(p,{modelValue:r.value.money,"onUpdate:modelValue":c[0]||(c[0]=function(t){return r.value.money=t}),placeholder:dt(ft)("请输入實付價格"),focus:!0},null,8,["modelValue","placeholder"])]})),_:1})],64)):Et("",!0),2==r.value.type?(Q(),vt(mt,{key:1},[et(d,{class:"ti-preferential-label"},{default:tt((function(){return[lt(ct(dt(ft)("折扣")),1)]})),_:1}),et(d,{class:"ti-preferential-input"},{default:tt((function(){return[et(p,{modelValue:r.value.rate,"onUpdate:modelValue":c[1]||(c[1]=function(t){return r.value.rate=t}),regex:/^\d+$/,placeholder:dt(ft)("请输入折扣"),focus:!0},{right:tt((function(){return[et(d,{class:"ti-preferential-percentage"},{default:tt((function(){return[lt("%")]})),_:1})]})),_:1},8,["modelValue","placeholder"])]})),_:1})],64)):Et("",!0),3==r.value.type?(Q(),vt(mt,{key:2},[et(d,{class:"ti-preferential-label ti-preferential-round"},{default:tt((function(){return[lt(ct(dt(ft)("抹零方式")),1)]})),_:1}),et(d,{class:"ti-preferential-input"},{default:tt((function(){return[et(m,{class:"ti-type-radio",style:nt({"grid-template-columns":"zh"==dt(Ft)()||"zhtw"==dt(Ft)()?"repeat(4, auto)":"repeat(2, 1fr)"}),onChange:o},{default:tt((function(){return[et(v,null,{default:tt((function(){return[et(h,{value:"1",color:"#ffbe00",checked:"true"}),et(f,{class:"ti-radio-text"},{default:tt((function(){return[lt(ct(dt(ft)("抹分")),1)]})),_:1})]})),_:1}),et(v,null,{default:tt((function(){return[et(h,{value:"2",color:"#ffbe00"}),et(f,{class:"ti-radio-text"},{default:tt((function(){return[lt(ct(dt(ft)("抹角")),1)]})),_:1})]})),_:1}),et(v,null,{default:tt((function(){return[et(h,{value:"3",color:"#ffbe00"}),et(f,{class:"ti-radio-text"},{default:tt((function(){return[lt(ct(dt(ft)("四舍五入保留一位小数")),1)]})),_:1})]})),_:1}),et(v,null,{default:tt((function(){return[et(h,{value:"4",color:"#ffbe00"}),et(f,{class:"ti-radio-text"},{default:tt((function(){return[lt(ct(dt(ft)("四舍五入到整数")),1)]})),_:1})]})),_:1})]})),_:1},8,["style"])]})),_:1})],64)):Et("",!0)]})),_:1})]})),_:1})]})),footer:tt((function(){return[3==r.value.type?(Q(),X(d,{key:0,class:"ti-dialog-btn"},{default:tt((function(){return[et(g,{onClick:c[2]||(c[2]=function(t){return n("update:show",!1)})},{default:tt((function(){return[lt(ct(dt(ft)("退出")),1)]})),_:1}),et(g,{loading:a.value,type:"primary",onClick:l},{default:tt((function(){return[lt(ct(dt(ft)("确定")),1)]})),_:1},8,["loading"])]})),_:1})):(Q(),X(d,{key:1,class:"ti-dialog-btn ti-preferential-keyboard"},{default:tt((function(){return[et(b,{primaryLoading:a.value,isDoubleZero:!0,isCross:!1,isDrop:!0,onExit:c[3]||(c[3]=function(t){return n("update:show",!1)}),onClear:u,onInput:s,onConfirm:l},null,8,["primaryLoading"])]})),_:1}))]})),_:1},8,["show","title"])}}},ql=H(Rl,[["__scopeId","data-v-11c7e7fe"]]),Vl={__name:"cancel-all",props:{show:{type:Boolean,default:!1},sendKitchen:{type:Array,default:function(){return[]}}},emits:["update:show","success"],setup:function(t,e){var n=e.emit,i=ve(),r=n,a=t,o=$(!1),u=function(){var t=x(y().mark((function t(){var e;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!o.value){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,o.value=!0,t.next=6,Pl({table_id:he()});case 6:e=t.sent,uni.showToast({title:e.msg,icon:"none"}),null==i||i.clearTableGoodsData(),r("success",e.data),r("update:show",!1),t.next=15;break;case 13:t.prev=13,t.t0=t.catch(2);case 15:return t.prev=15,o.value=!1,t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[2,13,15,18]])})));return function(){return t.apply(this,arguments)}}();return function(e,n){var i=rt,s=bt,l=Z(G("ti-modal"),st);return Q(),X(l,{class:"ti-action-tips",title:e.$t("溫馨提示"),show:a.show,confirmLoading:o.value,onCancel:n[0]||(n[0]=function(t){return r("update:show",!1)}),onConfirm:u},{content:tt((function(){return[et(i,{class:"ti-dialog-content"},{default:tt((function(){return[a.sendKitchen&&t.sendKitchen.length>0?(Q(),vt(mt,{key:0},[et(i,{class:"ti-cancel-title"},{default:tt((function(){return[lt(ct(e.$t("此單有商品已送廚，是否取消此筆交易？")),1)]})),_:1}),et(s,{"scroll-y":""},{default:tt((function(){return[et(i,{class:"ti-cancel-list"},{default:tt((function(){return[(Q(!0),vt(mt,null,gt(a.sendKitchen,(function(t,e){return Q(),X(i,{key:e,class:"ti-cancel-item"},{default:tt((function(){return[lt(ct(null==t?void 0:t.product_name_text),1)]})),_:2},1024)})),128))]})),_:1})]})),_:1})],64)):(Q(),vt(mt,{key:1},[lt(ct(e.$t("是否取消此筆交易？")),1)],64))]})),_:1})]})),_:1},8,["title","show","confirmLoading"])}}},$l=H(Vl,[["__scopeId","data-v-fbb3cb44"]]),Kl={__name:"buffet-not",props:{show:{type:Boolean,default:!1},buffetNotSendKitchen:{type:Array,default:function(){return[]}}},emits:["update:show"],setup:function(t,e){var n=e.emit,i=t;return function(e,r){var a=rt,o=bt,u=Z(G("ti-modal"),st);return Q(),X(u,{class:"ti-action-tips",title:e.$t("溫馨提示"),show:t.show,isCancelShow:!1,onConfirm:r[0]||(r[0]=function(t){return n("update:show",!1)})},{content:tt((function(){return[et(a,{class:"ti-dialog-content"},{default:tt((function(){return[et(a,{class:"ti-cancel-title"},{default:tt((function(){return[lt(ct(e.$t("自助餐時間已到達，以下自助餐商品不可繼續送厨")),1)]})),_:1}),et(o,{"scroll-y":""},{default:tt((function(){return[et(a,{class:"ti-cancel-list"},{default:tt((function(){return[(Q(!0),vt(mt,null,gt(i.buffetNotSendKitchen,(function(t,e){return Q(),X(a,{key:e,class:"ti-cancel-item"},{default:tt((function(){return[lt(ct((null==t?void 0:t.product_name_text)||(null==t?void 0:t.product_name)),1)]})),_:2},1024)})),128))]})),_:1})]})),_:1})]})),_:1})]})),_:1},8,["title","show"])}}},Hl=H(Kl,[["__scopeId","data-v-d1eb41ed"]]);function Wl(t){return R("store.table/table",t,{isLoading:!1})}var Jl={__name:"turntable",props:{show:{type:Boolean,default:!1},tableNo:{type:[Number,String],default:null}},emits:["update:show","success"],setup:function(t,e){var n=e.emit,i=t,r=$({table_status:"10"}),a=$(!1),o=$(!1),u=$([]),s=$(),l=$(!1);at((function(){return i.show}),(function(){i.show&&(s.value=null,d())}));var c=function(){var t=x(y().mark((function t(){var e;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!l.value){t.next=2;break}return t.abrupt("return");case 2:if(s.value){t.next=4;break}return t.abrupt("return",uni.showToast({title:ft("请选择桌号"),icon:"none"}));case 4:return t.prev=4,l.value=!0,t.next=8,i={old_table_id:he(),new_table_id:s.value},R("order.order/changeTable",i,{isLoading:!1});case 8:e=t.sent,uni.showToast({title:e.msg,icon:"none"}),n("update:show",!1),me(s.value),setTimeout((function(){n("success",m({order_id:e.data.order_id},e.data.res))}),100),t.next=17;break;case 15:t.prev=15,t.t0=t.catch(4);case 17:return t.prev=17,l.value=!1,t.finish(17);case 20:case"end":return t.stop()}var i}),t,null,[[4,15,17,20]])})));return function(){return t.apply(this,arguments)}}(),d=function(){r.value.page=1,p(!0)},f=function(){a.value&&(r.value.page+=1,p())},p=function(){var t=x(y().mark((function t(e){var n,i;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!o.value){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,e&&(o.value=!0),t.next=6,Wl(r.value);case 6:i=t.sent,u.value=(null===(n=i.data)||void 0===n?void 0:n.list)||[],t.next=12;break;case 10:t.prev=10,t.t0=t.catch(2);case 12:return t.prev=12,e&&(o.value=!1),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[2,10,12,15]])})));return function(e){return t.apply(this,arguments)}}();return function(t,e){var r=Z(G("ti-loading"),_t),d=rt,p=Z(G("ti-empty-data"),xt),h=bt,v=Z(G("ti-drawer"),wt);return Q(),X(v,{show:i.show,confirmLoading:l.value,title:"[".concat(i.tableNo,"]").concat(dt(ft)("轉台")),onCancel:e[0]||(e[0]=function(t){return n("update:show",!1)}),onConfirm:c},{content:tt((function(){return[et(d,{class:"ti-turntable-box"},{default:tt((function(){return[et(h,{class:"ti-scroll","scroll-y":"","lower-threshold":50,onScrolltolower:f},{default:tt((function(){return[o.value?(Q(),X(r,{key:0})):u.value&&u.value.length>0?(Q(),vt(mt,{key:1},[et(d,{class:"ti-turntable-list"},{default:tt((function(){return[(Q(!0),vt(mt,null,gt(u.value,(function(t){return Q(),X(d,{key:t.table_id,class:it([{active:s.value==t.table_id},"ti-turntable-item"]),onClick:function(e){return s.value=t.table_id}},{default:tt((function(){return[lt(ct(t.table_no),1)]})),_:2},1032,["class","onClick"])})),128))]})),_:1}),et(r,{status:a.value?"loading":"no-more"},null,8,["status"])],64)):(Q(),X(p,{key:2}))]})),_:1})]})),_:1})]})),_:1},8,["show","confirmLoading","title"])}}},Zl=H(Jl,[["__scopeId","data-v-f8f85dd2"]]),Yl=function(){function t(e,n){s(this,t),this.options=e,this.animation=ge(m({},e)),this.currentStepAnimates={},this.next=0,this.$=n}return c(t,[{key:"_nvuePushAnimates",value:function(t,e){var n=this.currentStepAnimates[this.next],i={};if(i=n||{styles:{},config:{}},Gl.includes(t)){i.styles.transform||(i.styles.transform="");var r="";"rotate"===t&&(r="deg"),i.styles.transform+="".concat(t,"(").concat(e+r,") ")}else i.styles[t]="".concat(e);this.currentStepAnimates[this.next]=i}},{key:"_animateRun",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.$.$refs.ani.ref;if(n)return new Promise((function(i,r){nvueAnimation.transition(n,m({styles:t},e),(function(t){i()}))}))}},{key:"_nvueNextAnimate",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0,r=t[n];if(r){var a=r.styles,o=r.config;this._animateRun(a,o).then((function(){n+=1,e._nvueNextAnimate(t,n,i)}))}else this.currentStepAnimates={},"function"==typeof i&&i(),this.isEnd=!0}},{key:"step",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.animation.step(t),this}},{key:"run",value:function(t){this.$.animationData=this.animation.export(),this.$.timer=setTimeout((function(){"function"==typeof t&&t()}),this.$.durationTime)}}]),t}(),Gl=["matrix","matrix3d","rotate","rotate3d","rotateX","rotateY","rotateZ","scale","scale3d","scaleX","scaleY","scaleZ","skew","skewX","skewY","translate","translate3d","translateX","translateY","translateZ"];function Ql(t,e){if(e)return clearTimeout(e.timer),new Yl(t,e)}Gl.concat(["opacity","backgroundColor"],["width","height","left","right","top","bottom"]).forEach((function(t){Yl.prototype[t]=function(){var e;return(e=this.animation)[t].apply(e,arguments),this}}));var Xl={name:"uniTransition",emits:["click","change"],props:{show:{type:Boolean,default:!1},modeClass:{type:[Array,String],default:function(){return"fade"}},duration:{type:Number,default:300},styles:{type:Object,default:function(){return{}}},customClass:{type:String,default:""},onceRender:{type:Boolean,default:!1}},data:function(){return{isShow:!1,transform:"",opacity:1,animationData:{},durationTime:300,config:{}}},watch:{show:{handler:function(t){t?this.open():this.isShow&&this.close()},immediate:!0}},computed:{stylesObject:function(){var t=m(m({},this.styles),{},{"transition-duration":this.duration/1e3+"s"}),e="";for(var n in t){e+=this.toLine(n)+":"+t[n]+";"}return e},transformStyles:function(){return"transform:"+this.transform+";opacity:"+this.opacity+";"+this.stylesObject}},created:function(){this.config={duration:this.duration,timingFunction:"ease",transformOrigin:"50% 50%",delay:0},this.durationTime=this.duration},methods:{init:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.duration&&(this.durationTime=t.duration),this.animation=Ql(Object.assign(this.config,t),this)},onClick:function(){this.$emit("click",{detail:this.isShow})},step:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.animation){for(var n in t)try{var i;if("object"===w(t[n]))(i=this.animation)[n].apply(i,d(t[n]));else this.animation[n](t[n])}catch(Uc){}return this.animation.step(e),this}},run:function(t){this.animation&&this.animation.run(t)},open:function(){var t=this;clearTimeout(this.timer),this.transform="",this.isShow=!0;var e=this.styleInit(!1),n=e.opacity,i=e.transform;void 0!==n&&(this.opacity=n),this.transform=i,this.$nextTick((function(){t.timer=setTimeout((function(){t.animation=Ql(t.config,t),t.tranfromInit(!1).step(),t.animation.run(),t.$emit("change",{detail:t.isShow})}),20)}))},close:function(t){var e=this;this.animation&&this.tranfromInit(!0).step().run((function(){e.isShow=!1,e.animationData=null,e.animation=null;var t=e.styleInit(!1),n=t.opacity,i=t.transform;e.opacity=n||1,e.transform=i,e.$emit("change",{detail:e.isShow})}))},styleInit:function(t){var e=this,n={transform:""},i=function(t,i){"fade"===i?n.opacity=e.animationType(t)[i]:n.transform+=e.animationType(t)[i]+" "};return"string"==typeof this.modeClass?i(t,this.modeClass):this.modeClass.forEach((function(e){i(t,e)})),n},tranfromInit:function(t){var e=this,n=function(t,n){var i=null;"fade"===n?i=t?0:1:(i=t?"-100%":"0","zoom-in"===n&&(i=t?.8:1),"zoom-out"===n&&(i=t?1.2:1),"slide-right"===n&&(i=t?"100%":"0"),"slide-bottom"===n&&(i=t?"100%":"0")),e.animation[e.animationMode()[n]](i)};return"string"==typeof this.modeClass?n(t,this.modeClass):this.modeClass.forEach((function(e){n(t,e)})),this.animation},animationType:function(t){return{fade:t?1:0,"slide-top":"translateY(".concat(t?"0":"-100%",")"),"slide-right":"translateX(".concat(t?"0":"100%",")"),"slide-bottom":"translateY(".concat(t?"0":"100%",")"),"slide-left":"translateX(".concat(t?"0":"-100%",")"),"zoom-in":"scaleX(".concat(t?1:.8,") scaleY(").concat(t?1:.8,")"),"zoom-out":"scaleX(".concat(t?1:1.2,") scaleY(").concat(t?1:1.2,")")}},animationMode:function(){return{fade:"opacity","slide-top":"translateY","slide-right":"translateX","slide-bottom":"translateY","slide-left":"translateX","zoom-in":"scale","zoom-out":"scale"}},toLine:function(t){return t.replace(/([A-Z])/g,"-$1").toLowerCase()}}};var tc=H(Xl,[["render",function(t,e,n,i,r,a){var o=rt;return Nt((Q(),X(o,{ref:"ani",animation:r.animationData,class:it(n.customClass),style:nt(a.transformStyles),onClick:a.onClick},{default:tt((function(){return[se(t.$slots,"default")]})),_:3},8,["animation","class","style","onClick"])),[[be,r.isShow]])}]]),ec={name:"uniPopup",components:{keypress:{name:"Keypress",props:{disable:{type:Boolean,default:!1}},mounted:function(){var t=this,e={esc:["Esc","Escape"],tab:"Tab",enter:"Enter",space:[" ","Spacebar"],up:["Up","ArrowUp"],left:["Left","ArrowLeft"],right:["Right","ArrowRight"],down:["Down","ArrowDown"],delete:["Backspace","Delete","Del"]};document.addEventListener("keyup",(function(n){if(!t.disable){var i=Object.keys(e).find((function(t){var i=n.key,r=e[t];return r===i||Array.isArray(r)&&r.includes(i)}));i&&setTimeout((function(){t.$emit(i,{})}),0)}}))},render:function(){}}},emits:["change","maskClick"],props:{animation:{type:Boolean,default:!0},type:{type:String,default:"center"},isMaskClick:{type:Boolean,default:null},maskClick:{type:Boolean,default:null},backgroundColor:{type:String,default:"none"},safeArea:{type:Boolean,default:!0},maskBackgroundColor:{type:String,default:"rgba(0, 0, 0, 0.4)"}},watch:{type:{handler:function(t){this.config[t]&&this[this.config[t]](!0)},immediate:!0},isDesktop:{handler:function(t){this.config[t]&&this[this.config[this.type]](!0)},immediate:!0},maskClick:{handler:function(t){this.mkclick=t},immediate:!0},isMaskClick:{handler:function(t){this.mkclick=t},immediate:!0},showPopup:function(t){document.getElementsByTagName("body")[0].style.overflow=t?"hidden":"visible"}},data:function(){return{duration:300,ani:[],showPopup:!1,showTrans:!1,popupWidth:0,popupHeight:0,config:{top:"top",bottom:"bottom",center:"center",left:"left",right:"right",message:"top",dialog:"center",share:"bottom"},maskClass:{position:"fixed",bottom:0,top:0,left:0,right:0,backgroundColor:"rgba(0, 0, 0, 0.4)"},transClass:{position:"fixed",left:0,right:0},maskShow:!0,mkclick:!0,popupstyle:"top"}},computed:{isDesktop:function(){return this.popupWidth>=500&&this.popupHeight>=500},bg:function(){return""===this.backgroundColor||"none"===this.backgroundColor?"transparent":this.backgroundColor}},mounted:function(){var t,e,n,i,r,a,o=this;t=_e(),e=t.windowWidth,n=t.windowHeight,i=t.windowTop,r=t.safeArea,t.screenHeight,a=t.safeAreaInsets,o.popupWidth=e,o.popupHeight=n+(i||0),r&&o.safeArea?o.safeAreaInsets=a.bottom:o.safeAreaInsets=0},unmounted:function(){this.setH5Visible()},created:function(){null===this.isMaskClick&&null===this.maskClick?this.mkclick=!0:this.mkclick=null!==this.isMaskClick?this.isMaskClick:this.maskClick,this.animation?this.duration=300:this.duration=0,this.messageChild=null,this.clearPropagation=!1,this.maskClass.backgroundColor=this.maskBackgroundColor},methods:{setH5Visible:function(){document.getElementsByTagName("body")[0].style.overflow="visible"},closeMask:function(){this.maskShow=!1},disableMask:function(){this.mkclick=!1},clear:function(t){t.stopPropagation(),this.clearPropagation=!0},open:function(t){if(!this.showPopup){t&&-1!==["top","center","bottom","left","right","message","dialog","share"].indexOf(t)||(t=this.type),this.config[t]&&(this[this.config[t]](),this.$emit("change",{show:!0,type:t}))}},close:function(t){var e=this;this.showTrans=!1,this.$emit("change",{show:!1,type:this.type}),clearTimeout(this.timer),this.timer=setTimeout((function(){e.showPopup=!1}),300)},touchstart:function(){this.clearPropagation=!1},onTap:function(){this.clearPropagation?this.clearPropagation=!1:(this.$emit("maskClick"),this.mkclick&&this.close())},top:function(t){var e=this;this.popupstyle=this.isDesktop?"fixforpc-top":"top",this.ani=["slide-top"],this.transClass={position:"fixed",left:0,right:0,backgroundColor:this.bg},t||(this.showPopup=!0,this.showTrans=!0,this.$nextTick((function(){e.messageChild&&"message"===e.type&&e.messageChild.timerClose()})))},bottom:function(t){this.popupstyle="bottom",this.ani=["slide-bottom"],this.transClass={position:"fixed",left:0,right:0,bottom:0,paddingBottom:this.safeAreaInsets+"px",backgroundColor:this.bg},t||(this.showPopup=!0,this.showTrans=!0)},center:function(t){this.popupstyle="center",this.ani=["zoom-out","fade"],this.transClass={position:"fixed",display:"flex",flexDirection:"column",bottom:0,left:0,right:0,top:0,justifyContent:"center",alignItems:"center"},t||(this.showPopup=!0,this.showTrans=!0)},left:function(t){this.popupstyle="left",this.ani=["slide-left"],this.transClass={position:"fixed",left:0,bottom:0,top:0,backgroundColor:this.bg,display:"flex",flexDirection:"column"},t||(this.showPopup=!0,this.showTrans=!0)},right:function(t){this.popupstyle="right",this.ani=["slide-right"],this.transClass={position:"fixed",bottom:0,right:0,top:0,backgroundColor:this.bg,display:"flex",flexDirection:"column"},t||(this.showPopup=!0,this.showTrans=!0)}}};var nc=H(ec,[["render",function(t,e,n,i,r,a){var o=Z(G("uni-transition"),tc),u=rt,s=ye("keypress");return r.showPopup?(Q(),X(u,{key:0,class:it(["uni-popup",[r.popupstyle,a.isDesktop?"fixforpc-z-index":""]])},{default:tt((function(){return[et(u,{onTouchstart:a.touchstart},{default:tt((function(){return[r.maskShow?(Q(),X(o,{key:"1",name:"mask","mode-class":"fade",styles:r.maskClass,duration:r.duration,show:r.showTrans,onClick:a.onTap},null,8,["styles","duration","show","onClick"])):Et("",!0),et(o,{key:"2","mode-class":r.ani,name:"content",styles:r.transClass,duration:r.duration,show:r.showTrans,onClick:a.onTap},{default:tt((function(){return[et(u,{class:it(["uni-popup__wrapper",[r.popupstyle]]),style:nt({backgroundColor:a.bg}),onClick:a.clear},{default:tt((function(){return[se(t.$slots,"default",{},void 0,!0)]})),_:3},8,["style","class","onClick"])]})),_:3},8,["mode-class","styles","duration","show","onClick"])]})),_:3},8,["onTouchstart"]),r.maskShow?(Q(),X(s,{key:0,onEsc:a.onTap},null,8,["onEsc"])):Et("",!0)]})),_:3},8,["class"])):Et("",!0)}],["__scopeId","data-v-221fc41c"]]),ic={__name:"open-table",props:{show:{type:Boolean,default:!1},tableNo:{type:String,default:null},tableId:{type:[Number,String],default:null},isUpdate:{type:Boolean,default:!1},buffetIds:{type:Array,default:function(){return[]}},buffetCustomerType:{type:Array,default:function(){return[]}},isBuffetProduct:{type:Boolean,default:!1}},emits:["update:show","success"],setup:function(t,e){var n=e.emit,i=Wt(Jt()).buffetConfig,r=Wt(Nl()).isBuffet,a=ve(),o=a.getGoodsList,u=a.clearTableGoodsData,s=n,l=t,c=$(null),d=$(!1),f=$({table_id:l.tableId,is_buffet:l.isBuffet,meal_num:"",buffet_ids:[],buffet_customer_type:[]}),p=$(null),h=$(!1),v=$(""),g=$([]),b=yt((function(){var t,e=[];return null===(t=g.value)||void 0===t||t.map((function(t){var n;null!==(n=f.value)&&void 0!==n&&n.buffet_ids.includes(t.id)&&e.push(t.name_text)})),e})),_=yt((function(){var t;return((null===(t=f.value)||void 0===t?void 0:t.buffet_customer_type)||[]).reduce((function(t,e){return t+Number(e.num)}),0)||0})),w=$(0);at((function(){return f.value.buffet_ids}),(function(){var t,e=[];((null===(t=f.value)||void 0===t?void 0:t.buffet_ids)||[]).map((function(t){var n,i=null===(n=g.value)||void 0===n?void 0:n.find((function(e){return e.id==t}));i.buffetCustomerType&&i.buffetCustomerType.length>0&&i.buffetCustomerType.map((function(t){if(-1===e.findIndex((function(e){return e.customer_type_id==t.customer_type_id}))){var n=(f.value.buffet_customer_type||[]).find((function(e){return e.customer_type_id==t.customer_type_id}));null!=n&&n.customer_type_id?e.push(n):e.push({name_text:t.name_text,customer_type_id:t.customer_type_id,num:0})}}))})),f.value.buffet_customer_type=nr(e,"customer_type_id")}),{deep:!0}),at((function(){return f.value.is_buffet}),(function(){f.value.meal_num="",f.value.buffet_ids=[],f.value.buffet_customer_type=[],w.value=0})),at((function(){return l.show}),x(y().mark((function t(){var e,n,a;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!l.show){t.next=9;break}return t.next=3,ie();case 3:null===(e=c.value)||void 0===e||e.open(),f.value={table_id:l.tableId,is_buffet:l.isUpdate?r.value:1==(null===(n=i.value)||void 0===n?void 0:n.is_open)?1:0,meal_num:"",buffet_ids:[],buffet_customer_type:[]},w.value=0,1==f.value.is_buffet&&R("order.HallCart/buffetList").then((function(t){if(g.value=t.data,l.isUpdate&&l.buffetIds&&l.buffetIds.length>0){var e,n=null===(e=g.value)||void 0===e?void 0:e.find((function(t){return t.id==l.buffetIds[0]}));p.value=null==n?void 0:n.is_comb,f.value.buffet_ids=l.buffetIds,setTimeout((function(){f.value.buffet_customer_type.map((function(t){var e=(l.buffetCustomerType||[]).find((function(e){return e.customer_type_id==t.customer_type_id}));t.num=(null==e?void 0:e.num)||0}))}),10)}})),t.next=10;break;case 9:null===(a=c.value)||void 0===a||a.close();case 10:case"end":return t.stop()}}),t)}))));var D=function(){var t;null===(t=c.value)||void 0===t||t.close(),s("update:show",!1)},k=function(){!f.value.buffet_customer_type||f.value.buffet_customer_type.length<=0||(f.value.buffet_customer_type[w.value].num=0)},C=function(t){!f.value.buffet_customer_type||f.value.buffet_customer_type.length<=0||/^\d+$/.test(t)&&(f.value.buffet_customer_type[w.value].num=Number("".concat((f.value.buffet_customer_type[w.value].num||"").toString()).concat(t)))},A=function(t){t&&0==f.value.is_buffet&&(f.value.meal_num+=t)},E=function(){var t=x(y().mark((function t(){var e,n,i;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!=f.value.is_buffet){t.next=7;break}if(f.value.meal_num){t.next=3;break}return t.abrupt("return",uni.showToast({title:ft("請輸入人數"),icon:"none"}));case 3:if(/^(?!0+$)\d{1,3}$/.test(f.value.meal_num)){t.next=5;break}return t.abrupt("return",uni.showToast({title:ft("用餐人数支持1-999"),icon:"none"}));case 5:t.next=21;break;case 7:if(b.value&&!(b.value.length<=0)){t.next=9;break}return t.abrupt("return",uni.showToast({title:ft("请选择自助餐套餐"),icon:"none"}));case 9:if(f.value.buffet_customer_type&&!(f.value.buffet_customer_type.length<=0)){t.next=11;break}return t.abrupt("return",uni.showToast({title:ft("暂无可选顾客类型"),icon:"none"}));case 11:if(n="",((null===(e=f.value)||void 0===e?void 0:e.buffet_ids)||[]).some((function(t){var e,i=null===(e=g.value)||void 0===e?void 0:e.find((function(e){return e.id==t}));if(!i.buffetCustomerType||i.buffetCustomerType.length<=0)return n=i.name_text,!0})),!n){t.next=17;break}return h.value=!0,v.value=n,t.abrupt("return");case 17:if(_.value){t.next=19;break}return t.abrupt("return",uni.showToast({title:ft("請輸入人數"),icon:"none"}));case 19:if(/^(?!0+$)\d{1,3}$/.test(_.value)){t.next=21;break}return t.abrupt("return",uni.showToast({title:ft("用餐人数支持1-999"),icon:"none"}));case 21:return t.prev=21,d.value=!0,t.next=25,r=f.value,a=l.isUpdate,R(a?0==r.is_buffet?"order.Order/updateMealNum":"order.Order/updateBuffet":"order.Order/tableBuy",r,{isLoading:!1});case 25:1==(i=t.sent).code&&(uni.showToast({title:i.msg,icon:"none"}),l.isUpdate&&(u(),o(!0)),me(l.tableId),s("update:show",!1),setTimeout((function(){s("success",m({order_id:i.data.order_id},i.data.res))}),100)),t.next=31;break;case 29:t.prev=29,t.t0=t.catch(21);case 31:return t.prev=31,d.value=!1,t.finish(31);case 34:case"end":return t.stop()}var r,a}),t,null,[[21,29,31,34]])})));return function(){return t.apply(this,arguments)}}();return function(t,e){var n=rt,r=Z(G("ti-input"),ot),a=At,o=Z(G("ti-empty-data"),xt),u=bt,m=Z(G("uni-icons"),jt),y=Lt,x=Z(G("ti-keyboard"),ut),F=Z(G("uni-popup"),nc),I=Z(G("ti-modal"),st);return Q(),vt(mt,null,[et(F,{ref_key:"dialogRef",ref:c,onMaskClick:D},{default:tt((function(){return[et(n,{class:it(["ti-dialog-box",{"ti-open-buffet":0!=f.value.is_buffet&&!l.isBuffetProduct}])},{default:tt((function(){return[et(n,{class:"ti-dialog-top"},{default:tt((function(){return[et(n,{class:"ti-dialog-title"},{default:tt((function(){return[lt(ct(l.isUpdate&&1==f.value.is_buffet?dt(ft)("调整自助餐"):dt(zt)("[{table_no}]就餐人數",{table_no:l.tableNo})),1)]})),_:1}),et(n,{class:"ti-dialog-content"},{default:tt((function(){var t;return[1!=(null===(t=dt(i))||void 0===t?void 0:t.is_open)||l.isUpdate?Et("",!0):(Q(),X(n,{key:0,class:"ti-modify-buffet"},{default:tt((function(){return[et(n,{class:it(["ti-buffet-item",{active:1==f.value.is_buffet}]),onClick:e[0]||(e[0]=function(t){return f.value.is_buffet=1})},{default:tt((function(){return[lt(ct(dt(ft)("自助餐")),1)]})),_:1},8,["class"]),et(n,{class:it(["ti-buffet-item",{active:0==f.value.is_buffet}]),onClick:e[1]||(e[1]=function(t){return f.value.is_buffet=0})},{default:tt((function(){return[lt(ct(dt(ft)("非自助餐")),1)]})),_:1},8,["class"])]})),_:1})),0==f.value.is_buffet?(Q(),X(n,{key:1,class:"ti-modify-input"},{default:tt((function(){return[et(r,{modelValue:f.value.meal_num,"onUpdate:modelValue":e[2]||(e[2]=function(t){return f.value.meal_num=t}),regex:/^\d+$/,placeholder:dt(ft)("請輸入人數"),focus:!0},null,8,["modelValue","placeholder"])]})),_:1})):(Q(),X(n,{key:2,class:"ti-buffet-box",style:nt({"grid-template-columns":l.isBuffetProduct?"1fr":""})},{default:tt((function(){return[l.isBuffetProduct?Et("",!0):(Q(),X(u,{key:0,class:"ti-buffet-scroll","scroll-y":""},{default:tt((function(){return[g.value&&g.value.length>0?(Q(),X(n,{key:0,class:"ti-buffet-list"},{default:tt((function(){return[(Q(!0),vt(mt,null,gt(g.value,(function(t){return Q(),X(n,{key:t.id,class:it(["ti-buffet-item",{active:f.value.buffet_ids.includes(t.id),disabled:f.value.buffet_ids.length>0&&p.value!=t.is_comb}]),onClick:function(e){return function(t){if(!(f.value.buffet_ids.length>0&&p.value!=t.is_comb))if(p.value=t.is_comb,0==p.value)f.value.buffet_ids=f.value.buffet_ids[0]!=t.id?[t.id]:[];else{var e=f.value.buffet_ids.indexOf(t.id);if(e>-1)f.value.buffet_ids.splice(e,1);else{if(f.value.buffet_ids.length>=2)return uni.showToast({title:zt("最多只能选择{count}个",{count:2}),icon:"none"});f.value.buffet_ids.push(t.id)}}}(t)}},{default:tt((function(){return[et(n,{class:"ti-buffet-name"},{default:tt((function(){return[lt(ct(t.name_text||t.name),1)]})),_:2},1024),et(n,null,{default:tt((function(){return[et(a,{class:"ti-buffet-price"},{default:tt((function(){var e;return[lt(ct(dt(Dt)(t.buffetCustomerType?null===(e=t.buffetCustomerType[0])||void 0===e?void 0:e.price:0)),1)]})),_:2},1024),et(a,{class:"ti-buffet-subPrice"},{default:tt((function(){var e;return[lt(ct(dt(kt)(t.buffetCustomerType?null===(e=t.buffetCustomerType[0])||void 0===e?void 0:e.price:0)),1)]})),_:2},1024)]})),_:2},1024)]})),_:2},1032,["class","onClick"])})),128))]})),_:1})):(Q(),X(o,{key:1}))]})),_:1})),et(n,{style:{overflow:"hidden"}},{default:tt((function(){return[et(n,{class:"ti-buffet-info"},{default:tt((function(){return[b.value&&0!=b.value.length?(Q(),vt(mt,{key:1},[et(n,{class:"ti-buffet-select"},{default:tt((function(){return[(Q(!0),vt(mt,null,gt(b.value,(function(t,e){return Q(),X(n,{key:e,class:"ti-buffet-select-item"},{default:tt((function(){return[lt(ct(t),1)]})),_:2},1024)})),128))]})),_:1}),f.value.buffet_customer_type&&f.value.buffet_customer_type.length>0?(Q(),vt(mt,{key:0},[et(n,{class:"ti-buffet-num"},{default:tt((function(){return[(Q(!0),vt(mt,null,gt(f.value.buffet_customer_type,(function(t,e){return Q(),X(n,{key:t.customer_type_id,class:"ti-buffet-num-item"},{default:tt((function(){return[et(n,{class:"ti-buffet-num-label"},{default:tt((function(){return[lt(ct(t.name_text),1)]})),_:2},1024),et(n,{class:"ti-buffet-num-input"},{default:tt((function(){return[et(y,{class:"ti-input-minus",disabled:t.num<=0,onClick:function(e){return t.num--}},{default:tt((function(){return[et(m,{"custom-prefix":"iconfont",type:"icon-minus",size:"16",color:"#FFBE00"})]})),_:2},1032,["disabled","onClick"]),et(n,{class:it(["ti-input-box",{active:w.value==e}]),onClick:function(t){return w.value=e}},{default:tt((function(){return[lt(ct(t.num),1)]})),_:2},1032,["class","onClick"]),et(y,{class:"ti-input-plus",disabled:_.value>=999,onClick:function(e){return t.num++}},{default:tt((function(){return[et(m,{type:"plusempty",size:"16",color:"#FFBE00"})]})),_:2},1032,["disabled","onClick"])]})),_:2},1024)]})),_:2},1024)})),128))]})),_:1}),et(n,{class:"ti-buffet-num-total"},{default:tt((function(){return[et(a,null,{default:tt((function(){return[lt(ct(dt(ft)("共")),1)]})),_:1}),et(a,{class:"orange"},{default:tt((function(){return[lt(ct(_.value),1)]})),_:1}),et(a,null,{default:tt((function(){return[lt(ct(dt(ft)("人")),1)]})),_:1})]})),_:1})],64)):(Q(),X(n,{key:1,class:"ti-buffet-num-empty"},{default:tt((function(){return[lt(ct(dt(ft)("暂无可选顾客类型")),1)]})),_:1}))],64)):(Q(),X(n,{key:0,class:"ti-buffet-info-empty"},{default:tt((function(){return[lt(ct(dt(ft)("请选择自助餐套餐")),1)]})),_:1}))]})),_:1}),et(n,{class:"ti-dialog-btn",style:{padding:"16px","border-radius":"10px"}},{default:tt((function(){return[et(x,{primaryLoading:d.value,isDoubleZero:!0,isCross:!1,isDrop:!1,onExit:e[3]||(e[3]=function(t){return s("update:show",!1)}),onClear:k,onInput:C,onConfirm:E},null,8,["primaryLoading"])]})),_:1})]})),_:1})]})),_:1},8,["style"]))]})),_:1})]})),_:1}),0==f.value.is_buffet?(Q(),X(n,{key:0,class:"ti-dialog-btn"},{default:tt((function(){return[et(x,{primaryLoading:d.value,isDoubleZero:!0,isCross:!1,isDrop:!1,onExit:e[4]||(e[4]=function(t){return s("update:show",!1)}),onClear:e[5]||(e[5]=function(t){return f.value.meal_num=""}),onInput:A,onConfirm:E},null,8,["primaryLoading"])]})),_:1})):Et("",!0)]})),_:1},8,["class"])]})),_:1},512),et(I,{class:"ti-action-tips",show:h.value,"onUpdate:show":e[6]||(e[6]=function(t){return h.value=t}),title:dt(ft)("溫馨提示"),content:dt(zt)("[{title}]暂无用户类型，请选择其他自助餐",{title:v.value}),isCancelShow:!1,onConfirm:e[7]||(e[7]=function(t){return h.value=!1})},null,8,["show","title","content"])],64)}}},rc=H(ic,[["__scopeId","data-v-f1098571"]]),ac={__name:"cancel-all",props:{show:{type:Boolean,default:!1},sendKitchen:{type:Array,default:function(){return[]}},msg:{type:String,default:null},cancelShow:{type:Boolean,default:!1}},emits:["update:show","confirm"],setup:function(t,e){var n=e.emit,i=t,r=$(!1),a=function(){n("update:show",!1),n("confirm")};return function(e,o){var u=rt,s=bt,l=Z(G("ti-modal"),st);return Q(),X(l,{class:"ti-action-tips",title:e.$t("溫馨提示"),isCancelShow:i.cancelShow,show:i.show,confirmLoading:r.value,onCancel:o[0]||(o[0]=function(t){return n("update:show",!1)}),onConfirm:a},{content:tt((function(){return[et(u,{class:"ti-dialog-content"},{default:tt((function(){return[i.sendKitchen&&t.sendKitchen.length>0?(Q(),vt(mt,{key:0},[et(u,{class:"ti-cancel-title"},{default:tt((function(){return[lt(ct(i.msg),1)]})),_:1}),et(s,{"scroll-y":""},{default:tt((function(){return[et(u,{class:"ti-cancel-list"},{default:tt((function(){return[(Q(!0),vt(mt,null,gt(i.sendKitchen,(function(t,e){return Q(),X(u,{key:e,class:"ti-cancel-item"},{default:tt((function(){return[lt(ct(null==t?void 0:t.product_name_text),1)]})),_:2},1024)})),128))]})),_:1})]})),_:1})],64)):Et("",!0)]})),_:1})]})),_:1},8,["title","isCancelShow","show","confirmLoading"])}}},oc=H(ac,[["__scopeId","data-v-66800af2"]]),uc={__name:"action-list",props:{productItem:{type:Object,default:function(){return{}}},tableId:{type:[Number,String],default:null},tableNo:{type:[Number,String],default:null},orderList:{type:Array,default:function(){return[]}},totalPayPrice:{type:[Number,String],default:0},preferentialData:{type:Object,default:function(){return{}}},isLock:{type:Number,default:0},orderBuffetId:{type:Number,default:0},orderDelayId:{type:Number,default:0},totalNum:{type:[Number,String],default:0},buffetList:{type:Array,default:function(){return[]}},buffetCustomerType:{type:Array,default:function(){return[]}},mealNum:{type:[Number,String],default:0},buffetDiscountNum:{type:[Number,String],default:0}},emits:["success","backTable"],setup:function(t,e){var n=e.emit,i=t,r=yt((function(){return i.orderList.filter((function(t){return 0!=(null==t?void 0:t.is_send_kitchen)}))||[]})),a=yt((function(){return i.orderList.filter((function(t){return 0==(null==t?void 0:t.is_send_kitchen)}))||[]})),o=yt((function(){return a.value.filter((function(t){return 1==t.is_buffet_product}))||[]})),u=Wt(Nl()),s=u.isBuffet,l=u.buffetTime,c=u.isUnlimitedTime,d=Jt(),f=Wt(d).buffetConfig,p=$(""),h=$(!1),v=$(!1),g=$(!1),b=$(!1),_=$(!1),w=$(!1),D=$(!1),k=$(!1),C=$(!1),A=$(!1),E=$(!1),F=$(!1),I=$(!1),S=$(!1),T=yt((function(){return(i.buffetList||[]).map((function(t){return t.buffet_id}))})),P=yt((function(){var t;return null===(t=i.orderList)||void 0===t?void 0:t.some((function(t){return 1==t.is_buffet_product}))})),B=$(""),N=$(!1),z=$([]),O=function(t,e){n("success",t,e)},M=function(){F.value=!1,A.value=!0},L=function(){var t;(null===(t=i.productItem)||void 0===t?void 0:t.finish_time)>0?F.value=!0:A.value=!0},j=function(){h.value=!0,i.orderBuffetId>0?i.buffetCustomerType&&i.buffetCustomerType.length<=1?p.value=ft("是否删除该套餐，将清台退出？"):p.value=ft("是否删除该套餐？"):i.orderDelayId>0?p.value=ft("是否删除该加钟？"):p.value=ft("是否删除该商品？")},U=function(){var t=x(y().mark((function t(){var e,r,a,o;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!v.value){t.next=2;break}return t.abrupt("return");case 2:if(t.prev=2,v.value=!0,!(i.orderBuffetId>0)){t.next=18;break}return t.next=7,s=i.orderBuffetId,R("order.HallCart/delOrderBuffetCustomer",{id:s},{isLoading:!1});case 7:if(e=t.sent,uni.showToast({title:e.msg,icon:"none"}),!(i.buffetCustomerType&&i.buffetCustomerType.length<=1)){t.next=15;break}return t.next=12,Pl({table_id:he()});case 12:setTimeout(x(y().mark((function t(){return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n("backTable");case 1:case"end":return t.stop()}}),t)}))),300),t.next=16;break;case 15:n("success",m({order_id:e.data.order_id},e.data.res),"delBuffet");case 16:t.next=31;break;case 18:if(!(i.orderDelayId>0)){t.next=26;break}return t.next=21,u={table_id:he(),order_delay_id:i.orderDelayId},R("order.HallCart/delOrderDelay",u,{isLoading:!1});case 21:r=t.sent,O(m({order_id:r.data.order_id},r.data.res),"delDelay"),uni.showToast({title:r.msg,icon:"none"}),t.next=31;break;case 26:return t.next=28,Tl({table_id:he(),order_product_id:null===(a=i.productItem)||void 0===a?void 0:a.order_product_id});case 28:o=t.sent,uni.showToast({title:o.msg,icon:"none"}),O(m({order_id:o.data.order_id},o.data.res),"delete");case 31:h.value=!1,t.next=36;break;case 34:t.prev=34,t.t0=t.catch(2);case 36:return t.prev=36,v.value=!1,t.finish(36);case 39:case"end":return t.stop()}var u,s}),t,null,[[2,34,36,39]])})));return function(){return t.apply(this,arguments)}}(),q=function(){if(1==s.value&&l.value<=0&&-1!=c.value){var t,e;if(1==(null===(t=f.value)||void 0===t?void 0:t.is_buy_continue)&&o.value.length>0)return void(_.value=!0);if(1!=(null===(e=f.value)||void 0===e?void 0:e.is_buy_continue)&&a.value.length>0)return void(w.value=!0)}g.value=!0},V=function(){var t=x(y().mark((function t(){var e;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!b.value){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,b.value=!0,t.next=6,n={table_id:he()},R("order.HallCart/sendKitchen",n,{isMessage:!1});case 6:e=t.sent,uni.showToast({title:e.msg,icon:"none"}),g.value=!1,O(m({order_id:e.data.order_id},e.data.res)),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),null!==t.t0&&void 0!==t.t0&&t.t0.data&&(null===t.t0||void 0===t.t0?void 0:t.t0.data.length)>0?(z.value=null===t.t0||void 0===t.t0?void 0:t.t0.data,B.value=null===t.t0||void 0===t.t0?void 0:t.t0.msg,N.value=!0):uni.showToast({title:null===t.t0||void 0===t.t0?void 0:t.t0.msg,icon:"none"});case 15:return t.prev=15,b.value=!1,g.value=!1,t.finish(15);case 19:case"end":return t.stop()}var n}),t,null,[[2,12,15,19]])})));return function(){return t.apply(this,arguments)}}();return function(e,u){var l,c=At,d=Lt,f=rt,m=Z(G("ti-modal"),st),y=Bt("permission");return Q(),vt(mt,null,[et(f,{class:"ti-action-box"},{default:tt((function(){return[et(f,{class:"ti-action-btn"},{default:tt((function(){return[et(f,{class:"ti-btn-box"},{default:tt((function(){var t,e,r,o;return[et(d,{class:"ti-btn-item",disabled:!1,onClick:u[0]||(u[0]=function(t){return n("backTable")})},{default:tt((function(){return[et(c,{class:"ti-btn-item-text"},{default:tt((function(){return[lt(ct(dt(ft)("返回")),1)]})),_:1})]})),_:1}),Nt((Q(),X(d,{class:"ti-btn-item danger",disabled:!(1!=i.isLock&&(0==(null===(t=i.productItem)||void 0===t?void 0:t.is_send_kitchen)||i.orderBuffetId>0||i.orderDelayId>0)),onClick:j},{default:tt((function(){return[et(c,{class:"ti-btn-item-text"},{default:tt((function(){return[lt(ct(dt(ft)("删除")),1)]})),_:1})]})),_:1},8,["disabled"])),[[y,["cashier_table_delete"]]]),Nt((Q(),X(d,{class:"ti-btn-item",disabled:!(1!=i.isLock&&(null===(e=i.productItem)||void 0===e?void 0:e.order_product_id)>0),onClick:u[1]||(u[1]=function(t){return k.value=!0})},{default:tt((function(){return[et(c,{class:"ti-btn-item-text"},{default:tt((function(){return[lt(ct(dt(ft)("價格")),1)]})),_:1})]})),_:1},8,["disabled"])),[[y,["cashier_table_price"]]]),Nt((Q(),X(d,{class:"ti-btn-item",disabled:1==i.isLock,onClick:u[2]||(u[2]=function(t){return S.value=!0})},{default:tt((function(){return[et(c,{class:"ti-btn-item-text"},{default:tt((function(){return[lt(ct(dt(s)?dt(ft)("调整自助餐"):dt(ft)("人数")),1)]})),_:1})]})),_:1},8,["disabled"])),[[y,["cashier_table_number_people"]]]),Nt((Q(),X(d,{class:"ti-btn-item",disabled:1==i.isLock,onClick:u[3]||(u[3]=function(t){return I.value=!0})},{default:tt((function(){return[et(c,{class:"ti-btn-item-text"},{default:tt((function(){return[lt(ct(dt(ft)("转台")),1)]})),_:1})]})),_:1},8,["disabled"])),[[y,["cashier_table_turntable"]]]),Nt((Q(),X(d,{class:"ti-btn-item",disabled:!(1!=i.isLock&&a.value.length>0),onClick:q},{default:tt((function(){return[et(c,{class:"ti-btn-item-text"},{default:tt((function(){return[lt(ct(dt(ft)("送廚")),1)]})),_:1})]})),_:1},8,["disabled"])),[[y,["cashier_table_send_kitchen"]]]),Nt((Q(),X(d,{class:"ti-btn-item danger",disabled:!(1!=i.isLock&&1==(null===(r=i.productItem)||void 0===r?void 0:r.is_send_kitchen)),onClick:L},{default:tt((function(){return[et(c,{class:"ti-btn-item-text"},{default:tt((function(){return[lt(ct(dt(ft)("退菜")),1)]})),_:1})]})),_:1},8,["disabled"])),[[y,["cashier_table_return"]]]),Nt((Q(),X(d,{class:"ti-btn-item danger",disabled:!1,onClick:u[4]||(u[4]=function(t){return D.value=!0})},{default:tt((function(){return[et(c,{class:"ti-btn-item-text"},{default:tt((function(){return[lt(ct(dt(ft)("清台")),1)]})),_:1})]})),_:1})),[[y,["cashier_table_clear"]]]),Nt((Q(),X(d,{class:"ti-btn-item",disabled:!(1!=i.isLock&&0==(null===(o=i.productItem)||void 0===o?void 0:o.is_send_kitchen)),onClick:u[5]||(u[5]=function(t){return C.value=!0})},{default:tt((function(){return[et(c,{class:"ti-btn-item-text"},{default:tt((function(){return[lt(ct(dt(ft)("备注")),1)]})),_:1})]})),_:1},8,["disabled"])),[[y,["cashier_table_remark"]]]),Nt((Q(),X(d,{class:"ti-btn-item",disabled:i.totalNum<=0,onClick:u[6]||(u[6]=function(t){return E.value=!0})},{default:tt((function(){return[et(c,{class:"ti-btn-item-text"},{default:tt((function(){return[lt(ct(dt(ft)("優惠折扣")),1)]})),_:1})]})),_:1},8,["disabled"])),[[y,["cashier_table_discount"]]])]})),_:1})]})),_:1})]})),_:1}),et(m,{class:"ti-action-tips",show:h.value,"onUpdate:show":u[7]||(u[7]=function(t){return h.value=t}),confirmLoading:v.value,title:dt(ft)("溫馨提示"),content:p.value,onConfirm:U},null,8,["show","confirmLoading","title","content"]),et(m,{class:"ti-action-tips",show:g.value,"onUpdate:show":u[8]||(u[8]=function(t){return g.value=t}),confirmLoading:b.value,title:dt(ft)("溫馨提示"),content:dt(ft)("是否将商品送廚？"),onConfirm:V},null,8,["show","confirmLoading","title","content"]),et(Hl,{show:_.value,"onUpdate:show":u[9]||(u[9]=function(t){return _.value=t}),buffetNotSendKitchen:o.value},null,8,["show","buffetNotSendKitchen"]),et(oc,{show:N.value,"onUpdate:show":u[10]||(u[10]=function(t){return N.value=t}),sendKitchen:z.value,msg:B.value},null,8,["show","sendKitchen","msg"]),et(rc,{show:S.value,"onUpdate:show":u[11]||(u[11]=function(t){return S.value=t}),isUpdate:!0,tableId:i.tableId,tableNo:i.tableNo,buffetIds:T.value,isBuffetProduct:P.value,buffetCustomerType:t.buffetCustomerType,onSuccess:O},null,8,["show","tableId","tableNo","buffetIds","isBuffetProduct","buffetCustomerType"]),et(Zl,{show:I.value,"onUpdate:show":u[12]||(u[12]=function(t){return I.value=t}),tableNo:i.tableNo,onSuccess:O},null,8,["show","tableNo"]),et($l,{show:D.value,"onUpdate:show":u[13]||(u[13]=function(t){return D.value=t}),sendKitchen:r.value,onSuccess:u[14]||(u[14]=function(t){return n("backTable")})},null,8,["show","sendKitchen"]),et(Ol,{show:k.value,"onUpdate:show":u[15]||(u[15]=function(t){return k.value=t}),productItem:i.productItem,onSuccess:O},null,8,["show","productItem"]),et(Ll,{show:C.value,"onUpdate:show":u[16]||(u[16]=function(t){return C.value=t}),productItem:i.productItem,onSuccess:O},null,8,["show","productItem"]),et(m,{class:"ti-action-tips",show:F.value,"onUpdate:show":u[17]||(u[17]=function(t){return F.value=t}),title:dt(ft)("溫馨提示"),content:dt(zt)("此[{name}]已製作，是否退菜？",{name:null===(l=i.productItem)||void 0===l?void 0:l.product_name_text}),onConfirm:M},null,8,["show","title","content"]),et(Ul,{show:A.value,"onUpdate:show":u[18]||(u[18]=function(t){return A.value=t}),productItem:i.productItem,onSuccess:O},null,8,["show","productItem"]),et(ql,{show:E.value,"onUpdate:show":u[19]||(u[19]=function(t){return E.value=t}),preferentialData:t.preferentialData,totalPayPrice:t.totalPayPrice,onSuccess:O},null,8,["show","preferentialData","totalPayPrice"]),et(m,{class:"ti-action-tips",title:dt(ft)("溫馨提示"),show:w.value,isCancelShow:!1,onConfirm:u[20]||(u[20]=function(t){return w.value=!1})},{content:tt((function(){return[et(f,{class:"ti-dialog-content"},{default:tt((function(){return[lt(ct(dt(ft)("用餐时间已到，无法继续下单")),1)]})),_:1})]})),_:1},8,["title","show"])],64)}}},sc=H(uc,[["__scopeId","data-v-9f5b565b"]]),lc={__name:"cart-number",props:{productItem:{type:Object,default:function(){return{}}},disabled:{type:Boolean,default:!1}},emits:["change"],setup:function(t,e){var n=e.emit,i=t,r=$(!1),a=$(!1),o=$(!1),u=$(null),s=function(){var t=x(y().mark((function t(e){var s,l,c,d,f;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return d={order_product_id:null===(s=i.productItem)||void 0===s?void 0:s.order_product_id,product_num:null===(l=i.productItem)||void 0===l?void 0:l.total_num,type:e,is_buffet:null===(c=i.productItem)||void 0===c?void 0:c.is_buffet_product},"up"==e?(d.product_num+=1,u.value=setTimeout((function(){a.value=!0}),500)):(d.product_num-=1,u.value=setTimeout((function(){o.value=!0}),500)),t.prev=2,r.value=!0,t.next=6,ar(d);case 6:f=t.sent,n("change",m({order_id:f.data.order_id},f.data.res)),t.next=12;break;case 10:t.prev=10,t.t0=t.catch(2);case 12:return t.prev=12,clearTimeout(u.value),r.value=!1,a.value=!1,o.value=!1,t.finish(12);case 18:case"end":return t.stop()}}),t,null,[[2,10,12,18]])})));return function(e){return t.apply(this,arguments)}}();return function(t,e){var n=Z(G("uni-icons"),jt),u=Lt,l=rt;return Q(),X(l,{class:"ti-number-box",onClick:e[2]||(e[2]=Ut((function(){}),["stop"]))},{default:tt((function(){var t,c,d,f,p;return[et(u,{class:"ti-number-btn ti-number-minus",disabled:i.disabled||(null===(t=i.productItem)||void 0===t?void 0:t.total_num)<=1||r.value||(null===(c=i.productItem)||void 0===c?void 0:c.is_send_kitchen)>0,onClick:e[0]||(e[0]=function(t){return s("down")})},{default:tt((function(){return[o.value?(Q(),X(n,{key:1,class:"ti-number-reload",type:"reload",size:"20"})):(Q(),X(n,{key:0,"custom-prefix":"iconfont",type:"icon-minus",size:"16"}))]})),_:1},8,["disabled"]),et(l,{class:"ti-number-input"},{default:tt((function(){var t,e;return[lt(ct((null===(t=i.productItem)||void 0===t?void 0:t.total_num)||(null===(e=i.productItem)||void 0===e?void 0:e.num)||1),1)]})),_:1}),et(u,{class:"ti-number-btn ti-number-plus",disabled:i.disabled||(null===(d=i.productItem)||void 0===d?void 0:d.total_num)>=(null===(f=i.productItem)||void 0===f||null===(f=f.product)||void 0===f?void 0:f.product_stock)||r.value||(null===(p=i.productItem)||void 0===p?void 0:p.is_send_kitchen)>0,onClick:e[1]||(e[1]=function(t){return s("up")})},{default:tt((function(){return[a.value?(Q(),X(n,{key:1,class:"ti-number-reload",type:"reload",size:"20"})):(Q(),X(n,{key:0,type:"plusempty",size:"16"}))]})),_:1},8,["disabled"])]})),_:1})}}},cc=H(lc,[["__scopeId","data-v-0592a469"]]),dc={__name:"member",props:{show:{type:Boolean,default:!1}},emits:["update:show","change"],setup:function(t,e){var n=e.emit,i=t,r=$(!1),a=$(""),o=$({}),u=$(!1);at((function(){return i.show}),(function(){i.show&&(a.value="",o.value={})}));var s=function(){n("update:show",!1)},l=function(t){t&&(a.value+=t)},c=function(){var t=x(y().mark((function t(){var e;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.value){t.next=2;break}return t.abrupt("return",uni.showToast({title:ft("请输入会员手机号/ID"),icon:"none"}));case 2:return t.prev=2,r.value=!0,t.next=6,qt({mobile:a.value,table_id:he()});case 6:e=t.sent,o.value=m(m({},e.data.user),{},{total_pay_price:e.data.total_pay_price}),t.next=12;break;case 10:t.prev=10,t.t0=t.catch(2);case 12:return t.prev=12,r.value=!1,t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[2,10,12,15]])})));return function(){return t.apply(this,arguments)}}(),d=function(){var t=x(y().mark((function t(){var e,i;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,u.value=!0,t.next=4,Vt({table_id:he(),user_id:(null===(e=o.value)||void 0===e?void 0:e.user_id)||0});case 4:1==(i=t.sent).data.reset_notice&&uni.showToast({title:ft("改价/抹零已失效，请重新进行改价/抹零操作"),icon:"none"}),n("update:show",!1),n("change",m({order_id:i.data.order_id},i.data.res)),t.next=12;break;case 10:t.prev=10,t.t0=t.catch(0);case 12:return t.prev=12,u.value=!1,t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[0,10,12,15]])})));return function(){return t.apply(this,arguments)}}();return function(t,e){var n=Z(G("ti-input"),ot),f=Z(G("ti-button"),pt),p=rt,h=At,v=Z(G("ti-keyboard"),ut),m=Z(G("ti-modal"),st);return Q(),X(m,{show:i.show,title:dt(ft)("会员")},{content:tt((function(){return[et(p,{class:"ti-dialog-content"},{default:tt((function(){var t;return[et(p,{class:"ti-payment-input"},{default:tt((function(){return[et(n,{modelValue:a.value,"onUpdate:modelValue":e[0]||(e[0]=function(t){return a.value=t}),regex:/^[\d\-]+$/,placeholder:dt(ft)("請輸入會員手機號/ID"),focus:!0},null,8,["modelValue","placeholder"]),et(f,{loading:r.value,type:"primary",onClick:c},{default:tt((function(){return[lt(ct(dt(ft)("查找")),1)]})),_:1},8,["loading"])]})),_:1}),null!==(t=o.value)&&void 0!==t&&t.user_id?(Q(),X(p,{key:0,class:"ti-payment-member"},{default:tt((function(){return[et(p,{class:"ti-member-list"},{default:tt((function(){return[et(p,{class:"ti-member-item"},{default:tt((function(){return[et(p,{class:"ti-member-head"},{default:tt((function(){return[lt(ct(dt(ft)("暱稱")),1)]})),_:1}),et(p,{class:"ti-member-name text-ellipsis"},{default:tt((function(){var t;return[lt(ct((null===(t=o.value)||void 0===t?void 0:t.nickName)||"-"),1)]})),_:1})]})),_:1}),et(p,{class:"ti-member-item"},{default:tt((function(){return[et(p,{class:"ti-member-head"},{default:tt((function(){return[lt(ct(dt(ft)("會員卡/等級")),1)]})),_:1}),et(p,{class:"ti-member-name text-ellipsis"},{default:tt((function(){var t,e,n,i;return[lt(ct("".concat(1!=(null===(t=o.value)||void 0===t||null===(t=t.cardRecord)||void 0===t?void 0:t.disabled)&&null!==(e=o.value)&&void 0!==e&&null!==(e=e.card)&&void 0!==e&&e.card_name?null===(n=o.value)||void 0===n||null===(n=n.card)||void 0===n?void 0:n.card_name:"-","/").concat((null===(i=o.value)||void 0===i||null===(i=i.grade)||void 0===i?void 0:i.name)||"-")),1)]})),_:1})]})),_:1}),et(p,{class:"ti-member-item"},{default:tt((function(){return[et(p,{class:"ti-member-head"},{default:tt((function(){return[lt(ct(dt(ft)("餘額")),1)]})),_:1}),et(p,{class:"ti-member-name text-ellipsis"},{default:tt((function(){var t;return[lt(ct(dt(Rt)(null===(t=o.value)||void 0===t?void 0:t.balance)||0),1)]})),_:1})]})),_:1}),et(p,{class:"ti-member-item"},{default:tt((function(){return[et(p,{class:"ti-member-head"},{default:tt((function(){return[lt(ct(dt(ft)("積分")),1)]})),_:1}),et(p,{class:"ti-member-name text-ellipsis"},{default:tt((function(){var t;return[lt(ct((null===(t=o.value)||void 0===t?void 0:t.points)||0),1)]})),_:1})]})),_:1})]})),_:1}),et(p,{class:"ti-member-discount"},{default:tt((function(){return[et(h,{class:"ti-discount-title"},{default:tt((function(){return[lt(ct(dt(ft)("會員折扣應收金額")),1)]})),_:1}),et(h,{class:"ti-discount-price"},{default:tt((function(){var t;return[lt(ct(dt(Dt)((null===(t=o.value)||void 0===t?void 0:t.total_pay_price)||0)),1)]})),_:1}),et(h,{class:"ti-discount-subPrice"},{default:tt((function(){var t;return[lt(ct(dt(kt)((null===(t=o.value)||void 0===t?void 0:t.total_pay_price)||0)),1)]})),_:1})]})),_:1})]})),_:1})):Et("",!0)]})),_:1})]})),footer:tt((function(){return[et(p,{class:"ti-dialog-btn"},{default:tt((function(){return[et(v,{primaryLoading:u.value,isDoubleZero:!1,isCross:!0,isDrop:!0,onExit:s,onClear:e[1]||(e[1]=function(t){return a.value=""}),onInput:l,onConfirm:d},null,8,["primaryLoading"])]})),_:1})]})),_:1},8,["show","title"])}}},fc=H(dc,[["__scopeId","data-v-f2bec8a8"]]),pc={__name:"pay-code",props:{show:{type:Boolean,default:!1},payItem:{type:Object,default:function(){}}},emits:["update:show","success"],setup:function(t,e){var n=e.emit,i=t,r=function(){Kt({},!1),n("update:show",!1)},a=function(){n("success")};return function(e,n){var o=rt,u=At,s=Ht,l=Z(G("ti-modal"),st);return Q(),X(l,{class:"ti-action-tips-pay",show:i.show,confirmText:e.$t("已支付"),cancelText:e.$t("退出"),onCancel:r,onConfirm:a},{content:tt((function(){return[et(o,{class:"ti-pay-container"},{default:tt((function(){return[et(o,{class:"ti-pay-title-box"},{default:tt((function(){return[et(o,{class:"ti-pay-title"},{default:tt((function(){var n;return[lt(ct((null===(n=t.payItem)||void 0===n?void 0:n.name)+e.$t("收款:")),1)]})),_:1}),et(o,{class:"ti-pay-prices-box"},{default:tt((function(){return[et(u,{class:"ti-pay-prices"},{default:tt((function(){var e;return[lt(ct(dt(Dt)(null===(e=t.payItem)||void 0===e?void 0:e.actual_price)),1)]})),_:1}),et(u,{class:"ti-pay-subPrice"},{default:tt((function(){var e;return[lt(ct(dt(kt)(null===(e=t.payItem)||void 0===e?void 0:e.actual_price)),1)]})),_:1})]})),_:1})]})),_:1}),et(o,{class:"ti-pay-content-box"},{default:tt((function(){return[et(o,{class:"ti-pay-code"},{default:tt((function(){var e;return[et(s,{src:dt($t)(null===(e=t.payItem)||void 0===e?void 0:e.qrcode),mode:"widthFix"},null,8,["src"])]})),_:1}),et(o,{class:"ti-pay-code-tips"},{default:tt((function(){var n;return[lt(ct(e.$t("请使用")+"".concat(null===(n=t.payItem)||void 0===n?void 0:n.name)+e.$t("扫一扫支付")),1)]})),_:1})]})),_:1})]})),_:1})]})),_:1},8,["show","confirmText","cancelText"])}}},hc=H(pc,[["__scopeId","data-v-87b13621"]]),vc={__name:"payment-type",props:{show:{type:Boolean,default:!1},totalPayPrice:{type:[Number,String],default:0},orderId:{type:[Number,String],default:null},memberDetail:{type:Object,default:function(){return{}}}},emits:["update:show","success","backTable"],setup:function(t,e){var n=e.emit,i=Wt(Jt()).paymentType,r=Wt(br()).isPaying,a=n,o=t,u=$(!1),s=$({}),l=$(""),c=$(0),d=function(t){var e=l.value+t;/^\d*\.?\d{0,2}$/.test(e)&&(l.value+=t)},f=function(){l.value=""},p=function(){var t=parseFloat(l.value)-parseFloat(o.totalPayPrice);return c.value=t,t>=0},v=$(!1),g=$([]),b=$({delivery:40,pay_type:"40",user_id:null,table_id:null}),_=$(!1),w=$(!1),D=$(!1),k=$(),C=$(0),A=$("");at((function(){return o.show}),(function(){o.show&&(g.value=[],b.value.pay_type="40",l.value="")})),at((function(){return b.value.pay_type}),(function(){o.show&&(b.value.pay_type>0||(g.value&&g.value.length>0?(b.value.pay_type=g.value[0].value,s.value=g.value[0]):Zt().then((function(t){g.value=t.data||[],b.value.pay_type=g.value[0].value,s.value=g.value[0]}))))})),at((function(){return o.totalPayPrice}),(function(){p()})),at(l,(function(){p()}));var E=function(t,e){a("success",t,e)},F=function(){var t=x(y().mark((function t(){var e;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Vt({table_id:he(),user_id:0});case 3:e=t.sent,E(m({order_id:e.data.order_id},e.data.res)),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}(),I=function(t){b.value.pay_type=t.detail.value},S=function(){var t=x(y().mark((function t(){var e,n,i,r,a;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!w.value){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,w.value=!0,t.next=6,Rr({order_id:o.orderId,is_reload_price:!0});case 6:e=t.sent,uni.showToast({title:e.msg,icon:"none"}),E(m({order_id:e.data.order_id},e.data.res)),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(2),null!==t.t0&&void 0!==t.t0&&null!==(n=t.t0.data)&&void 0!==n&&n.res&&null!==t.t0&&void 0!==t.t0&&null!==(i=t.t0.data)&&void 0!==i&&i.order_id&&E(m({order_id:null===t.t0||void 0===t.t0||null===(r=t.t0.data)||void 0===r?void 0:r.order_id},null===t.t0||void 0===t.t0||null===(a=t.t0.data)||void 0===a?void 0:a.res));case 14:return t.prev=14,w.value=!1,t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[2,11,14,17]])})));return function(){return t.apply(this,arguments)}}(),T=function(){var t=x(y().mark((function t(){var e,n,i,c,d,f,v,g,x,w=arguments;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=w.length>0&&void 0!==w[0]&&w[0],!_.value){t.next=3;break}return t.abrupt("return");case 3:if((c=m({},b.value)).table_id=he(),c.user_id=null===(e=o.memberDetail)||void 0===e?void 0:e.user_id,c.actual_price=l.value,c.pay_price=o.totalPayPrice,1!=i&&(s.value.actual_price=o.totalPayPrice),"10"!=c.pay_type||c.user_id){t.next=11;break}return t.abrupt("return",uni.showToast({title:ft("请选择会员身份以享受更多优惠，再进行余额支付"),icon:"none"}));case 11:if("40"!=c.pay_type||l.value){t.next=13;break}return t.abrupt("return",uni.showToast({title:ft("请输入实收金额"),icon:"none"}));case 13:if("40"!=c.pay_type||p()){t.next=15;break}return t.abrupt("return",uni.showToast({title:ft("实收金额不应小于应收金额"),icon:"none"}));case 15:if("40"==c.pay_type||"10"==c.pay_type||null===(n=s.value)||void 0===n||!n.qrcode||1==i){t.next=19;break}return u.value=!0,Kt(s.value,!0),t.abrupt("return");case 19:return t.prev=19,_.value=!0,t.next=23,Ur(c);case 23:d=t.sent,"40"==c.pay_type&&Gt((function(){})),uni.showToast({title:d.msg,icon:"none"}),u.value=!1,r.value=1,a("update:show",!1),E(d.data.pay_res,"handleSubmit"),t.next=35;break;case 32:t.prev=32,t.t0=t.catch(19),null!==t.t0&&void 0!==t.t0&&null!==(f=t.t0.data)&&void 0!==f&&f.res&&null!==t.t0&&void 0!==t.t0&&null!==(v=t.t0.data)&&void 0!==v&&v.order_id?(uni.showToast({title:null===t.t0||void 0===t.t0?void 0:t.t0.msg,icon:"none"}),E(m({order_id:null===t.t0||void 0===t.t0||null===(g=t.t0.data)||void 0===g?void 0:g.order_id},null===t.t0||void 0===t.t0||null===(x=t.t0.data)||void 0===x?void 0:x.res))):h(null===t.t0||void 0===t.t0?void 0:t.t0.data)&&(null===t.t0||void 0===t.t0?void 0:t.t0.data.length)>0?(D.value=!0,k.value=null===t.t0||void 0===t.t0?void 0:t.t0.data,C.value=null===t.t0||void 0===t.t0?void 0:t.t0.code,A.value=null===t.t0||void 0===t.t0?void 0:t.t0.msg):uni.showToast({title:null===t.t0||void 0===t.t0?void 0:t.t0.msg,icon:"none"});case 35:return t.prev=35,_.value=!1,t.finish(35);case 38:case"end":return t.stop()}}),t,null,[[19,32,35,38]])})));return function(){return t.apply(this,arguments)}}(),P=function(){Kt(s.value,!1),T(!0)};return function(e,n){var r=At,p=rt,h=It,m=St,y=Tt,x=Z(G("ti-input"),ot),B=Ht,N=Z(G("ti-empty-data"),xt),z=Z(G("ti-keyboard"),ut),O=Z(G("ti-button"),pt),M=Z(G("ti-modal"),st);return Q(),X(M,{show:o.show,title:dt(ft)("結賬")},{content:tt((function(){return[et(p,{class:"ti-dialog-content"},{default:tt((function(){var e;return[et(p,{class:"ti-payment-money"},{default:tt((function(){return[et(r,{class:"ti-payment-label"},{default:tt((function(){return[lt(ct(dt(ft)("應收金額")),1)]})),_:1}),et(r,{class:"ti-payment-price"},{default:tt((function(){return[lt(ct(dt(Dt)(t.totalPayPrice)),1)]})),_:1}),et(r,{class:"ti-payment-subPrice"},{default:tt((function(){return[lt(ct(dt(kt)(t.totalPayPrice)),1)]})),_:1})]})),_:1}),et(p,{class:"ti-payment-type"},{default:tt((function(){return[et(p,{class:"ti-type-label"},{default:tt((function(){return[lt(ct(dt(ft)("收款方式")),1)]})),_:1}),et(y,{class:"ti-type-radio",onChange:I},{default:tt((function(){var t,e,n;return[1==(null===(t=dt(i))||void 0===t?void 0:t.is_cash)?(Q(),X(m,{key:0},{default:tt((function(){return[et(h,{value:"40",color:"#ffbe00",checked:"true"}),et(r,{class:"ti-radio-text"},{default:tt((function(){return[lt(ct(dt(ft)("現金")),1)]})),_:1})]})),_:1})):Et("",!0),1==(null===(e=dt(i))||void 0===e?void 0:e.is_balance)?(Q(),X(m,{key:1},{default:tt((function(){return[et(h,{value:"10",color:"#ffbe00"}),et(r,{class:"ti-radio-text"},{default:tt((function(){return[lt(ct(dt(ft)("餘額")),1)]})),_:1})]})),_:1})):Et("",!0),1==(null===(n=dt(i))||void 0===n?void 0:n.is_other)?(Q(),X(m,{key:2},{default:tt((function(){return[et(h,{value:"",color:"#ffbe00"}),et(r,{class:"ti-radio-text"},{default:tt((function(){return[lt(ct(dt(ft)("其他方式")),1)]})),_:1})]})),_:1})):Et("",!0)]})),_:1})]})),_:1}),"40"==b.value.pay_type?(Q(),X(p,{key:0,class:"ti-payment-cashier"},{default:tt((function(){return[et(x,{modelValue:l.value,"onUpdate:modelValue":n[0]||(n[0]=function(t){return l.value=t}),focus:!0,placeholder:dt(ft)("請輸入實收金額")},null,8,["modelValue","placeholder"]),et(p,{class:"ti-payment-cashier-view"},{default:tt((function(){return[et(p,{class:"ti-payment-cashier-title"},{default:tt((function(){return[lt(ct(dt(ft)("找零")),1)]})),_:1}),et(p,{class:"ti-payment-cashier-content"},{default:tt((function(){return[lt(ct(dt(Dt)(c.value>=0?c.value:0)),1)]})),_:1})]})),_:1})]})),_:1})):Et("",!0),"40"!=b.value.pay_type&&"10"!=b.value.pay_type?(Q(),X(p,{key:1,class:"ti-payment-other"},{default:tt((function(){return[et(p,{class:"ti-other-title"},{default:tt((function(){return[lt(ct(dt(ft)("用戶通過店內掃碼等方式進行支付，確認用戶支付完成後，點擊確認即可完成付款操作。")),1)]})),_:1}),g.value&&g.value.length>0?(Q(),X(p,{key:0,class:"ti-other-list"},{default:tt((function(){return[(Q(!0),vt(mt,null,gt(g.value,(function(t){return Q(),X(p,{key:t.value,class:it([{active:t.value==b.value.pay_type},"ti-other-item"]),onClick:function(e){return b.value.pay_type=t.value,s.value=t}},{default:tt((function(){return[et(p,{class:"ti-other-image"},{default:tt((function(){return[et(B,{src:dt($t)(t.img),mode:"widthFix"},null,8,["src"])]})),_:2},1024),et(p,{class:"ti-other-text"},{default:tt((function(){return[lt(ct(t.name),1)]})),_:2},1024)]})),_:2},1032,["class","onClick"])})),128))]})),_:1})):(Q(),X(N,{key:1}))]})),_:1})):Et("",!0),null!==(e=o.memberDetail)&&void 0!==e&&e.user_id?(Q(),X(p,{key:2,class:"ti-payment-member"},{default:tt((function(){return[et(p,{class:"ti-payment-top"},{default:tt((function(){return[et(p,{class:"ti-payment-top-name"},{default:tt((function(){return[lt(ct(dt(ft)("會員")),1)]})),_:1}),et(p,{class:"ti-payment-top-discomfort",onClick:F},{default:tt((function(){return[lt(ct(dt(ft)("不使用此會員")),1)]})),_:1})]})),_:1}),et(p,{class:"ti-member-list"},{default:tt((function(){return[et(p,{class:"ti-member-item"},{default:tt((function(){return[et(p,{class:"ti-member-head"},{default:tt((function(){return[lt(ct(dt(ft)("暱稱")),1)]})),_:1}),et(p,{class:"ti-member-name text-ellipsis"},{default:tt((function(){var t;return[lt(ct((null===(t=o.memberDetail)||void 0===t?void 0:t.nickName)||"-"),1)]})),_:1})]})),_:1}),et(p,{class:"ti-member-item"},{default:tt((function(){return[et(p,{class:"ti-member-head"},{default:tt((function(){return[lt(ct(dt(ft)("會員卡/等級")),1)]})),_:1}),et(p,{class:"ti-member-name text-ellipsis"},{default:tt((function(){var t,e,n,i;return[lt(ct("".concat(1!=(null===(t=o.memberDetail)||void 0===t||null===(t=t.cardRecord)||void 0===t?void 0:t.disabled)&&null!==(e=o.memberDetail)&&void 0!==e&&null!==(e=e.card)&&void 0!==e&&e.card_name?null===(n=o.memberDetail)||void 0===n||null===(n=n.card)||void 0===n?void 0:n.card_name:"-","/").concat((null===(i=o.memberDetail)||void 0===i||null===(i=i.grade)||void 0===i?void 0:i.name)||"-")),1)]})),_:1})]})),_:1}),et(p,{class:"ti-member-item"},{default:tt((function(){return[et(p,{class:"ti-member-head"},{default:tt((function(){return[lt(ct(dt(ft)("餘額")),1)]})),_:1}),et(p,{class:"ti-member-name text-ellipsis"},{default:tt((function(){var t;return[lt(ct(dt(Rt)(null===(t=o.memberDetail)||void 0===t?void 0:t.balance)||0),1)]})),_:1})]})),_:1}),et(p,{class:"ti-member-item"},{default:tt((function(){return[et(p,{class:"ti-member-head"},{default:tt((function(){return[lt(ct(dt(ft)("積分")),1)]})),_:1}),et(p,{class:"ti-member-name text-ellipsis"},{default:tt((function(){var t;return[lt(ct((null===(t=o.memberDetail)||void 0===t?void 0:t.points)||0),1)]})),_:1})]})),_:1})]})),_:1}),et(p,{class:"ti-member-discount"},{default:tt((function(){return[et(r,{class:"ti-discount-title"},{default:tt((function(){return[lt(ct(dt(ft)("會員折扣應收金額")),1)]})),_:1}),et(r,{class:"ti-discount-price"},{default:tt((function(){return[lt(ct(dt(Dt)(t.totalPayPrice)),1)]})),_:1}),et(r,{class:"ti-discount-subPrice"},{default:tt((function(){return[lt(ct(dt(kt)(t.totalPayPrice)),1)]})),_:1})]})),_:1})]})),_:1})):Et("",!0),et(fc,{show:v.value,"onUpdate:show":n[1]||(n[1]=function(t){return v.value=t}),onChange:E},null,8,["show"]),et(oc,{show:D.value,"onUpdate:show":n[2]||(n[2]=function(t){return D.value=t}),sendKitchen:k.value,code:C.value,msg:A.value},null,8,["show","sendKitchen","code","msg"]),et(hc,{show:u.value,"onUpdate:show":n[3]||(n[3]=function(t){return u.value=t}),payItem:s.value,onSuccess:P},null,8,["show","payItem"])]})),_:1})]})),footer:tt((function(){return["40"==b.value.pay_type?(Q(),X(p,{key:0,class:"keyboard-back"},{default:tt((function(){return[et(z,{isExit:!1,isPrimary:!1,isDoubleZero:!0,isCross:!1,isDrop:!0,onInput:d,onClear:f})]})),_:1})):Et("",!0),et(p,{class:"ti-dialog-btn"},{default:tt((function(){return[et(O,{onClick:n[4]||(n[4]=function(t){return a("update:show",!1)})},{default:tt((function(){return[lt(ct(dt(ft)("退出")),1)]})),_:1}),et(O,{loading:w.value,onClick:S},{default:tt((function(){return[lt(ct(dt(ft)("打印")),1)]})),_:1},8,["loading"]),et(O,{onClick:n[5]||(n[5]=function(t){return v.value=!0})},{default:tt((function(){return[lt(ct(dt(ft)("会员")),1)]})),_:1}),et(O,{loading:_.value,type:"primary",onClick:T},{default:tt((function(){return[lt(ct(dt(ft)("确定")),1)]})),_:1},8,["loading"])]})),_:1})]})),_:1},8,["show","title"])}}},mc=H(vc,[["__scopeId","data-v-ac245f17"]]),gc={__name:"pay-result",props:{show:{type:Boolean,default:!1},payResult:{type:Object,default:function(){}}},emits:["update:show","success"],setup:function(t,e){var n=e.emit,i=t,r=$(!1),a=function(){n("update:show",!1),n("success")},o=function(){var t=x(y().mark((function t(){var e,n,a;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={order_id:null===(e=i.payResult)||void 0===e?void 0:e.order_id},t.prev=1,r.value=!0,t.next=5,Rr(n);case 5:a=t.sent,uni.showToast({title:a.msg,icon:"none"}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),uni.showToast({title:t.t0.msg,icon:"none"});case 12:return t.prev=12,r.value=!1,t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[1,9,12,15]])})));return function(){return t.apply(this,arguments)}}(),u=function(){var t=x(y().mark((function t(){var e,n,a;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={order_id:null===(e=i.payResult)||void 0===e?void 0:e.order_id},t.prev=2,r.value=!0,t.next=6,qr(n);case 6:a=t.sent,uni.showToast({title:a.msg,icon:"none"}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),uni.showToast({title:t.t0.msg,icon:"none"});case 13:return t.prev=13,r.value=!1,t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[2,10,13,16]])})));return function(){return t.apply(this,arguments)}}();return function(e,n){var s=rt,l=Z(G("ti-button"),pt),c=Z(G("ti-modal"),st);return Q(),X(c,{class:"ti-action-tips-pay",show:i.show,confirmText:e.$t("已支付"),onCancel:a},{title:tt((function(){return[et(s)]})),content:tt((function(){return[et(s,{class:"ti-pay-container"},{default:tt((function(){return[et(s,{class:"ti-pay-title-box"},{default:tt((function(){return[et(s,{class:"ti-pay-title"},{default:tt((function(){return[lt(ct("收款"))]})),_:1})]})),_:1}),et(s,{class:"ti-pay-content"},{default:tt((function(){var n;return[et(s,{class:"ti-data-other-item"},{default:tt((function(){return[et(s,{class:"ti-data-other-item-title"},{default:tt((function(){return[lt(ct(e.$t("应收金额")),1)]})),_:1}),et(s,{class:"ti-data-other-item-content-box"},{default:tt((function(){return[et(s,{class:"ti-data-other-item-content"},{default:tt((function(){var e;return[lt(ct(dt(Dt)(null===(e=t.payResult)||void 0===e?void 0:e.pay_price)),1)]})),_:1}),et(s,{class:"ti-data-other-item-sub-content"},{default:tt((function(){var e;return[lt(ct(dt(kt)(null===(e=t.payResult)||void 0===e?void 0:e.pay_price)),1)]})),_:1})]})),_:1})]})),_:1}),et(s,{class:"ti-data-other-item"},{default:tt((function(){return[et(s,{class:"ti-data-other-item-title"},{default:tt((function(){return[lt(ct(e.$t("支付方式")),1)]})),_:1}),et(s,{class:"ti-data-other-item-content-box"},{default:tt((function(){return[et(s,{class:"ti-data-other-item-content"},{default:tt((function(){var e,n,i;return[lt(ct((null===(e=t.payResult)||void 0===e||null===(e=e.pay_type)||void 0===e?void 0:e.text.length)>10?(null===(n=t.payResult)||void 0===n||null===(n=n.pay_type)||void 0===n?void 0:n.text.slice(0,11))+"...":null===(i=t.payResult)||void 0===i||null===(i=i.pay_type)||void 0===i?void 0:i.text),1)]})),_:1})]})),_:1})]})),_:1}),et(s,{class:"ti-data-other-item"},{default:tt((function(){return[et(s,{class:"ti-data-other-item-title"},{default:tt((function(){return[lt(ct(e.$t("实收金额")),1)]})),_:1}),et(s,{class:"ti-data-other-item-content-box"},{default:tt((function(){return[et(s,{class:"ti-data-other-item-content"},{default:tt((function(){var e;return[lt(ct(dt(Dt)(null===(e=t.payResult)||void 0===e?void 0:e.actual_price)),1)]})),_:1}),et(s,{class:"ti-data-other-item-sub-content"},{default:tt((function(){var e;return[lt(ct(dt(kt)(null===(e=t.payResult)||void 0===e?void 0:e.actual_price)),1)]})),_:1})]})),_:1})]})),_:1}),40==(null===(n=t.payResult)||void 0===n||null===(n=n.pay_type)||void 0===n?void 0:n.value)?(Q(),X(s,{key:0,class:"ti-data-other-item"},{default:tt((function(){return[et(s,{class:"ti-data-other-item-title"},{default:tt((function(){return[lt(ct(e.$t("找零")),1)]})),_:1}),et(s,{class:"ti-data-other-item-content-box"},{default:tt((function(){return[et(s,{class:"ti-data-other-item-content"},{default:tt((function(){var e;return[lt(ct(dt(Dt)(null===(e=t.payResult)||void 0===e?void 0:e.change_due)),1)]})),_:1}),et(s,{class:"ti-data-other-item-sub-content"},{default:tt((function(){var e;return[lt(ct(dt(kt)(null===(e=t.payResult)||void 0===e?void 0:e.change_due)),1)]})),_:1})]})),_:1})]})),_:1})):Et("",!0)]})),_:1})]})),_:1})]})),footer:tt((function(){return[et(s,{class:"ti-dialog-btn"},{default:tt((function(){return[et(l,{onClick:a},{default:tt((function(){return[lt(ct(e.$t("退出")),1)]})),_:1}),et(l,{loading:r.value,onClick:o},{default:tt((function(){return[lt(ct(e.$t("打印小票")),1)]})),_:1},8,["loading"]),et(l,{loading:r.value,type:"primary",onClick:u},{default:tt((function(){return[lt(ct(e.$t("发票")),1)]})),_:1},8,["loading"])]})),_:1})]})),_:1},8,["show","confirmText"])}}},bc=H(gc,[["__scopeId","data-v-fe393606"]]),yc={__name:"time-meter",props:{tableDetail:{type:Object,default:function(){return{}}},buffetName:{type:String,default:""}},emits:["change","changeLock"],setup:function(t,e){var n=e.emit,i=t,r=Wt(Nl()),a=r.isBuffet,o=r.buffetTime,u=r.isUnlimitedTime,s=Wt(Jt()),l=s.buffetConfig,c=(s.cashier,$()),d=$(),f=$("00 ".concat(ft("分钟")," 00 ").concat(ft("秒"))),p=$("00 ".concat(ft("分钟")," 00 ").concat(ft("秒"))),h=$(!1),v=$(!1),g=$([]),b=$([]),_=yt((function(){return-1==u.value?"#100a05":"#e50028"})),w=function(t){return t<10?"0".concat(t):t},D=function(t){var e=Math.floor((t||0)/3600),n=Math.floor((t||0)/60)%60,i=Math.floor(t||0)%60,r="";return e>0&&(r+="".concat(w(e)," ").concat(ft("小时")," ")),r+="".concat(w(n)," ").concat(ft("分钟")," ").concat(w(i)," ").concat(ft("秒"))};at((function(){var t;return null===(t=i.tableDetail)||void 0===t?void 0:t.elapsed_time}),(function(){var t;0==a.value&&(d.value=null===(t=i.tableDetail)||void 0===t?void 0:t.elapsed_time,c.value&&clearInterval(c.value),d.value>0&&(c.value=setInterval((function(){d.value++,f.value=D(d.value)}),1e3)))}),{deep:!0}),at((function(){return u.value}),(function(){-1==u.value?p.value=ft("不限时"):p.value=D(o.value)}),{deep:!0,immediate:!0}),at((function(){return o.value}),(function(){if(1==a.value)if(o.value>0)p.value=D(o.value);else{if(-1==u.value)return;p.value="00 ".concat(ft("分钟")," 00 ").concat(ft("秒"))}})),Xt((function(){c.value&&clearInterval(c.value)}));var k=function(){var t=x(y().mark((function t(){var e,n;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(1!=(null===(e=i.tableDetail)||void 0===e?void 0:e.is_lock)){t.next=2;break}return t.abrupt("return",uni.showToast({title:ft("该订单已被锁定，请解锁后重新操作"),icon:"none"}));case 2:return t.prev=2,t.next=5,R("order.HallCart/delayList");case 5:n=t.sent,g.value=n.data||[],b.value=[],h.value=!0,t.next=13;break;case 11:t.prev=11,t.t0=t.catch(2);case 13:case"end":return t.stop()}}),t,null,[[2,11]])})));return function(){return t.apply(this,arguments)}}(),C=function(){var t=x(y().mark((function t(){var e;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(b.value.length<=0)){t.next=3;break}return uni.showToast({title:ft("请选择加钟"),icon:"none"}),t.abrupt("return");case 3:return v.value=!0,t.prev=4,t.next=7,i={table_id:he(),delay_ids:b.value},R("order.HallCart/addDelay",i);case 7:e=t.sent,uni.showToast({title:e.msg,icon:"none"}),h.value=!1,n("change",m({order_id:e.data.order_id},e.data.res)),t.next=15;break;case 13:t.prev=13,t.t0=t.catch(4);case 15:return t.prev=15,v.value=!1,t.finish(15);case 18:case"end":return t.stop()}var i}),t,null,[[4,13,15,18]])})));return function(){return t.apply(this,arguments)}}();return function(t,e){var n=rt,r=At,o=Z(G("uni-icons"),jt),s=Z(G("ti-empty-data"),xt),c=bt,d=Z(G("ti-button"),pt),m=Z(G("ti-modal"),st);return Q(),vt(mt,null,[et(n,{class:"ti-table-info"},{default:tt((function(){return[et(n,{class:"ti-table-noBuffet"},{default:tt((function(){return[et(n,{class:"ti-table-num"},{default:tt((function(){return[et(n,{class:"ti-table-name"},{default:tt((function(){var t;return[lt(ct("".concat((null===(t=i.tableDetail)||void 0===t?void 0:t.table_no)||"")),1)]})),_:1}),et(n,{class:"ti-table-name-p"},{default:tt((function(){var t;return[lt(ct("(".concat((null===(t=i.tableDetail)||void 0===t?void 0:t.meal_num)||0,")")),1)]})),_:1})]})),_:1}),0==dt(a)?(Q(),X(n,{key:0,class:"ti-table-time"},{default:tt((function(){return[lt(ct(dt(ft)("已就餐："))+ct(f.value),1)]})),_:1})):Et("",!0)]})),_:1}),1==dt(a)?(Q(),X(n,{key:0,class:"ti-table-buffet"},{default:tt((function(){return[et(n,{class:"ti-buffet-name"},{default:tt((function(){return[lt(ct(i.buffetName),1)]})),_:1}),et(n,{class:"ti-buffet-right"},{default:tt((function(){var t;return[et(n,{class:"ti-buffet-time"},{default:tt((function(){return[et(r,null,{default:tt((function(){return[lt(ct(dt(ft)("剩余时间：")),1)]})),_:1}),et(r,{class:"ti-buffet-countdown",style:nt({color:_.value})},{default:tt((function(){return[lt(ct(p.value),1)]})),_:1},8,["style"])]})),_:1}),1==(null===(t=dt(l))||void 0===t?void 0:t.is_add_clock)&&-1!=dt(u)?(Q(),X(n,{key:0,class:"ti-buffet-icon",onClick:k},{default:tt((function(){return[et(o,{"custom-prefix":"iconfont",type:"icon-add-circle",size:"20",color:"#100A05"})]})),_:1})):Et("",!0)]})),_:1})]})),_:1})):Et("",!0)]})),_:1}),et(m,{class:"ti-dialog-buffet",show:h.value,title:dt(ft)("加钟")},{content:tt((function(){return[et(n,{class:"ti-dialog-content"},{default:tt((function(){return[et(c,{class:"ti-buffet-scroll","scroll-y":""},{default:tt((function(){return[g.value&&g.value.length>0?(Q(),X(n,{key:0,class:"ti-buffet-list"},{default:tt((function(){return[(Q(!0),vt(mt,null,gt(g.value,(function(t){return Q(),X(n,{key:t.id,class:it(["ti-buffet-item",{active:b.value.includes(t.id)}]),onClick:function(e){return function(t){var e=b.value.indexOf(t.id);if(e>-1)b.value.splice(e,1);else{if(b.value.length>=2)return uni.showToast({title:zt("最多能选择{count}个加钟",{count:2}),icon:"none"});b.value.push(t.id)}}(t)}},{default:tt((function(){return[et(n,{class:"ti-buffet-name"},{default:tt((function(){return[lt(ct(t.name_text||t.name),1)]})),_:2},1024),et(n,null,{default:tt((function(){return[et(r,{class:"ti-buffet-price"},{default:tt((function(){return[lt(ct(dt(Dt)(t.price)),1)]})),_:2},1024),et(r,{class:"ti-buffet-subPrice"},{default:tt((function(){return[lt(ct(dt(kt)(t.price)),1)]})),_:2},1024)]})),_:2},1024)]})),_:2},1032,["class","onClick"])})),128))]})),_:1})):(Q(),X(s,{key:1}))]})),_:1})]})),_:1})]})),footer:tt((function(){return[et(n,{class:"ti-dialog-btn"},{default:tt((function(){return[et(d,{disabled:v.value,onClick:e[0]||(e[0]=function(t){return h.value=!1})},{default:tt((function(){return[lt(ct(dt(ft)("取消")),1)]})),_:1},8,["disabled"]),et(d,{loading:v.value,type:"primary",onClick:C},{default:tt((function(){return[lt(ct(dt(ft)("确定")),1)]})),_:1},8,["loading"])]})),_:1})]})),_:1},8,["show","title"])],64)}}},_c=H(yc,[["__scopeId","data-v-f66f5ee7"]]),xc=H({__name:"lock",emits:["unlock"],setup:function(t,e){var n=e.emit,i=function(){n("unlock")};return function(t,e){var n=Z(G("uni-icons"),jt),r=rt,a=Z(G("ti-button"),pt);return Q(),X(r,{class:"ti-lock-view"},{default:tt((function(){return[et(r,{class:"ti-lock-center"},{default:tt((function(){return[et(n,{"custom-prefix":"iconfont",type:"icon-lock",size:"36",color:"#FFFFFF"}),et(r,{class:"ti-lock-message"},{default:tt((function(){return[lt(ct(t.$t("核对单已打印，订单已锁定")),1)]})),_:1}),et(r,null,{default:tt((function(){return[et(a,{class:"ti-lock-unlock",type:"primary",title:t.$t("解锁"),onClick:i},null,8,["title"])]})),_:1})]})),_:1})]})),_:1})}}},[["__scopeId","data-v-ab340b23"]]),wc={__name:"cart-list",emits:["change","success","orderID"],setup:function(t,e){var n=this,i=e.expose,r=e.emit,a=ve(),o=Wt(Nl()),u=o.isBuffet,s=o.buffetTime,l=o.isUnlimitedTime,c=Wt(br()),f=c.tableIsLock,p=c.isPaying,h=Wt(Qt()).pathName,v=r,g=$(),b=$(!1),_=$(!1),w=$({}),D=$(0),k=$({}),C=$(),A=$(),E=$([]),F=$({table_no:"",meal_num:"",elapsed_time:""}),I=$({}),S=$(),T=$(0),P=$(""),B=$(!1),N=$([]),z=$([]),O=$({}),M=$([]),L=yt((function(){var t=[];return M.value.map((function(e){t.push(e.name_text||e.name)})),t.join("+")})),j=$([]),U=$({}),q=$(0),V=$(!1),K=$({}),H=function(){V.value=!1,p.value=0,null==a||a.clearTableGoodsData(),ot()},W=function(t,e){"handleSubmit"==e?(V.value=!0,K.value=t):st(t,e)},J=function(){var t=x(y().mark((function t(){var e;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(A.value&&!(A.value<=0)){t.next=2;break}return t.abrupt("return",uni.showToast({title:ft("订单ID不存在"),icon:"none"}));case 2:return t.prev=2,t.next=5,vr({order_id:A.value});case 5:e=t.sent,uni.showToast({title:e.msg,icon:"none"}),st(m({order_id:e.data.order_id},e.data.res)),t.next=12;break;case 10:t.prev=10,t.t0=t.catch(2);case 12:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(){return t.apply(this,arguments)}}(),Y=function(){var t=x(y().mark((function t(){var e,n;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={order_id:A.value},t.prev=1,t.next=4,gr(e);case 4:n=t.sent,T.value=null==n?void 0:n.code,null!=n&&n.data&&(null==n?void 0:n.data.length)>0?(N.value=null==n?void 0:n.data,P.value=null==n?void 0:n.msg,B.value=!0):b.value=!0,t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),T.value=null===t.t0||void 0===t.t0?void 0:t.t0.code,null!==t.t0&&void 0!==t.t0&&t.t0.data&&(null===t.t0||void 0===t.t0?void 0:t.t0.data.length)>0?(N.value=null===t.t0||void 0===t.t0?void 0:t.t0.data,P.value=null===t.t0||void 0===t.t0?void 0:t.t0.msg,B.value=!0):uni.showToast({title:null===t.t0||void 0===t.t0?void 0:t.t0.msg,icon:"none"});case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(){return t.apply(this,arguments)}}(),nt=function(){1==T.value&&(b.value=!0)},ot=function(){st({}),xe(),1!=p.value&&setTimeout((function(){ee(),v("change")}),100)},ut=function(){var t=x(y().mark((function t(e,n){var i,r,a;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(he()){t.next=3;break}return S.value&&clearTimeout(S.value),t.abrupt("return");case 3:return t.prev=3,e&&(_.value=!0),t.next=7,o={table_id:he()},R("order.HallCart/tableProductList",o,{isLoading:!1});case 7:if(a=t.sent,1!=p.value){t.next=10;break}return t.abrupt("return");case 10:st(m({order_id:null===(i=a.data)||void 0===i?void 0:i.order_id},null===(r=a.data)||void 0===r?void 0:r.allProductInfo),n),t.next=15;break;case 13:t.prev=13,t.t0=t.catch(3);case 15:return t.prev=15,e&&(_.value=!1),t.finish(15);case 18:case"end":return t.stop()}var o}),t,null,[[3,13,15,18]])})));return function(e,n){return t.apply(this,arguments)}}(),st=function(t,e){var n,i,r,a,o,c,p,m,b,y,_,x,T,P,B;if((null==t?void 0:t.order_id)<=0&&ot(),I.value={discount_ratio:null==t||null===(n=t.orderInfo)||void 0===n?void 0:n.discount_ratio},null!=(null==t?void 0:t.order_id)&&(A.value=null==t?void 0:t.order_id,v("orderID",A.value)),C.value=he(),F.value={table_no:null==t||null===(i=t.orderInfo)||void 0===i?void 0:i.table_no,meal_num:null==t||null===(r=t.orderInfo)||void 0===r?void 0:r.meal_num,elapsed_time:null==t||null===(a=t.orderInfo)||void 0===a?void 0:a.elapsed_time,is_buffet:(null==t||null===(o=t.orderInfo)||void 0===o?void 0:o.is_buffet)||0},f.value=(null==t||null===(c=t.orderInfo)||void 0===c?void 0:c.is_lock)||0,u.value=(null==t||null===(p=t.orderInfo)||void 0===p?void 0:p.is_buffet)||0,s.value=(null==t||null===(m=t.orderInfo)||void 0===m?void 0:m.buffet_remaining_time)||0,l.value=(null==t||null===(b=t.orderInfo)||void 0===b?void 0:b.buffet_expired_time)||0,k.value=(null==t?void 0:t.sumInfo)||{},E.value=(null==t||null===(y=t.orderInfo)||void 0===y?void 0:y.product)||[],z.value=(null==t||null===(_=t.orderInfo)||void 0===_?void 0:_.buffetCustomerType)||[],M.value=((null==t||null===(x=t.orderInfo)||void 0===x?void 0:x.buffet)||[]).map((function(e){var n;return e.total_num=(null==t||null===(n=t.orderInfo)||void 0===n?void 0:n.meal_num)||1,e})),j.value=((null==t||null===(T=t.orderInfo)||void 0===T?void 0:T.delay)||[]).map((function(e){var n;return e.total_num=(null==t||null===(n=t.orderInfo)||void 0===n?void 0:n.meal_num)||1,e})),g.value=null==t?void 0:t.userInfo,"delDelay"==e?U.value={}:"delBuffet"==e&&(O.value={}),null!==(P=U.value)&&void 0!==P&&P.id||null!==(B=O.value)&&void 0!==B&&B.id||!E.value||!(E.value.length>0))w.value={};else{var N,L=0;"delete"==e?L=D.value-1:"add"==e?L=E.value.length-1:null!==(N=w.value)&&void 0!==N&&N.order_product_id&&(L=E.value.findIndex((function(t){var e;return t.order_product_id==(null===(e=w.value)||void 0===e?void 0:e.order_product_id)}))),w.value=E.value[Math.max(L,0)],D.value=Math.max(L,0)}"desk"==h.value&&(ee(ne(k.value),ne(E.value),ne([].concat(d(z.value),d(j.value)))),S.value&&clearTimeout(S.value),S.value=setTimeout((function(){ut()}),6e3))};return l.value=0,ut(!0),Xt((function(){S.value&&clearTimeout(S.value)})),te("mini-cashier",(function(t){"desk"==t&&"desk"==h.value&&ee(ne(k.value),ne(E.value),ne([].concat(d(z.value),d(j.value))))})),at((function(){return E.value}),(function(t,e){t.length>e.length&&ie((function(){ae().in(n).select("#ti-table-cart-scroll").fields({size:!0,scrollOffset:!0},(function(t){q.value=t.scrollHeight-t.height})).exec()}))})),at((function(){return h.value}),(function(){"desk"==h.value&&he()?ut():S.value&&clearTimeout(S.value)}),{immediate:!0}),i({handleResultCart:st}),function(t,e){var n,i,r,a,o,u=rt,s=Z(G("ti-loading"),_t),l=At,c=Z(G("ti-empty-data"),xt),d=bt,p=Lt,h=Bt("permission");return Q(),vt(mt,null,[et(u,{class:"ti-cart-box"},{default:tt((function(){return[et(u,{class:"ti-cart-list"},{default:tt((function(){return[et(_c,{tableDetail:F.value,buffetName:L.value,onChangeLock:J,onChange:st},null,8,["tableDetail","buffetName"]),et(u,{class:"ti-cart-head"},{default:tt((function(){return[et(u,{class:"ti-cart-shop-head"},{default:tt((function(){return[et(u,{class:"ti-shop-head-title"},{default:tt((function(){return[lt(ct(dt(ft)("商品名稱")),1)]})),_:1}),et(u,{class:"ti-shop-head-money"},{default:tt((function(){return[lt(ct(dt(ft)("数量")),1)]})),_:1}),et(u,{class:"ti-shop-head-num"},{default:tt((function(){return[et(u),et(u,null,{default:tt((function(){return[lt(ct(dt(ft)("小计")),1)]})),_:1})]})),_:1})]})),_:1})]})),_:1}),et(u,{class:"ti-shop-list"},{default:tt((function(){return[et(d,{id:"ti-table-cart-scroll","scroll-y":"","enable-flex":"","scroll-with-animation":"","scroll-top":q.value},{default:tt((function(){return[_.value?(Q(),X(s,{key:0})):z.value&&z.value.length>0||j.value&&j.value.length>0||E.value&&E.value.length>0?(Q(),X(u,{key:1,class:"ti-shop-box"},{default:tt((function(){return[(Q(!0),vt(mt,null,gt(z.value,(function(t,e){return Q(),X(u,{key:e,class:it(["ti-shop-item",{active:O.value.id==t.id}]),onClick:function(e){return function(t){var e;U.value={},w.value={},(null===(e=O.value)||void 0===e?void 0:e.id)!=(null==t?void 0:t.id)&&(O.value=t)}(t)}},{default:tt((function(){return[et(u,{class:"ti-shop-item-box"},{default:tt((function(){return[et(u,{class:"ti-shop-body"},{default:tt((function(){return[et(u,{class:"ti-shop-body-top"},{default:tt((function(){return[et(u,{class:"ti-shop-title text-ellipsis"},{default:tt((function(){return[lt(ct(t.buffet_name_text||t.buffet_name),1)]})),_:2},1024)]})),_:2},1024),et(cc,{productItem:t,disabled:!0},null,8,["productItem"]),et(u,{class:"ti-shop-body-money"},{default:tt((function(){return[et(l,{class:"ti-shop-price"},{default:tt((function(){return[lt(ct(dt(Dt)((null==t?void 0:t.total_price)||0)),1)]})),_:2},1024),et(l,{class:"ti-shop-subPrice"},{default:tt((function(){return[lt(ct(dt(kt)((null==t?void 0:t.total_price)||0)),1)]})),_:2},1024)]})),_:2},1024)]})),_:2},1024),t.customer_type_name?(Q(),X(u,{key:0,class:"ti-shop-customer"},{default:tt((function(){return[lt("("+ct(t.customer_type_name_text||t.customer_type_name)+")",1)]})),_:2},1024)):Et("",!0)]})),_:2},1024)]})),_:2},1032,["class","onClick"])})),128)),(Q(!0),vt(mt,null,gt(j.value,(function(t,e){return Q(),X(u,{key:e,class:it(["ti-shop-item",{active:U.value.id==t.id}]),onClick:function(e){return function(t){var e;w.value={},O.value={},(null===(e=U.value)||void 0===e?void 0:e.id)!=(null==t?void 0:t.id)&&(U.value=t)}(t)}},{default:tt((function(){return[et(u,{class:"ti-shop-item-box"},{default:tt((function(){return[et(u,{class:"ti-shop-body"},{default:tt((function(){return[et(u,{class:"ti-shop-body-top"},{default:tt((function(){return[et(u,{class:"ti-shop-title text-ellipsis"},{default:tt((function(){return[lt(ct(t.name_text||t.name),1)]})),_:2},1024)]})),_:2},1024),et(cc,{productItem:t,disabled:!0},null,8,["productItem"]),et(u,{class:"ti-shop-body-money"},{default:tt((function(){return[et(l,{class:"ti-shop-price"},{default:tt((function(){return[lt(ct(dt(Dt)((null==t?void 0:t.total_price)||0)),1)]})),_:2},1024),et(l,{class:"ti-shop-subPrice"},{default:tt((function(){return[lt(ct(dt(kt)((null==t?void 0:t.total_price)||0)),1)]})),_:2},1024)]})),_:2},1024)]})),_:2},1024),t.remark?(Q(),X(u,{key:0,class:"ti-shop-remark"},{default:tt((function(){return[lt(ct(t.remark),1)]})),_:2},1024)):Et("",!0)]})),_:2},1024)]})),_:2},1032,["class","onClick"])})),128)),(Q(!0),vt(mt,null,gt(E.value,(function(t,e){var n;return Q(),X(u,{key:null==t?void 0:t.order_product_id,class:it([{active:(null===(n=w.value)||void 0===n?void 0:n.order_product_id)==(null==t?void 0:t.order_product_id)},"ti-shop-item"]),onClick:function(n){return function(t,e){var n;U.value={},O.value={},(null===(n=w.value)||void 0===n?void 0:n.order_product_id)!=(null==t?void 0:t.order_product_id)&&(w.value=t,D.value=e)}(t,e)}},{default:tt((function(){return[et(u,{class:"ti-shop-item-box"},{default:tt((function(){return[et(u,{class:"ti-shop-body"},{default:tt((function(){return[et(u,{class:"ti-shop-body-top"},{default:tt((function(){return[et(u,{class:"ti-shop-title text-ellipsis"},{default:tt((function(){return[lt(ct(t.product_name_text||t.product_name),1)]})),_:2},1024),t.product_attr?(Q(),X(u,{key:0,class:"ti-shop-spec"},{default:tt((function(){return[lt("( "+ct(t.product_attr)+" )",1)]})),_:2},1024)):Et("",!0)]})),_:2},1024),et(cc,{productItem:t,onChange:st},null,8,["productItem"]),et(u,{class:"ti-shop-body-money"},{default:tt((function(){return[et(l,{class:"ti-shop-price"},{default:tt((function(){return[lt(ct(dt(Dt)((null==t?void 0:t.total_product_price)||0)),1)]})),_:2},1024),et(l,{class:"ti-shop-subPrice"},{default:tt((function(){return[lt(ct(dt(kt)((null==t?void 0:t.total_product_price)||0)),1)]})),_:2},1024)]})),_:2},1024)]})),_:2},1024),t.remark?(Q(),X(u,{key:0,class:"ti-shop-remark"},{default:tt((function(){return[lt(ct(t.remark),1)]})),_:2},1024)):Et("",!0)]})),_:2},1024)]})),_:2},1032,["class","onClick"])})),128))]})),_:1})):(Q(),X(c,{key:2}))]})),_:1},8,["scroll-top"])]})),_:1}),1==dt(f)?(Q(),X(xc,{key:0,onUnlock:J})):Et("",!0)]})),_:1}),et(u,{class:"ti-cart-statistics"},{default:tt((function(){return[et(u,{class:"ti-cart-total"},{default:tt((function(){return[et(l,{class:"ti-total-text"},{default:tt((function(){return[lt(ct(dt(ft)("商品金额:")),1)]})),_:1}),et(l,{class:"ti-total-price"},{default:tt((function(){var t;return[lt(ct(dt(Dt)((null===(t=k.value)||void 0===t?void 0:t.subtotal)||0)),1)]})),_:1}),et(l,{class:"ti-total-subPrice"},{default:tt((function(){var t;return[lt(ct(dt(kt)((null===(t=k.value)||void 0===t?void 0:t.subtotal)||0)),1)]})),_:1})]})),_:1}),et(u,{class:"ti-cart-discount"},{default:tt((function(){return[et(u,{class:"ti-discount-item"},{default:tt((function(){return[et(u,null,{default:tt((function(){return[et(l,{class:"ti-discount-text"},{default:tt((function(){return[lt(ct(dt(ft)("服務費:")),1)]})),_:1}),et(l,{class:"ti-discount-price"},{default:tt((function(){var t;return[lt(ct(dt(Dt)((null===(t=k.value)||void 0===t?void 0:t.service_money)||0)),1)]})),_:1}),et(l,{class:"ti-discount-subPrice"},{default:tt((function(){var t;return[lt(ct(dt(kt)((null===(t=k.value)||void 0===t?void 0:t.service_money)||0)),1)]})),_:1})]})),_:1}),et(u,null,{default:tt((function(){var t;return[et(l,{class:"ti-discount-text"},{default:tt((function(){return[lt(ct(dt(ft)("優惠折扣:")),1)]})),_:1}),et(l,{class:"ti-discount-price"},{default:tt((function(){var t;return[lt(ct("-".concat(dt(Dt)((null===(t=k.value)||void 0===t?void 0:t.special_discount)||0))),1)]})),_:1}),dt(kt)((null===(t=k.value)||void 0===t?void 0:t.special_discount)||0)?(Q(),X(l,{key:0,class:"ti-discount-subPrice"},{default:tt((function(){var t;return[lt(ct("-".concat(dt(kt)((null===(t=k.value)||void 0===t?void 0:t.special_discount)||0))),1)]})),_:1})):Et("",!0)]})),_:1})]})),_:1}),et(u,{class:"ti-discount-item"},{default:tt((function(){return[et(u,null,{default:tt((function(){return[et(l,{class:"ti-discount-text"},{default:tt((function(){return[lt(ct(dt(ft)("消費稅:")),1)]})),_:1}),et(l,{class:"ti-discount-price"},{default:tt((function(){var t;return[lt(ct(dt(Dt)((null===(t=k.value)||void 0===t?void 0:t.total_consumption_tax_money)||0)),1)]})),_:1}),et(l,{class:"ti-discount-subPrice"},{default:tt((function(){var t;return[lt(ct(dt(kt)((null===(t=k.value)||void 0===t?void 0:t.total_consumption_tax_money)||0)),1)]})),_:1})]})),_:1}),et(u,null,{default:tt((function(){var t;return[et(l,{class:"ti-discount-text"},{default:tt((function(){return[lt(ct(dt(ft)("會員折扣:")),1)]})),_:1}),et(l,{class:"ti-discount-price"},{default:tt((function(){var t;return[lt(ct("-".concat(dt(Dt)((null===(t=k.value)||void 0===t?void 0:t.total_user_discount_money)||0))),1)]})),_:1}),dt(kt)((null===(t=k.value)||void 0===t?void 0:t.total_user_discount_money)||0)?(Q(),X(l,{key:0,class:"ti-discount-subPrice"},{default:tt((function(){var t;return[lt(ct("-".concat(dt(kt)((null===(t=k.value)||void 0===t?void 0:t.total_user_discount_money)||0))),1)]})),_:1})):Et("",!0)]})),_:1})]})),_:1})]})),_:1}),et(u,{class:"ti-cart-settlement"},{default:tt((function(){var t,e;return[et(u,{class:"ti-settlement-total"},{default:tt((function(){return[et(l,{class:"ti-settlement-text"},{default:tt((function(){return[lt(ct(dt(ft)("合计应收：")),1)]})),_:1}),et(l,{class:"ti-settlement-price"},{default:tt((function(){var t;return[lt(ct(dt(Dt)((null===(t=k.value)||void 0===t?void 0:t.total_pay_price)||0)),1)]})),_:1}),et(l,{class:"ti-settlement-subPrice"},{default:tt((function(){var t;return[lt(ct(dt(kt)((null===(t=k.value)||void 0===t?void 0:t.total_pay_price)||0)),1)]})),_:1})]})),_:1}),Nt((Q(),X(p,{class:"ti-settlement-btn",disabled:!(null!==(t=k.value)&&void 0!==t&&t.total_num)||(null===(e=k.value)||void 0===e?void 0:e.total_num)<=0,onClick:Y},{default:tt((function(){var t;return[et(l,null,{default:tt((function(){return[lt(ct(dt(ft)("結賬")),1)]})),_:1}),(null===(t=k.value)||void 0===t?void 0:t.total_num)>0?(Q(),X(l,{key:0,class:"ti-settlement-badge"},{default:tt((function(){var t;return[lt(ct(null===(t=k.value)||void 0===t?void 0:t.total_num),1)]})),_:1})):Et("",!0)]})),_:1},8,["disabled"])),[[h,["cashier_table_settle"]]])]})),_:1})]})),_:1})]})),_:1}),et(sc,{productItem:w.value,totalPayPrice:null===(n=k.value)||void 0===n?void 0:n.total_pay_price,tableNo:F.value.table_no,orderList:E.value,tableId:C.value,preferentialData:I.value,isLock:dt(f),orderBuffetId:null===(i=O.value)||void 0===i?void 0:i.id,orderDelayId:null===(r=U.value)||void 0===r?void 0:r.id,totalNum:null===(a=k.value)||void 0===a?void 0:a.total_num,buffetList:M.value,buffetCustomerType:z.value,onBackTable:ot,onSuccess:st},null,8,["productItem","totalPayPrice","tableNo","orderList","tableId","preferentialData","isLock","orderBuffetId","orderDelayId","totalNum","buffetList","buffetCustomerType"]),et(mc,{show:b.value,"onUpdate:show":e[0]||(e[0]=function(t){return b.value=t}),totalPayPrice:null===(o=k.value)||void 0===o?void 0:o.total_pay_price,orderId:A.value,memberDetail:g.value,onBackTable:ot,onSuccess:W},null,8,["show","totalPayPrice","orderId","memberDetail"]),et(bc,{show:V.value,"onUpdate:show":e[1]||(e[1]=function(t){return V.value=t}),payResult:K.value,onSuccess:H},null,8,["show","payResult"]),et(oc,{show:B.value,"onUpdate:show":e[2]||(e[2]=function(t){return B.value=t}),cancelShow:!0,sendKitchen:N.value,msg:P.value,onConfirm:nt},null,8,["show","sendKitchen","msg"])],64)}}},Dc=H(wc,[["__scopeId","data-v-96d7b9a7"]]),kc={__name:"dish-menu",props:{list:{type:Array,default:function(){return[]}},menuId:{type:Number,default:null},defaultIndex:{type:Number,default:0}},emits:["update:menuId"],setup:function(t,e){var n=this,i=e.emit,r=Wt(Qt()).pathName,a=i,o=t,u=$(0),s=$(o.defaultIndex),l=$([]),c=$(),d=function(){var t,e;if(o.list&&0!=o.list.length&&"desk"==r.value){var i=ae().in(n);null===(t=o.list)||void 0===t||t.map((function(t,e){i.select("#scroll-desk-".concat(e)).boundingClientRect((function(t){if(t){var n=l.value;n[e]=t.width+10,l.value=n}})).exec()})),f(s.value),null===(e=c.value)||void 0===e||e.getScrollWidth()}};at((function(){return r.value}),x(y().mark((function t(){return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ie();case 2:d();case 3:case"end":return t.stop()}}),t)}))),{deep:!0,immediate:!0}),at((function(){return o.list}),x(y().mark((function t(){return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ie();case 2:d();case 3:case"end":return t.stop()}}),t)}))),{deep:!0,immediate:!0});var f=function(t){s.value=t,u.value=l.value.slice(0,t+1).reduce((function(t,e){return t+e}),0)-(l.value[t]+100),a("update:menuId",o.list[t].category_id)};return function(t,e){var n=At,i=rt,r=Z(G("ti-category"),ea);return Q(),X(i,{class:"ti-dish-menu"},{default:tt((function(){return[o.list&&o.list.length>0?(Q(),X(r,{key:0,ref_key:"scrollRef",ref:c,scrollLeft:u.value},{default:tt((function(){return[et(i,{class:"ti-menu-content"},{default:tt((function(){return[(Q(!0),vt(mt,null,gt(o.list,(function(t,e){return Q(),X(i,{key:e,class:it(["ti-menu-item",{active:e==s.value}]),id:"scroll-desk-".concat(e),onClick:function(t){return f(e)}},{default:tt((function(){return[et(n,{class:"ti-menu-title"},{default:tt((function(){return[lt(ct(t.name[dt(Ft)()]||t.name_text),1)]})),_:2},1024)]})),_:2},1032,["id","class","onClick"])})),128))]})),_:1})]})),_:1},8,["scrollLeft"])):Et("",!0)]})),_:1})}}},Cc=H(kc,[["__scopeId","data-v-bc6a03c5"]]),Ac={__name:"dish-category",props:{categoryId:{type:Number,default:null}},emits:["update:categoryId","update:isSpecial"],setup:function(t,e){var n=e.emit,i=le(),r=Wt(i).categoryList,a=n,o=$(),u=$(0),s=$(0),l=yt((function(){var t=(r.value.find((function(t){return t.category_id==u.value}))||{}).child||[];return t&&t.length>0&&(t=[ce].concat(t)),t})),c=yt((function(){return r.value.find((function(t){return t.category_id==u.value}))})),d=yt((function(){return l.value.find((function(t){return t.category_id==s.value}))}));at((function(){return u.value}),(function(){var t,e;a("update:isSpecial",null===(t=c.value)||void 0===t?void 0:t.is_special),a("update:categoryId",u.value),l.value&&l.value.length>0&&(s.value=l.value[0].category_id,f(s.value)),null===(e=o.value)||void 0===e||e.getScrollWidth()}));var f=function(t){var e;s.value=t,a("update:isSpecial",null===(e=d.value)||void 0===e?void 0:e.is_special),a("update:categoryId",s.value>0?s.value:u.value)};return null==i||i.getCategory(),function(t,e){var n=rt,i=Z(G("ti-category"),ea);return Q(),X(n,{class:"ti-category-content"},{default:tt((function(){return[et(Cc,{list:dt(r),menuId:u.value,"onUpdate:menuId":e[0]||(e[0]=function(t){return u.value=t})},null,8,["list","menuId"]),l.value&&l.value.length>0?(Q(),X(n,{key:0,class:"ti-dish-secondary"},{default:tt((function(){return[et(i,{ref_key:"categoryRef",ref:o},{default:tt((function(){return[et(n,{class:"ti-secondary-box"},{default:tt((function(){return[(Q(!0),vt(mt,null,gt(l.value,(function(t,e){return Q(),X(n,{key:e,class:it([{active:t.category_id==s.value},"ti-secondary-item"]),onClick:function(e){return f(t.category_id)}},{default:tt((function(){return[lt(ct(t.name[dt(Ft)()]||t.name_text),1)]})),_:2},1032,["class","onClick"])})),128))]})),_:1})]})),_:1},512)]})),_:1})):Et("",!0)]})),_:1})}}},Ec=H(Ac,[["__scopeId","data-v-b5ee87b5"]]),Fc={__name:"goods-detail",props:{show:{type:Boolean,default:!1},goodsDetail:{type:Object,default:function(){return{}}}},emits:["update:show","success"],setup:function(t,e){var n=e.emit,i=t,r=$({}),a=$(!1),o=$({product_id:null,product_num:1,price:null,product_price:null,product_sku_id:null,attr:[],feed_uuids:[],bag_price:0,delivery:40,describe:null});at((function(){return i.show}),(function(){i.show&&u()}));var u=function(){var t,e,n,a,u,s,l,c,d;(r.value=i.goodsDetail,o.value.product_id=null===(t=r.value)||void 0===t?void 0:t.product_id,o.value.price=null===(e=r.value)||void 0===e?void 0:e.product_price,o.value.product_price=null===(n=r.value)||void 0===n?void 0:n.product_price,null!==(a=r.value)&&void 0!==a&&a.sku&&(null===(u=r.value)||void 0===u?void 0:u.sku.length)>0)&&(null===(c=r.value)||void 0===c||c.sku.some((function(t){if(t.stock_num>0)return o.value.product_sku_id=t.product_sku_id,!0})));null!==(s=r.value)&&void 0!==s&&s.product_attr&&(null===(l=r.value)||void 0===l?void 0:l.product_attr.length)>0&&(null===(d=r.value)||void 0===d||d.product_attr.map((function(t,e){null!=t&&t.attribute_value_text&&(null==t?void 0:t.attribute_value_text.length)>0?o.value.attr[e]=0:o.value.attr[e]=null})));o.value.feed_uuids&&o.value.feed_uuids.length>0&&(o.value.feed_uuids=[])},s=function(){var t=x(y().mark((function t(){var e,i,u,s,l,c,d;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a.value){t.next=2;break}return t.abrupt("return");case 2:return(u=m({},o.value)).attr=u.attr.join(","),s=[],o.value.product_sku_id&&null!==(e=r.value)&&void 0!==e&&e.sku&&(null===(i=r.value)||void 0===i?void 0:i.sku.length)>0&&(c=null===(l=r.value)||void 0===l?void 0:l.sku.find((function(t){return t.product_sku_id==o.value.product_sku_id})),u.price=(null==c?void 0:c.product_price)||0,s.push(null==c?void 0:c.spec_name)),o.value.attr&&o.value.attr.length>0&&o.value.attr.map((function(t,e){var n,i=null===(n=r.value)||void 0===n?void 0:n.product_attr[e];null!=i&&i.attribute_value&&i.attribute_value[t]&&s.push(i.attribute_value[t])})),o.value.feed_uuids&&o.value.feed_uuids.length>0&&o.value.feed_uuids.map((function(t){var e,n=((null===(e=r.value)||void 0===e?void 0:e.feed)||[]).find((function(e){return e.product_feed_id==t}));s.push(null==n?void 0:n.feed_name),u.price=kl(u.price,null==n?void 0:n.price)})),u.describe=s.join(";"),u.table_id=he(),u.is_buffet=r.value.is_buffet,t.prev=11,a.value=!0,t.next=15,Sl(u);case 15:if(d=t.sent,uni.showToast({title:d.msg,icon:"none"}),0!=d.code){t.next=19;break}return t.abrupt("return");case 19:n("update:show",!1),n("success",m({order_id:d.data.order_id},d.data.res),"add"),t.next=25;break;case 23:t.prev=23,t.t0=t.catch(11);case 25:return t.prev=25,a.value=!1,t.finish(25);case 28:case"end":return t.stop()}}),t,null,[[11,23,25,28]])})));return function(){return t.apply(this,arguments)}}(),l=function(t,e){return o.value.attr[t]==e};return function(t,e){var u=Z(G("ti-image"),fe),c=rt,d=At,f=bt,p=Z(G("ti-modal"),st);return Q(),X(p,{show:i.show,title:dt(ft)("商品详情"),class:"ti-goods-detail",confirmLoading:a.value,onCancel:e[0]||(e[0]=function(t){return n("update:show",!1)}),onConfirm:s},{content:tt((function(){return[et(c,{class:"ti-dialog-content"},{default:tt((function(){return[et(c,{class:"ti-detail-box"},{default:tt((function(){return[et(c,{class:"ti-detail-image"},{default:tt((function(){var t;return[et(u,{class:"ti-detail-image",src:dt($t)(null===(t=r.value)||void 0===t||null===(t=t.image[0])||void 0===t?void 0:t.file_path,107,80)||""},null,8,["src"])]})),_:1}),et(c,{class:"ti-detail-con"},{default:tt((function(){return[et(c,{class:"ti-detail-title text-ellipsis"},{default:tt((function(){var t,e;return[lt(ct((null===(t=r.value)||void 0===t?void 0:t.product_name[dt(Ft)()])||(null===(e=r.value)||void 0===e?void 0:e.product_name_text)),1)]})),_:1}),et(c,{class:"ti-price-box"},{default:tt((function(){return[et(d,{class:"ti-detail-unit"},{default:tt((function(){return[lt(ct(dt(ft)("單價：")),1)]})),_:1}),et(d,{class:"ti-detail-price"},{default:tt((function(){var t;return[lt(ct(dt(Dt)((null===(t=r.value)||void 0===t?void 0:t.product_price)||0)),1)]})),_:1}),et(d,{class:"ti-detail-subPrice"},{default:tt((function(){var t;return[lt(ct(dt(kt)((null===(t=r.value)||void 0===t?void 0:t.product_price)||0)),1)]})),_:1})]})),_:1}),et(c,{class:"ti-price-box"},{default:tt((function(){return[et(d,{class:"ti-detail-unit"},{default:tt((function(){return[lt(ct(dt(ft)("單位：")),1)]})),_:1}),et(d,{class:"ti-detail-price"},{default:tt((function(){var t,e;return[lt(ct((null===(t=r.value)||void 0===t?void 0:t.product_unit[dt(Ft)()])||(null===(e=r.value)||void 0===e?void 0:e.product_unit_text)),1)]})),_:1})]})),_:1})]})),_:1})]})),_:1}),et(c,{class:"ti-detail-specs"},{default:tt((function(){return[et(f,{"scroll-y":""},{default:tt((function(){return[et(c,{class:"ti-specs-box"},{default:tt((function(){var t,e,n,i,a,u,s;return[null!==(t=r.value)&&void 0!==t&&t.sku&&(null===(e=r.value)||void 0===e?void 0:e.sku.length)>0?(Q(),X(c,{key:0,class:"ti-specs-item"},{default:tt((function(){return[et(c,{class:"ti-specs-title"},{default:tt((function(){return[lt(ct(dt(ft)("規格")),1)]})),_:1}),et(c,{class:"ti-specs-child"},{default:tt((function(){var t;return[(Q(!0),vt(mt,null,gt(null===(t=r.value)||void 0===t?void 0:t.sku,(function(t){return Q(),X(c,{key:t.product_sku_id,class:it([{active:t.product_sku_id==o.value.product_sku_id,disabled:t.stock_num<=0},"ti-child-item"]),onClick:function(e){return function(t){t.stock_num<=0||o.value.product_sku_id!=t.product_sku_id&&(o.value.product_sku_id=t.product_sku_id)}(t)}},{default:tt((function(){return[et(d,{class:"ti-child-name"},{default:tt((function(){return[lt(ct(t.spec_name_i18n[dt(Ft)()]||t.spec_name_text),1)]})),_:2},1024),et(d,{class:"ti-child-price"},{default:tt((function(){return[lt(ct(dt(Dt)((null==t?void 0:t.product_price)||0,!0)),1)]})),_:2},1024),et(d,{class:"ti-child-subPrice"},{default:tt((function(){return[lt(ct(dt(kt)((null==t?void 0:t.product_price)||0,!0)),1)]})),_:2},1024)]})),_:2},1032,["class","onClick"])})),128))]})),_:1})]})),_:1})):Et("",!0),null!==(n=r.value)&&void 0!==n&&n.product_attr&&(null===(i=r.value)||void 0===i?void 0:i.product_attr.length)>0?(Q(!0),vt(mt,{key:1},gt(null===(a=r.value)||void 0===a?void 0:a.product_attr,(function(t,e){return Q(),X(c,{key:e,class:"ti-specs-item"},{default:tt((function(){return[et(c,{class:"ti-specs-title"},{default:tt((function(){return[lt(ct(t.attribute_name_i18n[dt(Ft)()]||t.attribute_name_text),1)]})),_:2},1024),et(c,{class:"ti-specs-child"},{default:tt((function(){return[(Q(!0),vt(mt,null,gt(null==t?void 0:t.attribute_value_i18n,(function(n,i){return Q(),X(c,{key:i,class:it([{active:l(e,i)},"ti-child-item"]),onClick:function(t){return function(t,e){o.value.attr[t]=e}(e,i)}},{default:tt((function(){return[et(d,{class:"ti-child-name"},{default:tt((function(){return[lt(ct(n[dt(Ft)()]||(null==t?void 0:t.attribute_value_text[i])),1)]})),_:2},1024)]})),_:2},1032,["class","onClick"])})),128))]})),_:2},1024)]})),_:2},1024)})),128)):Et("",!0),null!==(u=r.value)&&void 0!==u&&u.feed&&(null===(s=r.value)||void 0===s?void 0:s.feed.length)>0?(Q(),X(c,{key:2,class:"ti-specs-item"},{default:tt((function(){return[et(c,{class:"ti-specs-title"},{default:tt((function(){return[lt(ct(dt(ft)("加料")),1)]})),_:1}),et(c,{class:"ti-specs-child"},{default:tt((function(){var t;return[(Q(!0),vt(mt,null,gt(null===(t=r.value)||void 0===t?void 0:t.feed,(function(t){return Q(),X(c,{key:t.product_feed_id,class:it([{active:(o.value.feed_uuids||[]).indexOf(t.product_feed_id)>-1,disabled:t.stock_num<=0},"ti-child-item"]),onClick:function(e){return function(t){if(!(t.stock_num<=0)){var e=t.product_feed_id,n=o.value.feed_uuids.indexOf(e);n>=0?o.value.feed_uuids.splice(n,1):o.value.feed_uuids.push(e)}}(t)}},{default:tt((function(){return[et(d,{class:"ti-child-name"},{default:tt((function(){return[lt(ct(t.feed_name_i18n[dt(Ft)()]||t.feed_name_text),1)]})),_:2},1024),et(d,{class:"ti-child-price"},{default:tt((function(){return[lt(ct(dt(Dt)((null==t?void 0:t.price)||0,!0)),1)]})),_:2},1024),et(d,{class:"ti-child-subPrice"},{default:tt((function(){return[lt(ct(dt(kt)((null==t?void 0:t.price)||0,!0)),1)]})),_:2},1024)]})),_:2},1032,["class","onClick"])})),128))]})),_:1})]})),_:1})):Et("",!0)]})),_:1})]})),_:1})]})),_:1})]})),_:1})]})),_:1},8,["show","title","confirmLoading"])}}},Ic=H(Fc,[["__scopeId","data-v-c068da8e"]]),Sc={__name:"dish-list",props:{orderId:{type:[Number,String],default:""}},emits:["success"],setup:function(t,e){var n=e.emit,i=Wt(Qt()).pathName,r=le(),a=ve(),o=Jt(),u=Wt(o).buffetConfig,s=Wt(Nl()),l=s.isBuffet,c=s.buffetTime,d=s.isUnlimitedTime,f=Wt(br()).tableIsLock,p=n,h=t,v=$({category_id:null,page:1,list_rows:10}),g=$(0),b=$({}),_=$(!1),w=$(!1),D=$(),k=$([]),C=$(!1),A=$(!1),E=function(t,e,n){p("success",t,e,n)},F=function(){C.value&&(v.value.page++,P())},I=function(){var t=x(y().mark((function t(){var e,n;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(h.orderId<=0)){t.next=2;break}return t.abrupt("return",uni.showToast({title:ft("订单ID不存在"),icon:"none"}));case 2:return t.prev=2,t.next=5,vr({order_id:h.orderId});case 5:n=t.sent,uni.showToast({title:n.msg,icon:"none"}),f.value=(null===(e=n.data.res)||void 0===e||null===(e=e.orderInfo)||void 0===e?void 0:e.is_lock)||0,t.next=12;break;case 10:t.prev=10,t.t0=t.catch(2);case 12:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(){return t.apply(this,arguments)}}(),S=function(t){if(1==l.value&&-1!=d.value&&c.value<=0){var e;if(1==t.is_buffet)return!0;if(0==(null===(e=u.value)||void 0===e?void 0:e.is_buy_continue))return!0}return!1},T=function(){var t=x(y().mark((function t(e){var n,i,r,a;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(1!=f.value){t.next=2;break}return t.abrupt("return",uni.showToast({title:ft("订单已被锁定，请解锁后重新操作"),icon:"none"}));case 2:if(!(e.product_stock<=0)){t.next=4;break}return t.abrupt("return",uni.showToast({title:ft("已售罄"),icon:"none"}));case 4:if(1!=e.limit_num_status){t.next=6;break}return t.abrupt("return",uni.showToast({title:ft("已限购"),icon:"none"}));case 6:if(!S(e)){t.next=10;break}return b.value=e,_.value=!0,t.abrupt("return");case 10:if(!(null!=e&&e.sku&&(null==e?void 0:e.sku.length)<=1&&(null==e||!e.product_attr||(null==e?void 0:e.product_attr.length)<=0)&&(!e.feed||e.feed.length<=0))){t.next=18;break}return r={product_id:e.product_id,product_num:1,price:(null==e?void 0:e.product_price)||0,product_price:(null==e?void 0:e.product_price)||0,product_sku_id:null==e||null===(n=e.sku[0])||void 0===n?void 0:n.product_sku_id,attr:[],feed:[],bag_price:0,delivery:40,describe:null==e||null===(i=e.sku[0])||void 0===i?void 0:i.spec_name,is_buffet:null==e?void 0:e.is_buffet,table_id:he()},t.next=14,Sl(r);case 14:return a=t.sent,uni.showToast({title:a.msg,icon:"none"}),E(m({order_id:a.data.order_id},a.data.res),"add"),t.abrupt("return");case 18:D.value=e,w.value=!0;case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),P=function(){var t=x(y().mark((function t(){var e,n,i;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(e=m({},v.value)).category_id||(e.category_id="0"),1==g.value&&(e.is_special=1),t.prev=3,A.value=!0,t.next=7,null==a?void 0:a.getGoodsList(e);case 7:n=t.sent,i=a.getGoodsInfo((null==n?void 0:n.list)||[]),k.value=1==e.page?i:k.value.concat(i),C.value=(null==n?void 0:n.last_page)>(null==n?void 0:n.current_page),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(3),uni.showToast({title:t.t0.toString(),icon:"none"});case 16:return t.prev=16,A.value=!1,t.finish(16);case 19:case"end":return t.stop()}}),t,null,[[3,13,16,19]])})));return function(){return t.apply(this,arguments)}}(),B=function(){k.value=[],v.value.page=1,C.value=!1,P()};return te("langChange",(function(){null==r||r.getCategory()})),at((function(){return v.value.category_id}),(function(){B()})),at((function(){return i.value}),(function(){"desk"==i.value&&B()})),function(t,e){var n=Z(G("ti-loading"),_t),i=rt,r=Z(G("ti-image"),fe),a=At,o=Z(G("ti-empty-data"),xt),s=bt,l=Z(G("ti-modal"),st);return Q(),vt(mt,null,[et(i,{class:"ti-dish-box"},{default:tt((function(){return[et(Ec,{categoryId:v.value.category_id,"onUpdate:categoryId":e[0]||(e[0]=function(t){return v.value.category_id=t}),isSpecial:g.value,"onUpdate:isSpecial":e[1]||(e[1]=function(t){return g.value=t})},null,8,["categoryId","isSpecial"]),et(i,{class:"ti-dish-list"},{default:tt((function(){return[et(s,{class:"ti-scroll","scroll-y":"","lower-threshold":50,onScrolltolower:F},{default:tt((function(){return[A.value&&1==v.value.page?(Q(),X(n,{key:0})):k.value&&k.value.length>0?(Q(),vt(mt,{key:1},[et(i,{class:"ti-dish-goods"},{default:tt((function(){return[(Q(!0),vt(mt,null,gt(k.value,(function(t,e){return Q(),X(i,{key:e,class:"ti-goods-item",onClick:function(e){return T(t)}},{default:tt((function(){return[!t.product_stock||t.product_stock<=0?(Q(),X(i,{key:0,class:"ti-goods-sold-out"},{default:tt((function(){return[lt(ct(dt(ft)("已售罄")),1)]})),_:1})):1==t.limit_num_status?(Q(),X(i,{key:1,class:"ti-goods-sold-out"},{default:tt((function(){return[lt(ct(dt(ft)("已限购")),1)]})),_:1})):Et("",!0),et(i,{class:it(["ti-goods-box",{"ti-goods-disabled":t.product_stock<=0||1==t.limit_num_status}])},{default:tt((function(){return[1==(null==t?void 0:t.is_buffet)&&(null==t?void 0:t.buffet_limit_num)>0||0==(null==t?void 0:t.is_buffet)&&(null==t?void 0:t.limit_num)>0?(Q(),X(i,{key:0,class:"ti-goods-quota"},{default:tt((function(){return[lt(ct(dt(zt)("限購{count}份",{count:1==(null==t?void 0:t.is_buffet)?null==t?void 0:t.buffet_limit_num:(null==t?void 0:t.limit_num)||0})),1)]})),_:2},1024)):Et("",!0),et(i,{class:"ti-goods-image"},{default:tt((function(){var e;return[et(r,{src:dt($t)(null===(e=t.image[0])||void 0===e?void 0:e.file_path,147,110)||""},null,8,["src"])]})),_:2},1024),et(i,{class:"ti-goods-content"},{default:tt((function(){return[et(i,{class:"ti-goods-title line-clamp-2"},{default:tt((function(){return[lt(ct(t.product_name[dt(Ft)()]||t.product_name_text||"-"),1)]})),_:2},1024),et(i,{class:"ti-price-box"},{default:tt((function(){return[et(a,{class:"ti-goods-price"},{default:tt((function(){return[lt(ct(dt(Dt)((null==t?void 0:t.product_price)||0)),1)]})),_:2},1024),et(a,{class:"ti-goods-subPrice"},{default:tt((function(){return[lt(ct(dt(kt)((null==t?void 0:t.product_price)||0)),1)]})),_:2},1024)]})),_:2},1024)]})),_:2},1024)]})),_:2},1032,["class"])]})),_:2},1032,["onClick"])})),128))]})),_:1}),et(n,{status:C.value?"loading":"no-more"},null,8,["status"])],64)):(Q(),X(o,{key:2}))]})),_:1})]})),_:1}),1==dt(f)?(Q(),X(xc,{key:0,onUnlock:I})):Et("",!0)]})),_:1}),et(Ic,{show:w.value,"onUpdate:show":e[2]||(e[2]=function(t){return w.value=t}),goodsDetail:D.value,onSuccess:E},null,8,["show","goodsDetail"]),et(l,{class:"ti-action-tips",title:dt(ft)("溫馨提示"),show:_.value,isCancelShow:!1,onConfirm:e[3]||(e[3]=function(t){return _.value=!1})},{content:tt((function(){return[et(i,{class:"ti-dialog-content"},{default:tt((function(){var t,e;return[lt(ct(1==(null===(t=b.value)||void 0===t?void 0:t.is_buffet)&&1==(null===(e=dt(u))||void 0===e?void 0:e.is_buy_continue)?dt(ft)("自助餐时间已到达，自助餐商品不可继续下单"):dt(ft)("用餐时间已到，无法继续下单")),1)]})),_:1})]})),_:1},8,["title","show"])],64)}}},Tc=H(Sc,[["__scopeId","data-v-292aa93c"]]),Pc=H({__name:"index",emits:["change"],setup:function(t,e){var n=e.emit,i=le(),r=n,a=$(),o=$(),u=function(t,e,n){var i;null===(i=a.value)||void 0===i||i.handleResultCart(t,e,n)},s=function(t){o.value=t};return we((function(){De()})),te("langChange",(function(){null==i||i.getCategory()})),function(t,e){var n=rt;return Q(),X(n,{class:"ti-order-food"},{default:tt((function(){return[et(Dc,{ref_key:"cartRef",ref:a,onOrderID:s,onChange:e[0]||(e[0]=function(t){return r("change")})},null,512),et(Tc,{orderId:o.value,onSuccess:u},null,8,["orderId"])]})),_:1})}}},[["__scopeId","data-v-f1fb2d9e"]]),Bc={__name:"cancel-all",props:{show:{type:Boolean,default:!1},tableId:{type:[Number,String],default:null},list:{type:Array,default:function(){return[]}}},emits:["update:show","success"],setup:function(t,e){var n=e.emit,i=t,r=$(!1),a=function(){var t=x(y().mark((function t(){var e;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r.value){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,r.value=!0,t.next=6,a={table_id:i.tableId},R("order.HallCart/cancel",a);case 6:e=t.sent,n("update:show",!1),n("success"),setTimeout((function(){uni.showToast({title:e.msg,icon:"none"})}),100),t.next=14;break;case 12:t.prev=12,t.t0=t.catch(2);case 14:return t.prev=14,r.value=!1,t.finish(14);case 17:case"end":return t.stop()}var a}),t,null,[[2,12,14,17]])})));return function(){return t.apply(this,arguments)}}();return function(e,o){var u=rt,s=bt,l=Z(G("ti-modal"),st);return Q(),X(l,{class:"ti-action-tips",title:e.$t("溫馨提示"),show:i.show,confirmLoading:r.value,onCancel:o[0]||(o[0]=function(t){return n("update:show",!1)}),onConfirm:a},{content:tt((function(){return[et(u,{class:"ti-dialog-content"},{default:tt((function(){return[i.list&&t.list.length>0?(Q(),vt(mt,{key:0},[et(u,{class:"ti-cancel-title"},{default:tt((function(){return[lt(ct(e.$t("此單有商品已送廚，是否取消此筆交易？")),1)]})),_:1}),et(s,{"scroll-y":""},{default:tt((function(){return[et(u,{class:"ti-cancel-list"},{default:tt((function(){return[(Q(!0),vt(mt,null,gt(i.list,(function(t,e){return Q(),X(u,{key:e,class:"ti-cancel-item"},{default:tt((function(){return[lt(ct(null==t?void 0:t.product_name_text),1)]})),_:2},1024)})),128))]})),_:1})]})),_:1})],64)):(Q(),vt(mt,{key:1},[lt(ct(e.$t("是否取消此筆交易？")),1)],64))]})),_:1})]})),_:1},8,["title","show","confirmLoading"])}}},Nc=H(Bc,[["__scopeId","data-v-3f21f172"]]),zc={__name:"count-down",props:{time:{type:[Number,String],default:null},reverse:{type:Boolean,default:!1},unlimitedTime:{type:Number,default:0}},setup:function(t){var e=Wt(Jt()).cashier,n=t,i=$(),r=$(0),a=$("00:00"),o=yt((function(){return-1==n.unlimitedTime?"#100a05":n.reverse?r.value<600&&"1"==(null===(t=e.value)||void 0===t?void 0:t.is_remain_color)&&(null===(i=e.value)||void 0===i?void 0:i.remain_color.length)>0?e.value.remain_color[0]:r.value<1200&&"1"==(null===(a=e.value)||void 0===a?void 0:a.is_remain_color)&&(null===(o=e.value)||void 0===o?void 0:o.remain_color.length)>1?null===(u=e.value)||void 0===u?void 0:u.remain_color[1]:"#100a05":"#100a05";var t,i,a,o,u}));at((function(){return n.time}),(function(){i.value&&clearInterval(i.value),-1==n.unlimitedTime?a.value=ft("不限时"):n.time>0&&(r.value=n.time,i.value=setInterval((function(){if(n.reverse){if(0==r.value)return;r.value--}else r.value++;u(r.value)}),1e3))}),{immediate:!0}),Xt((function(){i.value&&clearInterval(i.value)}));var u=function(t){var e=Math.floor((t||0)/3600),n=Math.floor((t||0)/60)%60,i=Math.floor(t||0)%60,r="";e>0&&(r+="".concat(s(e),":")),r+="".concat(s(n),":").concat(s(i)),a.value=r},s=function(t){return t<10?"0".concat(t):t};return function(t,e){var n=rt;return Q(),X(n,{class:"ti-dining-info-text",style:nt({color:o.value})},{default:tt((function(){return[lt(ct(a.value),1)]})),_:1},8,["style"])}}},Oc=H(zc,[["__scopeId","data-v-dd41a47a"]]),Mc={__name:"index",emits:["change"],setup:function(t,e){var n=e.emit,i=Wt(Qt()).pathName,r=n,a=$({area_id:"",type_id:"",table_status:""}),o=$(!1),u=$(!1),s=$([]),l=$(),c=$(),d=$([]),f=$([]),p=yt((function(){return l.value-c.value})),h=$(),v=$(!1),m=$(),g=$([]),b=$(!1),_=$(),w=$(),D=Jt(),k=Wt(D).allPermission;at((function(){return a.value}),(function(){S(!0)}),{deep:!0});var C=function(){a.value.area_id="",a.value.type_id="",a.value.table_status=""},A=function(){var t=x(y().mark((function t(e){var n;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i=e.table_id,R("order.HallCart/getTableInfo",{table_id:i});case 3:if((n=t.sent).data.status!=e.status&&S(),30==n.data.status){t.next=13;break}if((k.value||[]).includes("cashier_table_open")){t.next=8;break}return t.abrupt("return",uni.showToast({title:ft("当前没有权限使用此功能"),icon:"none"}));case 8:w.value=e.table_no,_.value=e.table_id,b.value=!0,t.next=15;break;case 13:me(e.table_id),r("change");case 15:t.next=19;break;case 17:t.prev=17,t.t0=t.catch(0);case 19:case"end":return t.stop()}var i}),t,null,[[0,17]])})));return function(e){return t.apply(this,arguments)}}(),E=function(){var t=x(y().mark((function t(e){var n,i;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,R("order.HallCart/getSendKitchen",{table_id:e});case 3:i=t.sent,g.value=(null===(n=i.data)||void 0===n||null===(n=n.detail)||void 0===n?void 0:n.sendKitchenProduct)||[],v.value=!0,m.value=e,t.next=11;break;case 9:t.prev=9,t.t0=t.catch(0);case 11:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}(),F=$(),I=$(!1),S=function(){var t=x(y().mark((function t(e){var n,r,o,d;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!u.value){t.next=2;break}return t.abrupt("return",T());case 2:if(!I.value){t.next=4;break}return t.abrupt("return",T());case 4:if(ke()){t.next=6;break}return t.abrupt("return",T());case 6:return t.prev=6,e&&(u.value=!0),I.value=!0,t.next=11,Wl(a.value);case 11:d=t.sent,s.value=(null===(n=d.data)||void 0===n?void 0:n.list)||[],l.value=(null===(r=d.data)||void 0===r?void 0:r.total_num)||0,c.value=(null===(o=d.data)||void 0===o?void 0:o.available_num)||0,t.next=19;break;case 17:t.prev=17,t.t0=t.catch(6);case 19:return t.prev=19,e&&(u.value=!1),"desk"==i.value&&T(),t.finish(19);case 23:case"end":return t.stop()}}),t,null,[[6,17,19,23]])})));return function(e){return t.apply(this,arguments)}}(),T=function(){I.value=!1,clearTimeout(F.value),F.value=null,F.value=setTimeout((function(){S(!1)}),15e3)},P=function(){var t=x(y().mark((function t(){var e,n,i;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,R("store.table/tableType",void 0,{isLoading:!1});case 3:i=t.sent,d.value=(null===(e=i.data)||void 0===e?void 0:e.areaList)||[],f.value=(null===(n=i.data)||void 0===n?void 0:n.typeList)||[],ie((function(){var t;null===(t=h.value)||void 0===t||t.getScrollWidth()})),t.next=11;break;case 9:t.prev=9,t.t0=t.catch(0);case 11:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}();return te("tableRefresh",(function(){S(!0)})),Ce((function(){Ae("tableRefresh"),F.value&&clearTimeout(F.value)})),at((function(){return i.value}),(function(){"desk"==i.value?(P(),S(!0)):F.value&&clearTimeout(F.value)}),{immediate:!0}),function(t,e){var n=rt,i=Z(G("ti-category"),ea),y=Z(G("ti-loading"),_t),x=Z(G("uni-icons"),jt),D=At,k=Z(G("ti-empty-data"),xt),F=bt;return Q(),vt(mt,null,[et(n,{class:"ti-dining-box"},{default:tt((function(){return[et(n,{class:"ti-dining-category"},{default:tt((function(){return[et(i,{ref_key:"categoryRef",ref:h},{default:tt((function(){return[et(n,{class:"ti-category-list"},{default:tt((function(){return[et(n,{class:"ti-category-item"},{default:tt((function(){return[et(n,{class:it(["ti-category-all",{active:""==a.value.area_id}]),onClick:e[0]||(e[0]=function(t){return a.value.area_id=""}),onDblclick:C},{default:tt((function(){return[lt(ct(dt(ft)("全部")),1)]})),_:1},8,["class"]),et(n,{class:"ti-category-child"},{default:tt((function(){return[(Q(!0),vt(mt,null,gt(d.value,(function(t){return Q(),X(n,{key:t.area_id,class:it([{active:a.value.area_id==t.area_id,onlyOne:1==f.value.length},"ti-category-childItem"]),onClick:function(e){return a.value.area_id=t.area_id}},{default:tt((function(){return[lt(ct(t.area_name),1)]})),_:2},1032,["class","onClick"])})),128))]})),_:1})]})),_:1}),et(n,{class:"ti-category-item"},{default:tt((function(){return[et(n,{class:it(["ti-category-all",{active:""==a.value.type_id}]),onClick:e[1]||(e[1]=function(t){return a.value.type_id=""})},{default:tt((function(){return[lt(ct(dt(ft)("全部")),1)]})),_:1},8,["class"]),et(n,{class:"ti-category-child"},{default:tt((function(){return[(Q(!0),vt(mt,null,gt(f.value,(function(t){return Q(),X(n,{key:t.type_id,class:it([{active:a.value.type_id==t.type_id,onlyOne:1==f.value.length},"ti-category-childItem"]),onClick:function(e){return a.value.type_id=t.type_id}},{default:tt((function(){return[lt(ct(t.type_name),1)]})),_:2},1032,["class","onClick"])})),128))]})),_:1})]})),_:1}),et(n,{class:"ti-category-item"},{default:tt((function(){return[et(n,{class:it(["ti-category-all",{active:""==a.value.table_status}]),onClick:e[2]||(e[2]=function(t){return a.value.table_status=""})},{default:tt((function(){return[lt(ct(dt(ft)("全部")),1)]})),_:1},8,["class"]),et(n,{class:"ti-category-child"},{default:tt((function(){return[et(n,{class:it(["ti-category-childItem",{active:"10"==a.value.table_status}]),onClick:e[3]||(e[3]=function(t){return a.value.table_status="10"})},{default:tt((function(){return[lt(ct(dt(ft)("可用"))+" ("+ct(c.value||0)+") ",1)]})),_:1},8,["class"]),et(n,{class:it(["ti-category-childItem",{active:"30"==a.value.table_status}]),onClick:e[4]||(e[4]=function(t){return a.value.table_status="30"})},{default:tt((function(){return[lt(ct(dt(ft)("佔用"))+" ("+ct(p.value||0)+") ",1)]})),_:1},8,["class"])]})),_:1})]})),_:1})]})),_:1})]})),_:1},512)]})),_:1}),et(n,{class:"ti-dining-table"},{default:tt((function(){return[et(F,{class:"ti-scroll","scroll-y":""},{default:tt((function(){return[u.value?(Q(),X(y,{key:0})):s.value&&s.value.length>0?(Q(),vt(mt,{key:1},[et(n,{class:"ti-dining-list"},{default:tt((function(){return[(Q(!0),vt(mt,null,gt(s.value,(function(t){return Q(),X(n,{key:t.table_id,class:it([{green:30!=t.status},"ti-dining-item"]),onClick:function(e){return A(t)}},{default:tt((function(){return[et(n,{class:"ti-dining-number"},{default:tt((function(){return[lt(ct(t.table_no),1)]})),_:2},1024),30!=t.status?(Q(),X(n,{key:0,class:"ti-dining-idle"},{default:tt((function(){return[lt(ct(dt(ft)("空闲中")),1)]})),_:1})):(Q(),vt(mt,{key:1},[et(n,{class:"ti-dining-info"},{default:tt((function(){return[et(n,{class:"ti-dining-info-item"},{default:tt((function(){return[et(n,{class:"ti-dining-info-icon"},{default:tt((function(){return[et(x,{"custom-prefix":"iconfont",type:"icon-user",size:"18",color:"#100A05"})]})),_:1}),et(n,{class:"ti-dining-info-text"},{default:tt((function(){var e;return[lt(ct((null===(e=t.underwayOrder)||void 0===e?void 0:e.meal_num)||0),1)]})),_:2},1024)]})),_:2},1024),et(n,{class:"ti-dining-info-item"},{default:tt((function(){return[et(n,{class:"ti-dining-info-icon"},{default:tt((function(){return[et(x,{"custom-prefix":"iconfont",type:"icon-wallet",size:"18",color:"#100A05"})]})),_:1}),et(n,{class:"ti-dining-info-text"},{default:tt((function(){return[et(D,{class:"ti-dining-info-price"},{default:tt((function(){var e;return[lt(ct(dt(Dt)(null===(e=t.underwayOrder)||void 0===e?void 0:e.total_price)),1)]})),_:2},1024),et(D,{class:"ti-dining-info-subPrice"},{default:tt((function(){var e;return[lt(ct(dt(kt)(null===(e=t.underwayOrder)||void 0===e?void 0:e.total_price)),1)]})),_:2},1024)]})),_:2},1024)]})),_:2},1024),et(n,{class:"ti-dining-info-item"},{default:tt((function(){var e,i,r,a,o;return[et(n,{class:"ti-dining-info-icon"},{default:tt((function(){return[et(x,{"custom-prefix":"iconfont",type:"icon-clock",size:"18",color:"#100A05"})]})),_:1}),et(Oc,{time:1==(null===(e=t.underwayOrder)||void 0===e?void 0:e.is_buffet)?null===(i=t.underwayOrder)||void 0===i?void 0:i.buffet_remaining_time:null===(r=t.underwayOrder)||void 0===r?void 0:r.elapsed_time,reverse:1==(null===(a=t.underwayOrder)||void 0===a?void 0:a.is_buffet),unlimitedTime:null===(o=t.underwayOrder)||void 0===o?void 0:o.buffet_expired_time},null,8,["time","reverse","unlimitedTime"])]})),_:2},1024)]})),_:2},1024),et(n,{class:"ti-dining-close",onClick:Ut((function(e){return E(t.table_id)}),["stop"])},{default:tt((function(){return[et(x,{type:"closeempty",size:"14",color:"#fff"})]})),_:2},1032,["onClick"])],64))]})),_:2},1032,["class","onClick"])})),128))]})),_:1}),et(y,{status:o.value?"loading":"no-more"},null,8,["status"])],64)):(Q(),X(k,{key:2}))]})),_:1})]})),_:1}),et(n,{class:"ti-dining-total"},{default:tt((function(){return[et(n,{class:"ti-dining-total-box"},{default:tt((function(){return[et(n,{class:"ti-dining-total-item"},{default:tt((function(){return[lt(ct(dt(ft)("全部"))+" ("+ct(l.value)+")",1)]})),_:1}),et(n,{class:"ti-dining-total-item"},{default:tt((function(){return[et(n,{class:"ti-dining-total-color green"}),et(n,null,{default:tt((function(){return[lt(ct(dt(ft)("可用"))+" ("+ct(c.value||0)+")",1)]})),_:1})]})),_:1}),et(n,{class:"ti-dining-total-item"},{default:tt((function(){return[et(n,{class:"ti-dining-total-color orange"}),et(n,null,{default:tt((function(){return[lt(ct(dt(ft)("佔用"))+" ("+ct(p.value||0)+")",1)]})),_:1})]})),_:1})]})),_:1})]})),_:1})]})),_:1}),et(Nc,{show:v.value,"onUpdate:show":e[5]||(e[5]=function(t){return v.value=t}),tableId:m.value,list:g.value,onSuccess:e[6]||(e[6]=function(t){return S()})},null,8,["show","tableId","list"]),et(rc,{show:b.value,"onUpdate:show":e[7]||(e[7]=function(t){return b.value=t}),tableId:_.value,tableNo:w.value,onSuccess:e[8]||(e[8]=function(t){return r("change")})},null,8,["show","tableId","tableNo"])],64)}}},Lc=H(Mc,[["__scopeId","data-v-07a81ce5"]]),jc=H({__name:"index",setup:function(t){var e=$(),n=function(){e.value=!!he()};return te("reDesk",(function(){n()})),ue((function(){n()})),function(t,i){var r=rt;return Q(),X(r,{class:"ti-desk"},{default:tt((function(){return[e.value?(Q(),X(Pc,{key:0,onChange:n})):(Q(),X(Lc,{key:1,onChange:n}))]})),_:1})}}},[["__scopeId","data-v-c6ab73f1"]]),Uc={easycom:{autoscan:!0,custom:{"^u--(.*)":"uview-plus/components/u-$1/u-$1.vue","^up-(.*)":"uview-plus/components/u-$1/u-$1.vue","^u-([^-].*)":"uview-plus/components/u-$1/u-$1.vue","^uni-(.*)":"@dcloudio/uni-ui/lib/uni-$1/uni-$1.vue"}},pages:[{path:"pages/launch/index",style:{navigationBarTitleText:"JBCレジ",navigationStyle:"custom",statusBar:{style:"none"}}},{path:"pages/login/index",style:{navigationBarTitleText:"JBCレジ",navigationStyle:"custom",statusBar:{style:"none"}}},{path:"pages/lock/index",style:{navigationBarTitleText:"JBCレジ",navigationStyle:"custom",statusBar:{style:"none"}}},{path:"pages/index/index",style:{navigationBarTitleText:"JBCレジ",navigationStyle:"custom",statusBar:{style:"none"}}}],globalStyle:{navigationBarTextStyle:"black",navigationBarTitleText:"JBCレジ",navigationBarBackgroundColor:"#ffbe00",backgroundColor:"#ffbe00"},tabBar:{custom:!0,color:"#100a05",selectedColor:"#ffbe00",backgroundColor:"white",list:[{pagePath:"pages/index/index",iconPath:"",selectedIconPath:"",text:"首页"}]}};function Rc(t,e,n){return t(n={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&n.path)}},n.exports),n.exports}var qc=Rc((function(t,e){var n;t.exports=(n=n||function(t,e){var n=Object.create||function(){function t(){}return function(e){var n;return t.prototype=e,n=new t,t.prototype=null,n}}(),i={},r=i.lib={},a=r.Base={extend:function(t){var e=n(this);return t&&e.mixIn(t),e.hasOwnProperty("init")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},o=r.WordArray=a.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:4*t.length},toString:function(t){return(t||s).stringify(this)},concat:function(t){var e=this.words,n=t.words,i=this.sigBytes,r=t.sigBytes;if(this.clamp(),i%4)for(var a=0;a<r;a++){var o=n[a>>>2]>>>24-a%4*8&255;e[i+a>>>2]|=o<<24-(i+a)%4*8}else for(a=0;a<r;a+=4)e[i+a>>>2]=n[a>>>2];return this.sigBytes+=r,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-n%4*8,e.length=t.ceil(n/4)},clone:function(){var t=a.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var n,i=[],r=function(e){var n=987654321,i=4294967295;return function(){var r=((n=36969*(65535&n)+(n>>16)&i)<<16)+(e=18e3*(65535&e)+(e>>16)&i)&i;return r/=4294967296,(r+=.5)*(t.random()>.5?1:-1)}},a=0;a<e;a+=4){var u=r(4294967296*(n||t.random()));n=987654071*u(),i.push(4294967296*u()|0)}return new o.init(i,e)}}),u=i.enc={},s=u.Hex={stringify:function(t){for(var e=t.words,n=t.sigBytes,i=[],r=0;r<n;r++){var a=e[r>>>2]>>>24-r%4*8&255;i.push((a>>>4).toString(16)),i.push((15&a).toString(16))}return i.join("")},parse:function(t){for(var e=t.length,n=[],i=0;i<e;i+=2)n[i>>>3]|=parseInt(t.substr(i,2),16)<<24-i%8*4;return new o.init(n,e/2)}},l=u.Latin1={stringify:function(t){for(var e=t.words,n=t.sigBytes,i=[],r=0;r<n;r++){var a=e[r>>>2]>>>24-r%4*8&255;i.push(String.fromCharCode(a))}return i.join("")},parse:function(t){for(var e=t.length,n=[],i=0;i<e;i++)n[i>>>2]|=(255&t.charCodeAt(i))<<24-i%4*8;return new o.init(n,e)}},c=u.Utf8={stringify:function(t){try{return decodeURIComponent(escape(l.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return l.parse(unescape(encodeURIComponent(t)))}},d=r.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=c.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n=this._data,i=n.words,r=n.sigBytes,a=this.blockSize,u=r/(4*a),s=(u=e?t.ceil(u):t.max((0|u)-this._minBufferSize,0))*a,l=t.min(4*s,r);if(s){for(var c=0;c<s;c+=a)this._doProcessBlock(i,c);var d=i.splice(0,s);n.sigBytes-=l}return new o.init(d,l)},clone:function(){var t=a.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0});r.Hasher=d.extend({cfg:a.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new f.HMAC.init(t,n).finalize(e)}}});var f=i.algo={};return i}(Math),n)})),Vc=qc,$c=(Rc((function(t,e){var n;t.exports=(n=Vc,function(t){var e=n,i=e.lib,r=i.WordArray,a=i.Hasher,o=e.algo,u=[];!function(){for(var e=0;e<64;e++)u[e]=4294967296*t.abs(t.sin(e+1))|0}();var s=o.MD5=a.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,e){for(var n=0;n<16;n++){var i=e+n,r=t[i];t[i]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8)}var a=this._hash.words,o=t[e+0],s=t[e+1],p=t[e+2],h=t[e+3],v=t[e+4],m=t[e+5],g=t[e+6],b=t[e+7],y=t[e+8],_=t[e+9],x=t[e+10],w=t[e+11],D=t[e+12],k=t[e+13],C=t[e+14],A=t[e+15],E=a[0],F=a[1],I=a[2],S=a[3];E=l(E,F,I,S,o,7,u[0]),S=l(S,E,F,I,s,12,u[1]),I=l(I,S,E,F,p,17,u[2]),F=l(F,I,S,E,h,22,u[3]),E=l(E,F,I,S,v,7,u[4]),S=l(S,E,F,I,m,12,u[5]),I=l(I,S,E,F,g,17,u[6]),F=l(F,I,S,E,b,22,u[7]),E=l(E,F,I,S,y,7,u[8]),S=l(S,E,F,I,_,12,u[9]),I=l(I,S,E,F,x,17,u[10]),F=l(F,I,S,E,w,22,u[11]),E=l(E,F,I,S,D,7,u[12]),S=l(S,E,F,I,k,12,u[13]),I=l(I,S,E,F,C,17,u[14]),E=c(E,F=l(F,I,S,E,A,22,u[15]),I,S,s,5,u[16]),S=c(S,E,F,I,g,9,u[17]),I=c(I,S,E,F,w,14,u[18]),F=c(F,I,S,E,o,20,u[19]),E=c(E,F,I,S,m,5,u[20]),S=c(S,E,F,I,x,9,u[21]),I=c(I,S,E,F,A,14,u[22]),F=c(F,I,S,E,v,20,u[23]),E=c(E,F,I,S,_,5,u[24]),S=c(S,E,F,I,C,9,u[25]),I=c(I,S,E,F,h,14,u[26]),F=c(F,I,S,E,y,20,u[27]),E=c(E,F,I,S,k,5,u[28]),S=c(S,E,F,I,p,9,u[29]),I=c(I,S,E,F,b,14,u[30]),E=d(E,F=c(F,I,S,E,D,20,u[31]),I,S,m,4,u[32]),S=d(S,E,F,I,y,11,u[33]),I=d(I,S,E,F,w,16,u[34]),F=d(F,I,S,E,C,23,u[35]),E=d(E,F,I,S,s,4,u[36]),S=d(S,E,F,I,v,11,u[37]),I=d(I,S,E,F,b,16,u[38]),F=d(F,I,S,E,x,23,u[39]),E=d(E,F,I,S,k,4,u[40]),S=d(S,E,F,I,o,11,u[41]),I=d(I,S,E,F,h,16,u[42]),F=d(F,I,S,E,g,23,u[43]),E=d(E,F,I,S,_,4,u[44]),S=d(S,E,F,I,D,11,u[45]),I=d(I,S,E,F,A,16,u[46]),E=f(E,F=d(F,I,S,E,p,23,u[47]),I,S,o,6,u[48]),S=f(S,E,F,I,b,10,u[49]),I=f(I,S,E,F,C,15,u[50]),F=f(F,I,S,E,m,21,u[51]),E=f(E,F,I,S,D,6,u[52]),S=f(S,E,F,I,h,10,u[53]),I=f(I,S,E,F,x,15,u[54]),F=f(F,I,S,E,s,21,u[55]),E=f(E,F,I,S,y,6,u[56]),S=f(S,E,F,I,A,10,u[57]),I=f(I,S,E,F,g,15,u[58]),F=f(F,I,S,E,k,21,u[59]),E=f(E,F,I,S,v,6,u[60]),S=f(S,E,F,I,w,10,u[61]),I=f(I,S,E,F,p,15,u[62]),F=f(F,I,S,E,_,21,u[63]),a[0]=a[0]+E|0,a[1]=a[1]+F|0,a[2]=a[2]+I|0,a[3]=a[3]+S|0},_doFinalize:function(){var e=this._data,n=e.words,i=8*this._nDataBytes,r=8*e.sigBytes;n[r>>>5]|=128<<24-r%32;var a=t.floor(i/4294967296),o=i;n[15+(r+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),n[14+(r+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),e.sigBytes=4*(n.length+1),this._process();for(var u=this._hash,s=u.words,l=0;l<4;l++){var c=s[l];s[l]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)}return u},clone:function(){var t=a.clone.call(this);return t._hash=this._hash.clone(),t}});function l(t,e,n,i,r,a,o){var u=t+(e&n|~e&i)+r+o;return(u<<a|u>>>32-a)+e}function c(t,e,n,i,r,a,o){var u=t+(e&i|n&~i)+r+o;return(u<<a|u>>>32-a)+e}function d(t,e,n,i,r,a,o){var u=t+(e^n^i)+r+o;return(u<<a|u>>>32-a)+e}function f(t,e,n,i,r,a,o){var u=t+(n^(e|~i))+r+o;return(u<<a|u>>>32-a)+e}e.MD5=a._createHelper(s),e.HmacMD5=a._createHmacHelper(s)}(Math),n.MD5)})),Rc((function(t,e){var n;t.exports=(n=Vc,void function(){var t=n,e=t.lib.Base,i=t.enc.Utf8;t.algo.HMAC=e.extend({init:function(t,e){t=this._hasher=new t.init,"string"==typeof e&&(e=i.parse(e));var n=t.blockSize,r=4*n;e.sigBytes>r&&(e=t.finalize(e)),e.clamp();for(var a=this._oKey=e.clone(),o=this._iKey=e.clone(),u=a.words,s=o.words,l=0;l<n;l++)u[l]^=1549556828,s[l]^=909522486;a.sigBytes=o.sigBytes=r,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher,n=e.finalize(t);return e.reset(),e.finalize(this._oKey.clone().concat(n))}})}())})),Rc((function(t,e){t.exports=Vc.HmacMD5}))),Kc=Rc((function(t,e){t.exports=Vc.enc.Utf8})),Hc=Rc((function(t,e){var n;t.exports=(n=Vc,function(){var t=n,e=t.lib.WordArray;function i(t,n,i){for(var r=[],a=0,o=0;o<n;o++)if(o%4){var u=i[t.charCodeAt(o-1)]<<o%4*2,s=i[t.charCodeAt(o)]>>>6-o%4*2;r[a>>>2]|=(u|s)<<24-a%4*8,a++}return e.create(r,a)}t.enc.Base64={stringify:function(t){var e=t.words,n=t.sigBytes,i=this._map;t.clamp();for(var r=[],a=0;a<n;a+=3)for(var o=(e[a>>>2]>>>24-a%4*8&255)<<16|(e[a+1>>>2]>>>24-(a+1)%4*8&255)<<8|e[a+2>>>2]>>>24-(a+2)%4*8&255,u=0;u<4&&a+.75*u<n;u++)r.push(i.charAt(o>>>6*(3-u)&63));var s=i.charAt(64);if(s)for(;r.length%4;)r.push(s);return r.join("")},parse:function(t){var e=t.length,n=this._map,r=this._reverseMap;if(!r){r=this._reverseMap=[];for(var a=0;a<n.length;a++)r[n.charCodeAt(a)]=a}var o=n.charAt(64);if(o){var u=t.indexOf(o);-1!==u&&(e=u)}return i(t,e,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),n.enc.Base64)})),Wc="FUNCTION",Jc="pending",Zc="rejected";function Yc(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}function Gc(t){return"object"===Yc(t)}function Qc(t){return"function"==typeof t}function Xc(t){return function(){try{return t.apply(t,arguments)}catch(t){}}}var td="REJECTED",ed="NOT_PENDING",nd=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.createPromise,i=e.retryRule,r=void 0===i?td:i;s(this,t),this.createPromise=n,this.status=null,this.promise=null,this.retryRule=r}return c(t,[{key:"needRetry",get:function(){if(!this.status)return!0;switch(this.retryRule){case td:return this.status===Zc;case ed:return this.status!==Jc}}},{key:"exec",value:function(){var t=this;return this.needRetry?(this.status=Jc,this.promise=this.createPromise().then((function(e){return t.status="fulfilled",Promise.resolve(e)}),(function(e){return t.status=Zc,Promise.reject(e)})),this.promise):this.promise}}]),t}();function id(t){return t&&"string"==typeof t?JSON.parse(t):t}var rd=id([]),ad="web";id("");var od=id("[]")||[];try{"__UNI__7D5B57D"}catch(Uc){}var ud={};function sd(t){var e,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=ud,n=t,Object.prototype.hasOwnProperty.call(e,n)||(ud[t]=i),ud[t]}var ld=["invoke","success","fail","complete"],cd=sd("_globalUniCloudInterceptor");function dd(t,e){cd[t]||(cd[t]={}),Gc(e)&&Object.keys(e).forEach((function(n){ld.indexOf(n)>-1&&function(t,e,n){var i=cd[t][e];i||(i=cd[t][e]=[]),-1===i.indexOf(n)&&Qc(n)&&i.push(n)}(t,n,e[n])}))}function fd(t,e){cd[t]||(cd[t]={}),Gc(e)?Object.keys(e).forEach((function(n){ld.indexOf(n)>-1&&function(t,e,n){var i=cd[t][e];if(i){var r=i.indexOf(n);r>-1&&i.splice(r,1)}}(t,n,e[n])})):delete cd[t]}function pd(t,e){return t&&0!==t.length?t.reduce((function(t,n){return t.then((function(){return n(e)}))}),Promise.resolve()):Promise.resolve()}function hd(t,e){return cd[t]&&cd[t][e]||[]}function vd(t){dd("callObject",t)}var md=sd("_globalUniCloudListener"),gd="response",bd="needLogin",yd="refreshToken",_d="clientdb",xd="cloudfunction",wd="cloudobject";function Dd(t){return md[t]||(md[t]=[]),md[t]}function kd(t,e){var n=Dd(t);n.includes(e)||n.push(e)}function Cd(t,e){var n=Dd(t),i=n.indexOf(e);-1!==i&&n.splice(i,1)}function Ad(t,e){for(var n=Dd(t),i=0;i<n.length;i++)(0,n[i])(e)}var Ed,Fd=!1;function Id(){return Ed||(Ed=new Promise((function(t){Fd&&t(),function e(){if("function"==typeof Ie){var n=Ie();n&&n[0]&&(Fd=!0,t())}Fd||setTimeout((function(){e()}),30)}()})),Ed)}function Sd(t){var e={};for(var n in t){var i=t[n];Qc(i)&&(e[n]=Xc(i))}return e}var Td,Pd,Bd=function(t){function n(t){var i;return s(this,n),(i=e(this,n,[t.message])).errMsg=t.message||t.errMsg||"unknown system error",i.code=i.errCode=t.code||t.errCode||"SYSTEM_ERROR",i.errSubject=i.subject=t.subject||t.errSubject,i.cause=t.cause,i.requestId=t.requestId,i}return i(n,t),c(n,[{key:"toJson",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!(t>=10))return t++,{errCode:this.errCode,errMsg:this.errMsg,errSubject:this.errSubject,cause:this.cause&&this.cause.toJson?this.cause.toJson(t):this.cause}}}]),n}(r(Error)),Nd={request:function(t){return Me(t)},uploadFile:function(t){return Le(t)},setStorageSync:function(t,e){return je(t,e)},getStorageSync:function(t){return Ue(t)},removeStorageSync:function(t){return Re(t)},clearStorageSync:function(){return qe()}};function zd(t){return t&&zd(t.__v_raw)||t}function Od(){return{token:Nd.getStorageSync("uni_id_token")||Nd.getStorageSync("uniIdToken"),tokenExpired:Nd.getStorageSync("uni_id_token_expired")}}function Md(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.token,n=t.tokenExpired;e&&Nd.setStorageSync("uni_id_token",e),n&&Nd.setStorageSync("uni_id_token_expired",n)}function Ld(){return Td||(Td=_e()),Td}function jd(){var t=Ze&&Ze()||"en";if(Pd)return m(m({},Pd),{},{locale:t,LOCALE:t});for(var e=Ld(),n=e.deviceId,i=e.osName,r=e.uniPlatform,a=e.appId,o=["pixelRatio","brand","model","system","language","version","platform","host","SDKVersion","swanNativeVersion","app","AppPlatform","fontSizeSetting"],u=0;u<o.length;u++)delete e[o[u]];return Pd=m(m({PLATFORM:r,OS:i,APPID:a,DEVICEID:n},function(){var t,e;try{if(Ye){if(Ye.toString().indexOf("not yet implemented")>-1)return;var n=Ye(),i=n.scene;t=n.channel,e=i}}catch(t){}return{channel:t,scene:e}}()),e),m(m({},Pd),{},{locale:t,LOCALE:t})}var Ud,Rd=function(t,e){var n="";return Object.keys(t).sort().forEach((function(e){t[e]&&(n=n+"&"+e+"="+t[e])})),n=n.slice(1),$c(n,e).toString()},qd=function(t,e){return new Promise((function(n,i){e(Object.assign(t,{complete:function(t){t||(t={});var e=t.data&&t.data.header&&t.data.header["x-serverless-request-id"]||t.header&&t.header["request-id"];if(!t.statusCode||t.statusCode>=400)return i(new Bd({code:"SYS_ERR",message:t.errMsg||"request:fail",requestId:e}));var r=t.data;if(r.error)return i(new Bd({code:r.error.code,message:r.error.message,requestId:e}));r.result=r.data,r.requestId=e,delete r.data,n(r)}}))}))},Vd=function(t){return Hc.stringify(Kc.parse(t))},$d=function(){function t(e){var n=this;s(this,t),["spaceId","clientSecret"].forEach((function(t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new Error("".concat(t," required"))})),this.config=Object.assign({},{endpoint:0===e.spaceId.indexOf("mp-")?"https://api.next.bspapp.com":"https://api.bspapp.com"},e),this.config.provider="aliyun",this.config.requestUrl=this.config.endpoint+"/client",this.config.envType=this.config.envType||"public",this.config.accessTokenKey="access_token_"+this.config.spaceId,this.adapter=Nd,this._getAccessTokenPromiseHub=new nd({createPromise:function(){return n.requestAuth(n.setupRequest({method:"serverless.auth.user.anonymousAuthorize",params:"{}"},"auth")).then((function(t){if(!t.result||!t.result.accessToken)throw new Bd({code:"AUTH_FAILED",message:"获取accessToken失败"});n.setAccessToken(t.result.accessToken)}))},retryRule:ed})}var e,n,i;return c(t,[{key:"hasAccessToken",get:function(){return!!this.accessToken}},{key:"setAccessToken",value:function(t){this.accessToken=t}},{key:"requestWrapped",value:function(t){return qd(t,this.adapter.request)}},{key:"requestAuth",value:function(t){return this.requestWrapped(t)}},{key:"request",value:function(t,e){var n=this;return Promise.resolve().then((function(){return n.hasAccessToken?e?n.requestWrapped(t):n.requestWrapped(t).catch((function(e){return new Promise((function(t,n){!e||"GATEWAY_INVALID_TOKEN"!==e.code&&"InvalidParameter.InvalidToken"!==e.code?n(e):t()})).then((function(){return n.getAccessToken()})).then((function(){var e=n.rebuildRequest(t);return n.request(e,!0)}))})):n.getAccessToken().then((function(){var e=n.rebuildRequest(t);return n.request(e,!0)}))}))}},{key:"rebuildRequest",value:function(t){var e=Object.assign({},t);return e.data.token=this.accessToken,e.header["x-basement-token"]=this.accessToken,e.header["x-serverless-sign"]=Rd(e.data,this.config.clientSecret),e}},{key:"setupRequest",value:function(t,e){var n=Object.assign({},t,{spaceId:this.config.spaceId,timestamp:Date.now()}),i={"Content-Type":"application/json"};return"auth"!==e&&(n.token=this.accessToken,i["x-basement-token"]=this.accessToken),i["x-serverless-sign"]=Rd(n,this.config.clientSecret),{url:this.config.requestUrl,method:"POST",data:n,dataType:"json",header:i}}},{key:"getAccessToken",value:function(){return this._getAccessTokenPromiseHub.exec()}},{key:"authorize",value:(i=x(y().mark((function t(){return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getAccessToken();case 2:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"callFunction",value:function(t){var e={method:"serverless.function.runtime.invoke",params:JSON.stringify({functionTarget:t.name,functionArgs:t.data||{}})};return this.request(this.setupRequest(e))}},{key:"getOSSUploadOptionsFromPath",value:function(t){var e={method:"serverless.file.resource.generateProximalSign",params:JSON.stringify(t)};return this.request(this.setupRequest(e))}},{key:"uploadFileToOSS",value:function(t){var e=this,n=t.url,i=t.formData,r=t.name,a=t.filePath,o=t.fileType,u=t.onUploadProgress;return new Promise((function(t,s){var l=e.adapter.uploadFile({url:n,formData:i,name:r,filePath:a,fileType:o,header:{"X-OSS-server-side-encrpytion":"AES256"},success:function(e){e&&e.statusCode<400?t(e):s(new Bd({code:"UPLOAD_FAILED",message:"文件上传失败"}))},fail:function(t){s(new Bd({code:t.code||"UPLOAD_FAILED",message:t.message||t.errMsg||"文件上传失败"}))}});"function"==typeof u&&l&&"function"==typeof l.onProgressUpdate&&l.onProgressUpdate((function(t){u({loaded:t.totalBytesSent,total:t.totalBytesExpectedToSend})}))}))}},{key:"reportOSSUpload",value:function(t){var e={method:"serverless.file.resource.report",params:JSON.stringify(t)};return this.request(this.setupRequest(e))}},{key:"uploadFile",value:(n=x(y().mark((function t(e){var n,i,r,a,o,u,s,l,c,d,f,p,h,v,m,g,b,_,x,w,D,k;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.filePath,i=e.cloudPath,r=e.fileType,a=void 0===r?"image":r,o=e.cloudPathAsRealPath,u=void 0!==o&&o,s=e.onUploadProgress,l=e.config,"string"===Yc(i)){t.next=3;break}throw new Bd({code:"INVALID_PARAM",message:"cloudPath必须为字符串类型"});case 3:if(i=i.trim()){t.next=5;break}throw new Bd({code:"INVALID_PARAM",message:"cloudPath不可为空"});case 5:if(!/:\/\//.test(i)){t.next=7;break}throw new Bd({code:"INVALID_PARAM",message:"cloudPath不合法"});case 7:if(c=l&&l.envType||this.config.envType,!(u&&("/"!==i[0]&&(i="/"+i),i.indexOf("\\")>-1))){t.next=10;break}throw new Bd({code:"INVALID_PARAM",message:"使用cloudPath作为路径时，cloudPath不可包含“\\”"});case 10:return t.next=12,this.getOSSUploadOptionsFromPath({env:c,filename:u?i.split("/").pop():i,fileId:u?i:void 0});case 12:return d=t.sent.result,f="https://"+d.cdnDomain+"/"+d.ossPath,p=d.securityToken,h=d.accessKeyId,v=d.signature,m=d.host,g=d.ossPath,b=d.id,_=d.policy,x=d.ossCallbackUrl,w={"Cache-Control":"max-age=2592000","Content-Disposition":"attachment",OSSAccessKeyId:h,Signature:v,host:m,id:b,key:g,policy:_,success_action_status:200},p&&(w["x-oss-security-token"]=p),x&&(D=JSON.stringify({callbackUrl:x,callbackBody:JSON.stringify({fileId:b,spaceId:this.config.spaceId}),callbackBodyType:"application/json"}),w.callback=Vd(D)),k={url:"https://"+d.host,formData:w,fileName:"file",name:"file",filePath:n,fileType:a},t.next=27,this.uploadFileToOSS(Object.assign({},k,{onUploadProgress:s}));case 27:if(!x){t.next=29;break}return t.abrupt("return",{success:!0,filePath:n,fileID:f});case 29:return t.next=31,this.reportOSSUpload({id:b});case 31:if(!t.sent.success){t.next=33;break}return t.abrupt("return",{success:!0,filePath:n,fileID:f});case 33:throw new Bd({code:"UPLOAD_FAILED",message:"文件上传失败"});case 34:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"getTempFileURL",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).fileList;return new Promise((function(e,n){Array.isArray(t)&&0!==t.length||n(new Bd({code:"INVALID_PARAM",message:"fileList的元素必须是非空的字符串"})),e({fileList:t.map((function(t){return{fileID:t,tempFileURL:t}}))})}))}},{key:"getFileInfo",value:(e=x(y().mark((function t(){var e,n,i=arguments;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=(i.length>0&&void 0!==i[0]?i[0]:{}).fileList,Array.isArray(e)&&0!==e.length){t.next=3;break}throw new Bd({code:"INVALID_PARAM",message:"fileList的元素必须是非空的字符串"});case 3:return n={method:"serverless.file.resource.info",params:JSON.stringify({id:e.map((function(t){return t.split("?")[0]})).join(",")})},t.next=6,this.request(this.setupRequest(n));case 6:return t.t0=t.sent.result,t.abrupt("return",{fileList:t.t0});case 8:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]),t}(),Kd={init:function(t){var e=new $d(t),n={signInAnonymously:function(){return e.authorize()},getLoginState:function(){return Promise.resolve(!1)}};return e.auth=function(){return n},e.customAuth=e.auth,e}},Hd="undefined"!=typeof location&&"http:"===location.protocol?"http:":"https:";!function(t){t.local="local",t.none="none",t.session="session"}(Ud||(Ud={}));var Wd,Jd=function(){},Zd=Rc((function(t,e){var n;t.exports=(n=Vc,function(t){var e=n,i=e.lib,r=i.WordArray,a=i.Hasher,o=e.algo,u=[],s=[];!function(){function e(e){for(var n=t.sqrt(e),i=2;i<=n;i++)if(!(e%i))return!1;return!0}function n(t){return 4294967296*(t-(0|t))|0}for(var i=2,r=0;r<64;)e(i)&&(r<8&&(u[r]=n(t.pow(i,.5))),s[r]=n(t.pow(i,1/3)),r++),i++}();var l=[],c=o.SHA256=a.extend({_doReset:function(){this._hash=new r.init(u.slice(0))},_doProcessBlock:function(t,e){for(var n=this._hash.words,i=n[0],r=n[1],a=n[2],o=n[3],u=n[4],c=n[5],d=n[6],f=n[7],p=0;p<64;p++){if(p<16)l[p]=0|t[e+p];else{var h=l[p-15],v=(h<<25|h>>>7)^(h<<14|h>>>18)^h>>>3,m=l[p-2],g=(m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10;l[p]=v+l[p-7]+g+l[p-16]}var b=i&r^i&a^r&a,y=(i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22),_=f+((u<<26|u>>>6)^(u<<21|u>>>11)^(u<<7|u>>>25))+(u&c^~u&d)+s[p]+l[p];f=d,d=c,c=u,u=o+_|0,o=a,a=r,r=i,i=_+(y+b)|0}n[0]=n[0]+i|0,n[1]=n[1]+r|0,n[2]=n[2]+a|0,n[3]=n[3]+o|0,n[4]=n[4]+u|0,n[5]=n[5]+c|0,n[6]=n[6]+d|0,n[7]=n[7]+f|0},_doFinalize:function(){var e=this._data,n=e.words,i=8*this._nDataBytes,r=8*e.sigBytes;return n[r>>>5]|=128<<24-r%32,n[14+(r+64>>>9<<4)]=t.floor(i/4294967296),n[15+(r+64>>>9<<4)]=i,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var t=a.clone.call(this);return t._hash=this._hash.clone(),t}});e.SHA256=a._createHelper(c),e.HmacSHA256=a._createHmacHelper(c)}(Math),n.SHA256)})),Yd=Zd,Gd=Rc((function(t,e){t.exports=Vc.HmacSHA256})),Qd=function(){var t;if(!Promise){(t=function(){}).promise={};var e=function(){throw new Bd({message:'Your Node runtime does support ES6 Promises. Set "global.Promise" to your preferred implementation of promises.'})};return Object.defineProperty(t.promise,"then",{get:e}),Object.defineProperty(t.promise,"catch",{get:e}),t}var n=new Promise((function(e,n){t=function(t,i){return t?n(t):e(i)}}));return t.promise=n,t};function Xd(t){return void 0===t}function tf(t){return"[object Null]"===Object.prototype.toString.call(t)}!function(t){t.WEB="web",t.WX_MP="wx_mp"}(Wd||(Wd={}));var ef={adapter:null,runtime:void 0},nf=["anonymousUuidKey"],rf=function(t){function n(){var t;return s(this,n),t=e(this,n),ef.adapter.root.tcbObject||(ef.adapter.root.tcbObject={}),t}return i(n,t),c(n,[{key:"setItem",value:function(t,e){ef.adapter.root.tcbObject[t]=e}},{key:"getItem",value:function(t){return ef.adapter.root.tcbObject[t]}},{key:"removeItem",value:function(t){delete ef.adapter.root.tcbObject[t]}},{key:"clear",value:function(){delete ef.adapter.root.tcbObject}}]),n}(Jd);function af(t,e){switch(t){case"local":return e.localStorage||new rf;case"none":return new rf;default:return e.sessionStorage||new rf}}var of=function(){function t(e){if(s(this,t),!this._storage){this._persistence=ef.adapter.primaryStorage||e.persistence,this._storage=af(this._persistence,ef.adapter);var n="access_token_".concat(e.env),i="access_token_expire_".concat(e.env),r="refresh_token_".concat(e.env),a="anonymous_uuid_".concat(e.env),o="login_type_".concat(e.env),u="user_info_".concat(e.env);this.keys={accessTokenKey:n,accessTokenExpireKey:i,refreshTokenKey:r,anonymousUuidKey:a,loginTypeKey:o,userInfoKey:u}}}return c(t,[{key:"updatePersistence",value:function(t){if(t!==this._persistence){var e="local"===this._persistence;this._persistence=t;var n=af(t,ef.adapter);for(var i in this.keys){var r=this.keys[i];if(!e||!nf.includes(i)){var a=this._storage.getItem(r);Xd(a)||tf(a)||(n.setItem(r,a),this._storage.removeItem(r))}}this._storage=n}}},{key:"setStore",value:function(t,e,n){if(this._storage){var i={version:n||"localCachev1",content:e},r=JSON.stringify(i);try{this._storage.setItem(t,r)}catch(t){throw t}}}},{key:"getStore",value:function(t,e){try{if(!this._storage)return}catch(t){return""}e=e||"localCachev1";var n=this._storage.getItem(t);return n&&n.indexOf(e)>=0?JSON.parse(n).content:""}},{key:"removeStore",value:function(t){this._storage.removeItem(t)}}]),t}(),uf={},sf={};function lf(t){return uf[t]}var cf=c((function t(e,n){s(this,t),this.data=n||null,this.name=e})),df=function(t){function n(t,i){var r;return s(this,n),(r=e(this,n,["error",{error:t,data:i}])).error=t,r}return i(n,t),c(n)}(cf),ff=new(function(){function t(){s(this,t),this._listeners={}}return c(t,[{key:"on",value:function(t,e){return function(t,e,n){n[t]=n[t]||[],n[t].push(e)}(t,e,this._listeners),this}},{key:"off",value:function(t,e){return function(t,e,n){if(n&&n[t]){var i=n[t].indexOf(e);-1!==i&&n[t].splice(i,1)}}(t,e,this._listeners),this}},{key:"fire",value:function(t,e){if(t instanceof df)return this;var n="string"==typeof t?new cf(t,e||{}):t,i=n.name;if(this._listens(i)){n.target=this;var r,a=f(this._listeners[i]?d(this._listeners[i]):[]);try{for(a.s();!(r=a.n()).done;){r.value.call(this,n)}}catch(o){a.e(o)}finally{a.f()}}return this}},{key:"_listens",value:function(t){return this._listeners[t]&&this._listeners[t].length>0}}]),t}());function pf(t,e){ff.on(t,e)}function hf(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ff.fire(t,e)}function vf(t,e){ff.off(t,e)}var mf,gf="loginStateChanged",bf="loginStateExpire",yf="loginTypeChanged",_f="anonymousConverted",xf="refreshAccessToken";!function(t){t.ANONYMOUS="ANONYMOUS",t.WECHAT="WECHAT",t.WECHAT_PUBLIC="WECHAT-PUBLIC",t.WECHAT_OPEN="WECHAT-OPEN",t.CUSTOM="CUSTOM",t.EMAIL="EMAIL",t.USERNAME="USERNAME",t.NULL="NULL"}(mf||(mf={}));var wf=["auth.getJwt","auth.logout","auth.signInWithTicket","auth.signInAnonymously","auth.signIn","auth.fetchAccessTokenWithRefreshToken","auth.signUpWithEmailAndPassword","auth.activateEndUserMail","auth.sendPasswordResetEmail","auth.resetPasswordWithToken","auth.isUsernameRegistered"],Df={"X-SDK-Version":"1.3.5"};function kf(t,e,n){var i=t[e];t[e]=function(e){var r={},a={};n.forEach((function(n){var i=n.call(t,e),o=i.data,u=i.headers;Object.assign(r,o),Object.assign(a,u)}));var o=e.data;return o&&function(){var t;if(t=o,"[object FormData]"!==Object.prototype.toString.call(t))e.data=m(m({},o),r);else for(var n in r)o.append(n,r[n])}(),e.headers=m(m({},e.headers||{}),a),i.call(t,e)}}function Cf(){var t=Math.random().toString(16).slice(2);return{data:{seqId:t},headers:m(m({},Df),{},{"x-seqid":t})}}var Af=function(){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s(this,t),this.config=n,this._reqClass=new ef.adapter.reqClass({timeout:this.config.timeout,timeoutMsg:"请求在".concat(this.config.timeout/1e3,"s内未完成，已中断"),restrictedMethods:["post"]}),this._cache=lf(this.config.env),this._localCache=(e=this.config.env,sf[e]),kf(this._reqClass,"post",[Cf]),kf(this._reqClass,"upload",[Cf]),kf(this._reqClass,"download",[Cf])}var e,n,i,r,a,o,u,l;return c(t,[{key:"post",value:(l=x(y().mark((function t(e){return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._reqClass.post(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)}))),function(t){return l.apply(this,arguments)})},{key:"upload",value:(u=x(y().mark((function t(e){return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._reqClass.upload(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)}))),function(t){return u.apply(this,arguments)})},{key:"download",value:(o=x(y().mark((function t(e){return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._reqClass.download(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})},{key:"refreshAccessToken",value:(a=x(y().mark((function t(){var e,n;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._refreshAccessTokenPromise||(this._refreshAccessTokenPromise=this._refreshAccessToken()),t.prev=1,t.next=4,this._refreshAccessTokenPromise;case 4:e=t.sent,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),n=t.t0;case 10:if(this._refreshAccessTokenPromise=null,this._shouldRefreshAccessTokenHook=null,!n){t.next=12;break}throw n;case 12:return t.abrupt("return",e);case 13:case"end":return t.stop()}}),t,this,[[1,7]])}))),function(){return a.apply(this,arguments)})},{key:"_refreshAccessToken",value:(r=x(y().mark((function t(){var e,n,i,r,a,o,u,s,l,c,d,f,p;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this._cache.keys,n=e.accessTokenKey,i=e.accessTokenExpireKey,r=e.refreshTokenKey,a=e.loginTypeKey,o=e.anonymousUuidKey,this._cache.removeStore(n),this._cache.removeStore(i),u=this._cache.getStore(r)){t.next=5;break}throw new Bd({message:"未登录CloudBase"});case 5:return s={refresh_token:u},t.next=8,this.request("auth.fetchAccessTokenWithRefreshToken",s);case 8:if(!(l=t.sent).data.code){t.next=21;break}if("SIGN_PARAM_INVALID"!==(c=l.data.code)&&"REFRESH_TOKEN_EXPIRED"!==c&&"INVALID_REFRESH_TOKEN"!==c){t.next=20;break}if(this._cache.getStore(a)!==mf.ANONYMOUS||"INVALID_REFRESH_TOKEN"!==c){t.next=19;break}return d=this._cache.getStore(o),f=this._cache.getStore(r),t.next=17,this.send("auth.signInAnonymously",{anonymous_uuid:d,refresh_token:f});case 17:return p=t.sent,t.abrupt("return",(this.setRefreshToken(p.refresh_token),this._refreshAccessToken()));case 19:hf(bf),this._cache.removeStore(r);case 20:throw new Bd({code:l.data.code,message:"刷新access token失败：".concat(l.data.code)});case 21:if(!l.data.access_token){t.next=23;break}return t.abrupt("return",(hf(xf),this._cache.setStore(n,l.data.access_token),this._cache.setStore(i,l.data.access_token_expire+Date.now()),{accessToken:l.data.access_token,accessTokenExpire:l.data.access_token_expire}));case 23:l.data.refresh_token&&(this._cache.removeStore(r),this._cache.setStore(r,l.data.refresh_token),this._refreshAccessToken());case 24:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"getAccessToken",value:(i=x(y().mark((function t(){var e,n,i,r,a,o,u;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this._cache.keys,n=e.accessTokenKey,i=e.accessTokenExpireKey,r=e.refreshTokenKey,this._cache.getStore(r)){t.next=3;break}throw new Bd({message:"refresh token不存在，登录状态异常"});case 3:if(a=this._cache.getStore(n),o=this._cache.getStore(i),u=!0,t.t0=this._shouldRefreshAccessTokenHook,!t.t0){t.next=9;break}return t.next=8,this._shouldRefreshAccessTokenHook(a,o);case 8:t.t0=!t.sent;case 9:if(t.t1=t.t0,!t.t1){t.next=12;break}u=!1;case 12:return t.abrupt("return",(!a||!o||o<Date.now())&&u?this.refreshAccessToken():{accessToken:a,accessTokenExpire:o});case 13:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"request",value:(n=x(y().mark((function t(e,n,i){var r,a,o,u,s,l,c,d,f,p,h,v,g,b,_,x;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r="x-tcb-trace_".concat(this.config.env),a="application/x-www-form-urlencoded",o=m({action:e,env:this.config.env,dataVersion:"2019-08-16"},n),-1!==wf.indexOf(e)){t.next=10;break}if(u=this._cache.keys.refreshTokenKey,t.t0=this._cache.getStore(u),!t.t0){t.next=10;break}return t.next=9,this.getAccessToken();case 9:o.access_token=t.sent.accessToken;case 10:if("storage.uploadFile"===e){for(l in s=new FormData)s.hasOwnProperty(l)&&void 0!==s[l]&&s.append(l,o[l]);a="multipart/form-data"}else for(c in a="application/json",s={},o)void 0!==o[c]&&(s[c]=o[c]);return d={headers:{"content-type":a}},i&&i.onUploadProgress&&(d.onUploadProgress=i.onUploadProgress),(f=this._localCache.getStore(r))&&(d.headers["X-TCB-Trace"]=f),p=n.parse,h=n.inQuery,v=n.search,g={env:this.config.env},p&&(g.parse=!0),h&&(g=m(m({},h),g)),b=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=/\?/.test(e),r="";for(var a in n)""===r?!i&&(e+="?"):r+="&",r+="".concat(a,"=").concat(encodeURIComponent(n[a]));return/^http(s)?\:\/\//.test(e+=r)?e:"".concat(t).concat(e)}(Hd,"//tcb-api.tencentcloudapi.com/web",g),v&&(b+=v),t.next=22,this.post(m({url:b,data:s},d));case 22:if(_=t.sent,(x=_.header&&_.header["x-tcb-trace"])&&this._localCache.setStore(r,x),(200===Number(_.status)||200===Number(_.statusCode))&&_.data){t.next=26;break}throw new Bd({code:"NETWORK_ERROR",message:"network request error"});case 26:return t.abrupt("return",_);case 27:case"end":return t.stop()}}),t,this)}))),function(t,e,i){return n.apply(this,arguments)})},{key:"send",value:(e=x(y().mark((function t(e){var n,i,r,a=arguments;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:{},t.next=3,this.request(e,n,{onUploadProgress:n.onUploadProgress});case 3:if("ACCESS_TOKEN_EXPIRED"!==(i=t.sent).data.code||-1!==wf.indexOf(e)){t.next=13;break}return t.next=7,this.refreshAccessToken();case 7:return t.next=9,this.request(e,n,{onUploadProgress:n.onUploadProgress});case 9:if(!(r=t.sent).data.code){t.next=12;break}throw new Bd({code:r.data.code,message:r.data.message});case 12:return t.abrupt("return",r.data);case 13:if(!i.data.code){t.next=15;break}throw new Bd({code:i.data.code,message:i.data.message});case 15:return t.abrupt("return",i.data);case 16:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"setRefreshToken",value:function(t){var e=this._cache.keys,n=e.accessTokenKey,i=e.accessTokenExpireKey,r=e.refreshTokenKey;this._cache.removeStore(n),this._cache.removeStore(i),this._cache.setStore(r,t)}}]),t}(),Ef={};function Ff(t){return Ef[t]}var If=function(){function t(e){s(this,t),this.config=e,this._cache=lf(e.env),this._request=Ff(e.env)}var e;return c(t,[{key:"setRefreshToken",value:function(t){var e=this._cache.keys,n=e.accessTokenKey,i=e.accessTokenExpireKey,r=e.refreshTokenKey;this._cache.removeStore(n),this._cache.removeStore(i),this._cache.setStore(r,t)}},{key:"setAccessToken",value:function(t,e){var n=this._cache.keys,i=n.accessTokenKey,r=n.accessTokenExpireKey;this._cache.setStore(i,t),this._cache.setStore(r,e)}},{key:"refreshUserInfo",value:(e=x(y().mark((function t(){var e,n;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._request.send("auth.getUserInfo",{});case 2:return e=t.sent,n=e.data,t.abrupt("return",(this.setLocalUserInfo(n),n));case 5:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"setLocalUserInfo",value:function(t){var e=this._cache.keys.userInfoKey;this._cache.setStore(e,t)}}]),t}(),Sf=function(){function t(e){if(s(this,t),!e)throw new Bd({code:"PARAM_ERROR",message:"envId is not defined"});this._envId=e,this._cache=lf(this._envId),this._request=Ff(this._envId),this.setUserInfo()}var e,n,i;return c(t,[{key:"linkWithTicket",value:function(t){if("string"!=typeof t)throw new Bd({code:"PARAM_ERROR",message:"ticket must be string"});return this._request.send("auth.linkWithTicket",{ticket:t})}},{key:"linkWithRedirect",value:function(t){t.signInWithRedirect()}},{key:"updatePassword",value:function(t,e){return this._request.send("auth.updatePassword",{oldPassword:e,newPassword:t})}},{key:"updateEmail",value:function(t){return this._request.send("auth.updateEmail",{newEmail:t})}},{key:"updateUsername",value:function(t){if("string"!=typeof t)throw new Bd({code:"PARAM_ERROR",message:"username must be a string"});return this._request.send("auth.updateUsername",{username:t})}},{key:"getLinkedUidList",value:(i=x(y().mark((function t(){var e,n,i,r;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._request.send("auth.getLinkedUidList",{});case 2:return e=t.sent,n=e.data,i=!1,r=n.users,t.abrupt("return",(r.forEach((function(t){t.wxOpenId&&t.wxPublicId&&(i=!0)})),{users:r,hasPrimaryUid:i}));case 7:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"setPrimaryUid",value:function(t){return this._request.send("auth.setPrimaryUid",{uid:t})}},{key:"unlink",value:function(t){return this._request.send("auth.unlink",{platform:t})}},{key:"update",value:(n=x(y().mark((function t(e){var n,i,r,a,o,u,s,l;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.nickName,i=e.gender,r=e.avatarUrl,a=e.province,o=e.country,u=e.city,t.next=8,this._request.send("auth.updateUserInfo",{nickName:n,gender:i,avatarUrl:r,province:a,country:o,city:u});case 8:s=t.sent,l=s.data,this.setLocalUserInfo(l);case 11:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"refresh",value:(e=x(y().mark((function t(){var e,n;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._request.send("auth.getUserInfo",{});case 2:return e=t.sent,n=e.data,t.abrupt("return",(this.setLocalUserInfo(n),n));case 5:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"setUserInfo",value:function(){var t=this,e=this._cache.keys.userInfoKey,n=this._cache.getStore(e);["uid","loginType","openid","wxOpenId","wxPublicId","unionId","qqMiniOpenId","email","hasPassword","customUserId","nickName","gender","avatarUrl"].forEach((function(e){t[e]=n[e]})),this.location={country:n.country,province:n.province,city:n.city}}},{key:"setLocalUserInfo",value:function(t){var e=this._cache.keys.userInfoKey;this._cache.setStore(e,t),this.setUserInfo()}}]),t}(),Tf=function(){function t(e){if(s(this,t),!e)throw new Bd({code:"PARAM_ERROR",message:"envId is not defined"});this._cache=lf(e);var n=this._cache.keys,i=n.refreshTokenKey,r=n.accessTokenKey,a=n.accessTokenExpireKey,o=this._cache.getStore(i),u=this._cache.getStore(r),l=this._cache.getStore(a);this.credential={refreshToken:o,accessToken:u,accessTokenExpire:l},this.user=new Sf(e)}return c(t,[{key:"isAnonymousAuth",get:function(){return this.loginType===mf.ANONYMOUS}},{key:"isCustomAuth",get:function(){return this.loginType===mf.CUSTOM}},{key:"isWeixinAuth",get:function(){return this.loginType===mf.WECHAT||this.loginType===mf.WECHAT_OPEN||this.loginType===mf.WECHAT_PUBLIC}},{key:"loginType",get:function(){return this._cache.getStore(this._cache.keys.loginTypeKey)}}]),t}(),Pf=function(t){function n(){return s(this,n),e(this,n,arguments)}var r,a;return i(n,t),c(n,[{key:"signIn",value:(a=x(y().mark((function t(){var e,n,i,r,a,o,u;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._cache.updatePersistence("local"),e=this._cache.keys,n=e.anonymousUuidKey,i=e.refreshTokenKey,r=this._cache.getStore(n)||void 0,a=this._cache.getStore(i)||void 0,t.next=8,this._request.send("auth.signInAnonymously",{anonymous_uuid:r,refresh_token:a});case 8:if(!(o=t.sent).uuid||!o.refresh_token){t.next=20;break}return this._setAnonymousUUID(o.uuid),this.setRefreshToken(o.refresh_token),t.next=14,this._request.refreshAccessToken();case 14:return hf(gf),hf(yf,{env:this.config.env,loginType:mf.ANONYMOUS,persistence:"local"}),u=new Tf(this.config.env),t.next=19,u.user.refresh();case 19:return t.abrupt("return",u);case 20:throw new Bd({message:"匿名登录失败"});case 21:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"linkAndRetrieveDataWithTicket",value:(r=x(y().mark((function t(e){var n,i,r,a,o,u;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this._cache.keys,i=n.anonymousUuidKey,r=n.refreshTokenKey,a=this._cache.getStore(i),o=this._cache.getStore(r),t.next=7,this._request.send("auth.linkAndRetrieveDataWithTicket",{anonymous_uuid:a,refresh_token:o,ticket:e});case 7:if(!(u=t.sent).refresh_token){t.next=16;break}return this._clearAnonymousUUID(),this.setRefreshToken(u.refresh_token),t.next=13,this._request.refreshAccessToken();case 13:return hf(_f,{env:this.config.env}),hf(yf,{loginType:mf.CUSTOM,persistence:"local"}),t.abrupt("return",{credential:{refreshToken:u.refresh_token}});case 16:throw new Bd({message:"匿名转化失败"});case 17:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})},{key:"_setAnonymousUUID",value:function(t){var e=this._cache.keys,n=e.anonymousUuidKey,i=e.loginTypeKey;this._cache.removeStore(n),this._cache.setStore(n,t),this._cache.setStore(i,mf.ANONYMOUS)}},{key:"_clearAnonymousUUID",value:function(){this._cache.removeStore(this._cache.keys.anonymousUuidKey)}}]),n}(If),Bf=function(t){function n(){return s(this,n),e(this,n,arguments)}var r;return i(n,t),c(n,[{key:"signIn",value:(r=x(y().mark((function t(e){var n,i;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("string"==typeof e){t.next=2;break}throw new Bd({code:"PARAM_ERROR",message:"ticket must be a string"});case 2:return n=this._cache.keys.refreshTokenKey,t.next=5,this._request.send("auth.signInWithTicket",{ticket:e,refresh_token:this._cache.getStore(n)||""});case 5:if(!(i=t.sent).refresh_token){t.next=15;break}return this.setRefreshToken(i.refresh_token),t.next=10,this._request.refreshAccessToken();case 10:return hf(gf),hf(yf,{env:this.config.env,loginType:mf.CUSTOM,persistence:this.config.persistence}),t.next=14,this.refreshUserInfo();case 14:return t.abrupt("return",new Tf(this.config.env));case 15:throw new Bd({message:"自定义登录失败"});case 16:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})}]),n}(If),Nf=function(t){function n(){return s(this,n),e(this,n,arguments)}var r,a,o;return i(n,t),c(n,[{key:"signIn",value:(o=x(y().mark((function t(e,n){var i,r,a,o,u;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("string"==typeof e){t.next=2;break}throw new Bd({code:"PARAM_ERROR",message:"email must be a string"});case 2:return i=this._cache.keys.refreshTokenKey,t.next=5,this._request.send("auth.signIn",{loginType:"EMAIL",email:e,password:n,refresh_token:this._cache.getStore(i)||""});case 5:if(r=t.sent,a=r.refresh_token,o=r.access_token,u=r.access_token_expire,!a){t.next=22;break}if(this.setRefreshToken(a),!o||!u){t.next=15;break}this.setAccessToken(o,u),t.next=17;break;case 15:return t.next=17,this._request.refreshAccessToken();case 17:return t.next=19,this.refreshUserInfo();case 19:return hf(gf),hf(yf,{env:this.config.env,loginType:mf.EMAIL,persistence:this.config.persistence}),t.abrupt("return",new Tf(this.config.env));case 22:throw r.code?new Bd({code:r.code,message:"邮箱登录失败: ".concat(r.message)}):new Bd({message:"邮箱登录失败"});case 23:case"end":return t.stop()}}),t,this)}))),function(t,e){return o.apply(this,arguments)})},{key:"activate",value:(a=x(y().mark((function t(e){return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this._request.send("auth.activateEndUserMail",{token:e}));case 1:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})},{key:"resetPasswordWithToken",value:(r=x(y().mark((function t(e,n){return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this._request.send("auth.resetPasswordWithToken",{token:e,newPassword:n}));case 1:case"end":return t.stop()}}),t,this)}))),function(t,e){return r.apply(this,arguments)})}]),n}(If),zf=function(t){function n(){return s(this,n),e(this,n,arguments)}var r;return i(n,t),c(n,[{key:"signIn",value:(r=x(y().mark((function t(e,n){var i,r,a,o,u;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("string"==typeof e){t.next=2;break}throw new Bd({code:"PARAM_ERROR",message:"username must be a string"});case 2:return"string"!=typeof n&&(n=""),i=this._cache.keys.refreshTokenKey,t.next=6,this._request.send("auth.signIn",{loginType:mf.USERNAME,username:e,password:n,refresh_token:this._cache.getStore(i)||""});case 6:if(r=t.sent,a=r.refresh_token,o=r.access_token_expire,u=r.access_token,!a){t.next=23;break}if(this.setRefreshToken(a),!u||!o){t.next=16;break}this.setAccessToken(u,o),t.next=18;break;case 16:return t.next=18,this._request.refreshAccessToken();case 18:return t.next=20,this.refreshUserInfo();case 20:return hf(gf),hf(yf,{env:this.config.env,loginType:mf.USERNAME,persistence:this.config.persistence}),t.abrupt("return",new Tf(this.config.env));case 23:throw r.code?new Bd({code:r.code,message:"用户名密码登录失败: ".concat(r.message)}):new Bd({message:"用户名密码登录失败"});case 24:case"end":return t.stop()}}),t,this)}))),function(t,e){return r.apply(this,arguments)})}]),n}(If),Of=function(){function t(e){s(this,t),this.config=e,this._cache=lf(e.env),this._request=Ff(e.env),this._onAnonymousConverted=this._onAnonymousConverted.bind(this),this._onLoginTypeChanged=this._onLoginTypeChanged.bind(this),pf(yf,this._onLoginTypeChanged)}var e,n,i,r,a,o,u,l,d;return c(t,[{key:"currentUser",get:function(){var t=this.hasLoginState();return t&&t.user||null}},{key:"loginType",get:function(){return this._cache.getStore(this._cache.keys.loginTypeKey)}},{key:"anonymousAuthProvider",value:function(){return new Pf(this.config)}},{key:"customAuthProvider",value:function(){return new Bf(this.config)}},{key:"emailAuthProvider",value:function(){return new Nf(this.config)}},{key:"usernameAuthProvider",value:function(){return new zf(this.config)}},{key:"signInAnonymously",value:(d=x(y().mark((function t(){return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Pf(this.config).signIn());case 1:case"end":return t.stop()}}),t,this)}))),function(){return d.apply(this,arguments)})},{key:"signInWithEmailAndPassword",value:(l=x(y().mark((function t(e,n){return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Nf(this.config).signIn(e,n));case 1:case"end":return t.stop()}}),t,this)}))),function(t,e){return l.apply(this,arguments)})},{key:"signInWithUsernameAndPassword",value:function(t,e){return new zf(this.config).signIn(t,e)}},{key:"linkAndRetrieveDataWithTicket",value:(u=x(y().mark((function t(e){return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._anonymousAuthProvider||(this._anonymousAuthProvider=new Pf(this.config)),pf(_f,this._onAnonymousConverted),t.next=3,this._anonymousAuthProvider.linkAndRetrieveDataWithTicket(e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)}))),function(t){return u.apply(this,arguments)})},{key:"signOut",value:(o=x(y().mark((function t(){var e,n,i,r,a,o;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.loginType!==mf.ANONYMOUS){t.next=2;break}throw new Bd({message:"匿名用户不支持登出操作"});case 2:if(e=this._cache.keys,n=e.refreshTokenKey,i=e.accessTokenKey,r=e.accessTokenExpireKey,a=this._cache.getStore(n)){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,this._request.send("auth.logout",{refresh_token:a});case 7:return o=t.sent,t.abrupt("return",(this._cache.removeStore(n),this._cache.removeStore(i),this._cache.removeStore(r),hf(gf),hf(yf,{env:this.config.env,loginType:mf.NULL,persistence:this.config.persistence}),o));case 9:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"signUpWithEmailAndPassword",value:(a=x(y().mark((function t(e,n){return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this._request.send("auth.signUpWithEmailAndPassword",{email:e,password:n}));case 1:case"end":return t.stop()}}),t,this)}))),function(t,e){return a.apply(this,arguments)})},{key:"sendPasswordResetEmail",value:(r=x(y().mark((function t(e){return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this._request.send("auth.sendPasswordResetEmail",{email:e}));case 1:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})},{key:"onLoginStateChanged",value:function(t){var e=this;pf(gf,(function(){var n=e.hasLoginState();t.call(e,n)}));var n=this.hasLoginState();t.call(this,n)}},{key:"onLoginStateExpired",value:function(t){pf(bf,t.bind(this))}},{key:"onAccessTokenRefreshed",value:function(t){pf(xf,t.bind(this))}},{key:"onAnonymousConverted",value:function(t){pf(_f,t.bind(this))}},{key:"onLoginTypeChanged",value:function(t){var e=this;pf(yf,(function(){var n=e.hasLoginState();t.call(e,n)}))}},{key:"getAccessToken",value:(i=x(y().mark((function t(){return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._request.getAccessToken();case 2:return t.t0=t.sent.accessToken,t.t1=this.config.env,t.abrupt("return",{accessToken:t.t0,env:t.t1});case 5:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"hasLoginState",value:function(){var t=this._cache.keys.refreshTokenKey;return this._cache.getStore(t)?new Tf(this.config.env):null}},{key:"isUsernameRegistered",value:(n=x(y().mark((function t(e){var n,i;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("string"==typeof e){t.next=2;break}throw new Bd({code:"PARAM_ERROR",message:"username must be a string"});case 2:return t.next=4,this._request.send("auth.isUsernameRegistered",{username:e});case 4:return n=t.sent,i=n.data,t.abrupt("return",i&&i.isRegistered);case 7:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"getLoginState",value:function(){return Promise.resolve(this.hasLoginState())}},{key:"signInWithTicket",value:(e=x(y().mark((function t(e){return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Bf(this.config).signIn(e));case 1:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"shouldRefreshAccessToken",value:function(t){this._request._shouldRefreshAccessTokenHook=t.bind(this)}},{key:"getUserInfo",value:function(){return this._request.send("auth.getUserInfo",{}).then((function(t){return t.code?t:m(m({},t.data),{},{requestId:t.seqId})}))}},{key:"getAuthHeader",value:function(){var t=this._cache.keys,e=t.refreshTokenKey,n=t.accessTokenKey,i=this._cache.getStore(e);return{"x-cloudbase-credentials":this._cache.getStore(n)+"/@@/"+i}}},{key:"_onAnonymousConverted",value:function(t){t.data.env===this.config.env&&this._cache.updatePersistence(this.config.persistence)}},{key:"_onLoginTypeChanged",value:function(t){var e=t.data,n=e.loginType,i=e.persistence;e.env===this.config.env&&(this._cache.updatePersistence(i),this._cache.setStore(this._cache.keys.loginTypeKey,n))}}]),t}(),Mf=function(t,e){e=e||Qd();var n=Ff(this.config.env),i=t.cloudPath,r=t.filePath,a=t.onUploadProgress,o=t.fileType,u=void 0===o?"image":o;return n.send("storage.getUploadMetadata",{path:i}).then((function(t){var o=t.data,s=o.url,l=o.authorization,c=o.token,d=o.fileId,f=o.cosFileId,p=t.requestId,h={key:i,signature:l,"x-cos-meta-fileid":f,success_action_status:"201","x-cos-security-token":c};n.upload({url:s,data:h,file:r,name:i,fileType:u,onUploadProgress:a}).then((function(t){201===t.statusCode?e(null,{fileID:d,requestId:p}):e(new Bd({code:"STORAGE_REQUEST_FAIL",message:"STORAGE_REQUEST_FAIL: ".concat(t.data)}))})).catch((function(t){e(t)}))})).catch((function(t){e(t)})),e.promise},Lf=function(t,e){e=e||Qd();var n=Ff(this.config.env),i=t.cloudPath;return n.send("storage.getUploadMetadata",{path:i}).then((function(t){e(null,t)})).catch((function(t){e(t)})),e.promise},jf=function(t,e){var n=t.fileList;if(e=e||Qd(),!n||!Array.isArray(n))return{code:"INVALID_PARAM",message:"fileList必须是非空的数组"};var i,r=f(n);try{for(r.s();!(i=r.n()).done;){var a=i.value;if(!a||"string"!=typeof a)return{code:"INVALID_PARAM",message:"fileList的元素必须是非空的字符串"}}}catch(u){r.e(u)}finally{r.f()}var o={fileid_list:n};return Ff(this.config.env).send("storage.batchDeleteFile",o).then((function(t){t.code?e(null,t):e(null,{fileList:t.data.delete_list,requestId:t.requestId})})).catch((function(t){e(t)})),e.promise},Uf=function(t,e){var n=t.fileList;e=e||Qd(),n&&Array.isArray(n)||e(null,{code:"INVALID_PARAM",message:"fileList必须是非空的数组"});var i,r=[],a=f(n);try{for(a.s();!(i=a.n()).done;){var o=i.value;"object"==w(o)?(o.hasOwnProperty("fileID")&&o.hasOwnProperty("maxAge")||e(null,{code:"INVALID_PARAM",message:"fileList的元素必须是包含fileID和maxAge的对象"}),r.push({fileid:o.fileID,max_age:o.maxAge})):"string"==typeof o?r.push({fileid:o}):e(null,{code:"INVALID_PARAM",message:"fileList的元素必须是字符串"})}}catch(s){a.e(s)}finally{a.f()}var u={file_list:r};return Ff(this.config.env).send("storage.batchGetDownloadUrl",u).then((function(t){t.code?e(null,t):e(null,{fileList:t.data.download_list,requestId:t.requestId})})).catch((function(t){e(t)})),e.promise},Rf=function(){var t=x(y().mark((function t(e,n){var i,r,a,o;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.fileID,t.next=3,Uf.call(this,{fileList:[{fileID:i,maxAge:600}]});case 3:if("SUCCESS"===(r=t.sent.fileList[0]).code){t.next=6;break}return t.abrupt("return",n?n(r):new Promise((function(t){t(r)})));case 6:if(a=Ff(this.config.env),o=r.download_url,o=encodeURI(o),n){t.next=10;break}return t.abrupt("return",a.download({url:o}));case 10:return t.t0=n,t.next=13,a.download({url:o});case 13:t.t1=t.sent,(0,t.t0)(t.t1);case 15:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}(),qf=function(t,e){var n,i=t.name,r=t.data,a=t.query,o=t.parse,u=t.search,s=e||Qd();try{n=r?JSON.stringify(r):""}catch(i){return Promise.reject(i)}if(!i)return Promise.reject(new Bd({code:"PARAM_ERROR",message:"函数名不能为空"}));var l={inQuery:a,parse:o,search:u,function_name:i,request_data:n};return Ff(this.config.env).send("functions.invokeFunction",l).then((function(t){if(t.code)s(null,t);else{var e=t.data.response_data;if(o)s(null,{result:e,requestId:t.requestId});else try{e=JSON.parse(t.data.response_data),s(null,{result:e,requestId:t.requestId})}catch(t){s(new Bd({message:"response data must be json"}))}}return s.promise})).catch((function(t){s(t)})),s.promise},Vf={timeout:15e3,persistence:"session"},$f={},Kf=function(){function t(e){s(this,t),this.config=e||this.config,this.authObj=void 0}var e;return c(t,[{key:"init",value:function(e){switch(ef.adapter||(this.requestClient=new ef.adapter.reqClass({timeout:e.timeout||5e3,timeoutMsg:"请求在".concat((e.timeout||5e3)/1e3,"s内未完成，已中断")})),this.config=m(m({},Vf),e),!0){case this.config.timeout>6e5:this.config.timeout=6e5;break;case this.config.timeout<100:this.config.timeout=100}return new t(this.config)}},{key:"auth",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).persistence;if(this.authObj)return this.authObj;var e,n=t||ef.adapter.primaryStorage||Vf.persistence;return n!==this.config.persistence&&(this.config.persistence=n),function(t){var e=t.env;uf[e]=new of(t),sf[e]=new of(m(m({},t),{},{persistence:"local"}))}(this.config),e=this.config,Ef[e.env]=new Af(e),this.authObj=new Of(this.config),this.authObj}},{key:"on",value:function(t,e){return pf.apply(this,[t,e])}},{key:"off",value:function(t,e){return vf.apply(this,[t,e])}},{key:"callFunction",value:function(t,e){return qf.apply(this,[t,e])}},{key:"deleteFile",value:function(t,e){return jf.apply(this,[t,e])}},{key:"getTempFileURL",value:function(t,e){return Uf.apply(this,[t,e])}},{key:"downloadFile",value:function(t,e){return Rf.apply(this,[t,e])}},{key:"uploadFile",value:function(t,e){return Mf.apply(this,[t,e])}},{key:"getUploadMetadata",value:function(t,e){return Lf.apply(this,[t,e])}},{key:"registerExtension",value:function(t){$f[t.name]=t}},{key:"invokeExtension",value:(e=x(y().mark((function t(e,n){var i;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=$f[e]){t.next=3;break}throw new Bd({message:"扩展".concat(e," 必须先注册")});case 3:return t.next=5,i.invoke(n,this);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)}))),function(t,n){return e.apply(this,arguments)})},{key:"useAdapters",value:function(t){var e=function(t){var e,n,i=f((e=t,"[object Array]"===Object.prototype.toString.call(e)?t:[t]));try{for(i.s();!(n=i.n()).done;){var r=n.value,a=r.isMatch,o=r.genAdapter,u=r.runtime;if(a())return{adapter:o(),runtime:u}}}catch(s){i.e(s)}finally{i.f()}}(t)||{},n=e.adapter,i=e.runtime;n&&(ef.adapter=n),i&&(ef.runtime=i)}}]),t}(),Hf=new Kf;function Wf(t,e,n){void 0===n&&(n={});var i=/\?/.test(e),r="";for(var a in n)""===r?!i&&(e+="?"):r+="&",r+=a+"="+encodeURIComponent(n[a]);return/^http(s)?:\/\//.test(e+=r)?e:""+t+e}var Jf=function(){function t(){s(this,t)}return c(t,[{key:"post",value:function(t){var e=t.url,n=t.data,i=t.headers;return new Promise((function(t,r){Nd.request({url:Wf("https:",e),data:n,method:"POST",header:i,success:function(e){t(e)},fail:function(t){r(t)}})}))}},{key:"upload",value:function(t){return new Promise((function(e,n){var i=t.url,r=t.file,a=t.data,o=t.headers,u=t.fileType,s=Nd.uploadFile({url:Wf("https:",i),name:"file",formData:Object.assign({},a),filePath:r,fileType:u,header:o,success:function(t){var n={statusCode:t.statusCode,data:t.data||{}};200===t.statusCode&&a.success_action_status&&(n.statusCode=parseInt(a.success_action_status,10)),e(n)},fail:function(t){n(new Error(t.errMsg||"uploadFile:fail"))}});"function"==typeof t.onUploadProgress&&s&&"function"==typeof s.onProgressUpdate&&s.onProgressUpdate((function(e){t.onUploadProgress({loaded:e.totalBytesSent,total:e.totalBytesExpectedToSend})}))}))}}]),t}(),Zf={setItem:function(t,e){Nd.setStorageSync(t,e)},getItem:function(t){return Nd.getStorageSync(t)},removeItem:function(t){Nd.removeStorageSync(t)},clear:function(){Nd.clearStorageSync()}},Yf={genAdapter:function(){return{root:{},reqClass:Jf,localStorage:Zf,primaryStorage:"local"}},isMatch:function(){return!0},runtime:"uni_app"};Hf.useAdapters(Yf);var Gf=Hf,Qf=Gf.init;Gf.init=function(t){t.env=t.spaceId;var e=Qf.call(this,t);e.config.provider="tencent",e.config.spaceId=t.spaceId;var n=e.auth;return e.auth=function(t){var e=n.call(this,t);return["linkAndRetrieveDataWithTicket","signInAnonymously","signOut","getAccessToken","getLoginState","signInWithTicket","getUserInfo"].forEach((function(t){var n;e[t]=(n=e[t],function(t){var e=Sd(t=t||{}),i=e.success,r=e.fail,a=e.complete;if(!(i||r||a))return n.call(this,t);n.call(this,t).then((function(t){i&&i(t),a&&a(t)}),(function(t){r&&r(t),a&&a(t)}))}).bind(e)})),e},e.customAuth=e.auth,e};var Xf=Gf,tp=function(t){function n(){return s(this,n),e(this,n,arguments)}return i(n,t),c(n,[{key:"getAccessToken",value:function(){var t=this;return new Promise((function(e,n){var i="Anonymous_Access_token";t.setAccessToken(i),e(i)}))}},{key:"setupRequest",value:function(t,e){var n=Object.assign({},t,{spaceId:this.config.spaceId,timestamp:Date.now()}),i={"Content-Type":"application/json"};"auth"!==e&&(n.token=this.accessToken,i["x-basement-token"]=this.accessToken),i["x-serverless-sign"]=Rd(n,this.config.clientSecret);var r=jd();i["x-client-info"]=encodeURIComponent(JSON.stringify(r));var a=Od().token;return i["x-client-token"]=a,{url:this.config.requestUrl,method:"POST",data:n,dataType:"json",header:JSON.parse(JSON.stringify(i))}}},{key:"uploadFileToOSS",value:function(t){var e=this,n=t.url,i=t.formData,r=t.name,a=t.filePath,o=t.fileType,u=t.onUploadProgress;return new Promise((function(t,s){var l=e.adapter.uploadFile({url:n,formData:i,name:r,filePath:a,fileType:o,success:function(e){e&&e.statusCode<400?t(e):s(new Bd({code:"UPLOAD_FAILED",message:"文件上传失败"}))},fail:function(t){s(new Bd({code:t.code||"UPLOAD_FAILED",message:t.message||t.errMsg||"文件上传失败"}))}});"function"==typeof u&&l&&"function"==typeof l.onProgressUpdate&&l.onProgressUpdate((function(t){u({loaded:t.totalBytesSent,total:t.totalBytesExpectedToSend})}))}))}},{key:"uploadFile",value:function(t){var e,n=this,i=t.filePath,r=t.cloudPath,a=t.fileType,o=void 0===a?"image":a,u=t.onUploadProgress;if(!r)throw new Bd({code:"CLOUDPATH_REQUIRED",message:"cloudPath不可为空"});return this.getOSSUploadOptionsFromPath({cloudPath:r}).then((function(t){var r=t.result,a=r.url,s=r.formData,l=r.name;e=t.result.fileUrl;var c={url:a,formData:s,name:l,filePath:i,fileType:o};return n.uploadFileToOSS(Object.assign({},c,{onUploadProgress:u}))})).then((function(){return n.reportOSSUpload({cloudPath:r})})).then((function(t){return new Promise((function(n,r){t.success?n({success:!0,filePath:i,fileID:e}):r(new Bd({code:"UPLOAD_FAILED",message:"文件上传失败"}))}))}))}},{key:"deleteFile",value:function(t){var e=t.fileList,n={method:"serverless.file.resource.delete",params:JSON.stringify({fileList:e})};return this.request(this.setupRequest(n)).then((function(t){if(t.success)return t.result;throw new Bd({code:"DELETE_FILE_FAILED",message:"删除文件失败"})}))}},{key:"getTempFileURL",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.fileList,n=t.maxAge;if(!Array.isArray(e)||0===e.length)throw new Bd({code:"INVALID_PARAM",message:"fileList的元素必须是非空的字符串"});var i={method:"serverless.file.resource.getTempFileURL",params:JSON.stringify({fileList:e,maxAge:n})};return this.request(this.setupRequest(i)).then((function(t){if(t.success)return{fileList:t.result.fileList.map((function(t){return{fileID:t.fileID,tempFileURL:t.tempFileURL}}))};throw new Bd({code:"GET_TEMP_FILE_URL_FAILED",message:"获取临时文件链接失败"})}))}}]),n}($d),ep={init:function(t){var e=new tp(t),n={signInAnonymously:function(){return e.authorize()},getLoginState:function(){return Promise.resolve(!1)}};return e.auth=function(){return n},e.customAuth=e.auth,e}},np=Rc((function(t,e){t.exports=Vc.enc.Hex}));function ip(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.data,r=n.functionName,a=n.method,o=n.headers,u=n.signHeaderKeys,s=void 0===u?[]:u,l=n.config,c=Date.now(),d="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})),f=Object.assign({},o,{"x-from-app-id":l.spaceAppId,"x-from-env-id":l.spaceId,"x-to-env-id":l.spaceId,"x-from-instance-id":c,"x-from-function-name":r,"x-client-timestamp":c,"x-alipay-source":"client","x-request-id":d,"x-alipay-callid":d,"x-trace-id":d}),p=["x-from-app-id","x-from-env-id","x-to-env-id","x-from-instance-id","x-from-function-name","x-client-timestamp"].concat(s),h=t(e.split("?")||[],2),v=h[0],m=void 0===v?"":v,g=h[1],b=function(t){var e=t.signedHeaders.join(";"),n=t.signedHeaders.map((function(e){return"".concat(e.toLowerCase(),":").concat(t.headers[e],"\n")})).join(""),i=Yd(t.body).toString(np),r="".concat(t.method.toUpperCase(),"\n").concat(t.path,"\n").concat(t.query,"\n").concat(n,"\n").concat(e,"\n").concat(i,"\n"),a=Yd(r).toString(np),o="HMAC-SHA256\n".concat(t.timestamp,"\n").concat(a,"\n"),u=Gd(o,t.secretKey).toString(np);return"HMAC-SHA256 Credential=".concat(t.secretId,", SignedHeaders=").concat(e,", Signature=").concat(u)}({path:m,query:void 0===g?"":g,method:a,headers:f,timestamp:c,body:JSON.stringify(i),secretId:l.accessKey,secretKey:l.secretKey,signedHeaders:p.sort()});return{url:"".concat(l.endpoint).concat(e),headers:Object.assign({},f,{Authorization:b})}}function rp(t){var e=t.url,n=t.data,i=t.method,r=void 0===i?"POST":i,a=t.headers,o=void 0===a?{}:a;return new Promise((function(t,i){Nd.request({url:e,method:r,data:n,header:o,dataType:"json",complete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=o["x-trace-id"]||"";if(!e.statusCode||e.statusCode>=400){var r=e.data||{},a=r.message,u=r.errMsg,s=r.trace_id;return i(new Bd({code:"SYS_ERR",message:a||u||"request:fail",requestId:s||n}))}t({status:e.statusCode,data:e.data,headers:e.header,requestId:n})}})}))}function ap(t,e){var n=t.path,i=t.data,r=t.method,a=void 0===r?"GET":r,o=ip(n,{functionName:"",data:i,method:a,headers:{"x-alipay-cloud-mode":"oss","x-data-api-type":"oss","x-expire-timestamp":Date.now()+6e4},signHeaderKeys:["x-data-api-type","x-expire-timestamp"],config:e});return rp({url:o.url,data:i,method:a,headers:o.headers}).then((function(t){var e=t.data||{};if(!e.success)throw new Bd({code:t.errCode,message:t.errMsg,requestId:t.requestId});return e.data||{}})).catch((function(t){throw new Bd({code:t.errCode,message:t.errMsg,requestId:t.requestId})}))}function op(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").trim().replace(/^cloud:\/\//,""),e=t.indexOf("/");if(e<=0)throw new Bd({code:"INVALID_PARAM",message:"fileID不合法"});t.substring(0,e);var n=t.substring(e+1);return this.config.spaceId,n}function up(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"cloud://".concat(this.config.spaceId,"/").concat(t.replace(/^\/+/,""))}var sp=function(){function t(e){if(s(this,t),["spaceId","spaceAppId","accessKey","secretKey"].forEach((function(t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new Error("".concat(t," required"))})),e.endpoint){if("string"!=typeof e.endpoint)throw new Error("endpoint must be string");if(!/^https:\/\//.test(e.endpoint))throw new Error("endpoint must start with https://");e.endpoint=e.endpoint.replace(/\/$/,"")}this.config=Object.assign({},e,{endpoint:e.endpoint||"https://".concat(e.spaceId,".api-hz.cloudbasefunction.cn")})}var e,n;return c(t,[{key:"callFunction",value:function(t){return function(t,e){var n=t.name,i=t.data,r="POST",a=ip("/functions/invokeFunction",{functionName:n,data:i,method:r,headers:{"x-to-function-name":n},signHeaderKeys:["x-to-function-name"],config:e});return rp({url:a.url,data:i,method:r,headers:a.headers}).then((function(t){return{errCode:0,success:!0,requestId:t.requestId,result:t.data}})).catch((function(t){throw new Bd({code:t.errCode,message:t.errMsg,requestId:t.requestId})}))}(t,this.config)}},{key:"uploadFileToOSS",value:function(t){var e=t.url,n=t.filePath,i=t.fileType,r=t.formData,a=t.onUploadProgress;return new Promise((function(t,o){var u=Nd.uploadFile({url:e,filePath:n,fileType:i,formData:r,name:"file",success:function(e){e&&e.statusCode<400?t(e):o(new Bd({code:"UPLOAD_FAILED",message:"文件上传失败"}))},fail:function(t){o(new Bd({code:t.code||"UPLOAD_FAILED",message:t.message||t.errMsg||"文件上传失败"}))}});"function"==typeof a&&u&&"function"==typeof u.onProgressUpdate&&u.onProgressUpdate((function(t){a({loaded:t.totalBytesSent,total:t.totalBytesExpectedToSend})}))}))}},{key:"uploadFile",value:(n=x(y().mark((function t(e){var n,i,r,a,o,u,s,l,c,d,f;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.filePath,i=e.cloudPath,r=void 0===i?"":i,a=e.fileType,o=void 0===a?"image":a,u=e.onUploadProgress,"string"===Yc(r)){t.next=3;break}throw new Bd({code:"INVALID_PARAM",message:"cloudPath必须为字符串类型"});case 3:if(r=r.trim()){t.next=5;break}throw new Bd({code:"INVALID_PARAM",message:"cloudPath不可为空"});case 5:if(!/:\/\//.test(r)){t.next=7;break}throw new Bd({code:"INVALID_PARAM",message:"cloudPath不合法"});case 7:return t.next=9,ap({path:"/".concat(r.replace(/^\//,""),"?post_url")},this.config);case 9:return s=t.sent,l=s.file_id,c=s.upload_url,d=s.form_data,f=d&&d.reduce((function(t,e){return t[e.key]=e.value,t}),{}),t.abrupt("return",this.uploadFileToOSS({url:c,filePath:n,fileType:o,formData:f,onUploadProgress:u}).then((function(){return{fileID:l}})));case 15:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"getTempFileURL",value:(e=x(y().mark((function t(e){var n,i=this;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.fileList,t.abrupt("return",new Promise((function(t,e){(!n||n.length<0)&&e(new Bd({errCode:"INVALID_PARAM",errMsg:"fileList不能为空数组"})),n.length>50&&e(new Bd({errCode:"INVALID_PARAM",errMsg:"fileList数组长度不能超过50"}));var r,a=[],o=f(n);try{for(o.s();!(r=o.n()).done;){var u=r.value;"string"!==Yc(u)&&e(new Bd({errCode:"INVALID_PARAM",errMsg:"fileList的元素必须是非空的字符串"}));var s=op.call(i,u);a.push({file_id:s,expire:600})}}catch(l){o.e(l)}finally{o.f()}ap({path:"/?download_url",data:{file_list:a},method:"POST"},i.config).then((function(e){var n=e.file_list;t({fileList:(void 0===n?[]:n).map((function(t){return{fileID:up.call(i,t.file_id),tempFileURL:t.download_url}}))})})).catch((function(t){return e(t)}))})));case 2:case"end":return t.stop()}}),t)}))),function(t){return e.apply(this,arguments)})}]),t}(),lp={init:function(t){t.provider="alipay";var e=new sp(t);return e.auth=function(){return{signInAnonymously:function(){return Promise.resolve()},getLoginState:function(){return Promise.resolve(!0)}}},e}};function cp(t){var e,n=t.data;e=jd();var i=JSON.parse(JSON.stringify(n||{}));if(Object.assign(i,{clientInfo:e}),!i.uniIdToken){var r=Od().token;r&&(i.uniIdToken=r)}return i}var dp=[{rule:/fc_function_not_found|FUNCTION_NOT_FOUND/,content:"，云函数[{functionName}]在云端不存在，请检查此云函数名称是否正确以及该云函数是否已上传到服务空间",mode:"append"}],fp=/[\\^$.*+?()[\]{}|]/g,pp=RegExp(fp.source);function hp(t,e,n){return t.replace(new RegExp((i=e)&&pp.test(i)?i.replace(fp,"\\$&"):i,"g"),n);var i}var vp,mp="request",gp="response",bp="both",yp={code:2e4,message:"System error"},_p={code:20101,message:"Invalid client"};function xp(t){var e=t||{},n=e.errSubject,i=e.subject,r=e.errCode,a=e.errMsg,o=e.code,u=e.message,s=e.cause;return new Bd({subject:n||i||"uni-secure-network",code:r||o||yp.code,message:a||u,cause:s})}function wp(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).secretType;return t===mp||t===gp||t===bp}function Dp(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.name,t.data;return"app"===ad}function kp(t){t.functionName,t.result,t.logPvd}function Cp(t){var e=t.callFunction,n=function(n){var i=this,r=n.name;n.data=cp.call(t,{data:n.data});var a={aliyun:"aliyun",tencent:"tcb",tcb:"tcb",alipay:"alipay"}[this.config.provider],o=wp(n),u=Dp(n),s=o||u;return e.call(this,n).then((function(t){return t.errCode=0,!s&&kp.call(i,{functionName:r,result:t,logPvd:a}),Promise.resolve(t)}),(function(t){return!s&&kp.call(i,{functionName:r,result:t,logPvd:a}),t&&t.message&&(t.message=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.message,n=void 0===e?"":e,i=t.extraInfo,r=void 0===i?{}:i,a=t.formatter,o=void 0===a?[]:a,u=0;u<o.length;u++){var s=o[u],l=s.rule,c=s.content,d=s.mode,f=n.match(l);if(f){for(var p=c,h=1;h<f.length;h++)p=hp(p,"{$".concat(h,"}"),f[h]);for(var v in r)p=hp(p,"{".concat(v,"}"),r[v]);return"replace"===d?p:n+p}}return n}({message:"[".concat(n.name,"]: ").concat(t.message),formatter:dp,extraInfo:{functionName:r}})),Promise.reject(t)}))};t.callFunction=function(e){var i,r,a=t.config,o=a.provider,u=a.spaceId,s=e.name;return e.data=e.data||{},i=(i=n).bind(t),Dp(e)||(r=wp(e)?new vp({secretType:e.secretType,uniCloudIns:t}).wrapEncryptDataCallFunction(n.bind(t))(e):function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.provider,n=t.spaceId,i=t.functionName,r=Ld(),a=r.appId,o=r.uniPlatform,u=r.osName,s=o;"app"===o&&(s=u);var l=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.provider,n=t.spaceId,i=rd;if(!i)return{};e=function(t){return"tencent"===t?"tcb":t}(e);var r=i.find((function(t){return t.provider===e&&t.spaceId===n}));return r&&r.config}({provider:e,spaceId:n});if(!l||!l.accessControl||!l.accessControl.enable)return!1;var c=l.accessControl.function||{},d=Object.keys(c);if(0===d.length)return!0;var f=function(t,e){for(var n,i,r,a=0;a<t.length;a++){var o=t[a];o!==e?"*"!==o?o.split(",").map((function(t){return t.trim()})).indexOf(e)>-1&&(i=o):r=o:n=o}return n||i||r}(d,i);if(!f)return!1;if((c[f]||[]).find((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.appId===a&&(t.platform||"").toLowerCase()===s.toLowerCase()})))return!0;throw xp(_p)}({provider:o,spaceId:u,functionName:s})?new vp({secretType:e.secretType,uniCloudIns:t}).wrapVerifyClientCallFunction(n.bind(t))(e):i(e)),Object.defineProperty(r,"result",{get:function(){return{}}}),r.then((function(t){return"undefined"!=typeof UTSJSONObject&&(t.result=new UTSJSONObject(t.result)),t}))}}vp=c((function t(){throw s(this,t),xp({message:"Platform ".concat(ad," is not supported by secure network")})}));var Ap=Symbol("CLIENT_DB_INTERNAL");function Ep(t,e){return t.then="DoNotReturnProxyWithAFunctionNamedThen",t._internalType=Ap,t.inspect=null,t.__v_raw=void 0,new Proxy(t,{get:function(t,n,i){if("_uniClient"===n)return null;if("symbol"==w(n))return t[n];if(n in t||"string"!=typeof n){var r=t[n];return"function"==typeof r?r.bind(t):r}return e.get(t,n,i)}})}function Fp(t){return{on:function(e,n){t[e]=t[e]||[],t[e].indexOf(n)>-1||t[e].push(n)},off:function(e,n){t[e]=t[e]||[];var i=t[e].indexOf(n);-1!==i&&t[e].splice(i,1)}}}var Ip=["db.Geo","db.command","command.aggregate"];function Sp(t,e){return Ip.indexOf("".concat(t,".").concat(e))>-1}function Tp(t){switch(Yc(t=zd(t))){case"array":return t.map((function(t){return Tp(t)}));case"object":return t._internalType===Ap||Object.keys(t).forEach((function(e){t[e]=Tp(t[e])})),t;case"regexp":return{$regexp:{source:t.source,flags:t.flags}};case"date":return{$date:t.toISOString()};default:return t}}function Pp(t){return t&&t.content&&t.content.$method}var Bp=function(){function t(e,n,i){s(this,t),this.content=e,this.prevStage=n||null,this.udb=null,this._database=i}return c(t,[{key:"toJSON",value:function(){for(var t=this,e=[t.content];t.prevStage;)t=t.prevStage,e.push(t.content);return{$db:e.reverse().map((function(t){return{$method:t.$method,$param:Tp(t.$param)}}))}}},{key:"toString",value:function(){return JSON.stringify(this.toJSON())}},{key:"getAction",value:function(){var t=this.toJSON().$db.find((function(t){return"action"===t.$method}));return t&&t.$param&&t.$param[0]}},{key:"getCommand",value:function(){return{$db:this.toJSON().$db.filter((function(t){return"action"!==t.$method}))}}},{key:"isAggregate",get:function(){for(var t=this;t;){var e=Pp(t),n=Pp(t.prevStage);if("aggregate"===e&&"collection"===n||"pipeline"===e)return!0;t=t.prevStage}return!1}},{key:"isCommand",get:function(){for(var t=this;t;){if("command"===Pp(t))return!0;t=t.prevStage}return!1}},{key:"isAggregateCommand",get:function(){for(var t=this;t;){var e=Pp(t),n=Pp(t.prevStage);if("aggregate"===e&&"command"===n)return!0;t=t.prevStage}return!1}},{key:"getNextStageFn",value:function(t){var e=this;return function(){return Np({$method:t,$param:Tp(Array.from(arguments))},e,e._database)}}},{key:"count",get:function(){return this.isAggregate?this.getNextStageFn("count"):function(){return this._send("count",Array.from(arguments))}}},{key:"remove",get:function(){return this.isCommand?this.getNextStageFn("remove"):function(){return this._send("remove",Array.from(arguments))}}},{key:"get",value:function(){return this._send("get",Array.from(arguments))}},{key:"add",get:function(){return this.isCommand?this.getNextStageFn("add"):function(){return this._send("add",Array.from(arguments))}}},{key:"update",value:function(){return this._send("update",Array.from(arguments))}},{key:"end",value:function(){return this._send("end",Array.from(arguments))}},{key:"set",get:function(){return this.isCommand?this.getNextStageFn("set"):function(){throw new Error("JQL禁止使用set方法")}}},{key:"_send",value:function(t,e){var n=this.getAction(),i=this.getCommand();return i.$db.push({$method:t,$param:Tp(e)}),this._database._callCloudFunction({action:n,command:i})}}]),t}();function Np(t,e,n){return Ep(new Bp(t,e,n),{get:function(t,e){var i="db";return t&&t.content&&(i=t.content.$method),Sp(i,e)?Np({$method:e},t,n):function(){return Np({$method:e,$param:Tp(Array.from(arguments))},t,n)}}})}function zp(t){var e=t.path,n=t.method;return function(){function t(){s(this,t),this.param=Array.from(arguments)}return c(t,[{key:"toJSON",value:function(){return{$newDb:[].concat(d(e.map((function(t){return{$method:t}}))),[{$method:n,$param:this.param}])}}},{key:"toString",value:function(){return JSON.stringify(this.toJSON())}}]),t}()}function Op(t){return Ep(new t(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),{get:function(t,e){return Sp("db",e)?Np({$method:e},null,t):function(){return Np({$method:e,$param:Tp(Array.from(arguments))},null,t)}}})}var Mp=function(t){function n(){return s(this,n),e(this,n,arguments)}return i(n,t),c(n,[{key:"_parseResult",value:function(t){return this._isJQL?t.result:t}},{key:"_callCloudFunction",value:function(t){var e=this,n=t.action,i=t.command,r=t.multiCommand,a=t.queryList;function o(t,e){if(r&&a)for(var n=0;n<a.length;n++){var i=a[n];i.udb&&"function"==typeof i.udb.setResult&&(e?i.udb.setResult(e):i.udb.setResult(t.result.dataList[n]))}}var u=this,s=this._isJQL?"databaseForJQL":"database";function l(t){return u._callback("error",[t]),pd(hd(s,"fail"),t).then((function(){return pd(hd(s,"complete"),t)})).then((function(){return o(null,t),Ad(gd,{type:_d,content:t}),Promise.reject(t)}))}var c=pd(hd(s,"invoke")),d=this._uniClient;return c.then((function(){return d.callFunction({name:"DCloud-clientDB",type:"CLIENT_DB",data:{action:n,command:i,multiCommand:r}})})).then((function(t){var n=t.result,i=n.code,r=n.message,a=n.token,c=n.tokenExpired,d=n.systemInfo,f=void 0===d?[]:d;if(f)for(var p=0;p<f.length;p++){var h=f[p],v=h.level,m=h.message,g=h.detail,b=console[v]||console.log,y="[System Info]"+m;g&&(y="".concat(y,"\n详细信息：").concat(g)),b(y)}if(i)return l(new Bd({code:i,message:r,requestId:t.requestId}));t.result.errCode=t.result.errCode||t.result.code,t.result.errMsg=t.result.errMsg||t.result.message,a&&c&&(Md({token:a,tokenExpired:c}),e._callbackAuth("refreshToken",[{token:a,tokenExpired:c}]),e._callback("refreshToken",[{token:a,tokenExpired:c}]),Ad(yd,{token:a,tokenExpired:c}));for(var _=[{prop:"affectedDocs",tips:"affectedDocs不再推荐使用，请使用inserted/deleted/updated/data.length替代"},{prop:"code",tips:"code不再推荐使用，请使用errCode替代"},{prop:"message",tips:"message不再推荐使用，请使用errMsg替代"}],x=function(){var e=_[w],n=e.prop;e.tips;if(n in t.result){var i=t.result[n];Object.defineProperty(t.result,n,{get:function(){return i}})}},w=0;w<_.length;w++)x();return function(t){return pd(hd(s,"success"),t).then((function(){return pd(hd(s,"complete"),t)})).then((function(){o(t,null);var e=u._parseResult(t);return Ad(gd,{type:_d,content:e}),Promise.resolve(e)}))}(t)}),(function(t){return/fc_function_not_found|FUNCTION_NOT_FOUND/g.test(t.message),l(new Bd({code:t.code||"SYSTEM_ERROR",message:t.message,requestId:t.requestId}))}))}}]),n}(function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.uniClient,i=void 0===n?{}:n,r=e.isJQL,a=void 0!==r&&r;s(this,t),this._uniClient=i,this._authCallBacks={},this._dbCallBacks={},i._isDefault&&(this._dbCallBacks=sd("_globalUniCloudDatabaseCallback")),a||(this.auth=Fp(this._authCallBacks)),this._isJQL=a,Object.assign(this,Fp(this._dbCallBacks)),this.env=Ep({},{get:function(t,e){return{$env:e}}}),this.Geo=Ep({},{get:function(t,e){return zp({path:["Geo"],method:e})}}),this.serverDate=zp({path:[],method:"serverDate"}),this.RegExp=zp({path:[],method:"RegExp"})}return c(t,[{key:"getCloudEnv",value:function(t){if("string"!=typeof t||!t.trim())throw new Error("getCloudEnv参数错误");return{$env:t.replace("$cloudEnv_","")}}},{key:"_callback",value:function(t,e){var n=this._dbCallBacks;n[t]&&n[t].forEach((function(t){t.apply(void 0,d(e))}))}},{key:"_callbackAuth",value:function(t,e){var n=this._authCallBacks;n[t]&&n[t].forEach((function(t){t.apply(void 0,d(e))}))}},{key:"multiSend",value:function(){var t=Array.from(arguments),e=t.map((function(t){var e=t.getAction(),n=t.getCommand();if("getTemp"!==n.$db[n.$db.length-1].$method)throw new Error("multiSend只支持子命令内使用getTemp");return{action:e,command:n}}));return this._callCloudFunction({multiCommand:e,queryList:t})}}]),t}()),Lp="token无效，跳转登录页面",jp="token过期，跳转登录页面",Up={TOKEN_INVALID_TOKEN_EXPIRED:jp,TOKEN_INVALID_INVALID_CLIENTID:Lp,TOKEN_INVALID:Lp,TOKEN_INVALID_WRONG_TOKEN:Lp,TOKEN_INVALID_ANONYMOUS_USER:Lp},Rp={"uni-id-token-expired":jp,"uni-id-check-token-failed":Lp,"uni-id-token-not-exist":Lp,"uni-id-check-device-feature-failed":Lp};function qp(t,e){return(t?"".concat(t,"/").concat(e):e).replace(/^\//,"")}function Vp(){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",e=[],n=[];return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((function(i){!0===i.needLogin?e.push(qp(t,i.path)):!1===i.needLogin&&n.push(qp(t,i.path))})),{needLoginPage:e,notNeedLoginPage:n}}function $p(t){return t.split("?")[0].replace(/^\//,"")}function Kp(){return function(t){var e=t&&t.$page&&t.$page.fullPath||"";return e?("/"!==e.charAt(0)&&(e="/"+e),e):e}(function(){var t=Ie();return t[t.length-1]}())}function Hp(){return $p(Kp())}function Wp(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t)return!1;if(!(e&&e.list&&e.list.length))return!1;var n=e.list,i=$p(t);return n.some((function(t){return t.pagePath===i}))}var Jp,Zp=!!Uc.uniIdRouter,Yp=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Uc,e=t.pages,n=void 0===e?[]:e,i=t.subPackages,r=void 0===i?[]:i,a=t.uniIdRouter,o=void 0===a?{}:a,u=t.tabBar,s=void 0===u?{}:u,l=o.loginPage,c=o.needLogin,f=void 0===c?[]:c,p=o.resToLogin,h=void 0===p||p,v=Vp(n),m=v.needLoginPage,g=v.notNeedLoginPage,b=function(){var t=[],e=[];return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((function(n){var i=n.root,r=n.pages,a=Vp(void 0===r?[]:r,i),o=a.needLoginPage,u=a.notNeedLoginPage;t.push.apply(t,d(o)),e.push.apply(e,d(u))})),{needLoginPage:t,notNeedLoginPage:e}}(r),y=b.needLoginPage,_=b.notNeedLoginPage;return{loginPage:l,routerNeedLogin:f,resToLogin:h,needLoginPage:[].concat(d(m),d(y)),notNeedLoginPage:[].concat(d(g),d(_)),loginPageInTabBar:Wp(l,s)}}(),Gp=Yp.loginPage,Qp=Yp.routerNeedLogin,Xp=Yp.resToLogin,th=Yp.needLoginPage,eh=Yp.notNeedLoginPage,nh=Yp.loginPageInTabBar;if(th.indexOf(Gp)>-1)throw new Error("Login page [".concat(Gp,'] should not be "needLogin", please check your pages.json'));function ih(e){var n=Hp();if("/"===e.charAt(0))return e;var i=t(e.split("?"),2),r=i[0],a=i[1],o=r.replace(/^\//,"").split("/"),u=n.split("/");u.pop();for(var s=0;s<o.length;s++){var l=o[s];".."===l?u.pop():"."!==l&&u.push(l)}return""===u[0]&&u.shift(),"/"+u.join("/")+(a?"?"+a:"")}function rh(t){var e=$p(t.redirect),n=$p(Gp);return Hp()!==n&&e!==n}function ah(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.api,n=t.redirect;if(n&&rh({redirect:n})){var i=function(t,e){return"/"!==t.charAt(0)&&(t="/"+t),e?t.indexOf("?")>-1?t+"&uniIdRedirectUrl=".concat(encodeURIComponent(e)):t+"?uniIdRedirectUrl=".concat(encodeURIComponent(e)):t}(Gp,n);nh?"navigateTo"!==e&&"redirectTo"!==e||(e="switchTab"):"switchTab"===e&&(e="navigateTo");var r={navigateTo:Ve,redirectTo:$e,switchTab:Ke,reLaunch:He};setTimeout((function(){r[e]({url:i})}))}}function oh(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).url,e={abortLoginPageJump:!1,autoToLoginPage:!1},n=function(){var t,e=Od(),n=e.token,i=e.tokenExpired;if(n){if(i<Date.now()){var r="uni-id-token-expired";t={errCode:r,errMsg:Rp[r]}}}else{var a="uni-id-check-token-failed";t={errCode:a,errMsg:Rp[a]}}return t}();if(function(t){var e=$p(ih(t));return!(eh.indexOf(e)>-1)&&(th.indexOf(e)>-1||Qp.some((function(e){return function(t,e){return new RegExp(e).test(t)}(t,e)})))}(t)&&n){if(n.uniIdRedirectUrl=t,Dd(bd).length>0)return setTimeout((function(){Ad(bd,n)}),0),e.abortLoginPageJump=!0,e;e.autoToLoginPage=!0}return e}function uh(){!function(){var t=Kp(),e=oh({url:t}),n=e.abortLoginPageJump,i=e.autoToLoginPage;n||i&&ah({api:"redirectTo",redirect:t})}();for(var t=["navigateTo","redirectTo","reLaunch","switchTab"],e=function(){var e=t[n];Se(e,{invoke:function(t){var n=oh({url:t.url}),i=n.abortLoginPageJump,r=n.autoToLoginPage;return i?t:r?(ah({api:e,redirect:ih(t.url)}),!1):t}})},n=0;n<t.length;n++)e()}function sh(){this.onResponse((function(t){var e=t.type,n=t.content,i=!1;switch(e){case"cloudobject":i=function(t){return"object"==w(t)&&(t||{}).errCode in Rp}(n);break;case"clientdb":i=function(t){return"object"==w(t)&&(t||{}).errCode in Up}(n)}i&&function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=Dd(bd);Id().then((function(){var n=Kp();if(n&&rh({redirect:n}))return e.length>0?Ad(bd,Object.assign({uniIdRedirectUrl:n},t)):void(Gp&&ah({api:"navigateTo",redirect:n}))}))}(n)}))}function lh(t){!function(t){t.onResponse=function(t){kd(gd,t)},t.offResponse=function(t){Cd(gd,t)}}(t),function(t){t.onNeedLogin=function(t){kd(bd,t)},t.offNeedLogin=function(t){Cd(bd,t)},Zp&&(sd("_globalUniCloudStatus").needLoginInit||(sd("_globalUniCloudStatus").needLoginInit=!0,Id().then((function(){uh.call(t)})),Xp&&sh.call(t)))}(t),function(t){t.onRefreshToken=function(t){kd(yd,t)},t.offRefreshToken=function(t){Cd(yd,t)}}(t)}var ch="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",dh=/^(?:[A-Za-z\d+/]{4})*?(?:[A-Za-z\d+/]{2}(?:==)?|[A-Za-z\d+/]{3}=?)?$/;function fh(){var t,e,n=Od().token||"",i=n.split(".");if(!n||3!==i.length)return{uid:null,role:[],permission:[],tokenExpired:0};try{t=JSON.parse((e=i[1],decodeURIComponent(Jp(e).split("").map((function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join(""))))}catch(n){throw new Error("获取当前用户信息出错，详细错误信息为："+n.message)}return t.tokenExpired=1e3*t.exp,delete t.exp,delete t.iat,t}Jp="function"!=typeof atob?function(t){if(t=String(t).replace(/[\t\n\f\r ]+/g,""),!dh.test(t))throw new Error("Failed to execute 'atob' on 'Window': The string to be decoded is not correctly encoded.");var e;t+="==".slice(2-(3&t.length));for(var n,i,r="",a=0;a<t.length;)e=ch.indexOf(t.charAt(a++))<<18|ch.indexOf(t.charAt(a++))<<12|(n=ch.indexOf(t.charAt(a++)))<<6|(i=ch.indexOf(t.charAt(a++))),r+=64===n?String.fromCharCode(e>>16&255):64===i?String.fromCharCode(e>>16&255,e>>8&255):String.fromCharCode(e>>16&255,e>>8&255,255&e);return r}:atob;var ph=Rc((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n="chooseAndUploadFile:ok",i="chooseAndUploadFile:fail";function r(t,e){return t.tempFiles.forEach((function(t,n){t.name||(t.name=t.path.substring(t.path.lastIndexOf("/")+1)),e&&(t.fileType=e),t.cloudPath=Date.now()+"_"+n+t.name.substring(t.name.lastIndexOf("."))})),t.tempFilePaths||(t.tempFilePaths=t.tempFiles.map((function(t){return t.path}))),t}function a(t,e,i){var r=i.onChooseFile,a=i.onUploadProgress;return e.then((function(t){if(r){var e=r(t);if(void 0!==e)return Promise.resolve(e).then((function(e){return void 0===e?t:e}))}return t})).then((function(e){return!1===e?{errMsg:n,tempFilePaths:[],tempFiles:[]}:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,r=arguments.length>3?arguments[3]:void 0;(e=Object.assign({},e)).errMsg=n;var a=e.tempFiles,o=a.length,u=0;return new Promise((function(n){for(;u<i;)s();function s(){var i=u++;if(i>=o)!a.find((function(t){return!t.url&&!t.errMsg}))&&n(e);else{var l=a[i];t.uploadFile({provider:l.provider,filePath:l.path,cloudPath:l.cloudPath,fileType:l.fileType,cloudPathAsRealPath:l.cloudPathAsRealPath,onUploadProgress:function(t){t.index=i,t.tempFile=l,t.tempFilePath=l.path,r&&r(t)}}).then((function(t){l.url=t.fileID,i<o&&s()})).catch((function(t){l.errMsg=t.errMsg||t.message,i<o&&s()}))}}}))}(t,e,5,a)}))}e.initChooseAndUploadFile=function(t){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"all"};return"image"===e.type?a(t,function(t){var e=t.count,n=t.sizeType,a=t.sourceType,o=void 0===a?["album","camera"]:a,u=t.extension;return new Promise((function(t,a){Ee({count:e,sizeType:n,sourceType:o,extension:u,success:function(e){t(r(e,"image"))},fail:function(t){a({errMsg:t.errMsg.replace("chooseImage:fail",i)})}})}))}(e),e):"video"===e.type?a(t,function(t){var e=t.camera,n=t.compressed,a=t.maxDuration,o=t.sourceType,u=void 0===o?["album","camera"]:o,s=t.extension;return new Promise((function(t,o){Fe({camera:e,compressed:n,maxDuration:a,sourceType:u,extension:s,success:function(e){var n=e.tempFilePath,i=e.duration,a=e.size,o=e.height,u=e.width;t(r({errMsg:"chooseVideo:ok",tempFilePaths:[n],tempFiles:[{name:e.tempFile&&e.tempFile.name||"",path:n,size:a,type:e.tempFile&&e.tempFile.type||"",width:u,height:o,duration:i,fileType:"video",cloudPath:""}]},"video"))},fail:function(t){o({errMsg:t.errMsg.replace("chooseVideo:fail",i)})}})}))}(e),e):a(t,function(t){var e=t.count,n=t.extension;return new Promise((function(t,a){var o=Te;if("undefined"!=typeof wx&&"function"==typeof wx.chooseMessageFile&&(o=wx.chooseMessageFile),"function"!=typeof o)return a({errMsg:i+" 请指定 type 类型，该平台仅支持选择 image 或 video。"});o({type:"all",count:e,extension:n,success:function(e){t(r(e))},fail:function(t){a({errMsg:t.errMsg.replace("chooseFile:fail",i)})}})}))}(e),e)}}})),hh=function(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}(ph);function vh(t){return{props:{localdata:{type:Array,default:function(){return[]}},options:{type:[Object,Array],default:function(){return{}}},spaceInfo:{type:Object,default:function(){return{}}},collection:{type:[String,Array],default:""},action:{type:String,default:""},field:{type:String,default:""},orderby:{type:String,default:""},where:{type:[String,Object],default:""},pageData:{type:String,default:"add"},pageCurrent:{type:Number,default:1},pageSize:{type:Number,default:20},getcount:{type:[Boolean,String],default:!1},gettree:{type:[Boolean,String],default:!1},gettreepath:{type:[Boolean,String],default:!1},startwith:{type:String,default:""},limitlevel:{type:Number,default:10},groupby:{type:String,default:""},groupField:{type:String,default:""},distinct:{type:[Boolean,String],default:!1},foreignKey:{type:String,default:""},loadtime:{type:String,default:"auto"},manual:{type:Boolean,default:!1}},data:function(){return{mixinDatacomLoading:!1,mixinDatacomHasMore:!1,mixinDatacomResData:[],mixinDatacomErrorMessage:"",mixinDatacomPage:{},mixinDatacomError:null}},created:function(){var t=this;this.mixinDatacomPage={current:this.pageCurrent,size:this.pageSize,count:0},this.$watch((function(){var e=[];return["pageCurrent","pageSize","localdata","collection","action","field","orderby","where","getont","getcount","gettree","groupby","groupField","distinct"].forEach((function(n){e.push(t[n])})),e}),(function(e,n){if("manual"!==t.loadtime){for(var i=!1,r=[],a=2;a<e.length;a++)e[a]!==n[a]&&(r.push(e[a]),i=!0);e[0]!==n[0]&&(t.mixinDatacomPage.current=t.pageCurrent),t.mixinDatacomPage.size=t.pageSize,t.onMixinDatacomPropsChange(i,r)}}))},methods:{onMixinDatacomPropsChange:function(t,e){},mixinDatacomEasyGet:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.getone,i=void 0!==n&&n,r=e.success,a=e.fail;this.mixinDatacomLoading||(this.mixinDatacomLoading=!0,this.mixinDatacomErrorMessage="",this.mixinDatacomError=null,this.mixinDatacomGet().then((function(e){t.mixinDatacomLoading=!1;var n=e.result,a=n.data,o=n.count;t.getcount&&(t.mixinDatacomPage.count=o),t.mixinDatacomHasMore=a.length<t.pageSize;var u=i?a.length?a[0]:void 0:a;t.mixinDatacomResData=u,r&&r(u)})).catch((function(e){t.mixinDatacomLoading=!1,t.mixinDatacomErrorMessage=e,t.mixinDatacomError=e,a&&a(e)})))},mixinDatacomGet:function(){var e,n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i=i||{},n="undefined"!=typeof __uniX&&__uniX?t.databaseForJQL(this.spaceInfo):t.database(this.spaceInfo);var r=i.action||this.action;r&&(n=n.action(r));var a=i.collection||this.collection;n=Array.isArray(a)?(e=n).collection.apply(e,d(a)):n.collection(a);var o=i.where||this.where;o&&Object.keys(o).length&&(n=n.where(o));var u=i.field||this.field;u&&(n=n.field(u));var s=i.foreignKey||this.foreignKey;s&&(n=n.foreignKey(s));var l=i.groupby||this.groupby;l&&(n=n.groupBy(l));var c=i.groupField||this.groupField;c&&(n=n.groupField(c)),!0===(void 0!==i.distinct?i.distinct:this.distinct)&&(n=n.distinct());var f=i.orderby||this.orderby;f&&(n=n.orderBy(f));var p=void 0!==i.pageCurrent?i.pageCurrent:this.mixinDatacomPage.current,h=void 0!==i.pageSize?i.pageSize:this.mixinDatacomPage.size,v=void 0!==i.getcount?i.getcount:this.getcount,m=void 0!==i.gettree?i.gettree:this.gettree,g=void 0!==i.gettreepath?i.gettreepath:this.gettreepath,b={getCount:v},y={limitLevel:void 0!==i.limitlevel?i.limitlevel:this.limitlevel,startWith:void 0!==i.startwith?i.startwith:this.startwith};return m&&(b.getTree=y),g&&(b.getTreePath=y),n=n.skip(h*(p-1)).limit(h).get(b)}}}}function mh(t){return sd("_globalUniCloudSecureNetworkCache__{spaceId}".replace("{spaceId}",t.config.spaceId))}function gh(){return bh.apply(this,arguments)}function bh(){return bh=x(y().mark((function t(){var e,n,i=arguments;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:throw(e=i.length>0&&void 0!==i[0]?i[0]:{}).openid,n=e.callLoginByWeixin,void 0!==n&&n,mh(this),new Error("[SecureNetwork] API `initSecureNetworkByWeixin` is not supported on platform `".concat(ad,"`"));case 3:case"end":return t.stop()}}),t,this)}))),bh.apply(this,arguments)}function yh(t){return _h.apply(this,arguments)}function _h(){return _h=x(y().mark((function t(e){var n;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=mh(this),t.abrupt("return",(n.initPromise||(n.initPromise=gh.call(this,e).then((function(t){return t})).catch((function(t){throw delete n.initPromise,t}))),n.initPromise));case 2:case"end":return t.stop()}}),t,this)}))),_h.apply(this,arguments)}function xh(t){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.openid,i=e.callLoginByWeixin,r=void 0!==i&&i;return yh.call(t,{openid:n,callLoginByWeixin:r})}}function wh(t){var e={getSystemInfo:We,getPushClientId:Je};return function(n){return new Promise((function(i,r){e[t](m(m({},n),{},{success:function(t){i(t)},fail:function(t){r(t)}}))}))}}var Dh=function(r){function a(){var t;return s(this,a),(t=e(this,a))._uniPushMessageCallback=t._receivePushMessage.bind(n(t)),t._currentMessageId=-1,t._payloadQueue=[],t}var o;return i(a,r),c(a,[{key:"init",value:function(){var e=this;return Promise.all([wh("getSystemInfo")(),wh("getPushClientId")()]).then((function(){var n=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],2),i=n[0],r=(void 0===i?{}:i).appId,a=n[1],o=(void 0===a?{}:a).cid;if(!r)throw new Error("Invalid appId, please check the manifest.json file");if(!o)throw new Error("Invalid push client id");e._appId=r,e._pushClientId=o,e._seqId=Date.now()+"-"+Math.floor(9e5*Math.random()+1e5),e.emit("open"),e._initMessageListener()}),(function(t){throw e.emit("error",t),e.close(),t}))}},{key:"open",value:(o=x(y().mark((function t(){return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.init());case 1:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"_isUniCloudSSE",value:function(t){if("receive"!==t.type)return!1;var e=t&&t.data&&t.data.payload;return!(!e||"UNI_CLOUD_SSE"!==e.channel||e.seqId!==this._seqId)}},{key:"_receivePushMessage",value:function(t){if(this._isUniCloudSSE(t)){var e=t&&t.data&&t.data.payload,n=e.action,i=e.messageId,r=e.message;this._payloadQueue.push({action:n,messageId:i,message:r}),this._consumMessage()}}},{key:"_consumMessage",value:function(){for(var t=this;;){var e=this._payloadQueue.find((function(e){return e.messageId===t._currentMessageId+1}));if(!e)break;this._currentMessageId++,this._parseMessagePayload(e)}}},{key:"_parseMessagePayload",value:function(t){var e=t.action,n=t.messageId,i=t.message;"end"===e?this._end({messageId:n,message:i}):"message"===e&&this._appendMessage({messageId:n,message:i})}},{key:"_appendMessage",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=(t.messageId,t.message);this.emit("message",e)}},{key:"_end",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=(t.messageId,t.message);this.emit("end",e),this.close()}},{key:"_initMessageListener",value:function(){ze(this._uniPushMessageCallback)}},{key:"_destroy",value:function(){Oe(this._uniPushMessageCallback)}},{key:"toJSON",value:function(){return{appId:this._appId,pushClientId:this._pushClientId,seqId:this._seqId}}},{key:"close",value:function(){this._destroy(),this.emit("close")}}]),a}(function(){function t(){s(this,t),this._callback={}}return c(t,[{key:"addListener",value:function(t,e){this._callback[t]||(this._callback[t]=[]),this._callback[t].push(e)}},{key:"on",value:function(t,e){return this.addListener(t,e)}},{key:"removeListener",value:function(t,e){if(!e)throw new Error('The "listener" argument must be of type function. Received undefined');var n=this._callback[t];if(n){var i=function(t,e){for(var n=t.length-1;n>=0;n--)if(t[n]===e)return n;return-1}(n,e);n.splice(i,1)}}},{key:"off",value:function(t,e){return this.removeListener(t,e)}},{key:"removeAllListener",value:function(t){delete this._callback[t]}},{key:"emit",value:function(t){for(var e=this._callback[t],n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];if(e)for(var a=0;a<e.length;a++)e[a].apply(e,i)}}]),t}());var kh={tcb:Xf,tencent:Xf,aliyun:Kd,private:ep,alipay:lp},Ch=new(function(){function t(){s(this,t)}return c(t,[{key:"init",value:function(t){var e={},n=kh[t.provider];if(!n)throw new Error("未提供正确的provider参数");return function(t){t._initPromiseHub||(t._initPromiseHub=new nd({createPromise:function(){var e=Promise.resolve();e=new Promise((function(t){setTimeout((function(){t()}),1)}));var n=t.auth();return e.then((function(){return n.getLoginState()})).then((function(t){return t?Promise.resolve():n.signInAnonymously()}))}}))}(e=n.init(t)),Cp(e),function(t){var e=t.uploadFile;t.uploadFile=function(t){return e.call(this,t)}}(e),function(t){t.database=function(e){if(e&&Object.keys(e).length>0)return t.init(e).database();if(this._database)return this._database;var n=Op(Mp,{uniClient:t});return this._database=n,n},t.databaseForJQL=function(e){if(e&&Object.keys(e).length>0)return t.init(e).databaseForJQL();if(this._databaseForJQL)return this._databaseForJQL;var n=Op(Mp,{uniClient:t,isJQL:!0});return this._databaseForJQL=n,n}}(e),function(t){t.getCurrentUserInfo=fh,t.chooseAndUploadFile=hh.initChooseAndUploadFile(t),Object.assign(t,{get mixinDatacom(){return vh(t)}}),t.SSEChannel=Dh,t.initSecureNetworkByWeixin=xh(t),t.importObject=function(t){return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.customUI=e.customUI||t.customUI,t.parseSystemError=e.parseSystemError||t.parseSystemError,Object.assign(t.loadingOptions,e.loadingOptions),Object.assign(t.errorOptions,e.errorOptions),"object"==w(e.secretMethods)&&(t.secretMethods=e.secretMethods),t}({customUI:!1,loadingOptions:{title:"加载中...",mask:!0},errorOptions:{type:"modal",retry:!1}},n);var i=n,r=i.customUI,a=i.loadingOptions,o=i.errorOptions,u=i.parseSystemError,s=!r;return new Proxy({},{get:function(i,r){switch(r){case"toString":return"[object UniCloudObject]";case"toJSON":return{}}return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.fn,n=t.interceptorName,i=t.getCallbackArgs;return x(y().mark((function t(){var r,a,o,u,s,l,c=arguments;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r=c.length,a=new Array(r),o=0;o<r;o++)a[o]=c[o];return u=i?i({params:a}):{},t.prev=2,t.next=5,pd(hd(n,"invoke"),m({},u));case 5:return t.next=7,e.apply(void 0,a);case 7:return s=t.sent,t.next=10,pd(hd(n,"success"),m(m({},u),{},{result:s}));case 10:return t.abrupt("return",s);case 13:return t.prev=13,t.t0=t.catch(2),l=t.t0,t.next=18,pd(hd(n,"fail"),m(m({},u),{},{error:l}));case 18:throw l;case 19:return t.prev=19,t.next=22,pd(hd(n,"complete"),m(m({},u),{},l?{error:l}:{result:s}));case 22:return t.finish(19);case 23:case"end":return t.stop()}}),t,null,[[2,13,19,23]])})))}({fn:function(){var i=x(y().mark((function i(){var c,d,f,p,h,v,g,b,_,D,k,C,A,E,F,I=arguments;return y().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:for(s&&Pe({title:a.title,mask:a.mask}),d=I.length,f=new Array(d),p=0;p<d;p++)f[p]=I[p];return h={name:e,type:"OBJECT",data:{method:r,params:f}},"object"==w(n.secretMethods)&&function(t,e){var n=e.data.method,i=t.secretMethods||{},r=i[n]||i["*"];r&&(e.secretType=r)}(n,h),v=!1,i.prev=5,i.next=8,t.callFunction(h);case 8:c=i.sent,i.next=14;break;case 11:i.prev=11,i.t0=i.catch(5),v=!0,c={result:new Bd(i.t0)};case 14:if(g=c.result||{},b=g.errSubject,_=g.errCode,D=g.errMsg,k=g.newToken,s&&Be(),k&&k.token&&k.tokenExpired&&(Md(k),Ad(yd,m({},k))),!_){i.next=39;break}if(C=D,!v||!u){i.next=24;break}return i.next=20,u({objectName:e,methodName:r,params:f,errSubject:b,errCode:_,errMsg:D});case 20:if(i.t1=i.sent.errMsg,i.t1){i.next=23;break}i.t1=D;case 23:C=i.t1;case 24:if(!s){i.next=37;break}if("toast"!==o.type){i.next=29;break}uni.showToast({title:C,icon:"none"}),i.next=37;break;case 29:if("modal"===o.type){i.next=31;break}throw new Error("Invalid errorOptions.type: ".concat(o.type));case 31:return i.next=33,x(y().mark((function t(){var e,n,i,r,a,o,u=arguments;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=(e=u.length>0&&void 0!==u[0]?u[0]:{}).title,i=e.content,r=e.showCancel,a=e.cancelText,o=e.confirmText,t.abrupt("return",new Promise((function(t,e){Ne({title:n,content:i,showCancel:r,cancelText:a,confirmText:o,success:function(e){t(e)},fail:function(){t({confirm:!1,cancel:!0})}})})));case 2:case"end":return t.stop()}}),t)})))({title:"提示",content:C,showCancel:o.retry,cancelText:"取消",confirmText:o.retry?"重试":"确定"});case 33:if(A=i.sent,E=A.confirm,!o.retry||!E){i.next=37;break}return i.abrupt("return",l.apply(void 0,f));case 37:throw(F=new Bd({subject:b,code:_,message:D,requestId:c.requestId})).detail=c.result,Ad(gd,{type:wd,content:F}),F;case 39:return i.abrupt("return",(Ad(gd,{type:wd,content:c.result}),c.result));case 40:case"end":return i.stop()}}),i,null,[[5,11]])})));function l(){return i.apply(this,arguments)}return l}(),interceptorName:"callObject",getCallbackArgs:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).params;return{objectName:e,methodName:r,params:t}}})}})}}(t)}(e),["callFunction","uploadFile","deleteFile","getTempFileURL","downloadFile","chooseAndUploadFile"].forEach((function(t){if(e[t]){var n=e[t];e[t]=function(){return n.apply(e,Array.from(arguments))},e[t]=function(t,e){return function(n){var i=this,r=!1;if("callFunction"===e){var a=n&&n.type||Wc;r=a!==Wc}var o="callFunction"===e&&!r,u=this._initPromiseHub.exec(),s=Sd(n=n||{}),l=s.success,c=s.fail,d=s.complete,f=u.then((function(){return r?Promise.resolve():pd(hd(e,"invoke"),n)})).then((function(){return t.call(i,n)})).then((function(t){return r?Promise.resolve(t):pd(hd(e,"success"),t).then((function(){return pd(hd(e,"complete"),t)})).then((function(){return o&&Ad(gd,{type:xd,content:t}),Promise.resolve(t)}))}),(function(t){return r?Promise.reject(t):pd(hd(e,"fail"),t).then((function(){return pd(hd(e,"complete"),t)})).then((function(){return Ad(gd,{type:xd,content:t}),Promise.reject(t)}))}));if(!(l||c||d))return f;f.then((function(t){l&&l(t),d&&d(t),o&&Ad(gd,{type:xd,content:t})}),(function(t){c&&c(t),d&&d(t),o&&Ad(gd,{type:xd,content:t})}))}}(e[t],t).bind(e)}})),e.init=this.init,e}}]),t}());!function(){var t=od,e={};if(t&&1===t.length)e=t[0],(Ch=Ch.init(e))._isDefault=!0;else{var n;n=t&&t.length>0?"应用有多个服务空间，请通过uniCloud.init方法指定要使用的服务空间":"uni-app cli项目内使用uniCloud需要使用HBuilderX的运行菜单运行项目，且需要在uniCloud目录关联服务空间",["auth","callFunction","uploadFile","deleteFile","getTempFileURL","downloadFile","database","getCurrentUSerInfo","importObject"].forEach((function(t){Ch[t]=function(){return Promise.reject(new Bd({code:"SYS_ERR",message:n}))}}))}Object.assign(Ch,{get mixinDatacom(){return vh(Ch)}}),lh(Ch),Ch.addInterceptor=dd,Ch.removeInterceptor=fd,Ch.interceptObject=vd}();var Ah={name:"uni-data-select",mixins:[Ch.mixinDatacom||{}],props:{localdata:{type:Array,default:function(){return[]}},value:{type:[String,Number],default:""},modelValue:{type:[String,Number],default:""},label:{type:String,default:""},placeholder:{type:String,default:"请选择"},emptyTips:{type:String,default:"无选项"},clear:{type:Boolean,default:!0},defItem:{type:Number,default:0},disabled:{type:Boolean,default:!1},format:{type:String,default:""}},data:function(){return{showSelector:!1,current:"",mixinDatacomResData:[],apps:[],channels:[],cacheKey:"uni-data-select-lastSelectedValue"}},created:function(){var t=this;this.debounceGet=this.debounce((function(){t.query()}),300),this.collection&&!this.localdata.length&&this.debounceGet()},computed:{typePlaceholder:function(){var t=this.placeholder,e={"opendb-stat-app-versions":"版本","opendb-app-channels":"渠道","opendb-app-list":"应用"}[this.collection];return e?t+e:t},valueCom:function(){return this.modelValue}},watch:{localdata:{immediate:!0,handler:function(t,e){Array.isArray(t)&&e!==t&&(this.mixinDatacomResData=t)}},valueCom:function(t,e){this.initDefVal()},mixinDatacomResData:{immediate:!0,handler:function(t){t.length&&this.initDefVal()}}},methods:{debounce:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=null;return function(){for(var i=this,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];n&&clearTimeout(n),n=setTimeout((function(){t.apply(i,a)}),e)}},query:function(){this.mixinDatacomEasyGet()},onMixinDatacomPropsChange:function(){this.collection&&this.debounceGet()},initDefVal:function(){var t="";if(!this.valueCom&&0!==this.valueCom||this.isDisabled(this.valueCom)){var e;if(this.collection&&(e=this.getCache()),e||0===e)t=e;else{var n="";this.defItem>0&&this.defItem<=this.mixinDatacomResData.length&&(n=this.mixinDatacomResData[this.defItem-1].value),t=n}(t||0===t)&&this.emit(t)}else t=this.valueCom;var i=this.mixinDatacomResData.find((function(e){return e.value===t}));this.current=i?this.formatItemName(i):""},isDisabled:function(t){var e=!1;return this.mixinDatacomResData.forEach((function(n){n.value===t&&(e=n.disable)})),e},clearVal:function(){this.emit(""),this.collection&&this.removeCache()},change:function(t){t.disable||(this.showSelector=!1,this.current=this.formatItemName(t),this.emit(t.value))},emit:function(t){this.$emit("input",t),this.$emit("update:modelValue",t),this.$emit("change",t),this.collection&&this.setCache(t)},toggleSelector:function(){this.disabled||(this.showSelector=!this.showSelector)},formatItemName:function(t){var e=t.text,n=t.value,i=t.channel_code;if(i=i?"(".concat(i,")"):"",this.format){var r="";for(var a in r=this.format,t)r=r.replace(new RegExp("{".concat(a,"}"),"g"),t[a]);return r}return this.collection.indexOf("app-list")>0?"".concat(e,"(").concat(n,")"):e||"未命名".concat(i)},getLoadData:function(){return this.mixinDatacomResData},getCurrentCacheKey:function(){return this.collection},getCache:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getCurrentCacheKey();return(Ue(this.cacheKey)||{})[t]},setCache:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getCurrentCacheKey(),n=Ue(this.cacheKey)||{};n[e]=t,je(this.cacheKey,n)},removeCache:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getCurrentCacheKey(),e=Ue(this.cacheKey)||{};delete e[t],je(this.cacheKey,e)}}};var Eh=H(Ah,[["render",function(t,e,n,i,r,a){var o=rt,u=Z(G("uni-icons"),jt),s=At,l=bt;return Q(),X(o,{class:"uni-stat__select"},{default:tt((function(){return[n.label?(Q(),vt("span",{key:0,class:"uni-label-text hide-on-phone"},ct(n.label+"："),1)):Et("",!0),et(o,{class:it(["uni-stat-box",{"uni-stat__actived":r.current}])},{default:tt((function(){return[et(o,{class:it(["uni-select",{"uni-select--disabled":n.disabled}])},{default:tt((function(){return[et(o,{class:"uni-select__input-box",onClick:a.toggleSelector},{default:tt((function(){return[r.current?(Q(),X(o,{key:0,class:"uni-select__input-text"},{default:tt((function(){return[lt(ct(r.current),1)]})),_:1})):(Q(),X(o,{key:1,class:"uni-select__input-text uni-select__input-placeholder"},{default:tt((function(){return[lt(ct(a.typePlaceholder),1)]})),_:1})),r.current&&n.clear&&!n.disabled?(Q(),X(o,{key:2,onClick:Ut(a.clearVal,["stop"])},{default:tt((function(){return[et(u,{type:"clear",color:"#c0c4cc",size:"24"})]})),_:1},8,["onClick"])):(Q(),X(o,{key:3},{default:tt((function(){return[et(u,{type:r.showSelector?"top":"bottom",size:"14",color:"#999"},null,8,["type"])]})),_:1}))]})),_:1},8,["onClick"]),r.showSelector?(Q(),X(o,{key:0,class:"uni-select--mask",onClick:a.toggleSelector},null,8,["onClick"])):Et("",!0),r.showSelector?(Q(),X(o,{key:1,class:"uni-select__selector"},{default:tt((function(){return[et(o,{class:"uni-popper__arrow"}),et(l,{"scroll-y":"true",class:"uni-select__selector-scroll"},{default:tt((function(){return[0===r.mixinDatacomResData.length?(Q(),X(o,{key:0,class:"uni-select__selector-empty"},{default:tt((function(){return[et(s,null,{default:tt((function(){return[lt(ct(n.emptyTips),1)]})),_:1})]})),_:1})):(Q(!0),vt(mt,{key:1},gt(r.mixinDatacomResData,(function(t,e){return Q(),X(o,{class:"uni-select__selector-item",key:e,onClick:function(e){return a.change(t)}},{default:tt((function(){return[et(s,{class:it({"uni-select__selector__disabled":t.disable})},{default:tt((function(){return[lt(ct(a.formatItemName(t)),1)]})),_:2},1032,["class"])]})),_:2},1032,["onClick"])})),128))]})),_:1})]})),_:1})):Et("",!0)]})),_:1},8,["class"])]})),_:1},8,["class"])]})),_:1})}],["__scopeId","data-v-6425133e"]]),Fh=Ge({en:{"uni-pagination.prevText":"prev","uni-pagination.nextText":"next","uni-pagination.piecePerPage":"piece/page"},es:{"uni-pagination.prevText":"anterior","uni-pagination.nextText":"prxima","uni-pagination.piecePerPage":"Art��culo/P��gina"},fr:{"uni-pagination.prevText":"précédente","uni-pagination.nextText":"suivante","uni-pagination.piecePerPage":"Articles/Pages"},"zh-Hans":{"uni-pagination.prevText":"上一页","uni-pagination.nextText":"下一页","uni-pagination.piecePerPage":"条/页"},"zh-Hant":{"uni-pagination.prevText":"上一頁","uni-pagination.nextText":"下一頁","uni-pagination.piecePerPage":"條/頁"}}).t,Ih={name:"UniPagination",emits:["update:modelValue","input","change","pageSizeChange"],props:{value:{type:[Number,String],default:1},modelValue:{type:[Number,String],default:1},prevText:{type:String},nextText:{type:String},piecePerPageText:{type:String},current:{type:[Number,String],default:1},total:{type:[Number,String],default:0},pageSize:{type:[Number,String],default:10},showIcon:{type:[Boolean,String],default:!1},showPageSize:{type:[Boolean,String],default:!1},pagerCount:{type:Number,default:7},pageSizeRange:{type:Array,default:function(){return[20,50,100,500]}}},data:function(){return{pageSizeIndex:0,currentIndex:1,paperData:[],pickerShow:!1}},computed:{piecePerPage:function(){return this.piecePerPageText||Fh("uni-pagination.piecePerPage")},prevPageText:function(){return this.prevText||Fh("uni-pagination.prevText")},nextPageText:function(){return this.nextText||Fh("uni-pagination.nextText")},maxPage:function(){var t=1,e=Number(this.total),n=Number(this.pageSize);return e&&n&&(t=Math.ceil(e/n)),t},paper:function(){for(var t=this.currentIndex,e=this.pagerCount,n=this.total,i=this.pageSize,r=[],a=[],o=Math.ceil(n/i),u=0;u<o;u++)r.push(u+1);a.push(1);var s=r[r.length-(e+1)/2];return r.forEach((function(n,i){(e+1)/2>=t?n<e+1&&n>1&&a.push(n):t+2<=s?n>t-(e+1)/2&&n<t+(e+1)/2&&a.push(n):(n>t-(e+1)/2||o-e<n)&&n<r[r.length-1]&&a.push(n)})),o>e?((e+1)/2>=t?a[a.length-1]="...":t+2<=s?(a[1]="...",a[a.length-1]="..."):a[1]="...",a.push(r[r.length-1])):(e+1)/2>=t||t+2<=s||(a.shift(),a.push(r[r.length-1])),a}},watch:{current:{immediate:!0,handler:function(t,e){this.currentIndex=t<1?1:t}},value:{immediate:!0,handler:function(t){1===Number(this.current)&&(this.currentIndex=t<1?1:t)}},pageSizeIndex:function(t){this.$emit("pageSizeChange",this.pageSizeRange[t])}},methods:{pickerChange:function(t){this.pageSizeIndex=t.detail.value,this.pickerClick()},pickerClick:function(){var t=document.querySelector("body");if(t){var e="uni-pagination-picker-show";this.pickerShow=!this.pickerShow,this.pickerShow?t.classList.add(e):setTimeout((function(){return t.classList.remove(e)}),300)}},selectPage:function(t,e){if(parseInt(t))this.currentIndex=t,this.change("current");else{var n=Math.ceil(this.total/this.pageSize);if(e<=1)return void(this.currentIndex-5>1?this.currentIndex-=5:this.currentIndex=1);if(e>=6)return void(this.currentIndex+5>n?this.currentIndex=n:this.currentIndex+=5)}},clickLeft:function(){1!==Number(this.currentIndex)&&(this.currentIndex-=1,this.change("prev"))},clickRight:function(){Number(this.currentIndex)>=this.maxPage||(this.currentIndex+=1,this.change("next"))},change:function(t){this.$emit("input",this.currentIndex),this.$emit("update:modelValue",this.currentIndex),this.$emit("change",{type:t,current:this.currentIndex})}}};var Sh=H(Ih,[["render",function(t,e,n,i,r,a){var o=At,u=Z(G("uni-icons"),jt),s=Lt,l=Qe,c=rt;return Q(),X(c,{class:"uni-pagination"},{default:tt((function(){return[!0===n.showPageSize||"true"===n.showPageSize?(Q(),X(l,{key:0,class:"select-picker",mode:"selector",value:r.pageSizeIndex,range:n.pageSizeRange,onChange:a.pickerChange,onCancel:a.pickerClick,onClick:a.pickerClick},{default:tt((function(){return[et(s,{type:"default",size:"mini",plain:!0},{default:tt((function(){return[et(o,null,{default:tt((function(){return[lt(ct(n.pageSizeRange[r.pageSizeIndex])+" "+ct(a.piecePerPage),1)]})),_:1}),et(u,{class:"select-picker-icon",type:"arrowdown",size:"12",color:"#999"})]})),_:1})]})),_:1},8,["value","range","onChange","onCancel","onClick"])):Et("",!0),et(c,{class:"uni-pagination__total is-phone-hide"},{default:tt((function(){return[lt("共 "+ct(n.total)+" 条",1)]})),_:1}),et(c,{class:it(["uni-pagination__btn",1===r.currentIndex?"uni-pagination--disabled":"uni-pagination--enabled"]),"hover-class":1===r.currentIndex?"":"uni-pagination--hover","hover-start-time":20,"hover-stay-time":70,onClick:a.clickLeft},{default:tt((function(){return[!0===n.showIcon||"true"===n.showIcon?(Q(),X(u,{key:0,color:"#666",size:"16",type:"left"})):(Q(),X(o,{key:1,class:"uni-pagination__child-btn"},{default:tt((function(){return[lt(ct(a.prevPageText),1)]})),_:1}))]})),_:1},8,["class","hover-class","onClick"]),et(c,{class:"uni-pagination__num uni-pagination__num-flex-none"},{default:tt((function(){return[et(c,{class:"uni-pagination__num-current"},{default:tt((function(){return[et(o,{class:"uni-pagination__num-current-text is-pc-hide current-index-text"},{default:tt((function(){return[lt(ct(r.currentIndex),1)]})),_:1}),et(o,{class:"uni-pagination__num-current-text is-pc-hide"},{default:tt((function(){return[lt("/"+ct(a.maxPage||0),1)]})),_:1}),(Q(!0),vt(mt,null,gt(a.paper,(function(t,e){return Q(),X(c,{key:e,class:it([{"page--active":t===r.currentIndex},"uni-pagination__num-tag tag--active is-phone-hide"]),onClick:function(n){return a.selectPage(t,e)}},{default:tt((function(){return[et(o,null,{default:tt((function(){return[lt(ct(t),1)]})),_:2},1024)]})),_:2},1032,["class","onClick"])})),128))]})),_:1})]})),_:1}),et(c,{class:it(["uni-pagination__btn",r.currentIndex>=a.maxPage?"uni-pagination--disabled":"uni-pagination--enabled"]),"hover-class":r.currentIndex===a.maxPage?"":"uni-pagination--hover","hover-start-time":20,"hover-stay-time":70,onClick:a.clickRight},{default:tt((function(){return[!0===n.showIcon||"true"===n.showIcon?(Q(),X(u,{key:0,color:"#666",size:"16",type:"right"})):(Q(),X(o,{key:1,class:"uni-pagination__child-btn"},{default:tt((function(){return[lt(ct(a.nextPageText),1)]})),_:1}))]})),_:1},8,["class","hover-class","onClick"])]})),_:1})}],["__scopeId","data-v-7a02a0a9"]]),Th={__name:"order-type-menu",props:{list:{type:Array,default:function(){return[]}},menuId:{type:Number,default:null}},emits:["update:menuId","menuClick"],setup:function(t,e){var n=e.emit,i=t,r=$(0),a=$(0),o=$([]),u=ae().in(this);at((function(){return i.list}),function(){var t=x(y().mark((function t(e){var n;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&0!=e.length){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,ie();case 4:e.map((function(t,e){u.select("#scroll-item-".concat(e)).boundingClientRect((function(t){if(t){var n=o.value;n[e]=t.width+10,o.value=n}})).exec()})),i.menuId>0&&(n=i.list.findIndex((function(t){return t.category_id==i.menuId})))>-1&&s(n);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),{deep:!0,immediate:!0});var s=function(t){a.value=t,r.value=o.value.slice(0,t+1).reduce((function(t,e){return t+e}),0)-(o.value[t]+100),n("update:menuId",i.list[t].category_id),n("menuClick",i.list[t].category_id)};return function(t,e){var n=At,o=rt,u=bt;return Q(),X(u,{class:"ti-order-menu","scroll-left":r.value,"scroll-x":"","enable-flex":"","scroll-with-animation":""},{default:tt((function(){return[et(o,{class:"ti-menu-content"},{default:tt((function(){return[(Q(!0),vt(mt,null,gt(i.list,(function(t,e){return Q(),X(o,{key:e,class:it(["ti-menu-item",{active:e==a.value}]),id:"scroll-item-".concat(e),onClick:function(t){return s(e)}},{default:tt((function(){return[et(o,null,{default:tt((function(){return[et(n,{class:"ti-menu-title"},{default:tt((function(){return[lt(ct("".concat(dt(ft)(t.name_text))+(t.number?"(".concat(t.number,")"):"")),1)]})),_:2},1024)]})),_:2},1024)]})),_:2},1032,["id","class","onClick"])})),128))]})),_:1})]})),_:1},8,["scroll-left"])}}},Ph=H(Th,[["__scopeId","data-v-0c36077c"]]),Bh={__name:"dialog-refuse-payed",props:{show:{type:Boolean,default:!1},orderAmount:{type:String,default:""}},emits:["update:show","success"],setup:function(t,e){var n=e.expose,i=e.emit,r=t,a=$({refund_money:""}),o=$({}),u=$(!1),s=yt((function(){return parseFloat(o.value.pay_price)-parseFloat(o.value.refund_money)})),l=function(){a.value.refund_money=""},c=function(t){a.value.refund_money+=t,d()},d=function(){parseFloat(a.value.refund_money)>s.value&&(a.value.refund_money=parseFloat(s.value)+"")},f=function(){var t=x(y().mark((function t(){var e,n;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(e=m({},a.value)).order_id=o.value.order_id,t.prev=3,u.value=!0,t.next=7,dr(e);case 7:n=t.sent,setTimeout((function(){uni.showToast({title:n.msg,icon:"none"})}),200),1==n.code&&(p(),i("success")),u.value=!1,t.next=15;break;case 13:t.prev=13,t.t0=t.catch(3);case 15:return t.prev=15,u.value=!1,t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[3,13,15,18]])})));return function(){return t.apply(this,arguments)}}(),p=function(){a.value.refund_money="",i("update:show",!1)};return n({getOrderData:function(t){o.value=t,i("update:show",!0)}}),function(t,e){var n=rt,i=At,o=Z(G("ti-input"),ot),d=Z(G("ti-keyboard"),ut),h=Z(G("ti-modal"),st);return Q(),X(h,{show:r.show,title:dt(ft)("退款")},{content:tt((function(){return[et(n,{class:"ti-dialog-content"},{default:tt((function(){return[et(n,{class:"ti-preferential-box"},{default:tt((function(){return[et(n,{class:"ti-preferential-label"},{default:tt((function(){return[lt(ct(dt(ft)("可退款金額")),1)]})),_:1}),et(n,{class:"ti-preferential-input"},{default:tt((function(){return[et(i,{class:"ti-preferential-price"},{default:tt((function(){return[lt(ct(dt(Dt)(s.value)),1)]})),_:1}),et(i,{class:"ti-preferential-subPrice"},{default:tt((function(){return[lt(ct(dt(kt)(s.value)),1)]})),_:1})]})),_:1})]})),_:1}),et(n,{class:"ti-preferential-input-item"},{default:tt((function(){return[et(o,{modelValue:a.value.refund_money,"onUpdate:modelValue":e[0]||(e[0]=function(t){return a.value.refund_money=t}),placeholder:dt(ft)("請輸入退款金額，不能大於可退款金額"),focus:!0},null,8,["modelValue","placeholder"])]})),_:1})]})),_:1})]})),footer:tt((function(){return[et(n,{class:"ti-dialog-btn ti-preferential-keyboard"},{default:tt((function(){return[et(d,{primaryLoading:u.value,isDoubleZero:!0,isCross:!1,isDrop:!0,onExit:p,onClear:l,onInput:c,onConfirm:f},null,8,["primaryLoading"])]})),_:1})]})),_:1},8,["show","title"])}}},Nh=H(Bh,[["__scopeId","data-v-b576680d"]]),zh={__name:"dialog-order-detail",setup:function(t,e){var n=e.expose,i=$(""),r=$(!1),a=$(!1),o=$(!1),u=$(!1),s=$({}),l=$(),c=$(!1),d=$(!1),f=$([]),p=yt((function(){var t=[];return(s.value.buffet||[]).map((function(e){t.push(e.name_text||e.name)})),t.join("+")})),h=function(){var t=x(y().mark((function t(){var e,n;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={order_id:i.value},d.value=!0,t.prev=2,t.next=5,cr(e);case 5:n=t.sent,f.value=n.data.detail.product||[],s.value=n.data.detail,t.next=12;break;case 10:t.prev=10,t.t0=t.catch(2);case 12:return t.prev=12,d.value=!1,t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[2,10,12,15]])})));return function(){return t.apply(this,arguments)}}(),v=function(){o.value=!0},m=function(){a.value=!0},g=function(){var t;null===(t=l.value)||void 0===t||t.getOrderData(s.value)},b=function(){u.value=!0},_=function(){var t=x(y().mark((function t(){var e,n;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={order_id:i.value},a.value=!1,t.prev=2,t.next=5,fr(e);case 5:n=t.sent,setTimeout((function(){uni.showToast({title:n.msg,icon:"none"}),1==n.code&&k()}),200),t.next=11;break;case 9:t.prev=9,t.t0=t.catch(2);case 11:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(){return t.apply(this,arguments)}}(),w=function(){var t=x(y().mark((function t(){var e,n;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={order_id:i.value},o.value=!1,t.prev=2,t.next=5,pr(e);case 5:n=t.sent,setTimeout((function(){uni.showToast({title:n.msg,icon:"none"}),1==n.code&&k()}),200),t.next=11;break;case 9:t.prev=9,t.t0=t.catch(2);case 11:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(){return t.apply(this,arguments)}}(),D=function(){var t=x(y().mark((function t(){var e,n;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={order_id:i.value},u.value=!1,t.prev=2,t.next=5,hr(e);case 5:n=t.sent,setTimeout((function(){uni.showToast({title:n.msg,icon:"none"})}),200),t.next=11;break;case 9:t.prev=9,t.t0=t.catch(2);case 11:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(){return t.apply(this,arguments)}}(),k=function(){c.value=!1,a.value=!1,o.value=!1};return n({showDetailWithData:function(t){i.value=t,c.value=!0,h()}}),function(t,e){var n=rt,i=Z(G("uni-td"),Xe),y=Z(G("uni-tr"),tn),x=Ht,C=Z(G("ti-image"),fe),A=Z(G("uni-table"),en),E=bt,F=Z(G("ti-button"),pt),I=Z(G("ti-modal"),st),S=Z(G("ti-drawer"),wt);return Q(),X(n,{class:""},{default:tt((function(){return[et(S,{ref:"dialogRef",title:dt(ft)("訂單詳情"),round:16,show:c.value,width:660,mode:"right"},{content:tt((function(){return[et(n,{class:"ti-order-detail-container"},{default:tt((function(){return[et(n,{class:"ti-order-detail-header"},{default:tt((function(){return[et(n,{class:"ti-order-detail-header-tag"}),et(n,{class:"ti-order-detail-header-title"},{default:tt((function(){return[lt(ct(dt(ft)("基本信息")),1)]})),_:1})]})),_:1}),et(n,{class:"ti-order-detail-other"},{default:tt((function(){var t,e,i;return[et(n,{class:"ti-order-detail-other-item"},{default:tt((function(){return[et(n,{class:"ti-order-detail-other-item-title"},{default:tt((function(){return[lt(ct(dt(ft)("訂單類型")),1)]})),_:1}),et(n,{class:"ti-order-detail-other-item-content"},{default:tt((function(){return[lt(ct(s.value.order_type_text||"-"),1)]})),_:1})]})),_:1}),et(n,{class:"ti-order-detail-other-item"},{default:tt((function(){return[et(n,{class:"ti-order-detail-other-item-title"},{default:tt((function(){return[lt(ct(dt(ft)("訂單號")),1)]})),_:1}),et(n,{class:"ti-order-detail-other-item-content"},{default:tt((function(){return[lt(ct(s.value.order_no||"-"),1)]})),_:1})]})),_:1}),s.value.user?(Q(),X(n,{key:0,class:"ti-order-detail-other-item"},{default:tt((function(){return[et(n,{class:"ti-order-detail-other-item-title"},{default:tt((function(){return[lt(ct(dt(ft)("買家")),1)]})),_:1}),et(n,{class:"ti-order-detail-other-item-content"},{default:tt((function(){var t;return[lt(ct((null===(t=s.value.user)||void 0===t?void 0:t.nickName)||"-"),1)]})),_:1})]})),_:1})):Et("",!0),et(n,{class:"ti-order-detail-other-item"},{default:tt((function(){return[et(n,{class:"ti-order-detail-other-item-title"},{default:tt((function(){return[lt(ct(dt(ft)("訂單金額")),1)]})),_:1}),et(n,{class:"ti-order-detail-other-price-list"},{default:tt((function(){return[et(n,{class:"ti-order-detail-other-price-main"},{default:tt((function(){return[lt(ct(dt(Dt)(s.value.order_price)),1)]})),_:1}),et(n,{class:"ti-order-detail-other-price-sub"},{default:tt((function(){return[lt(ct(dt(kt)(s.value.order_price)),1)]})),_:1})]})),_:1})]})),_:1}),et(n,{class:"ti-order-detail-other-item"},{default:tt((function(){return[et(n,{class:"ti-order-detail-other-item-title"},{default:tt((function(){return[lt(ct(dt(ft)("实付金额")),1)]})),_:1}),et(n,{class:"ti-order-detail-other-item-content"},{default:tt((function(){var t,e;return[lt(ct(10==(null===(t=s.value)||void 0===t||null===(t=t.pay_status)||void 0===t?void 0:t.value)?"-":dt(Dt)(null===(e=s.value)||void 0===e?void 0:e.actual_receive_price)),1)]})),_:1})]})),_:1}),20==(null===(t=s.value)||void 0===t||null===(t=t.pay_status)||void 0===t?void 0:t.value)&&(null===(e=s.value)||void 0===e?void 0:e.refund_money)>0?(Q(),X(n,{key:1,class:"ti-order-detail-other-item"},{default:tt((function(){return[et(n,{class:"ti-order-detail-other-item-title"},{default:tt((function(){return[lt(ct(dt(ft)("退款金额")),1)]})),_:1}),et(n,{class:"ti-order-detail-other-item-content"},{default:tt((function(){var t;return[lt(ct(dt(Dt)(null===(t=s.value)||void 0===t?void 0:t.refund_money)),1)]})),_:1})]})),_:1})):Et("",!0),et(n,{class:"ti-order-detail-other-item"},{default:tt((function(){return[et(n,{class:"ti-order-detail-other-item-title"},{default:tt((function(){return[lt(ct(dt(ft)("支付方式")),1)]})),_:1}),et(n,{class:"ti-order-detail-other-item-content"},{default:tt((function(){var t,e;return[lt(ct(10==(null===(t=s.value)||void 0===t||null===(t=t.pay_status)||void 0===t?void 0:t.value)?"-":null===(e=s.value.pay_type)||void 0===e?void 0:e.text),1)]})),_:1})]})),_:1}),et(n,{class:"ti-order-detail-other-item"},{default:tt((function(){return[et(n,{class:"ti-order-detail-other-item-title"},{default:tt((function(){return[lt(ct(dt(ft)("用餐方式")),1)]})),_:1}),et(n,{class:"ti-order-detail-other-item-content"},{default:tt((function(){var t;return[lt(ct(null===(t=s.value.delivery_type)||void 0===t?void 0:t.text),1)]})),_:1})]})),_:1}),0===s.value.table_id?(Q(),X(n,{key:2,class:"ti-order-detail-other-item"},{default:tt((function(){return[et(n,{class:"ti-order-detail-other-item-title"},{default:tt((function(){return[lt(ct(dt(ft)("序號")),1)]})),_:1}),et(n,{class:"ti-order-detail-other-item-content"},{default:tt((function(){return[lt(ct(s.value.callNo),1)]})),_:1})]})),_:1})):Et("",!0),0!==s.value.table_id?(Q(),X(n,{key:3,class:"ti-order-detail-other-item"},{default:tt((function(){return[et(n,{class:"ti-order-detail-other-item-title"},{default:tt((function(){return[lt(ct(dt(ft)("桌號")),1)]})),_:1}),et(n,{class:"ti-order-detail-other-item-content"},{default:tt((function(){return[lt(ct(s.value.table_no),1)]})),_:1})]})),_:1})):Et("",!0),et(n,{class:"ti-order-detail-other-item"},{default:tt((function(){return[et(n,{class:"ti-order-detail-other-item-title"},{default:tt((function(){return[lt(ct(dt(ft)("交易狀態")),1)]})),_:1}),et(n,{class:"ti-order-detail-other-item-content"},{default:tt((function(){return[lt(ct(s.value.state_text),1)]})),_:1})]})),_:1}),et(n,{class:"ti-order-detail-other-item"},{default:tt((function(){return[et(n,{class:"ti-order-detail-other-item-title"},{default:tt((function(){return[lt(ct(dt(ft)("收銀員")),1)]})),_:1}),et(n,{class:"ti-order-detail-other-item-content"},{default:tt((function(){var t;return[lt(ct(null===(t=s.value)||void 0===t||null===(t=t.cashier)||void 0===t?void 0:t.real_name),1)]})),_:1})]})),_:1}),1==(null===(i=s.value)||void 0===i?void 0:i.is_buffet)?(Q(),X(n,{key:4,class:"ti-order-detail-other-item"},{default:tt((function(){return[et(n,{class:"ti-order-detail-other-item-title"},{default:tt((function(){return[lt(ct(dt(ft)("自助餐")),1)]})),_:1}),et(n,{class:"ti-order-detail-other-item-content"},{default:tt((function(){return[lt(ct(p.value),1)]})),_:1})]})),_:1})):Et("",!0)]})),_:1}),et(n,{class:"ti-order-detail-header"},{default:tt((function(){return[et(n,{class:"ti-order-detail-header-tag"}),et(n,{class:"ti-order-detail-header-title"},{default:tt((function(){return[lt(ct(dt(ft)("商品信息")),1)]})),_:1})]})),_:1}),et(n,{class:"scroll-content"},{default:tt((function(){return[et(E,{class:"scroll-view","scroll-y":"true"},{default:tt((function(){return[et(n,{class:"scroll-view-bg"},{default:tt((function(){return[et(A,{class:"table-body",ref:"table",loading:d.value,border:"",stripe:"",emptyText:dt(ft)("暂无更多数据")},{default:tt((function(){return[et(y,{class:"table-header"},{default:tt((function(){return[et(i,{width:"240",align:"left"},{default:tt((function(){return[lt(ct(dt(ft)("商品")),1)]})),_:1}),et(i,{width:"140",align:"right"},{default:tt((function(){return[lt(ct(dt(ft)("價格")),1)]})),_:1}),et(i,{width:"80",align:"right"},{default:tt((function(){return[lt(ct(dt(ft)("購買數量")),1)]})),_:1}),et(i,{width:"140",align:"right"},{default:tt((function(){return[lt(ct(dt(ft)("商品總價")),1)]})),_:1})]})),_:1}),(Q(!0),vt(mt,null,gt(s.value.buffetCustomerType,(function(t,e){return Q(),X(y,{key:e},{default:tt((function(){return[et(i,{width:"240"},{default:tt((function(){return[et(n,{class:"goods-list"},{default:tt((function(){return[et(x,{class:"goods-list-image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4CAYAAACohjseAAAACXBIWXMAAAsSAAALEgHS3X78AAACP0lEQVRoge2aPSwDYRiAXyJhQCdEk3YROtBYWNRQTCXRifjbJH4Goy5YMEgNBgMGnUSsJEyY2i7t1kr8bCckbMVADOS99C7Xy9317616m+9JLv3ue79ev+e+/6RV3w9rP1DBVFeyHAjBCkAIckcIckcIckcIckcIckcIcodcMLgXhjbPDjR1b8mXf/YYHp9TahzTGL+4vpcvTEfikpq3ErwE73iIrD6kgktr57C9H4a3jy81LxqXwDsWgtT7p3wvPafkePLuVb4wHYlJGXk3d69kdSITxFY4OUsYxrDyq8Erqp/KCzLBg6OYZRzltV31r6BrwZiUtUzi9oWvoHbcmZEkHFu5UtZlQpl4SkkN1bMb62uztqLTblPTOGaV8sr41eZRQdaCw4MdWct4ep3g6XHKaa2IklY+Ha02kyfkD5ng/EyPZXxi1A2OdAvOTWcp63dTVYtOsMvVArvrI4axTlczbAaG1PvAYj/0pVtSD74IjFNBOsngm19eyKwcjs3TwymwNdSpeZjGPN9Ae+b3R92wu2H8kgqFfBbVd1WU1sppcdhtlvf/UlAvYyYHButiKXY65IL5VFK/DkocBPWVxE24GfpTQykW/n914KU8JinQd9Gn3LqZVctSUvIuGs1ThFq8bF00l+MVBeSCxU4USeIzI7lgsWc+q3WzEMgFu1zNOZWbNNhQ47bON9huWL5QyAX1G2mzDThuyzCGUooc7kOpW1D8T4Y7QpA7QpA7QpA7QpA7QpA7QpA7QpA1APALkSrRS/P5cqkAAAAASUVORK5CYII=",mode:"widthFix"}),et(n,{class:"goods-list-title"},{default:tt((function(){return[et(n,{class:"goods-list-main-title"},{default:tt((function(){return[lt(ct(t.buffet_name_text),1)]})),_:2},1024),et(n,{class:"goods-list-sub-title"},{default:tt((function(){return[lt("("+ct(t.customer_type_name_text)+")",1)]})),_:2},1024)]})),_:2},1024)]})),_:2},1024)]})),_:2},1024),et(i,{align:"right",width:"140"},{default:tt((function(){return[et(n,{class:"price-colum"},{default:tt((function(){return[et(n,{class:"price-table-sub"},{default:tt((function(){return[lt(ct(dt(kt)(t.price)),1)]})),_:2},1024),et(n,{class:"price-table-main"},{default:tt((function(){return[lt(ct(dt(Dt)(t.price)),1)]})),_:2},1024)]})),_:2},1024)]})),_:2},1024),et(i,{align:"right",width:"80"},{default:tt((function(){return[et(n,{class:"price-table"},{default:tt((function(){return[lt(ct(t.num),1)]})),_:2},1024)]})),_:2},1024),et(i,{align:"right",width:"140"},{default:tt((function(){return[et(n,{class:"price-colum"},{default:tt((function(){return[et(n,{class:"price-table-sub"},{default:tt((function(){return[lt(ct(dt(kt)(t.total_price||0)),1)]})),_:2},1024),et(n,{class:"price-table-main"},{default:tt((function(){return[lt(ct(dt(Dt)(t.total_price||0)),1)]})),_:2},1024)]})),_:2},1024)]})),_:2},1024)]})),_:2},1024)})),128)),(Q(!0),vt(mt,null,gt(s.value.delay,(function(t,e){return Q(),X(y,{key:e},{default:tt((function(){return[et(i,{width:"240"},{default:tt((function(){return[et(n,{class:"goods-list"},{default:tt((function(){return[et(x,{class:"goods-list-image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4CAYAAACohjseAAAACXBIWXMAAAsSAAALEgHS3X78AAAB/klEQVRoge2YPSxDURiGPyLpgm4apN2oRC3STjX4G9DEJhHE0IF0aGLRRTuppcYOFQkTiRCJSIrBTwed2lgYRLcaxFgMxEDeG4vSuHq+ezk351lv7nvOk3Pv+c53al4LsTeyMLVWliMlaAGUoOwoQdlRgrKjBGVHCcqOEpSdOiPnf3B6Q4dnBcrminR7V/r0zNlsJ7/PRcN9bTTS327YHAxpeLP5IoWj6S9SlYBsMh4gv9fFPRV+wYXEMa1u5qt6d2bSS0uRQc7p8P6D4Vi6ajmAd5HBCZsgVm5r/1I4BxnI4oJFEP+cyMqVgyxkcsAiiA3lJxrrbbS3NqFtKFyZehAWRCnQs1t6OhzaLuls1SeITGSLIiyIOmcUHNnCgijiRsGRLSyot5j/VbbpZ1F7g83U8UwTvLq+p9LjM0VCPWYNqWGa4MPTC0UTJ+RxO7Ry0eluMmVcYUG9dY0+TinTc7vkarFTZjtI8fkBrT5yZFdCWBAtz2/A1t87tk6J1DnNTvkosxNky/4OYUH0c78Fn+vyyjl1D6VoZSPHml0OS7uEiXKXC3yeF0ch4RyWTQbNKjdcmSyCOGOiWeUCWVzdPVuZQCc+PtolnIMMzq6etQ4mFwNCK4l3kcGJunQSwbLXhv8JdXUvO0pQdpSg7ChB2VGCsqMEZUcJyo61BYnoHfrDu/aEOYuqAAAAAElFTkSuQmCC",mode:"widthFix"}),et(n,{class:"goods-list-title"},{default:tt((function(){return[et(n,{class:"goods-list-main-title"},{default:tt((function(){return[lt(ct(t.name_text),1)]})),_:2},1024)]})),_:2},1024)]})),_:2},1024)]})),_:2},1024),et(i,{align:"right",width:"140"},{default:tt((function(){return[et(n,{class:"price-colum"},{default:tt((function(){return[et(n,{class:"price-table-sub"},{default:tt((function(){return[lt(ct(dt(kt)(t.price)),1)]})),_:2},1024),et(n,{class:"price-table-main"},{default:tt((function(){return[lt(ct(dt(Dt)(t.price)),1)]})),_:2},1024)]})),_:2},1024)]})),_:2},1024),et(i,{align:"right",width:"80"},{default:tt((function(){return[et(n,{class:"price-table"},{default:tt((function(){return[lt(ct(t.num),1)]})),_:2},1024)]})),_:2},1024),et(i,{align:"right",width:"140"},{default:tt((function(){return[et(n,{class:"price-colum"},{default:tt((function(){return[et(n,{class:"price-table-sub"},{default:tt((function(){return[lt(ct(dt(kt)(t.total_price||0)),1)]})),_:2},1024),et(n,{class:"price-table-main"},{default:tt((function(){return[lt(ct(dt(Dt)(t.total_price||0)),1)]})),_:2},1024)]})),_:2},1024)]})),_:2},1024)]})),_:2},1024)})),128)),(Q(!0),vt(mt,null,gt(f.value,(function(t,e){return Q(),X(y,{key:e},{default:tt((function(){return[et(i,{width:"240"},{default:tt((function(){return[et(n,{class:"goods-list"},{default:tt((function(){var e;return[nn("div",{class:"goods-list-image"},[et(C,{src:(null===(e=t.image)||void 0===e?void 0:e.file_path)||""},null,8,["src"])]),et(n,{class:"goods-list-title"},{default:tt((function(){return[et(n,{class:"goods-list-main-title"},{default:tt((function(){return[lt(ct(t.product_name_text),1)]})),_:2},1024),t.product_attr?(Q(),X(n,{key:0,class:"goods-list-sub-title"},{default:tt((function(){return[lt(ct(t.product_attr),1)]})),_:2},1024)):Et("",!0)]})),_:2},1024)]})),_:2},1024)]})),_:2},1024),et(i,{align:"right",width:"140"},{default:tt((function(){return[et(n,{class:"price-colum"},{default:tt((function(){return[et(n,{class:"price-table-sub"},{default:tt((function(){return[lt(ct(dt(kt)(t.product_price)),1)]})),_:2},1024),et(n,{class:"price-table-main"},{default:tt((function(){return[lt(ct(dt(Dt)(t.product_price)),1)]})),_:2},1024)]})),_:2},1024)]})),_:2},1024),et(i,{align:"right",width:"80"},{default:tt((function(){return[et(n,{class:"price-table"},{default:tt((function(){return[lt(ct(t.total_num),1)]})),_:2},1024)]})),_:2},1024),et(i,{align:"right",width:"140"},{default:tt((function(){return[et(n,{class:"price-colum"},{default:tt((function(){return[et(n,{class:"price-table-sub"},{default:tt((function(){return[lt(ct(dt(kt)(t.total_product_price||0)),1)]})),_:2},1024),et(n,{class:"price-table-main"},{default:tt((function(){return[lt(ct(dt(Dt)(t.total_product_price||0)),1)]})),_:2},1024)]})),_:2},1024)]})),_:2},1024)]})),_:2},1024)})),128))]})),_:1},8,["loading","emptyText"])]})),_:1})]})),_:1})]})),_:1}),et(n,{class:"ti-data-bottom"},{default:tt((function(){return[et(n,{class:"ti-data-bottom-grid"},{default:tt((function(){var t,n,i;return[et(F,{onClick:e[0]||(e[0]=function(t){return k()})},{default:tt((function(){return[lt(ct(dt(ft)("退出")),1)]})),_:1}),30==(null===(t=s.value.order_status)||void 0===t?void 0:t.value)?(Q(),X(F,{key:0,onClick:g,type:"primary"},{default:tt((function(){return[lt(ct(dt(ft)("退款")),1)]})),_:1})):Et("",!0),20==(null===(n=s.value.order_status)||void 0===n?void 0:n.value)?(Q(),X(F,{key:1,onClick:v,type:"danger"},{default:tt((function(){return[lt(ct(dt(ft)("删除")),1)]})),_:1})):Et("",!0),10==(null===(i=s.value.order_status)||void 0===i?void 0:i.value)?(Q(),X(F,{key:2,onClick:m,type:"danger"},{default:tt((function(){return[lt(ct(dt(ft)("取消")),1)]})),_:1})):Et("",!0),et(F,{type:"primary",onClick:b},{default:tt((function(){return[lt(ct(dt(ft)("打印")),1)]})),_:1})]})),_:1})]})),_:1}),et(Nh,{ref_key:"refuse",ref:l,show:r.value,"onUpdate:show":e[1]||(e[1]=function(t){return r.value=t}),onSuccess:h},null,8,["show"]),et(I,{class:"ti-action-tips",show:a.value,"onUpdate:show":e[2]||(e[2]=function(t){return a.value=t}),title:dt(ft)("溫馨提示"),content:dt(ft)("是否取消此訂單？"),onConfirm:_},null,8,["show","title","content"]),et(I,{class:"ti-action-tips",show:o.value,"onUpdate:show":e[3]||(e[3]=function(t){return o.value=t}),title:dt(ft)("溫馨提示"),content:dt(ft)("是否删除此訂單？"),onConfirm:w},null,8,["show","title","content"]),et(I,{class:"ti-action-tips",show:u.value,"onUpdate:show":e[4]||(e[4]=function(t){return u.value=t}),title:dt(ft)("溫馨提示"),content:dt(ft)("確定要打印小票嗎？"),onConfirm:D},null,8,["show","title","content"])]})),_:1})]})),footer:tt((function(){return[et(n)]})),_:1},8,["title","show"])]})),_:1})}}},Oh=H(zh,[["__scopeId","data-v-ee1c14bf"]]),Mh={__name:"order-select",props:{modelValue:{type:[String,Number]},localdata:{type:Array,default:function(){return[]}},clear:{type:Boolean,default:!0},placeholder:{type:String,default:null},placement:{type:String,default:"top"},left:{type:Number,default:0},top:{type:Number,default:0},ready:{type:Boolean,default:!1}},emits:["update:modelValue","change","size","update:ready"],setup:function(t,e){var n=e.emit,i=t,r=$(!1),a=yt((function(){return{left:i.left+"px",top:i.top+"px"}}));at(r,(function(t){t||ie((function(){n("update:ready",!1)}))}));var o=yt((function(){var t;return(null===(t=i.localdata.find((function(t){return t.key==i.modelValue})))||void 0===t?void 0:t.value)||""})),u=function(){n("update:modelValue",""),n("change",""),n("update:ready",!1)};return function(e,s){var l=rt,c=Z(G("uni-icons"),jt),d=bt;return Q(),X(l,{class:"ti-select",onClick:s[1]||(s[1]=function(t){return r.value=!0})},{default:tt((function(){return[se(e.$slots,"select",{},(function(){return[et(l,{class:"ti-select-input-box"},{default:tt((function(){return[o.value?(Q(),X(l,{key:0,class:"ti-select-input-text"},{default:tt((function(){return[lt(ct(o.value),1)]})),_:1})):(Q(),X(l,{key:1,class:"ti-select-placeholder"},{default:tt((function(){return[lt(ct(i.placeholder||dt(ft)("请选择")),1)]})),_:1})),o.value&&i.clear?(Q(),X(l,{key:2,class:"ti-select-icon",onClick:Ut(u,["stop"])},{default:tt((function(){return[et(c,{type:"closeempty",size:"16",color:"#999999"})]})),_:1})):(Q(),X(l,{key:3,class:it(["ti-select-icon ti-icon-down",{active:r.value}])},{default:tt((function(){return[et(c,{type:"right",size:"16",color:"#100A05"})]})),_:1},8,["class"]))]})),_:1})]}),!0),r.value&&t.ready?(Q(),X(l,{key:0,class:"ti-select-mask",onClick:s[0]||(s[0]=Ut((function(t){return r.value=!1}),["stop"]))},{default:tt((function(){return[et(l,{class:"ti-select-locate",style:nt(a.value)},{default:tt((function(){return[et(l,{class:it(["ti-select-selector",i.placement])},{default:tt((function(){return[et(d,{"scroll-y":""},{default:tt((function(){return[(Q(!0),vt(mt,null,gt(i.localdata,(function(t){return Q(),X(l,{key:t.key,class:it(["ti-select-selector-item",{active:t.key==i.modelValue}]),onClick:Ut((function(e){return n("update:modelValue",i=t),n("change",i),n("update:ready",!1),void(r.value=!1);var i}),["stop"])},{default:tt((function(){return[et(l,{class:"ti-select-selector-item-text"},{default:tt((function(){return[lt(ct(dt(ft)(t.value)),1)]})),_:2},1024),t.value==i.modelValue?(Q(),X(l,{key:0,class:"ti-select-selector-item-icon"},{default:tt((function(){return[et(c,{type:"checkmarkempty",size:"16",color:"#FFBE00"})]})),_:1})):Et("",!0)]})),_:2},1032,["class","onClick"])})),128))]})),_:1})]})),_:1},8,["class"])]})),_:1},8,["style"])]})),_:1})):Et("",!0)]})),_:3})}}},Lh=H(Mh,[["__scopeId","data-v-873ce65d"]]),jh={__name:"index",setup:function(t){var e=this,n=Qt(),i=Wt(n).pathName,r=Wt(Jt()).allPermission,a=$(0),o=$(),u=$(),s=$(-1),l=$(!1),c=$(!1),d=$(!1),f=$(!1),p=$(!1),h=$(!1),v=$(!1),b=$({}),_=$(!1),w=$({}),D=$(),k=$(""),C=$(""),A={},E=$([]),F=$(0),I=$(0),S=$(!1),T=function(t){var e=[];return[{permission:"cashier_store_order_print",key:"",value:"打印小票",action:"print"},{permission:"cashier_store_order_print_invoice",key:30,value:"打印发票",action:"print_invoice"},{permission:"cashier_store_order_reverse_settle",key:30,value:"反结账",action:"reverse_settle",hide_reverse:!0}].map((function(n){var i;if(r.value.includes(n.permission)&&((null===(i=t.order_status)||void 0===i?void 0:i.value)==n.key||!n.key)){if(t.hide_reverse_settle&&n.hide_reverse==t.hide_reverse_settle)return n;e.push(n)}return n})),e.length>0},P=$(g({eat_type:null,time_type:1,time:null,dataType:0,search:null,order_type:0,page:1,list_rows:6},"search",null)),B=$([]),N=$([]),z=function(){N.value=[{name:ft("今天"),value:"1"},{name:ft("昨天"),value:"2"},{name:ft("7天"),value:"3"},{name:ft("全部"),value:"0"}],B.value=[{name_text:ft("全部"),number:0,category_id:0},{name_text:ft("待付款"),number:0,category_id:1},{name_text:ft("已取消"),number:0,category_id:3},{name_text:ft("已完成"),number:0,category_id:2}]};z();var O=$([{value:20,text:ft("收银订单")},{value:10,text:ft("桌台订单")}]),M=$([]),L=function(t){P.value.dataType=t,P.value.page=1,yt()},j=function(t){P.value.time_type=t,P.value.page=1,yt()},U=function(t){k.value=t},V=function(t){C.value=t},K=function(t){P.value.page=t.current,yt()},H=function(t){"print_invoice"==t.action?at(M.value[s.value]):"print"==t.action?ot(M.value[s.value]):"reverse_settle"==t.action&&J(M.value[s.value])},W=function(){var t=x(y().mark((function t(){var e;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n={order_id:A.order_id},R("order.order/printInvoice",n);case 3:e=t.sent,uni.showToast({title:e.msg,icon:"none"}),h.value=!1,t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0);case 11:case"end":return t.stop()}var n}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}(),J=function(){var t=x(y().mark((function t(e){var n,i,r,a;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return b.value=e,t.prev=1,t.next=4,o=e.order_id,q("order.order/reverseSettle",{order_id:o});case 4:r=t.sent,_.value=!0,w.value=r.data,null!==(n=w.value)&&void 0!==n&&n.tables&&(null===(i=w.value)||void 0===i?void 0:i.tables.length)>0&&(D.value=null===(a=w.value)||void 0===a||null===(a=a.tables[0])||void 0===a?void 0:a.table_id),t.next=12;break;case 10:t.prev=10,t.t0=t.catch(1);case 12:case"end":return t.stop()}var o}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}(),Y=function(){var t=x(y().mark((function t(){var e,n,r,a;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r={sign:w.value.sign},!(null!==(e=w.value)&&void 0!==e&&e.tables&&(null===(n=w.value)||void 0===n?void 0:n.tables.length)>0)){t.next=5;break}if(D.value){t.next=4;break}return t.abrupt("return",uni.showToast({title:ft("请选择其他桌台打开"),icon:"none"}));case 4:r.new_table_id=D.value;case 5:return t.prev=5,t.next=8,mr(r);case 8:(a=t.sent).data.table_id?(me(a.data.table_id),setTimeout((function(){i.value="desk",on("reDesk")}),300)):a.data.order_id&&(Ct(a.data.order_id),setTimeout((function(){i.value="index",on("reIndex")}),300)),_.value=!1,yt(),setTimeout((function(){uni.showToast({title:a.msg,icon:"none"})}),200),t.next=17;break;case 15:t.prev=15,t.t0=t.catch(5);case 17:case"end":return t.stop()}}),t,null,[[5,15]])})));return function(){return t.apply(this,arguments)}}(),nt=function(){var t=x(y().mark((function t(){var e,n;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={order_id:A.order_id},t.prev=2,t.next=5,hr(e);case 5:n=t.sent,setTimeout((function(){uni.showToast({title:n.msg,icon:"none"})}),200),1==n.code&&(p.value=!1),t.next=12;break;case 10:t.prev=10,t.t0=t.catch(2);case 12:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(){return t.apply(this,arguments)}}(),at=function(t){h.value=!0,A=t},ot=function(t){p.value=!0,A=t},ut=function(){var t=x(y().mark((function t(){var e,n;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={order_id:A.order_id},t.prev=2,t.next=5,pr(e);case 5:n=t.sent,setTimeout((function(){uni.showToast({title:n.msg,icon:"none"})}),200),1==n.code&&(f.value=!1,yt()),t.next=12;break;case 10:t.prev=10,t.t0=t.catch(2);case 12:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(){return t.apply(this,arguments)}}(),ht=function(){var t=x(y().mark((function t(){var e,n;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={order_id:A.order_id},t.prev=2,t.next=5,fr(e);case 5:n=t.sent,setTimeout((function(){uni.showToast({title:n.msg,icon:"none"})}),200),1==n.code&&(d.value=!1,yt()),t.next=12;break;case 10:t.prev=10,t.t0=t.catch(2);case 12:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(){return t.apply(this,arguments)}}(),yt=function(){var t=x(y().mark((function t(){var e,n,i;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=m({},P.value),n=[0,0],k.value&&(n[0]=k.value),C.value&&(n[1]=C.value),0===n[0]&&0===n[1]||(e.time=n),v.value=!0,t.prev=6,t.next=9,lr(e);case 9:i=t.sent,M.value=i.data.list.data,a.value=i.data.list.total,B.value[0].number=i.data.info.all,B.value[1].number=i.data.info.pendingNum,B.value[2].number=i.data.info.cancelNum,B.value[3].number=i.data.info.completeNum,t.next=20;break;case 18:t.prev=18,t.t0=t.catch(6);case 20:return t.prev=20,v.value=!1,t.finish(20);case 23:case"end":return t.stop()}}),t,null,[[6,18,20,23]])})));return function(){return t.apply(this,arguments)}}();return(r.value||[]).includes("cashier_store_order")&&yt(),te("langChange",(function(){z(),yt()})),te("orderRefresh",(function(){yt()})),function(t,n){var i=rt,m=un,g=Z(G("uni-data-select"),Eh),y=Z(G("ti-button"),pt),x=Z(G("uni-td"),Xe),k=Z(G("uni-tr"),tn),C=Z(G("ti-loading"),_t),z=Z(G("uni-table"),en),R=Z(G("uni-pagination"),Sh),q=Z(G("ti-modal"),st),$=bt,J=Bt("permission");return Q(),X(i,{class:"ti-order-container"},{default:tt((function(){return[et(Ph,{list:B.value,"onUpdate:list":n[0]||(n[0]=function(t){return B.value=t}),onMenuClick:L},null,8,["list"]),et(i,{class:"ti-order-container-option"},{default:tt((function(){return[et(rn,{list:N.value,"onUpdate:list":n[1]||(n[1]=function(t){return N.value=t}),onOutput:j},null,8,["list"]),et(i,{class:"date-picker"},{default:tt((function(){return[et(an,{onStartDateChange:U,onEndDateChange:V})]})),_:1}),et(i,{class:"date-order-input-item"},{default:tt((function(){return[et(m,{class:"date-order-input",modelValue:P.value.search,"onUpdate:modelValue":n[2]||(n[2]=function(t){return P.value.search=t}),placeholder:dt(ft)("訂單號")},null,8,["modelValue","placeholder"])]})),_:1}),et(i,{class:"date-select-type"},{default:tt((function(){return[et(g,{modelValue:P.value.eat_type,"onUpdate:modelValue":n[3]||(n[3]=function(t){return P.value.eat_type=t}),localdata:O.value,placeholder:dt(ft)("所有類型"),clear:!0},null,8,["modelValue","localdata","placeholder"])]})),_:1}),et(i,{class:"date-search-confirm"},{default:tt((function(){return[et(y,{class:"date-search-confirm-button",type:"primary",onClick:n[4]||(n[4]=function(t){return P.value.page=1,yt()})},{default:tt((function(){return[lt(ct(dt(ft)("查询")),1)]})),_:1})]})),_:1})]})),_:1}),et(z,{class:"table-body",ref:"table",border:"",stripe:"",emptyText:dt(ft)("暂无更多数据")},{default:tt((function(){return[et(k,{class:"table-header"},{default:tt((function(){return[et(x,{width:"130",align:"left"},{default:tt((function(){return[lt(ct(dt(ft)("訂單類型")),1)]})),_:1}),et(x,{width:"120",align:"left"},{default:tt((function(){return[lt(ct(dt(ft)("桌號/序號")),1)]})),_:1}),et(x,{width:"160",align:"left"},{default:tt((function(){return[lt(ct(dt(ft)("訂單號")),1)]})),_:1}),et(x,{width:"100",align:"left"},{default:tt((function(){return[lt(ct(dt(ft)("狀態")),1)]})),_:1}),et(x,{width:"150",align:"left"},{default:tt((function(){return[lt(ct(dt(ft)("支付時間")),1)]})),_:1}),et(x,{width:"140",align:"left"},{default:tt((function(){return[lt(ct(dt(ft)("訂單金額")),1)]})),_:1}),et(x,{width:"140",align:"left"},{default:tt((function(){return[lt(ct(dt(ft)("实付金额")),1)]})),_:1}),et(x,{width:"100",align:"left"},{default:tt((function(){return[lt(ct(dt(ft)("支付方式")),1)]})),_:1}),et(x,{width:"280",align:"left"},{default:tt((function(){return[lt(ct(""))]})),_:1})]})),_:1}),(Q(!0),vt(mt,null,gt(M.value,(function(t,a){return Q(),X(k,{key:a},{default:tt((function(){return[et(x,{align:"left"},{default:tt((function(){return[et(i,{class:"order-table-cell"},{default:tt((function(){return[lt(ct(t.order_source_text),1)]})),_:2},1024)]})),_:2},1024),et(x,{align:"left"},{default:tt((function(){return[lt(ct(t.table_no||t.callNo),1)]})),_:2},1024),et(x,{align:"left"},{default:tt((function(){return[lt(ct(t.order_no),1)]})),_:2},1024),et(x,{align:"left"},{default:tt((function(){return[lt(ct(t.order_status.text),1)]})),_:2},1024),et(x,{align:"left"},{default:tt((function(){return[lt(ct(t.pay_time_text),1)]})),_:2},1024),et(x,{align:"left"},{default:tt((function(){return[et(i,{class:"date-order-price-item"},{default:tt((function(){return[et(i,{class:"date-order-price-main"},{default:tt((function(){return[lt(ct(dt(Dt)(t.order_price)),1)]})),_:2},1024),et(i,{class:"date-order-price-sub"},{default:tt((function(){return[lt(ct(dt(kt)(t.order_price)),1)]})),_:2},1024)]})),_:2},1024)]})),_:2},1024),et(x,{align:"left"},{default:tt((function(){return[et(i,{class:"date-order-price-item"},{default:tt((function(){return[et(i,{class:"date-order-price-main"},{default:tt((function(){return[lt(ct(10==t.pay_status.value?"-":dt(Dt)(null==t?void 0:t.actual_receive_price)),1)]})),_:2},1024)]})),_:2},1024)]})),_:2},1024),et(x,{align:"left"},{default:tt((function(){return[lt(ct(10==t.pay_status.value?"-":t.pay_type.text.length>8?t.pay_type.text.slice(0,8)+"...":t.pay_type.text),1)]})),_:2},1024),et(x,{align:"left"},{default:tt((function(){return[et(i,{class:"edit-buttons"},{default:tt((function(){var l,c,p;return[Nt((Q(),X(y,{class:"function-buttons",onClick:function(e){return n=t.order_id,void(null===(i=o.value)||void 0===i||i.showDetailWithData(n));var n,i},type:"primary"},{default:tt((function(){return[lt(ct(dt(ft)("詳情")),1)]})),_:2},1032,["onClick"])),[[J,["cashier_store_order_detail"]]]),30==(null===(l=t.order_status)||void 0===l?void 0:l.value)?Nt((Q(),X(y,{key:0,class:"function-buttons margin",onClick:function(e){return n=t,void(null===(i=u.value)||void 0===i||i.getOrderData(n));var n,i},type:"primary"},{default:tt((function(){return[lt(ct(dt(ft)("退款")),1)]})),_:2},1032,["onClick"])),[[J,["cashier_store_order_refund"]]]):Et("",!0),20==(null===(c=t.order_status)||void 0===c?void 0:c.value)?Nt((Q(),X(y,{key:1,class:"function-buttons margin",onClick:function(e){return n=t,f.value=!0,void(A=n);var n},type:"danger"},{default:tt((function(){return[lt(ct(dt(ft)("删除")),1)]})),_:2},1032,["onClick"])),[[J,["cashier_store_order_delete"]]]):Et("",!0),10==(null===(p=t.order_status)||void 0===p?void 0:p.value)?Nt((Q(),X(y,{key:2,class:"function-buttons margin",onClick:function(e){return n=t,d.value=!0,void(A=n);var n},type:"danger"},{default:tt((function(){return[lt(ct(dt(ft)("取消")),1)]})),_:2},1032,["onClick"])),[[J,["cashier_store_order_cancel"]]]):Et("",!0),T(t)?(Q(),X(i,{key:3,id:"more"+a},{default:tt((function(){return[et(Lh,{localdata:E.value,ready:S.value,"onUpdate:ready":n[5]||(n[5]=function(t){return S.value=t}),top:I.value,left:F.value,onChange:H},{select:tt((function(){return[et(y,{class:"function-buttons margin",onClick:function(n){return function(t,n){s.value=n;var i="#more".concat(s.value);ae().in(e).select(i).boundingClientRect((function(t){F.value=t.left,I.value=t.top+t.height,S.value=!0})).exec();var a=[];[{permission:"cashier_store_order_print",key:"",value:"打印小票",action:"print"},{permission:"cashier_store_order_print_invoice",key:30,value:"发票",action:"print_invoice"},{permission:"cashier_store_order_reverse_settle",key:30,value:"反结账",action:"reverse_settle",hide_reverse:!0}].map((function(e){var n;if(r.value.includes(e.permission)&&((null===(n=t.order_status)||void 0===n?void 0:n.value)==e.key||!e.key)){if(t.hide_reverse_settle&&e.hide_reverse==t.hide_reverse_settle)return e;a.push(e)}return t})),E.value=a}(t,a)},type:"primary"},{default:tt((function(){return[lt(ct(dt(ft)("更多")),1)]})),_:2},1032,["onClick"])]})),_:2},1032,["localdata","ready","top","left"])]})),_:2},1032,["id"])):Et("",!0)]})),_:2},1024)]})),_:2},1024)]})),_:2},1024)})),128)),v.value?(Q(),X(i,{key:0,class:"ti-table-mask"},{default:tt((function(){return[et(C)]})),_:1})):Et("",!0)]})),_:1},8,["emptyText"]),et(i,{class:"page-control"},{default:tt((function(){return[et(R,{current:P.value.page,title:"",showIcon:!0,"page-size":P.value.list_rows,total:a.value,onChange:K},null,8,["current","page-size","total"])]})),_:1}),et(Oh,{ref_key:"orderDetail",ref:o,show:l.value,"onUpdate:show":n[6]||(n[6]=function(t){return l.value=t})},null,8,["show"]),et(Nh,{ref_key:"refuse",ref:u,show:c.value,"onUpdate:show":n[7]||(n[7]=function(t){return c.value=t}),onSuccess:yt},null,8,["show"]),et(q,{class:"ti-action-tips",show:d.value,"onUpdate:show":n[8]||(n[8]=function(t){return d.value=t}),title:dt(ft)("溫馨提示"),content:dt(ft)("是否取消此訂單？"),onConfirm:ht},null,8,["show","title","content"]),et(q,{class:"ti-action-tips",show:f.value,"onUpdate:show":n[9]||(n[9]=function(t){return f.value=t}),title:dt(ft)("溫馨提示"),content:dt(ft)("是否删除此訂單？"),onConfirm:ut},null,8,["show","title","content"]),et(q,{class:"ti-action-tips",show:p.value,"onUpdate:show":n[10]||(n[10]=function(t){return p.value=t}),title:dt(ft)("溫馨提示"),content:dt(ft)("確定要打印小票嗎？"),onConfirm:nt},null,8,["show","title","content"]),et(q,{class:"ti-action-tips",show:h.value,"onUpdate:show":n[11]||(n[11]=function(t){return h.value=t}),title:dt(ft)("打印发票"),content:dt(ft)("确定要打印发票吗？"),onConfirm:W},null,8,["show","title","content"]),et(q,{class:"ti-action-tips ti-re-order",show:_.value,"onUpdate:show":n[12]||(n[12]=function(t){return _.value=t}),title:dt(ft)("反结账"),onConfirm:Y},{content:tt((function(){return[et(i,{class:"ti-dialog-content"},{default:tt((function(){var t,e;return[et(i,{class:"ti-cancel-title",style:{"text-align":"left"}},{default:tt((function(){var t,e;return[lt(ct(1==(null===(t=w.value)||void 0===t?void 0:t.is_occupy)?null===(e=w.value)||void 0===e?void 0:e.info:dt(ft)("是否将订单恢复为反结账？")),1)]})),_:1}),et(i,{class:"ti-cancel-order"},{default:tt((function(){return[et(i,{class:"ti-cancel-order-item"},{default:tt((function(){return[et(i,{class:"ti-cancel-order-label"},{default:tt((function(){return[lt(ct(dt(ft)("订单号")),1)]})),_:1}),et(i,{class:"ti-cancel-order-input"},{default:tt((function(){var t;return[lt(ct(null===(t=b.value)||void 0===t?void 0:t.order_no),1)]})),_:1})]})),_:1}),et(i,{class:"ti-cancel-order-item"},{default:tt((function(){return[et(i,{class:"ti-cancel-order-label"},{default:tt((function(){return[lt(ct(dt(ft)("支付方式")),1)]})),_:1}),et(i,{class:"ti-cancel-order-input"},{default:tt((function(){var t,e;return[lt(ct(10==(null===(t=b.value)||void 0===t?void 0:t.pay_status.value)?"-":null===(e=b.value)||void 0===e?void 0:e.pay_type.text),1)]})),_:1})]})),_:1}),et(i,{class:"ti-cancel-order-item"},{default:tt((function(){return[et(i,{class:"ti-cancel-order-label"},{default:tt((function(){return[lt(ct(dt(ft)("订单金额")),1)]})),_:1}),et(i,{class:"ti-cancel-order-input"},{default:tt((function(){var t;return[et(i,null,{default:tt((function(){var t;return[lt(ct(dt(Dt)(null===(t=b.value)||void 0===t?void 0:t.order_price)),1)]})),_:1}),(null===(t=b.value)||void 0===t?void 0:t.refund_money)>0?(Q(),X(i,{key:0,class:"ti-cancel-order-input-red"},{default:tt((function(){var t;return[lt(" ("+ct(dt(ft)("已退款:"))+ct(dt(Dt)(null===(t=b.value)||void 0===t?void 0:t.refund_money))+") ",1)]})),_:1})):Et("",!0)]})),_:1})]})),_:1}),et(i,{class:"ti-cancel-order-item"},{default:tt((function(){return[et(i,{class:"ti-cancel-order-label"},{default:tt((function(){return[lt(ct(dt(ft)("实付金额")),1)]})),_:1}),et(i,{class:"ti-cancel-order-input"},{default:tt((function(){var t,e;return[lt(ct(10==(null===(t=b.value)||void 0===t?void 0:t.pay_status.value)?"-":dt(Dt)(null===(e=b.value)||void 0===e?void 0:e.actual_receive_price)),1)]})),_:1})]})),_:1})]})),_:1}),null!==(t=w.value)&&void 0!==t&&t.tables&&(null===(e=w.value)||void 0===e?void 0:e.tables.length)>0?(Q(),X($,{key:0,"scroll-y":""},{default:tt((function(){return[et(i,{class:"ti-cancel-list"},{default:tt((function(){var t;return[(Q(!0),vt(mt,null,gt(null===(t=w.value)||void 0===t?void 0:t.tables,(function(t){return Q(),X(i,{key:t.id,class:it(["ti-cancel-item",{active:D.value==t.table_id}]),onClick:function(e){return D.value=t.table_id}},{default:tt((function(){return[lt(ct(null==t?void 0:t.table_no),1)]})),_:2},1032,["class","onClick"])})),128))]})),_:1})]})),_:1})):Et("",!0)]})),_:1})]})),_:1},8,["show","title"])]})),_:1})}}},Uh=H(jh,[["__scopeId","data-v-fc5283ef"]]),Rh={__name:"ti-text",props:{content:{type:[String,Number],default:""}},setup:function(t){var e=t,n=function(t){var n=e.content,i="",r="";if(n){var a=3;n.length<6&&(a=2),n.length>12&&(a=6),r=n.substring(0,n.length-a),i=n.substring(n.length-a)}return 1==t?n:2==t?r:3==t?i:void 0};return function(t,e){var i=rt;return Q(),X(i,{class:"omitText"},{default:tt((function(){return[nn("span",{class:"text-front"},ct(n(2)),1),nn("span",{class:"text-after"},ct(n(3)),1)]})),_:1})}}},qh=H(Rh,[["__scopeId","data-v-25a40c96"]]),Vh=""+new URL("icon-check-06f9d0e2.svg",o.meta.url).href,$h=""+new URL("icon-check-some-f04a1061.svg",o.meta.url).href,Kh=""+new URL("icon-search-734821ba.svg",o.meta.url).href,Hh=""+new URL("icon_transfer_right-e4616c28.svg",o.meta.url).href,Wh=""+new URL("icon_transfer_left-e969e115.svg",o.meta.url).href,Jh={__name:"ti-transfer",emits:["info"],setup:function(t,e){var n=e.expose,i=e.emit,r=sn(),a=Wt(r).languageValue,o=Jt(),u=$([]),s=$([]),l=$([]),c=$([]),f=$([]),p=$([]),h=$([]),v=$([]),g=$({is_show_sold_out:0,default_language:!1,sold_out_data:[]}),b=$({on_sale_search:"",on_sale_page:1,on_sale_list_rows:50,sold_out_search:"",sold_out_page:1,sold_out_list_rows:50}),_=$(0),w=$(0),D=pe().clearGoodsData,k=ve().clearTableGoodsData,C=function(){return f.value.length>0&&f.value.length==l.value.length?1:f.value.length>0?0:-1},A=function(){return p.value.length>0&&p.value.length==c.value.length?1:p.value.length>0?0:-1},E=function(t){t?1==C()?F(!0,!1):F(!0,!0):1==A()?F(!1,!1):F(!1,!0)},F=function(t,e){t?f.value=e?f.value=[].concat(l.value):[]:p.value=e?p.value=[].concat(c.value):[]},I=function(t){t?b.value.on_sale_page=1:b.value.sold_out_page=1,T()},S=function(t){if(t){if(b.value.on_sale_page>=_.value)return;b.value.on_sale_page++}else{if(b.value.sold_out_page>=w.value)return;b.value.sold_out_page++}T()},T=function(){var t=x(y().mark((function t(){var e,n,r,a=arguments;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=!(a.length>0&&void 0!==a[0])||a[0],b.value.on_sale_search?b.value.on_sale_list_rows=200:b.value.on_sale_list_rows=50,b.value.sold_out_search?b.value.sold_out_list_rows=200:b.value.on_sale_list_rows=50,n=m({},b.value),e&&Pe({title:ft("加载中...")}),t.prev=5,t.next=8,ln(n);case 8:1==(r=t.sent).data.on_sale_list.current_page?u.value=r.data.on_sale_list.data:u.value=u.value.concat(r.data.on_sale_list.data),_.value=r.data.on_sale_list.last_page,1==r.data.sold_out_list.current_page?s.value=r.data.sold_out_list.data:s.value=s.value.concat(r.data.sold_out_list.data),w.value=r.data.sold_out_list.last_page,i("info",r.data.version),B(),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(5);case 20:return t.prev=20,Be(),t.finish(20);case 23:case"end":return t.stop()}}),t,null,[[5,17,20,23]])})));return function(){return t.apply(this,arguments)}}(),P=function(){var t=x(y().mark((function t(e,n,i){var r,u;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return g.value.default_language=n,g.value.is_show_sold_out=i,g.value.sold_out_data=c.value,g.value.device_remark=e,r=m({},g.value),t.prev=5,t.next=8,cn(r);case 8:u=t.sent,uni.showToast({title:u.msg,icon:"none"}),1==u.code&&(h.value=[],v.value=[],setTimeout((function(){a.value=g.value.default_language,dn(g.value.default_language),o.getUserInfo(!0,!1),T(!1),D(),k(!0),on("langChange")}),300)),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(5);case 16:case"end":return t.stop()}}),t,null,[[5,13]])})));return function(e,n,i){return t.apply(this,arguments)}}(),B=function(){l.value=u.value.filter((function(t){return-1==h.value.findIndex((function(e){return e.product_id==t.product_id&&e.product_sku_id==t.product_sku_id}))})),l.value=l.value.concat(v.value),c.value=s.value.filter((function(t){return-1==v.value.findIndex((function(e){return e.product_id==t.product_id&&e.product_sku_id==t.product_sku_id}))})),c.value=c.value.concat(h.value),l.value=l.value.filter((function(t){return t.product_name_text.includes(b.value.on_sale_search)})),c.value=c.value.filter((function(t){return t.product_name_text.includes(b.value.sold_out_search)}))};return T(),n({setSaleList:P,reset:function(){b.value={on_sale_search:"",on_sale_page:1,on_sale_list_rows:50,sold_out_search:"",sold_out_page:1,sold_out_list_rows:50},p.value=[],f.value=[],h.value=[],v.value=[],T()}}),function(t,e){var n=Ht,i=At,r=rt,a=Z(G("ti-input"),ot),o=Z(G("ti-text"),qh),u=Z(G("ti-empty-data"),xt),s=bt;return Q(),X(r,{class:"ti-transfer"},{default:tt((function(){return[et(r,{class:"ti-transfer-unselect"},{default:tt((function(){return[et(r,{class:"ti-transfer-title-view",onClick:e[0]||(e[0]=function(t){return E(!0)})},{default:tt((function(){return[1==C()?(Q(),X(n,{key:0,class:"ti-transfer-check select",src:Vh})):0==C()?(Q(),X(n,{key:1,class:"ti-transfer-check select",src:$h})):(Q(),X(n,{key:2,class:"ti-transfer-check"})),et(i,{class:"ti-transfer-title"},{default:tt((function(){return[lt(ct(dt(ft)("在售中状态")),1)]})),_:1})]})),_:1}),et(r,{class:"ti-transfer-list"},{default:tt((function(){return[et(a,{class:"ti-transfer-search",popKeyboard:!0,disabled:!1,modelValue:b.value.on_sale_search,"onUpdate:modelValue":e[1]||(e[1]=function(t){return b.value.on_sale_search=t}),placeholder:dt(ft)("請輸入商品名稱"),onConfirm:e[2]||(e[2]=function(t){return I(!0)})},{prefix:tt((function(){return[et(n,{class:"search-icon",src:Kh})]})),suffix:tt((function(){return[et(r)]})),_:1},8,["modelValue","placeholder"]),et(s,{class:"ti-scroll","scroll-y":"","lower-threshold":50,onScrolltolower:e[3]||(e[3]=function(t){return S(!0)})},{default:tt((function(){return[(Q(!0),vt(mt,null,gt(l.value,(function(t,e){return Q(),X(r,{class:"ti-transfer-list-item",key:e,onClick:function(e){return function(t){var e=f.value.findIndex((function(e){if(e.product_id==t.product_id&&e.product_sku_id==t.product_sku_id)return!0}));-1==e?f.value.push(t):f.value.splice(e,1)}(t)}},{default:tt((function(){return[et(r,{class:"ti-transfer-list-item-box"},{default:tt((function(){return[-1!=f.value.findIndex((function(e){return e.product_id==t.product_id&&e.product_sku_id==t.product_sku_id}))?(Q(),X(n,{key:0,class:"ti-transfer-check select",src:Vh})):(Q(),X(n,{key:1,class:"ti-transfer-check"})),et(r,{class:"ti-transfer-list-item-title"},{default:tt((function(){return[et(o,{content:t.product_name_text},null,8,["content"])]})),_:2},1024)]})),_:2},1024),et(r,{class:"ti-transfer-list-item-end-title"},{default:tt((function(){return[et(o,{content:t.spec_name_text},null,8,["content"])]})),_:2},1024)]})),_:2},1032,["onClick"])})),128)),0==l.value.length?(Q(),X(u,{key:0,class:"ti-empty-data",image:""})):Et("",!0)]})),_:1})]})),_:1})]})),_:1}),et(r,{class:"ti-transfer-action-button"},{default:tt((function(){return[et(r,{class:it(["ti-transfer-round",{disable:0==f.value.length}]),onClick:e[4]||(e[4]=function(t){return e=f.value.filter((function(t){var e=v.value.findIndex((function(e){return e.product_id==t.product_id&&e.product_sku_id==t.product_sku_id}));return-1==e||(v.value.splice(e,1),!1)})),n=[].concat(d(e),d(h.value)),h.value=Array.from(new Set(n.map((function(t){return JSON.stringify(t)})))).map((function(t){return JSON.parse(t)})),f.value=[],void B();var e,n})},{default:tt((function(){return[et(n,{class:"ti-transfer-image",src:Hh})]})),_:1},8,["class"]),et(r,{class:it(["ti-transfer-round",{disable:0==p.value.length}]),onClick:e[5]||(e[5]=function(t){return e=p.value.filter((function(t){var e=h.value.findIndex((function(e){return e.product_id==t.product_id&&e.product_sku_id==t.product_sku_id}));return-1==e||(h.value.splice(e,1),!1)})),n=[].concat(d(e),d(v.value)),v.value=Array.from(new Set(n.map((function(t){return JSON.stringify(t)})))).map((function(t){return JSON.parse(t)})),p.value=[],void B();var e,n})},{default:tt((function(){return[et(n,{class:"ti-transfer-image",src:Wh})]})),_:1},8,["class"])]})),_:1}),et(r,{class:"ti-transfer-unselect"},{default:tt((function(){return[et(r,{class:"ti-transfer-title-view",onClick:e[6]||(e[6]=function(t){return E(!1)})},{default:tt((function(){return[1==A()?(Q(),X(n,{key:0,class:"ti-transfer-check select",src:Vh})):0==A()?(Q(),X(n,{key:1,class:"ti-transfer-check select",src:$h})):(Q(),X(n,{key:2,class:"ti-transfer-check"})),et(i,{class:"ti-transfer-title"},{default:tt((function(){return[lt(ct(dt(ft)("已售罄状态")),1)]})),_:1})]})),_:1}),et(r,{class:"ti-transfer-list"},{default:tt((function(){return[et(a,{class:"ti-transfer-search",popKeyboard:!0,disabled:!1,modelValue:b.value.sold_out_search,"onUpdate:modelValue":e[7]||(e[7]=function(t){return b.value.sold_out_search=t}),placeholder:dt(ft)("請輸入商品名稱"),onConfirm:e[8]||(e[8]=function(t){return I(!1)})},{prefix:tt((function(){return[et(n,{class:"search-icon",src:Kh})]})),suffix:tt((function(){return[et(r)]})),_:1},8,["modelValue","placeholder"]),et(s,{class:"ti-scroll","scroll-y":"","lower-threshold":20,onScrolltolower:e[9]||(e[9]=function(t){return S(!1)})},{default:tt((function(){return[(Q(!0),vt(mt,null,gt(c.value,(function(t,e){return Q(),X(r,{class:"ti-transfer-list-item",key:e,onClick:function(e){return function(t){var e=p.value.findIndex((function(e){if(e.product_id==t.product_id&&e.product_sku_id==t.product_sku_id)return!0}));-1==e?p.value.push(t):p.value.splice(e,1)}(t)}},{default:tt((function(){return[et(r,{class:"ti-transfer-list-item-box"},{default:tt((function(){return[-1!=p.value.findIndex((function(e){return e.product_id==t.product_id&&e.product_sku_id==t.product_sku_id}))?(Q(),X(n,{key:0,class:"ti-transfer-check select",src:Vh})):(Q(),X(n,{key:1,class:"ti-transfer-check"})),et(r,{class:"ti-transfer-list-item-title"},{default:tt((function(){return[et(o,{content:t.product_name_text},null,8,["content"])]})),_:2},1024)]})),_:2},1024),et(r,{class:"ti-transfer-list-item-end-title"},{default:tt((function(){return[et(o,{content:t.spec_name_text},null,8,["content"])]})),_:2},1024)]})),_:2},1032,["onClick"])})),128)),0==c.value.length?(Q(),X(u,{key:0,class:"ti-empty-data",image:""})):Et("",!0)]})),_:1})]})),_:1})]})),_:1})]})),_:1})}}},Zh=H(Jh,[["__scopeId","data-v-e9cb37b5"]]),Yh={__name:"index",setup:function(t){var e=sn(),n=Wt(e),i=n.languageData,r=n.languageDefault,a=Jt(),o=Wt(a),u=o.tablet,s=o.device,l=$(!1),c=$([]),d=$([]),f=$(""),p=$(""),h=$(),v=$({is_show_sold_out:0,default_language:Ft(),sold_out_data:[],device_id:s.value.device_id,device_remark:s.value.device_remark});at((function(){return r.value}),(function(){Ft()||(v.value.default_language=r.value)})),at((function(){return u.value}),(function(){var t;v.value.is_show_sold_out=+(null===(t=u.value)||void 0===t?void 0:t.is_show_sold_out)||0}),{deep:!0,immediate:!0});var m=function(){var t=x(y().mark((function t(){return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.getList();case 3:uni.showToast({title:ft("刷新成功"),icon:"none"}),t.next=8;break;case 6:t.prev=6,t.t0=t.catch(0);case 8:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(){return t.apply(this,arguments)}}(),g=function(t){f.value=t.client_version||"1.0.0",p.value=t.server_version||"1.0.0"},b=function(){var t,e;v.value.is_show_sold_out=(null===(t=u.value)||void 0===t?void 0:t.is_show_sold_out)||0,v.value.default_language=Ft()||r.value,v.value.device_remark=s.value.device_remark,null===(e=h.value)||void 0===e||e.reset()},_=function(){var t=x(y().mark((function t(){var e;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{null===(e=h.value)||void 0===e||e.setSaleList(v.value.device_remark,v.value.default_language,v.value.is_show_sold_out)}catch(n){}finally{l.value=!1}case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return te("settingRefresh",(function(){b()})),ue((function(){e.getList()})),function(t,e){var n=rt,r=Z(G("u-switch"),xr),a=Z(G("ti-select"),fn),o=Z(G("uni-icons"),jt),u=Z(G("ti-input"),ot),s=Z(G("ti-button"),pt),y=bt;return Q(),X(n,{class:"ti-setting-container"},{default:tt((function(){return[et(y,{"scroll-y":""},{default:tt((function(){return[et(n,{class:"ti-setting-header"},{default:tt((function(){return[et(n,{class:"ti-setting-header-tag"}),et(n,{class:"ti-setting-header-title"},{default:tt((function(){return[lt(ct(dt(ft)("系统设置")),1)]})),_:1})]})),_:1}),et(n,{class:"ti-setting-content"},{default:tt((function(){return[et(n,{class:"ti-setting-item"},{default:tt((function(){return[et(n,{class:"ti-setting-item-title"},{default:tt((function(){return[lt(ct(dt(ft)("平板顯示售罄商品")),1)]})),_:1}),et(r,{modelValue:v.value.is_show_sold_out,"onUpdate:modelValue":e[0]||(e[0]=function(t){return v.value.is_show_sold_out=t}),inactiveValue:0,activeValue:1,activeColor:"#FFBE00",inactiveColor:"rgb(153,153,153,.1)",size:"20"},null,8,["modelValue"])]})),_:1}),et(n,{class:"ti-setting-item"},{default:tt((function(){return[et(n,{class:"ti-setting-item-title"},{default:tt((function(){return[lt(ct(dt(ft)("语言")),1)]})),_:1}),et(a,{modelValue:v.value.default_language,"onUpdate:modelValue":e[1]||(e[1]=function(t){return v.value.default_language=t}),clear:!1,localdata:dt(i),placeholder:dt(ft)("请选择")},null,8,["modelValue","localdata","placeholder"]),et(n,{class:"ti-setting-refresh",onClick:m},{default:tt((function(){return[et(o,{class:"ti-setting-refresh-icon","custom-prefix":"iconfont",type:"icon-shuaxin",size:"18",color:"#100A05"})]})),_:1})]})),_:1}),et(n,{class:"ti-setting-item"},{default:tt((function(){return[et(n,{class:"ti-setting-item-title"},{default:tt((function(){return[lt(ct(dt(ft)("当前机器ID")),1)]})),_:1}),et(u,{class:"ti-setting-item-input disable",modelValue:v.value.device_id,"onUpdate:modelValue":e[2]||(e[2]=function(t){return v.value.device_id=t}),suffixIcon:"",placeholder:dt(ft)("机器备注")},null,8,["modelValue","placeholder"])]})),_:1}),et(n,{class:"ti-setting-item"},{default:tt((function(){return[et(n,{class:"ti-setting-item-title"},{default:tt((function(){return[lt(ct(dt(ft)("机器备注 (非必填)")),1)]})),_:1}),et(u,{class:"ti-setting-item-input",modelValue:v.value.device_remark,"onUpdate:modelValue":e[3]||(e[3]=function(t){return v.value.device_remark=t}),suffixIcon:"",placeholder:dt(ft)("机器备注"),popKeyboard:!0,disabled:!1,maxlength:100},null,8,["modelValue","placeholder"])]})),_:1}),et(n,{class:"ti-setting-transfer"},{default:tt((function(){return[et(n,{class:"ti-setting-transfer-title"},{default:tt((function(){return[lt(ct(dt(ft)("售罄商品顯示")),1)]})),_:1}),et(Zh,{ref_key:"transfer",ref:h,selectList:c.value,unSelectList:d.value,onInfo:g},null,8,["selectList","unSelectList"])]})),_:1}),et(n,{class:"ti-setting-item"},{default:tt((function(){return[et(n,{class:"ti-setting-item-title"},{default:tt((function(){return[lt(ct(dt(ft)("客户端版本")),1)]})),_:1}),et(n,{style:{display:"block"}},{default:tt((function(){return[lt(ct(f.value),1)]})),_:1})]})),_:1}),et(n,{class:"ti-setting-item"},{default:tt((function(){return[et(n,{class:"ti-setting-item-title"},{default:tt((function(){return[lt(ct(dt(ft)("服务端版本")),1)]})),_:1}),et(n,{style:{display:"block"}},{default:tt((function(){return[lt(ct(p.value),1)]})),_:1})]})),_:1}),et(n,{class:"ti-setting-bottom"},{default:tt((function(){return[et(n,{class:"ti-setting-bottom-temps"}),et(n,{class:"ti-setting-bottom-buttons"},{default:tt((function(){return[et(s,{onClick:b},{default:tt((function(){return[lt(ct(dt(ft)("重置")),1)]})),_:1}),et(s,{type:"primary",loading:l.value,onClick:_},{default:tt((function(){return[lt(ct(dt(ft)("保存")),1)]})),_:1},8,["loading"])]})),_:1})]})),_:1})]})),_:1})]})),_:1})]})),_:1})}}},Gh=H(Yh,[["__scopeId","data-v-707fd673"]]);a("default",H({__name:"index",setup:function(t){var e=Qt(),n=Wt(e).pathName,i=Jt(),r=Wt(i),a=r.loading,o=r.allPermission,u=r.cashier,s=Wt(le()).firstLoading,l=$(!1),c=$(),d=function(){var t;1==(null===(t=u.value)||void 0===t?void 0:t.is_auto_lock_screen)&&(l.value=!1,f())},f=function t(){var e,n;1==(null===(e=u.value)||void 0===e?void 0:e.is_auto_lock_screen)&&(l.value?hn():(l.value=!0,c.value&&clearTimeout(c.value),c.value=setTimeout((function(){return t()}),1e3*((null===(n=u.value)||void 0===n?void 0:n.auto_lock_screen)||300))))};return at((function(){return o.value}),(function(){e.setPathName(o.value)}),{deep:!0,immediate:!0}),at((function(){var t;return null===(t=u.value)||void 0===t?void 0:t.auto_lock_screen}),(function(){d()}),{deep:!0,immediate:!0}),we((function(){De()})),pn((function(){ie((function(){Be()}))})),ue((function(){})),te("getUserInfo",(function(){i.getUserInfo(!0)})),function(t,e){var i=ye("ti-layout"),r=Z(G("ti-loading"),_t);return dt(a)||dt(s)?(Q(),X(r,{key:1})):(Q(),X(i,{key:0,onClick:d,onTouchstart:d,onTouchend:d},{default:tt((function(){return[Nt(et(Il,null,null,512),[[be,"index"==dt(n)]]),Nt(et(jc,null,null,512),[[be,"desk"==dt(n)]]),Nt(et(Uh,null,null,512),[[be,"order"==dt(n)]]),Nt(et(Gh,null,null,512),[[be,"setting"==dt(n)]])]})),_:1}))}}},[["__scopeId","data-v-11bfbce4"]]))}}}))}();
