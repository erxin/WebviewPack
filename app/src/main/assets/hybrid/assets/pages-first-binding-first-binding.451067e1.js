import{u as a,r as e,e as l,g as t,O as s,P as i,h as o,j as n,w as u,p as c,v as r,x as d,f as p,$ as A,y as f,l as g,m as v,B as _,C as b,D as h,E as m,G as w,H as x,I as B,K as U,L as y,c as I,U as C,n as S,W as T,X as k,Y as E,Q,q as R,F as j,z as L,Z as G}from"./index-7f522928.js";import{i as Y,g as O,_ as X,a as D,c as H,b as J}from"./platform.c0c277d1.js";import{_ as M,a as N}from"./ti-button.d4c0af8e.js";const z=M({__name:"ti-layout-setserver",setup(T){const{setUserInfo:k}=a(),E=e({ip:"",port:"",device_id:"null",remark:""}),Q=()=>{const a=g();E.value.ip=(null==a?void 0:a.ip)||v()||"127.0.0.1",E.value.port=(null==a?void 0:a.port)||"8080"};l((()=>{Y()?E.value.device_id=O():t({success:a=>{E.value.device_id=a.deviceId}})}));const R=a=>{E.value.remark=a},j=a=>{E.value.ip=a},L=a=>{E.value.port=a},G=e("");e([]);const H=e(),J=e(!1),M=async()=>{var a;const e={...E.value};if(e.ip)if(e.port)try{const l=await _(b(`${null==e?void 0:e.ip}:${e.port}`));1==parseInt(l.data.cashier.order_method.is_table_order)?(h(e),m(l.data.app_id),w(l.data.shop_supplier_id),x(null==(a=l.data)?void 0:a.currency),k(l.data),setTimeout((()=>{J.value=!0}),150)):uni.showToast({title:A("桌台用餐方式已关闭，请联系管理员"),icon:"success"})}catch(l){uni.showToast({title:A("绑定失败"),icon:"success"})}else uni.showToast({title:A("請輸入連接埠"),icon:"none"});else uni.showToast({title:A("請輸入伺服器位址"),icon:"none"})},z=a=>{J.value=!1,a&&(H.value=a,G.value=a.table_no)},Z=()=>{Q(),G.value=B().table_no,H.value=B()},K=async()=>{var a;const e={...E.value};if(e.ip)if(e.port)try{const l=await _(b(`${null==e?void 0:e.ip}:${e.port}`));if(!H.value)return void uni.showToast({title:A("請查找桌位"),icon:"success"});1==parseInt(l.data.cashier.order_method.is_table_order)?(h(e),m(l.data.app_id),w(l.data.shop_supplier_id),x(null==(a=l.data)?void 0:a.currency),setTimeout((()=>{V()}),150)):uni.showToast({title:A("桌台用餐方式已关闭，请联系管理员"),icon:"success"})}catch(l){uni.showToast({title:A("绑定失败"),icon:"success"})}else uni.showToast({title:A("請輸入連接埠"),icon:"success"});else uni.showToast({title:A("請輸入伺服器位址"),icon:"success"})},V=async()=>{try{const a=await U({table_id:H.value.table_id,key:E.value.device_id});y(H.value),I({url:"/pages/index/index"}),uni.showToast({title:a.msg,icon:"success"})}catch(a){}};return Q(),(a,e)=>{const l=C,t=S,g=s(i("ti-input"),X),v=s(i("ti-button"),N),_=s(i("ti-layout-table-list"),D);return o(),n(t,null,{default:u((()=>[c(t,{class:"ti-item-input"},{default:u((()=>[c(t,{class:"ti-label-box"},{default:u((()=>[c(t,{class:"ti-label-left"},{default:u((()=>[c(l,{class:"ti-label-server"},{default:u((()=>[r(d(p(A)("當前機器ID")),1)])),_:1})])),_:1})])),_:1}),c(t,{class:"ti-input-box"},{default:u((()=>[c(g,{type:"text",clearable:!1,disabled:!0,value:E.value.device_id},null,8,["value"])])),_:1})])),_:1}),c(t,{class:"ti-item-input"},{default:u((()=>[c(t,{class:"ti-label-box"},{default:u((()=>[c(t,{class:"ti-label-left"},{default:u((()=>[c(l,{class:"ti-label-server"},{default:u((()=>[r(d(p(A)("機器備註(非必填)")),1)])),_:1})])),_:1})])),_:1}),c(t,{class:"ti-input-box"},{default:u((()=>[c(g,{type:"text",onInput:R,placeholder:p(A)("機器備註"),clearable:!1},null,8,["placeholder"])])),_:1})])),_:1}),c(t,{class:"ti-item-input"},{default:u((()=>[c(t,{class:"ti-label-box"},{default:u((()=>[c(t,{class:"ti-label-left"},{default:u((()=>[c(l,{class:"ti-label-server"},{default:u((()=>[r(d(p(A)("服務器連接地址")),1)])),_:1})])),_:1})])),_:1}),c(t,{class:"ti-input-box"},{default:u((()=>[c(g,{type:"text",onInput:j,placeholder:p(A)("伺服器位址"),value:E.value.ip,clearable:!1},null,8,["placeholder","value"]),c(t,{class:"ti-colon"},{default:u((()=>[r(":")])),_:1}),c(t,{class:"ti-input-port"},{default:u((()=>[c(g,{type:"number",onInput:L,placeholder:p(A)("端口"),value:E.value.port,clearable:!1},null,8,["placeholder","value"])])),_:1})])),_:1})])),_:1}),c(t,{class:"ti-bottom"},{default:u((()=>[c(v,{title:p(A)("重置"),onClick:Z},null,8,["title"]),c(v,{title:p(A)("確定"),type:"primary",onClick:K},null,8,["title"])])),_:1}),c(t,{class:"ti-select-table-box",onClick:M},{default:u((()=>[c(l,{class:"ti-label-table"},{default:u((()=>[r(d(G.value?p(A)("已選 : ")+p(f)(G.value,21):p(A)("查找桌位")),1)])),_:1})])),_:1}),c(_,{show:J.value,"onUpdate:show":e[0]||(e[0]=a=>J.value=a),onConfirm:z},null,8,["show"])])),_:1})}}},[["__scopeId","data-v-3baec3ba"]]),Z=""+new URL("binding-page-bg-image-db048039.png",import.meta.url).href,K=""+new URL("logo-fcaec045.png",import.meta.url).href,V=""+new URL("monitor-mobbile-8fa7acb0.svg",import.meta.url).href,q=M({__name:"set-language",props:{firstBind:{type:Boolean,default:!1}},setup(a){const l=a,t=e(T[k()||"en"]),p=e(),A=a=>{p.value.isShow()?p.value.close():p.value.open()},f=()=>{t.value=T[k()]};return(a,e)=>{const g=s(i("ti-layout-language-item"),H),v=S,_=Q,b=C;return o(),n(v,{class:"ti-language",onClick:[A,e[0]||(e[0]=E((()=>{}),["stop"]))]},{default:u((()=>[c(v,{class:"ti-language-box"},{default:u((()=>[c(g,{ref_key:"refShowLanguage",ref:p,firstBind:l.firstBind,onLanguageText:f},null,8,["firstBind"])])),_:1}),c(_,{class:"ti-language-global",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAIeSURBVHgB5VXdcdswDAYUKpXVPrAbeASNoExQZ4ImE7QbxB6hE9gb1BvYnSDaoN6gfOg5PsshA0CyJEbUnZK7vCTfnX9EfvgAkAAE8CGgP8c3ehL/1Wns6s+9nnz6OcY2GhRNL2ckWolY9x0Qpp3tjBa/CY84HMCLHOhU3QG43+BcoTVoQMx7JIRc9ogDDpYU0N0oB5U4zuUhORVwUBkMgfeYI3DzkBP0xBNKNYJlxYeteSiv+KjoODJwaMBZU1lFlJXTUOLalGWhJ2rTZmmvzf5xHQxIzjNRlDol/0Kwjdie7y2UQUWkc+XUH0/GlFBQxSwpm/zZJXOGO1rbmn15q9OLGVjKkI7LGDBdWtSJ/gd9NnCM/0GEG4jVrBbqi1eh8VpeP2RiQ7as0a0q1Rq4GyE2EaLpCA1h2nCxcZxTULy+8jLwxGXHGhgL1+NOGxl4Y7QO+NK6sNH4SsIetwg5WFBXblsjp4OOfew8rvBJA+HX+bG5ZHMoV/Szkh44/KeqqI0Q/pATGCpT+U8NBxcknHyhMjXDd9c2Gryi0SDYaMpjoaWoIq5nclaPijjOIHbUSG7ncSOc0ldh9se1jIojjYpIMr31JHuRpGpOy9XQuiy/SldzE4Vg3ZUMO27OSm5BDudeHM9tzP5EBLeQB29aBuBN27540EHjxFKqiJnMlm51ncHTlveQGxSvQ+KjIZefqvvmlcmvz2T4Lfa+8ARyhNbiDRkX2gAAAABJRU5ErkJggg=="}),c(b,{class:"ti-language-text"},{default:u((()=>[r(d(t.value),1)])),_:1}),c(_,{class:"ti-language-arrow-down",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACPSURBVHgB7Y9BCoUwDESH/w3EuskRPIpH8AZ6M72ZR9ClO60KQRGtYF0ofbRQmslMAgQC70TEHkb6SM8kEkPDfBMqcIFJpz02aF377dSMTt8DalfIXLc6/ehZ4JyIqdSJTjbZTL7oSlzFFXLL3BXixfwwxFDlzfwkxJ+5hph/LjE1i3nUCkcZnkAsCAS+xQhmhzo19D7FAAAAAABJRU5ErkJggg=="})])),_:1})}}},[["__scopeId","data-v-2cc4bd42"]]),F=M({__name:"first-binding",setup(a){const l=e(!1);return(a,e)=>{const t=Q,n=S,f=s(i("ti-layout-setserver"),z),g=s(i("ti-modal"),J);return o(),R(j,null,[c(n,{class:"page",onClick:e[0]||(e[0]=a=>p(L)())},{default:u((()=>[c(n,{class:"ti-page-bg"},{default:u((()=>[c(t,{class:"ti-bg-image",src:Z})])),_:1}),c(n,{class:"ti-flex"},{default:u((()=>[c(n,{class:"ti-flex-round"},{default:u((()=>[c(n,{class:"ti-round-box"},{default:u((()=>[c(n,{class:"ti-round-content"},{default:u((()=>[c(n,{class:"ti-item-logo"},{default:u((()=>[c(t,{class:"ti-logo",src:K})])),_:1}),c(f,{class:"m-top-32px"})])),_:1})])),_:1})])),_:1})])),_:1}),c(n,{class:"ti-language-box"},{default:u((()=>[c(q,{firstBind:!0})])),_:1})])),_:1}),c(g,{class:"ti-action-tips",show:l.value,"onUpdate:show":e[1]||(e[1]=a=>l.value=a),isCancelShow:!1,isConfirmShow:!0,content:p(A)("平板設備數量已達上限，請聯繫銷售代表"),onConfirm:e[2]||(e[2]=a=>l.value=!1)},{title:u((()=>[c(n,{class:"warning-header"},{default:u((()=>[c(n,{class:"warning-image-round"},{default:u((()=>[c(t,{class:"warning-image",src:V,mode:""})])),_:1}),c(n,{class:"warning-text",style:{"font-weight":"bold"}},{default:u((()=>[r(d(p(A)("綁定失敗")),1)])),_:1})])),_:1})])),default:u((()=>[G("template",null,[c(n)])])),_:1},8,["show","content"])],64)}}},[["__scopeId","data-v-0be7fefe"]]);export{F as default};
