import{a7 as e,a8 as t,a9 as a,aa as l,ab as i,k as s,l as o,w as u,v as n,a5 as c,a6 as r,t as d,m as v,y as p,z as f,T as _,q as m,X as h,A as g,j as y,R as b,S as w,r as x,ac as k,ad as A,ae as C,af as I,ag as T,ah as D,g as E,ai as R,F as L,x as S,aj as M,ak as O,al as B,am as G,Y as J,an as N,a2 as U,s as j,ao as z,u as F,ap as P,aq as Z,ar as Y,as as Q,at as V,au as H,M as W,a3 as X,av as K,a as q,$,aw as ee,ax as te,c as ae,b as le,ay as ie,az as se,aA as oe,aB as ue,aC as ne,aD as ce,aE as re,h as de,f as ve,n as pe,p as fe,B as _e,C as me,D as he,E as ge,G as ye,H as be,I as we,J as xe,K as ke,L as Ae,aF as Ce,e as Ie,N as Te,O as De,P as Ee}from"./index-e1de81b2.js";import{a as Re,D as Le,v as Se,_ as Me}from"./verify.2f2d864a.js";import{c as Oe,e as Be,f as Ge,i as Je,g as Ne,_ as Ue,a as je,b as ze}from"./platform.a39c46c1.js";import{_ as Fe,a as Pe}from"./ti-button.ced499f1.js";import{u as Ze,a as Ye}from"./categoryStore.e0f0b093.js";import"./components-ti-keyboard-ti-keyboard.829d1618.js";var Qe=/\s/;var Ve=/^\s+/;function He(e){return e?e.slice(0,function(e){for(var t=e.length;t--&&Qe.test(e.charAt(t)););return t}(e)+1).replace(Ve,""):e}var We=NaN,Xe=/^[-+]0x[0-9a-f]+$/i,Ke=/^0b[01]+$/i,qe=/^0o[0-7]+$/i,$e=parseInt;function et(a){if("number"==typeof a)return a;if(e(a))return We;if(t(a)){var l="function"==typeof a.valueOf?a.valueOf():a;a=t(l)?l+"":l}if("string"!=typeof a)return 0===a?a:+a;a=He(a);var i=Ke.test(a);return i||qe.test(a)?$e(a.slice(2),i?2:8):Xe.test(a)?We:+a}const tt=function(){return a.Date.now()};var at=Math.max,lt=Math.min;function it(e,a,l){var i,s,o,u,n,c,r=0,d=!1,v=!1,p=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function f(t){var a=i,l=s;return i=s=void 0,r=t,u=e.apply(l,a)}function _(e){var t=e-c;return void 0===c||t>=a||t<0||v&&e-r>=o}function m(){var e=tt();if(_(e))return h(e);n=setTimeout(m,function(e){var t=a-(e-c);return v?lt(t,o-(e-r)):t}(e))}function h(e){return n=void 0,p&&i?f(e):(i=s=void 0,u)}function g(){var e=tt(),t=_(e);if(i=arguments,s=this,c=e,t){if(void 0===n)return function(e){return r=e,n=setTimeout(m,a),d?f(e):u}(c);if(v)return clearTimeout(n),n=setTimeout(m,a),f(c)}return void 0===n&&(n=setTimeout(m,a)),u}return a=et(a)||0,t(l)&&(d=!!l.leading,o=(v="maxWait"in l)?at(et(l.maxWait)||0,a):o,p="trailing"in l?!!l.trailing:p),g.cancel=function(){void 0!==n&&clearTimeout(n),r=0,i=c=s=n=void 0},g.flush=function(){return void 0===n?u:h(tt())},g}const st={en:{"uni-load-more.contentdown":"Pull up to show more","uni-load-more.contentrefresh":"loading...","uni-load-more.contentnomore":"No more data"},"zh-Hans":{"uni-load-more.contentdown":"上拉显示更多","uni-load-more.contentrefresh":"正在加载...","uni-load-more.contentnomore":"没有更多数据了"},"zh-Hant":{"uni-load-more.contentdown":"上拉顯示更多","uni-load-more.contentrefresh":"正在加載...","uni-load-more.contentnomore":"沒有更多數據了"}};let ot;setTimeout((()=>{ot=l().platform}),16);const{t:ut}=i(st);const nt=Fe({name:"UniLoadMore",emits:["clickLoadMore"],props:{status:{type:String,default:"more"},showIcon:{type:Boolean,default:!0},iconType:{type:String,default:"auto"},iconSize:{type:Number,default:24},color:{type:String,default:"#777777"},contentText:{type:Object,default:()=>({contentdown:"",contentrefresh:"",contentnomore:""})},showText:{type:Boolean,default:!0}},data:()=>({webviewHide:!1,platform:ot,imgBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QzlBMzU3OTlEOUM0MTFFOUI0NTZDNERBQURBQzI4RkUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QzlBMzU3OUFEOUM0MTFFOUI0NTZDNERBQURBQzI4RkUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpDOUEzNTc5N0Q5QzQxMUU5QjQ1NkM0REFBREFDMjhGRSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpDOUEzNTc5OEQ5QzQxMUU5QjQ1NkM0REFBREFDMjhGRSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pt+ALSwAAA6CSURBVHja1FsLkFZV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"}),computed:{iconSnowWidth(){return 2*(Math.floor(this.iconSize/24)||1)},contentdownText(){return this.contentText.contentdown||ut("uni-load-more.contentdown")},contentrefreshText(){return this.contentText.contentrefresh||ut("uni-load-more.contentrefresh")},contentnomoreText(){return this.contentText.contentnomore||ut("uni-load-more.contentnomore")}},mounted(){},methods:{onClick(){this.$emit("clickLoadMore",{detail:{status:this.status}})}}},[["render",function(e,t,a,l,i,g){const y=_,b=m,w=h;return s(),o(b,{class:"uni-load-more",onClick:g.onClick},{default:u((()=>[!i.webviewHide&&("circle"===a.iconType||"auto"===a.iconType&&"android"===i.platform)&&"loading"===a.status&&a.showIcon?(s(),n("svg",{key:0,width:"24",height:"24",viewBox:"25 25 50 50",style:c({width:a.iconSize+"px",height:a.iconSize+"px"}),class:"uni-load-more__img uni-load-more__img--android-H5"},[r("circle",{cx:"50",cy:"50",r:"20",fill:"none",style:c({color:a.color}),"stroke-width":3},null,4)],4)):!i.webviewHide&&"loading"===a.status&&a.showIcon?(s(),o(b,{key:1,style:c({width:a.iconSize+"px",height:a.iconSize+"px"}),class:"uni-load-more__img uni-load-more__img--ios-H5"},{default:u((()=>[d(y,{src:i.imgBase64,mode:"widthFix"},null,8,["src"])])),_:1},8,["style"])):v("",!0),a.showText?(s(),o(w,{key:2,class:"uni-load-more__text",style:c({color:a.color})},{default:u((()=>[p(f("more"===a.status?g.contentdownText:"loading"===a.status?g.contentrefreshText:g.contentnomoreText),1)])),_:1},8,["style"])):v("",!0)])),_:1},8,["onClick"])}],["__scopeId","data-v-188e8029"]]),ct=Fe({__name:"ti-loading",props:{status:{type:String,default:"loading"},contentdownText:{type:String,default:g("上拉顯示更多")},contentrefreshText:{type:String,default:g("正在加載...")},contentnomoreText:{type:String,default:g("沒有更多數據了")}},setup(e){const t=e;return(e,a)=>{const l=b(w("uni-load-more"),nt),i=m;return s(),o(i,{class:"ti-loading"},{default:u((()=>[d(l,{status:t.status,contentText:{contentdown:y(g)("上拉顯示更多"),contentrefresh:y(g)("正在加載..."),contentnomore:y(g)("沒有更多數據了")}},null,8,["status","contentText"])])),_:1})}}},[["__scopeId","data-v-60e2e279"]]),rt=""+new URL("orange-occupy-bitmap-0d6d0ba4.svg",import.meta.url).href,dt=""+new URL("placeholder_square-f2c1eaed.svg",import.meta.url).href,vt=""+new URL("placeholder_round-7fab4b50.svg",import.meta.url).href,pt=Fe({__name:"ti-image",props:{src:{type:String,required:!0},isSquare:{type:Boolean,default:!0}},setup(e){const t=x(!0),a=x(!1),l=()=>{t.value=!0,a.value=!1},i=()=>{t.value=!1,a.value=!0};return(c,r)=>{const d=m;return s(),o(d,{class:"container"},{default:u((()=>[e.src&&!a.value?(s(),n("img",{key:0,class:"image-content",src:e.src,onLoad:l,onError:i,mode:"widthFix"},null,40,["src"])):v("",!0),e.src||a.value?v("",!0):(s(),n("img",{key:1,class:"image-content",src:rt,onLoad:l,onError:i,mode:"widthFix"},null,32)),t.value?v("",!0):(s(),o(d,{key:2},{default:u((()=>[k(c.$slots,"default",{},(()=>[!t.value&&e.isSquare?(s(),n("img",{key:0,class:"image-placeholder",src:dt,mode:"widthFix"})):v("",!0),t.value||e.isSquare?v("",!0):(s(),n("img",{key:1,class:"image-placeholder",src:vt,mode:"widthFix"}))]),!0)])),_:3}))])),_:3})}}},[["__scopeId","data-v-9cf3b6f5"]]);function ft(e){if(function(e){return null!=e}(e))return function(e){return/^(-)?\d+(\.\d+)?$/.test(e)}(e=String(e))?`${e}px`:e}const _t=(e=300)=>new Promise((t=>setTimeout(t,e)));const mt="l-ball";const ht=Fe(I({name:mt,props:{duration:{type:Number,default:600},offset:{type:[Number,Array],default:150},size:{type:[Number,String]},color:String},setup(e,{expose:t}){const a=R(),l=T({x:0,y:0}),[i,s]=function(){const e=x(!1);let t=null;return[e,()=>{e.value=!0,t&&clearTimeout(t),t=setTimeout((()=>{e.value=!1}),300)}]}(),[o,u]=function(e=600){const t=x([]);let a=null;return[t,()=>{a&&clearTimeout(a),a=setTimeout((()=>{t.value.every((e=>e.done))&&(t.value=[])}),2.5*e)}]}(e.duration),n=(e,t,a,l)=>{const i=t.x+(a.x-t.x)*e,s=t.y+(a.y-t.y)*e;return{x:i+(a.x-180+(l.x-a.x)*e-i)*e,y:s+(a.y+(l.y-a.y)*e-s)*e}},c=D((()=>{const{offset:t}=e;return Array.isArray(t)?t:[t,t]}));return E((()=>{_t(150).then((()=>{(function(e,t={}){const a="boundingClientRect";let{context:l,needAll:i,type:s=a}=t;return new Promise(((t,o)=>{const u=A().in(l)[i?"selectAll":"select"](e),n=e=>{e?t(e):o("no rect")};s==a?u[s](n).exec():u[s]({node:!0,size:!0,rect:!0},n).exec()}))})(`.${mt}-wrapper`,{context:a}).then((e=>{l.x=e.left+e.width/2,l.y=e.top+e.height/2}))}))})),t({action:async(t,a=l)=>{const i=+new Date,{x:r,y:d,touches:v}=t,{clientX:p,clientY:f}=v&&v[0]||{},_={x:r||p,y:d||f},m={x:_.x-a.x>.3*c.value[0]?-c.value[0]:c.value[0],y:-c.value[1]},h={x:a.x-_.x,y:a.y-_.y},g=T({ref:`l-ball-${i}`,time:i,data:null,style:(y={left:ft(_.x),top:ft(_.y),width:ft(e.size),height:ft(e.size),backgroundColor:e.color},Object.keys(y).filter((e=>void 0!==y[e]&&null!==y[e]&&""!==y[e])).map((e=>`${function(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()}(e)}: ${y[e]};`)).join(" ")),done:!1});var y;o.value.push(g),_.x=0,_.y=0;let b=0,w=null;const x=[];var k;k={duration:0,timingFunction:"linear"},w=C({...k});for(let e=0;e<=30;e++){const t=e/30,{x:a,y:l}=n(t,_,m,h);let i=0;if(x.length>0){const e=x[x.length-1];i=Math.sqrt((a-e.x)**2+(l-e.y)**2),b+=i}x.push({x:a,y:l,d:i})}x.forEach((({x:t,y:a,d:l},i)=>{let s=l/b*e.duration||1;w.opacity(1-.91/30*i).translate(t,a).step({duration:s})})),await _t(50);let A=e.duration;g.data=w.export(null),_t(.52*A).then((()=>{s()})),_t(2*A).then((()=>{g.done=!0,u()}))}}),{target:l,active:i,balls:o}}}),[["render",function(e,t,a,l,i,r){const d=m;return s(),o(d,{class:"l-ball-wrapper",ref:"l-ball-wrapper"},{default:u((()=>[(s(!0),n(L,null,S(e.balls,(e=>(s(),n(L,{key:e.time},[e.done?v("",!0):(s(),o(d,{key:0,class:"l-ball",ref_for:!0,ref:e.ref,style:c(e.style),animation:e.data},null,8,["style","animation"]))],64)))),128)),k(e.$slots,"default",{active:e.active},void 0,!0)])),_:3},512)}],["__scopeId","data-v-b3f08bc3"]]),gt=""+new URL("pengren-96abe417.svg",import.meta.url).href,yt=""+new URL("icon-ring-192350e1.svg",import.meta.url).href,bt=""+new URL("icon-lock-bd74ef9c.svg",import.meta.url).href,wt=""+new URL("network-369da6a5.svg",import.meta.url).href,xt=Fe({__name:"ti-category",props:{scrollLeft:{type:Number,default:0},scrollInterval:{type:Number,default:200},threshold:{type:Number,default:5}},setup(e,{expose:t}){const a=e,l=x(0),i=x(!1),n=x(!1),c=x(0),r=x(0),p=x(`ti-${M(16)}`);O((()=>a.scrollLeft),(()=>{l.value=a.scrollLeft}));const f=it((e=>{l.value=e.detail.scrollLeft,i.value=a.threshold<e.detail.scrollLeft,n.value=r.value+e.detail.scrollLeft<e.detail.scrollWidth-a.threshold}),300),_=()=>{i.value=!1},h=()=>{n.value=!1},g=e=>{let t=0;"left"==e?t=l.value-a.scrollInterval:"right"==e&&(t=l.value+a.scrollInterval);const i=c.value-r.value;l.value=Math.min(i,Math.max(t,0))},C=()=>{G((()=>{l.value=0;A().in(this).select(`#${p.value}`).fields({size:!0,scrollOffset:!0},(e=>{r.value=(null==e?void 0:e.width)||0,c.value=(null==e?void 0:e.scrollWidth)||0,c.value>r.value?n.value=!0:(i.value=!1,n.value=!1)})).exec()}))};return E((()=>{C(),window.addEventListener("resize",C)})),B((()=>{window.removeEventListener("resize",C)})),t({getScrollWidth:C}),(e,t)=>{const c=b(w("uni-icons"),Re),r=m,x=J;return s(),o(r,{class:"ti-category-box"},{default:u((()=>[i.value?(s(),o(r,{key:0,class:"ti-category-left",onClick:t[0]||(t[0]=e=>g("left"))},{default:u((()=>[d(r,{class:"ti-category-btn"},{default:u((()=>[d(c,{type:"left",size:"14",color:"#100A05"})])),_:1})])),_:1})):v("",!0),d(x,{id:p.value,class:"ti-category","scroll-left":l.value,"scroll-x":"","enable-flex":"","scroll-with-animation":"","upper-threshold":a.threshold,"lower-threshold":a.threshold,onScrolltoupper:_,onScrolltolower:h,onScroll:y(f)},{default:u((()=>[k(e.$slots,"default",{},void 0,!0)])),_:3},8,["id","scroll-left","upper-threshold","lower-threshold","onScroll"]),n.value?(s(),o(r,{key:1,class:"ti-category-right",onClick:t[1]||(t[1]=e=>g("right"))},{default:u((()=>[d(r,{class:"ti-category-btn"},{default:u((()=>[d(c,{type:"right",size:"14",color:"#100A05"})])),_:1})])),_:1})):v("",!0)])),_:3})}}},[["__scopeId","data-v-50a73735"]]),kt=Fe({__name:"dish-menu",props:{list:{type:Array,default:()=>[]},menuId:{type:Number,default:null},defaultIndex:{type:Number,default:0}},emits:["update:menuId"],setup(e,{emit:t}){const a=t,l=e,i=x(0),c=x(l.defaultIndex),r=x([]),_=x();O((()=>l.list),(async e=>{var t;if(!e||0==e.length)return;await G();const a=A().in(this);e.map(((e,t)=>{a.select(`#scroll-item-${t}`).boundingClientRect((e=>{if(!e)return;const a=r.value;a[t]=e.width+10,r.value=a})).exec()})),g(c.value),null==(t=_.value)||t.getScrollWidth()}),{deep:!0,immediate:!0});const g=e=>{c.value=e,i.value=r.value.slice(0,e+1).reduce(((e,t)=>e+t),0)-(r.value[e]+100),a("update:menuId",l.list[e].category_id)};return(e,t)=>{const a=h,r=m,x=b(w("ti-category"),xt);return s(),o(r,{class:"ti-dish-menu"},{default:u((()=>[l.list&&l.list.length>0?(s(),o(x,{key:0,ref_key:"scrollRef",ref:_,scrollLeft:i.value},{default:u((()=>[d(r,{class:"ti-menu-content"},{default:u((()=>[(s(!0),n(L,null,S(l.list,((e,t)=>(s(),o(r,{key:t,class:N(["ti-menu-item",{active:t==c.value}]),id:`scroll-item-${t}`,onClick:e=>g(t)},{default:u((()=>[d(a,{class:"ti-menu-title"},{default:u((()=>[p(f(e.name[y(U)()]||e.name_text),1)])),_:2},1024)])),_:2},1032,["id","class","onClick"])))),128))])),_:1})])),_:1},8,["scrollLeft"])):v("",!0)])),_:1})}}},[["__scopeId","data-v-94d6e40f"]]),At=Fe({__name:"dish-category",props:{categoryId:{type:Number,default:null}},emits:["update:categoryId","update:isSpecial"],setup(e,{emit:t}){const a=Ze(),{categoryList:l}=j(a),i=t,c=x(),r=x(0),_=x(0),h=D((()=>{let e=(l.value.find((e=>e.category_id==r.value))||{}).child||[];return e&&e.length>0&&(e=[Ye].concat(e)),e})),g=D((()=>l.value.find((e=>e.category_id==r.value)))),k=D((()=>h.value.find((e=>e.category_id==_.value)))),A=e=>{var t;_.value=e,i("update:isSpecial",null==(t=k.value)?void 0:t.is_special),i("update:categoryId",_.value>0?_.value:r.value)};return O((()=>r.value),(()=>{var e,t;i("update:isSpecial",null==(e=g.value)?void 0:e.is_special),i("update:categoryId",r.value),h.value&&h.value.length>0&&(_.value=h.value[0].category_id,A(_.value)),null==(t=c.value)||t.getScrollWidth()})),E((()=>{null==a||a.getCategory()})),(e,t)=>{const a=m,i=b(w("ti-category"),xt);return s(),o(a,{class:"ti-category-box"},{default:u((()=>[d(kt,{list:y(l),menuId:r.value,"onUpdate:menuId":t[0]||(t[0]=e=>r.value=e)},null,8,["list","menuId"]),h.value&&h.value.length>0?(s(),o(a,{key:0,class:"ti-dish-secondary"},{default:u((()=>[d(i,{ref_key:"categoryRef",ref:c},{default:u((()=>[d(a,{class:"ti-secondary-box"},{default:u((()=>[(s(!0),n(L,null,S(h.value,((e,t)=>(s(),o(a,{key:t,class:N([{active:e.category_id==_.value},"ti-secondary-item"]),onClick:t=>A(e.category_id)},{default:u((()=>[p(f(e.name[y(U)()]||e.name_text),1)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1},512)])),_:1})):v("",!0)])),_:1})}}},[["__scopeId","data-v-d311bb72"]]);function Ct(e){return z("order.Order/sendKitchen",e,{isLoading:!0,isMessage:!1})}const It=Fe({__name:"goods-detail",props:{show:{type:Boolean,default:!1},goodsDetail:{type:Object,default:()=>({})}},emits:["update:show","success","cancel"],setup(e,{emit:t}){const a=F(),l=t,i=e,c=x({});x(!1);const r=x(!1),_=x({product_name:"",product_id:null,product_num:1,total_price:null,price:null,product_price:null,product_sku_id:null,attr:[],feed_ids:[],bag_price:0,delivery:P()?30:40,describe:null,is_buffet:1,limit_num:0});O((()=>i.show),(()=>{i.show&&k()}));const k=async()=>{var e,t,a,l,s,o,u,n,r,d,v,p,f,m;c.value=i.goodsDetail,_.value.product_name=null==(e=c.value)?void 0:e.product_name,_.value.product_name_text=null==(t=c.value)?void 0:t.product_name_text,_.value.product_id=null==(a=c.value)?void 0:a.product_id,_.value.total_price=null==(l=c.value)?void 0:l.product_price,_.value.price=null==(s=c.value)?void 0:s.product_price,_.value.product_price=null==(o=c.value)?void 0:o.product_price,_.value.is_buffet=null==(u=c.value)?void 0:u.is_buffet,_.value.limit_num=null==(n=c.value)?void 0:n.limit_num,(null==(r=c.value)?void 0:r.sku.length)>0&&(null==(d=c.value)||d.sku.some((e=>{if(e.stock_num>0)return _.value.product_sku_id=e.product_sku_id,!0}))),(null==(v=c.value)?void 0:v.product_attr)&&(null==(p=c.value)?void 0:p.product_attr.length)>0&&(null==(f=c.value)||f.product_attr.map(((e,t)=>{(null==e?void 0:e.attribute_value)&&(null==e?void 0:e.attribute_value.length)>0?_.value.attr[t]=0:_.value.attr[t]=null}))),(null==(m=_.value)?void 0:m.feed_ids.length)>0&&(_.value.feed_ids=[])},A=(e,t)=>_.value.attr[e]==t;return(e,t)=>{const x=b(w("ti-image"),pt),k=m,C=h,I=b(w("ti-modal"),Oe);return s(),o(I,{show:i.show,title:y(g)("商品詳情"),cancelText:y(g)("取消"),confirmText:y(g)("確定"),confirmLoading:r.value,onCancel:t[0]||(t[0]=e=>l("cancel")),onConfirm:t[1]||(t[1]=e=>(async()=>{var e,t,i,s;const o={x:event.clientX,y:event.clientY};if(r.value)return;const u={..._.value};u.attr=u.attr.join(",");let n=[];if(_.value.product_sku_id&&(null==(e=c.value)?void 0:e.sku.length)>0){const e=null==(t=c.value)?void 0:t.sku.find((e=>e.product_sku_id==_.value.product_sku_id));u.price=parseFloat(null==e?void 0:e.product_price)||0,u.total_price=parseFloat(null==e?void 0:e.product_price)||0,n.push(null==e?void 0:e.spec_name)}_.value.attr&&_.value.attr.length>0&&_.value.attr.map(((e,t)=>{var a;const l=null==(a=c.value)?void 0:a.product_attr[t];(null==l?void 0:l.attribute_value)&&l.attribute_value[e]&&n.push(l.attribute_value[e])})),_.value.product_sku_id&&(null==(i=c.value)?void 0:i.sku)&&(null==(s=c.value)?void 0:s.sku.length)>0&&_.value.feed_ids.map((e=>{var t;const a=((null==(t=c.value)?void 0:t.feed)||[]).find((t=>t.product_feed_id==e));n.push(null==a?void 0:a.feed_name),u.price=V(u.price,null==a?void 0:a.price),u.total_price=V(u.total_price,null==a?void 0:a.price)})),u.describe=n.join(";"),u.delivery=P()?30:40,u.order_id=H(),u.table_id=W(),a.detailAddCart(u),l("cancel",!1),setTimeout((()=>{l("success",o)}),100)})())},{content:u((()=>[d(k,{class:"ti-dialog-content"},{default:u((()=>[d(k,{class:"ti-detail-box"},{default:u((()=>[d(k,{class:"ti-detail-image"},{default:u((()=>{var e,t;return[d(x,{src:y(Z)(null==(t=null==(e=c.value)?void 0:e.image[0])?void 0:t.file_path,117,88)},null,8,["src"])]})),_:1}),d(k,{class:"ti-detail-con"},{default:u((()=>[d(k,{class:"ti-detail-title text-ellipsis"},{default:u((()=>{var e,t;return[p(f((null==(e=c.value)?void 0:e.product_name[y(U)()])||(null==(t=c.value)?void 0:t.product_name_text)),1)]})),_:1}),d(k,{class:"ti-price-box"},{default:u((()=>[d(C,{class:"ti-detail-unit"},{default:u((()=>[p(f(y(g)("單價：")),1)])),_:1}),d(C,{class:"ti-detail-price"},{default:u((()=>{var e;return[p(f(y(Y)((null==(e=c.value)?void 0:e.product_price)||0)),1)]})),_:1}),d(C,{class:"ti-detail-subPrice"},{default:u((()=>{var e;return[p(f(y(Q)((null==(e=c.value)?void 0:e.product_price)||0)),1)]})),_:1})])),_:1}),d(k,{class:"ti-price-box"},{default:u((()=>[d(C,{class:"ti-detail-unit"},{default:u((()=>[p(f(y(g)("單位：")),1)])),_:1}),d(C,{class:"ti-detail-price"},{default:u((()=>{var e,t;return[p(f((null==(e=c.value)?void 0:e.product_unit[y(U)()])||(null==(t=c.value)?void 0:t.product_unit_text)),1)]})),_:1})])),_:1})])),_:1})])),_:1}),d(k,{class:"ti-detail-specs"},{default:u((()=>[d(k,{class:"ti-specs-box"},{default:u((()=>{var e,t,a,l,i,r;return[(null==(e=c.value)?void 0:e.sku)&&(null==(t=c.value)?void 0:t.sku.length)>0?(s(),o(k,{key:0,class:"ti-specs-item"},{default:u((()=>[d(k,{class:"ti-specs-title"},{default:u((()=>[p(f(y(g)("規格")),1)])),_:1}),d(k,{class:"ti-specs-child"},{default:u((()=>{var e;return[(s(!0),n(L,null,S(null==(e=c.value)?void 0:e.sku,(e=>(s(),o(k,{key:e.product_sku_id,class:N([{active:e.product_sku_id==_.value.product_sku_id,disabled:e.stock_num<=0},"ti-child-item"]),onClick:t=>(e=>{e.stock_num<=0||_.value.product_sku_id!=e.product_sku_id&&(_.value.product_sku_id=e.product_sku_id)})(e)},{default:u((()=>[d(C,{class:"ti-child-name"},{default:u((()=>[p(f(e.spec_name_i18n[y(U)()]||e.spec_name_text),1)])),_:2},1024),d(C,{class:"ti-child-price"},{default:u((()=>[p(f(y(Y)((null==e?void 0:e.product_price)||0)),1)])),_:2},1024),d(C,{class:"ti-child-subPrice"},{default:u((()=>[p(f(y(Q)((null==e?void 0:e.product_price)||0)),1)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128))]})),_:1})])),_:1})):v("",!0),(null==(a=c.value)?void 0:a.product_attr)&&(null==(l=c.value)?void 0:l.product_attr.length)>0?(s(),o(k,{key:1},{default:u((()=>{var e;return[(s(!0),n(L,null,S(null==(e=c.value)?void 0:e.product_attr,((e,t)=>(s(),o(k,{key:t,class:"ti-specs-item"},{default:u((()=>[d(k,{class:"ti-specs-title"},{default:u((()=>[p(f(e.attribute_name_i18n[y(U)()]||e.attribute_name_text),1)])),_:2},1024),d(k,{class:"ti-specs-child"},{default:u((()=>[(s(!0),n(L,null,S(null==e?void 0:e.attribute_value_i18n,((a,l)=>(s(),o(k,{key:l,class:N([{active:A(t,l)},"ti-child-item"]),onClick:e=>((e,t)=>{_.value.attr[e]=t})(t,l)},{default:u((()=>[d(C,{class:"ti-child-name"},{default:u((()=>[p(f(a[y(U)()]||(null==e?void 0:e.attribute_value_text[l])),1)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128))])),_:2},1024)])),_:2},1024)))),128))]})),_:1})):v("",!0),(null==(i=c.value)?void 0:i.feed)&&(null==(r=c.value)?void 0:r.feed.length)>0?(s(),o(k,{key:2,class:"ti-specs-item"},{default:u((()=>[d(k,{class:"ti-specs-title"},{default:u((()=>[p(f(y(g)("加料")),1)])),_:1}),d(k,{class:"ti-specs-child"},{default:u((()=>{var e;return[(s(!0),n(L,null,S(null==(e=c.value)?void 0:e.feed,(e=>(s(),o(k,{key:e.product_feed_id,class:N([{active:(_.value.feed_ids||[]).indexOf(e.product_feed_id)>-1,disabled:e.stock_num<=0},"ti-child-item"]),onClick:t=>(e=>{if(e.stock_num<=0)return;const t=_.value.feed_ids.indexOf(e.product_feed_id);t>=0?_.value.feed_ids.splice(t,1):_.value.feed_ids.push(e.product_feed_id)})(e)},{default:u((()=>[d(C,{class:"ti-child-name"},{default:u((()=>[p(f(e.feed_name_i18n[y(U)()]||e.feed_name_text),1)])),_:2},1024),d(C,{class:"ti-child-price"},{default:u((()=>[p(f(y(Y)((null==e?void 0:e.price)||0)),1)])),_:2},1024),d(C,{class:"ti-child-subPrice"},{default:u((()=>[p(f(y(Q)((null==e?void 0:e.price)||0)),1)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128))]})),_:1})])),_:1})):v("",!0)]})),_:1})])),_:1})])),_:1})])),_:1},8,["show","title","cancelText","confirmText","confirmLoading"])}}},[["__scopeId","data-v-42612b88"]]),Tt=Fe({__name:"dish-car-order-nav",emits:["car","confirm"],setup(e,{expose:t,emit:a}){const l=F(),{cartTotalQuantity:i,cartTotalAmount:n}=j(l),c=a,r=()=>{c("car")},g=()=>{c("confirm")};x();const b=x(!1);O((()=>i.value),(()=>{i.value>0?b.value=!0:b.value=!1}),{immediate:!0});const w=async()=>{};return w(),t({getCarData:w}),(e,t)=>{const a=_,l=h,c=m;return s(),o(c,{class:"ti-car-order"},{default:u((()=>[d(c,{class:"ti-order-total",onClick:r},{default:u((()=>[d(a,{class:"ti-total-image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAE9SURBVHgB7ZjxrcIgEMY/Xt4AbvAYwRHc4DmKbuAG6gR1A92g3UA3sE6gTnAesZqG1gLKSf/oL7nQwKV8Be6AAj1DPR6IaMTF6NmgVIlUGDFsR2qSVUJ7I8iQIwWVKF2zWU3UBH2AhexJhtx8dFufPw5NF8gwYTu2jbxLkIYsmV3hEiQdYdoepdSCGn38OpzXbP+Qo2Q7YCAA9aqhyhNbyK6jHe+Zcy9PFrQgec52v11R9o0IayTe1IJKu6JL0B8S4EqM0lztii5BGvIELWoNeU52ReopC4qyAvL472PmWECyZAiF5LJ1Ti9uM8pDlMb9yKnxOWbNHHj/KjDwJs4pq8PTN+VizFb4DHuofxD88qW1MGcx/UPFjFsi5RzLv84nmTr0eBL3OEPNnxGrmP7vCDKXuk2V1Bax/Qd8uQE+N6CHpHz4IAAAAABJRU5ErkJggg=="}),d(l,{class:"ti-total-price"},{default:u((()=>[p(f(y(Y)(y(n)||0)),1)])),_:1}),d(l,{class:"ti-total-subPrice"},{default:u((()=>[p(f(y(Q)(y(n)||0)),1)])),_:1})])),_:1}),b.value?(s(),o(c,{key:0,class:"ti-total-badge-box"},{default:u((()=>[d(l,{class:"ti-total-badge"},{default:u((()=>[p(f(y(i)),1)])),_:1})])),_:1})):v("",!0),d(c,{class:"ti-order-btn",onClick:g},{default:u((()=>[d(l,{class:"ti-btn-text"},{default:u((()=>[p(f(e.$t("下單")),1)])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-f0193bc6"]]),Dt=Fe({__name:"cart-number",props:{productItem:{type:Object,default:()=>({})},isOverTime:{type:Boolean,default:!1},isOrderOverTime:{type:Boolean,default:!1},buyContinue:{type:Boolean,default:!1}},emits:["change"],setup(e,{emit:t}){const a=F(),{myCartList:l}=j(a),i=e;x(!1);const n=async e=>{var t,s,o,u,n,c,r,d,v;const p=null==l?void 0:l.value.filter((e=>e.product_id===i.productItem.product_id));let f=0;for(let a=0;a<p.length;a++)f+=p[a].product_num;if(f>=i.productItem.limit_num&&0!=i.productItem.limit_num&&"up"==e)return uni.showToast({title:g("已限購"),icon:"none"});if(i.isOrderOverTime&&1==(null==(t=i.productItem)?void 0:t.is_buffet)&&"up"==e&&1!=i.isOverTime)return void K("buffet_remain",g("點餐時間已到，無法繼續下單"));if(0==i.buyContinue&&1==i.isOverTime&&"up"==e)return void K("buffet_remain",g("用餐時間已到，無法繼續下單"));if(1==i.isOverTime&&1==(null==(s=i.productItem)?void 0:s.is_buffet)&&"up"==e)return void K("buffet_remain",g("自助餐时间已到达，自助餐商品不可继续下单"));const _={product_id:null==(o=i.productItem)?void 0:o.product_id,product_num:null==(u=i.productItem)?void 0:u.product_num,price:null==(n=i.productItem)?void 0:n.price,describe:null==(c=i.productItem)?void 0:c.describe,attr:null==(r=i.productItem)?void 0:r.attr,product_sku_id:null==(d=i.productItem)?void 0:d.product_sku_id,feed_ids:null==(v=i.productItem)?void 0:v.feed_ids,type:e};a.changeCartData(_)};return(t,a)=>{const l=m;return s(),o(l,{class:"ti-number-box",onClick:a[2]||(a[2]=X((()=>{}),["stop"]))},{default:u((()=>[d(l,{class:"ti-number-btn ti-number-minus",disabled:!1,onClick:a[0]||(a[0]=e=>n("down"))},{default:u((()=>[d(l,{class:"ti-number-minus-reduce"})])),_:1}),d(l,{class:"ti-number-input"},{default:u((()=>[p(f(e.productItem.product_num),1)])),_:1}),d(l,{class:"ti-number-btn ti-number-plus",disabled:!1,onClick:a[1]||(a[1]=e=>n("up"))},{default:u((()=>[d(l,{class:"ti-number-plus-add"}),d(l,{class:"ti-number-plus-add2"})])),_:1})])),_:1})}}},[["__scopeId","data-v-e62d1cfa"]]),Et=Fe({__name:"dish-car-ordering-list",props:{isOverTime:{type:Boolean,default:!1},isOrderOverTime:{type:Boolean,default:!1},buyContinue:{type:Boolean,default:!1}},emits:["success","change","sendkitchenFail","close"],setup(e,{emit:t}){const a=F(),{myCartList:l,cartTotalQuantity:i,cartTotalAmount:c}=j(a),r=q();j(r);const _=e,k=x(!1),A=t;x(),x(),x({table_id:""});const C=async e=>{},I=async e=>{try{k.value=!0;const e=await Ct({table_id:W(),add_product_arr:l.value});uni.showToast({title:g(e.msg),icon:"none"}),setTimeout((()=>{A("success"),a.clearCartData()}),200)}catch(t){A("sendkitchenFail",t)}finally{k.value=!1}};return $("handleDelProuct",(e=>{C()})),(e,t)=>{const a=m,r=h,x=J,k=b(w("ti-button"),Pe),T=b(w("ti-empty-data"),Be);return s(),o(a,{class:"ti-shop-list-box"},{default:u((()=>{var e,m;return[(null==(e=y(l))?void 0:e.length)>0?(s(),o(a,{key:0,class:"ti-shop-list"},{default:u((()=>[d(a,null,{default:u((()=>[d(a,{class:"ti-cart-shop-head"},{default:u((()=>[d(a,{class:"ti-shop-head-title"},{default:u((()=>[p(f(y(g)("商品名稱")),1)])),_:1}),d(a,{class:"ti-shop-head-money yx-shop-head-price"},{default:u((()=>[p(f(y(g)("單價")),1)])),_:1}),d(a,{class:"ti-shop-head-num"},{default:u((()=>[p(f(y(g)("數量")),1)])),_:1}),d(a,{class:"ti-shop-head-money"},{default:u((()=>[p(f(y(g)("小計")),1)])),_:1})])),_:1})])),_:1}),d(a,{class:"ti-scroll-box"},{default:u((()=>[d(x,{class:"ti-shop-scroll","scroll-y":""},{default:u((()=>[d(a,{class:"ti-shop-box"},{default:u((()=>[(s(!0),n(L,null,S(y(l),((e,l)=>(s(),o(a,{class:"ti-shop-item",key:e},{default:u((()=>[d(a,{class:"ti-shop-item-box"},{default:u((()=>[d(a,{class:"ti-shop-box"},{default:u((()=>[d(a,{class:"ti-shop-body-top"},{default:u((()=>[d(a,{class:"ti-shop-title text-ellipsis"},{default:u((()=>[p(f((null==e?void 0:e.product_name[y(U)()])||(null==e?void 0:e.product_name_text)),1)])),_:2},1024),d(a,{class:"ti-shop-spec"},{default:u((()=>{return[p(f((t=null==e?void 0:e.describe,a=y(ee)(),t.split(";").filter((e=>""!==e.trim())).map((e=>JSON.parse(e))).map((e=>e[a])).join(";"))),1)];var t,a})),_:2},1024)])),_:2},1024),d(a,{class:"ti-shop-body-money yx-shop-body-pirce"},{default:u((()=>[d(r,{class:"ti-shop-price"},{default:u((()=>[p(f(y(Y)((null==e?void 0:e.price)||0)),1)])),_:2},1024),d(r,{class:"ti-shop-subPrice"},{default:u((()=>[p(f(y(Q)((null==e?void 0:e.price)||0)),1)])),_:2},1024)])),_:2},1024),d(a,{class:"ti-shop-body-number"},{default:u((()=>[d(Dt,{buyContinue:_.buyContinue,isOverTime:_.isOverTime,isOrderOverTime:_.isOrderOverTime,productItem:e,onChange:t[0]||(t[0]=e=>C())},null,8,["buyContinue","isOverTime","isOrderOverTime","productItem"])])),_:2},1024),d(a,{class:"ti-shop-total-money"},{default:u((()=>[d(r,{class:"ti-shop-price"},{default:u((()=>[p(f(y(Y)((null==e?void 0:e.total_price)||0)),1)])),_:2},1024),d(r,{class:"ti-shop-subPrice"},{default:u((()=>[p(f(y(Q)((null==e?void 0:e.total_price)||0)),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1}),d(a,{class:"ti-content-bottom"},{default:u((()=>[d(a,{class:"ti-car-shop-bottom"},{default:u((()=>[d(a,{class:"ti-shop-bottom-item"},{default:u((()=>[d(a,null,{default:u((()=>[d(r,{class:"ti-shop-bottom-text"},{default:u((()=>[p(f(y(g)("共")+(y(i)||0)+y(g)("件")),1)])),_:1})])),_:1}),d(a,null,{default:u((()=>[d(r,{class:"ti-shop-bottom-text"},{default:u((()=>[p(f(y(g)("商品金額：")),1)])),_:1}),d(r,{class:"ti-shop-bottom-price"},{default:u((()=>[p(f(y(Y)(y(c)||0)),1)])),_:1}),d(r,{class:"ti-shop-bottom-subPrice"},{default:u((()=>[p(f(y(Q)(y(c)||0)),1)])),_:1})])),_:1})])),_:1})])),_:1}),d(a,{class:"bottom-button"},{default:u((()=>[d(k,{title:y(g)("退出"),onClick:t[1]||(t[1]=e=>A("close")),class:"close-button"},null,8,["title"]),d(k,{title:y(g)("確認下單"),type:"primary",onClick:I},null,8,["title"])])),_:1})])),_:1})])),_:1})):v("",!0),(null==(m=y(l))?void 0:m.length)<=0?(s(),o(a,{key:1,class:"ti-empty-data-box"},{default:u((()=>[d(T,{title:y(g)("當前無待下單商品")},null,8,["title"]),d(k,{title:y(g)("退出"),onClick:t[2]||(t[2]=e=>A("close"))},null,8,["title"])])),_:1})):v("",!0)]})),_:1})}}},[["__scopeId","data-v-ee4b674a"]]),Rt=Fe({__name:"dish-car-ordered-list",emits:["close"],setup(e,{emit:t}){const a=x([]),l=x(""),i=x();let c=0;const r=t;(async()=>{try{const t=await(e={table_id:W()},z("order.Order/getSendKitchen",e));a.value=t.data.list||[],l.value=t.data.total_price,t.data.list.forEach((e=>{c+=e.plist.length})),i.value=c}catch(t){}var e})();return(e,t)=>{const c=m,_=h,x=J,k=b(w("ti-button"),Pe),A=b(w("ti-empty-data"),Be);return s(),o(c,{class:"ti-shop-list-box"},{default:u((()=>[Object.keys(a.value).length>0?(s(),o(c,{key:0,class:"ti-shop-list"},{default:u((()=>[d(c,{class:"ti-scroll-box"},{default:u((()=>[d(x,{class:"ti-shop-scroll","scroll-y":""},{default:u((()=>[(s(!0),n(L,null,S(a.value,((e,t)=>(s(),o(c,{class:"ti-shop-item",key:t},{default:u((()=>[d(c,{class:"ti-shop-time-top"}),d(c,{class:"ti-shop-time-box"},{default:u((()=>[p(f(e.date+" "+y(g)("下單")),1)])),_:2},1024),(s(!0),n(L,null,S(e.plist,((t,a)=>(s(),o(c,{key:a},{default:u((()=>[d(c,{class:"ti-shop-item-box"},{default:u((()=>[d(c,{class:"ti-shop-box"},{default:u((()=>[d(c,{class:"ti-shop-body-top"},{default:u((()=>[d(c,{class:"ti-shop-title text-ellipsis"},{default:u((()=>[p(f(t.product_name_text||t.name_text||t.buffet_name_text),1)])),_:2},1024),t.product_attr||t.customer_type_name_text?(s(),o(c,{key:0,class:"ti-shop-spec"},{default:u((()=>[p("("+f(t.product_attr||t.customer_type_name_text)+")",1)])),_:2},1024)):v("",!0)])),_:2},1024),d(c,{class:"ti-shop-body-money yx-shop-body-pirce"},{default:u((()=>[d(_,{class:"ti-shop-price"},{default:u((()=>[p(f(y(Y)((null==t?void 0:t.product_price)||(null==t?void 0:t.price)||0)),1)])),_:2},1024),d(_,{class:"ti-shop-subPrice"},{default:u((()=>[p(f(y(Q)((null==t?void 0:t.product_price)||(null==t?void 0:t.price)||0)),1)])),_:2},1024)])),_:2},1024),d(c,{class:"ti-shop-body-state"},{default:u((()=>[null!=t.finish_num?(s(),o(c,{key:0,class:"ti-state-left"},{default:u((()=>[p(f(null!=t.finish_num?t.finish_num:t.num),1)])),_:2},1024)):v("",!0),null!=t.finish_num?(s(),o(c,{key:1,class:"ti-state-line"},{default:u((()=>[p("/")])),_:1})):v("",!0),d(c,{class:"ti-state-right"},{default:u((()=>[p(f(t.total_num||t.num),1)])),_:2},1024),null!=t.finish_num?(s(),o(c,{key:2,class:"ti-state-text"},{default:u((()=>{return[p(f((e=null!=t.finish_num?t.kitchen_status:t.is_comb,g(0===e?"製作中":1===e?"已完成":"未知"))),1)];var e})),_:2},1024)):v("",!0)])),_:2},1024),d(c,{class:"ti-shop-body-money"},{default:u((()=>[d(_,{class:"ti-shop-price"},{default:u((()=>[p(f(y(Y)((null==t?void 0:t.total_product_price)||(null==t?void 0:t.total_price)||0)),1)])),_:2},1024),d(_,{class:"ti-shop-subPrice"},{default:u((()=>[p(f(y(Q)((null==t?void 0:t.total_product_price)||(null==t?void 0:t.total_price)||0)),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024),a!=e.length-1?(s(),o(c,{key:0,class:"ti-shop-item-box-bottom-border"})):v("",!0)])),_:2},1024)))),128))])),_:2},1024)))),128))])),_:1})])),_:1}),d(c,{class:"ti-content-bottom"},{default:u((()=>[d(c,{class:"ti-car-shop-bottom"},{default:u((()=>[d(c,{class:"ti-shop-bottom-item"},{default:u((()=>[d(c,null,{default:u((()=>[d(_,{class:"ti-shop-bottom-text"},{default:u((()=>[p(f(y(g)("共")+(i.value||0)+y(g)("件")),1)])),_:1})])),_:1}),d(c,null,{default:u((()=>[d(_,{class:"ti-shop-bottom-text"},{default:u((()=>[p(f(y(g)("商品金額：")),1)])),_:1}),d(_,{class:"ti-shop-bottom-price"},{default:u((()=>[p(f(y(Y)(l.value||0)),1)])),_:1}),d(_,{class:"ti-shop-bottom-subPrice"},{default:u((()=>[p(f(y(Q)(l.value||0)),1)])),_:1})])),_:1})])),_:1})])),_:1}),d(k,{title:y(g)("退出"),onClick:t[0]||(t[0]=e=>r("close")),style:{}},null,8,["title"])])),_:1})])),_:1})):v("",!0),Object.keys(a.value).length<=0?(s(),o(c,{key:1,class:"ti-empty-data-box"},{default:u((()=>[d(A,{title:y(g)("當前無已下單商品")},null,8,["title"]),d(k,{title:y(g)("退出"),onClick:t[1]||(t[1]=e=>r("close"))},null,8,["title"])])),_:1})):v("",!0)])),_:1})}}},[["__scopeId","data-v-60e32d8d"]]),Lt=Fe({__name:"goods-not-enough",props:{show:{type:Boolean,default:!1},productList:{type:Array,default:[]}},emits:["update:show","confirm"],setup(e,{emit:t}){const a=t,l=e,i=()=>{a("confirm")};return(t,c)=>{const r=h,v=m,_=J,g=b(w("ti-modal"),Oe);return s(),o(g,{class:"ti-action-tip",show:l.show,isCancelShow:!1,title:t.$t("温馨提示"),confirmText:t.$t("確定"),onCancel:c[0]||(c[0]=e=>a("update:show",!1)),onConfirm:i},{content:u((()=>[d(v,{class:"ti-dialog-content"},{default:u((()=>[d(v,{class:"ti-detail-box"},{default:u((()=>[d(r,{class:"ti-detail-des"},{default:u((()=>[p(f(t.$t("商品庫存不足，請重新選擇")),1)])),_:1})])),_:1}),d(v,{class:"ti-detail-specs"},{default:u((()=>[d(_,{"scroll-y":""},{default:u((()=>[(s(!0),n(L,null,S(e.productList,((e,t)=>(s(),o(v,{class:"ti-specs-box"},{default:u((()=>[d(v,{class:"ti-specs-item"},{default:u((()=>[d(v,{class:"ti-specs-title"},{default:u((()=>[p(f(e.product_name_text),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),256))])),_:1})])),_:1})])),_:1})])),_:1},8,["show","title","confirmText"])}}},[["__scopeId","data-v-a9bc6e2e"]]),St=Fe({__name:"dish-list",emits:["success","goodsDetail"],setup(e,{expose:t,emit:a}){te((e=>({72483017:ye.value,"5bb946f2":be.value})));const l=a,i=x([]),c=x(!1),r=x(!1),k=x({category_id:null,is_special:0,list_rows:15,page:1}),C=ae(),I=Ze(),T=F(),{myCartList:D}=j(T),{isBuffet:R}=j(le()),M=x(!1),B=x({}),z=x(!1),P=x(!1),V=x(!1),H=x(0),X=x(0),K=x(!1),ee=x(!1),de=x(!1),ve=x(""),pe=x(!1),fe=x(),_e=x(),me=x([]);$("sendProductList",(e=>{me.value=e}));const he=(e,t=me.value)=>t.some((t=>t.product_id===e)),ge=(e,t=me.value)=>{const a=t.find((t=>t.product_id===e));return a?a.total_num:0},ye=x("0px"),be=x("0px"),we=x(0),xe=x(1),ke=()=>{A().in(this).select(".content-gridview").fields({size:!0},(e=>{const t=re(180,4,e.width);xe.value=t;const a=(e.width-180*t)/(2*t);ye.value=2*a+"px",be.value=`${a}px`,we.value=e.width})).exec()};O((()=>k.value.category_id),(()=>{Ie()}));const Ae=e=>{_e.value.action(e),l("success"),fe.value.getCarData()},Ce=()=>{l("success"),fe.value.getCarData()},Ie=()=>{r.value=!1,k.value.page=1,Re()},Te=()=>{r.value&&(c.value||(k.value.page++,Re()))},De=()=>{M.value=!1},Ee=e=>{ee.value=!0,ve.value=e},Re=async()=>{try{c.value=!0;const e=await(null==C?void 0:C.getGoodsList(k.value));i.value=1==k.value.page?e.list:i.value.concat(e.list),r.value=(null==e?void 0:e.last_page)>(null==e?void 0:e.current_page)}catch(e){}finally{c.value=!1}},Le=x(),Se=()=>{Le.value=!0,Ye.value=!0},Me=()=>{Je()},Je=async e=>{D.value.length>0?je():(Le.value=!0,Ye.value=!1)},Ne=x([]),Ue=x(!1),je=async()=>{try{const e=await Ct({table_id:W(),add_product_arr:D.value});uni.showToast({title:g(e.msg),icon:"none"}),setTimeout((()=>{l("success"),T.clearCartData(),fe.value.getCarData(),Le.value=!0,Ye.value=!1}),300)}catch(e){Fe(e)}},ze=(e,t)=>{e||(Le.value=!1)},Fe=e=>{-32==e.code?et(g("單次僅可下單"),e.data.value,g("個數量，請分多次下單")):-31==e.code?et(g("剩余"),Math.ceil(e.data.value/60),g("分鐘即可繼續下單")):0==e.code&&e.data.length>0||-14==e.code?lt(g("以下商品庫存不足，請刪除後再下單"),e.data):-11==e.code?lt(g("以下商品超出限購數量，請在限購數量內下單"),e.data):-33==e.code?lt(g("以下商品價格有變動，請覈對後再下單"),e.data):"request:fail"==e.errMsg||"request:fail"==e.errmsg?(de.value=!0,ve.value="當前網絡異常，請聯繫服務員"):0==e.data.length||-12==e.code?He.value||0==pe.value?Ee(g("自助餐时间已到达，自助餐商品不可继续下单")):Ee(g("用餐時間已到，無法繼續下單")):(e.errMsg||e.msg)&&uni.showToast({title:e.msg||e.errMsg,icon:"none"})},Pe=async()=>{Ue.value=!1},Ye=x(!0),Qe=e=>{Ye.value=e},Ve=()=>{Ye.value=!1,fe.value.getCarData()};Ye.value=!0;const He=x(!0),We=x(),Xe=x(),Ke=x(!1),qe=x({}),$e=x(!0);E((()=>{var e;0==(null==(e=q())?void 0:e.getIsConnected())&&($e.value=!1),$("globalLock",(e=>{K.value=1==e})),$("sendHead",(e=>{const t=-1!=parseInt(e.buffet.buffet_expired_time);if(He.value=1==e.buffet.is_buy_continue,!t)return pe.value=!1,void(Ke.value=!1);const a=e.buffet.buffet_remaining_time,l=60*parseInt(e.buffet.minute);a<=l&&We.value>=l&&(H.value=e.buffet.minute,z.value=!0),We.value=a;const i=pe.value;if(pe.value=0==e.buffet.buffet_remaining_time,pe.value!=i&&1==pe.value&&(z.value=!0,Ke.value=!0),1==e.buffet.is_remain_continue&&0!=e.buffet.remain_continue_time){const t=e.buffet.buffet_order_remaining_time,a=60*parseInt(e.buffet.remain_continue_notice_time);t<=a&&Xe.value>=a&&(X.value=e.buffet.remain_continue_notice_time,P.value=!0),Xe.value=t;const l=Ke.value;Ke.value=0==e.buffet.buffet_order_remaining_time,Ke.value!=l&&1==Ke.value&&1!=pe.value&&(P.value=!0)}})),$("buffet_remain",(e=>{Ee(e)})),$("quota",(e=>{et(g("單次僅可下單"),e,g("個數量，請分多次下單"))})),$("goodsListRefresh",(async()=>{try{r.value=!1,k.value.page=1,c.value=!0;const e=await(null==I?void 0:I.getCategory(!0)),t=null==e?void 0:e.find((e=>{var t;return e.category_id==k.value.category_id||(e.child&&e.child.length>0?null==(t=e.child)?void 0:t.some((e=>e.category_id==k.value.category_id)):void 0)}));await(null==C?void 0:C.setGoodsBaseUpdate({category_id:(null==t?void 0:t.category_id)||k.value.category_id,is_special:k.value.is_special})),1==R.value&&await(null==C?void 0:C.setGoodsBuffetUpdate({category_id:(null==t?void 0:t.category_id)||k.value.category_id,is_special:k.value.is_special})),Re(),(async(e=[],t)=>{const a=e.filter((e=>e.category_id!=t))||[];for(let l=0;l<a.length;l++){const e=a[l].category_id;qe.value[e]&&clearTimeout(qe.value[e]),qe.value[e]=setTimeout((async()=>{await(null==C?void 0:C.setGoodsBaseUpdate({category_id:e,is_special:a[l].is_special})),1==R.value&&await(null==C?void 0:C.setGoodsBuffetUpdate({category_id:e,is_special:a[l].is_special}))}),3*(l+1)*1e3)}})(e,(null==t?void 0:t.category_id)||k.value.category_id)}catch(e){}}))}));const et=(e,t,a)=>{Ee(e+" "+t+" "+a)},tt=x(""),at=x([]),lt=(e,t)=>{V.value=!0,tt.value=e,at.value=t};return ie((()=>{se("globalLock"),se("closeShowLanguage"),se("buffet_remain"),se("goodsListRefresh")})),t({handleSuccess:Ce}),(e,t)=>{const a=b(w("ti-loading"),ct),l=m,x=b(w("ti-image"),pt),A=_,C=h,I=b(w("ti-empty-data"),Be),E=oe("RecycleScroller"),R=b(w("l-ball"),ht),O=b(w("ti-drawer"),Ge),j=b(w("ti-modal"),Oe),F=J;return s(),n(L,null,[d(l,{class:"ti-dish-box"},{default:u((()=>[d(At,{categoryId:k.value.category_id,"onUpdate:categoryId":t[0]||(t[0]=e=>k.value.category_id=e),isSpecial:k.value.is_special,"onUpdate:isSpecial":t[1]||(t[1]=e=>k.value.is_special=e)},null,8,["categoryId","isSpecial"]),d(l,{class:"ti-dish-list"},{default:u((()=>[c.value&&1==k.value.page?(s(),o(a,{key:0})):(s(),o(E,{key:1,"item-secondary-size":we.value/xe.value,"item-size":220,items:i.value,"grid-items":xe.value,"key-field":"product_id",class:"content-gridview",prerender:6,onScrollEnd:Te,onResize:ke,onVisible:ke},{default:u((({item:e,index:t})=>[d(l,{class:"ti-goods-item left",onClick:t=>(async(e,t)=>{const a=(null==D?void 0:D.value.filter((e=>e.product_id===t.product_id))).reduce(((e,t)=>e+t.product_num),0);if(t.product_stock<=0)return uni.showToast({title:g("已售罄"),icon:"none"});if(1==t.limit_num_status||a>=t.limit_num&&0!=t.limit_num)return uni.showToast({title:g("已限購"),icon:"none"});if(!Ke.value||pe.value||1!=t.is_buffet){if(He.value){if(Ke.value&&1==t.is_buffet)return void Ee(g("自助餐时间已到达，自助餐商品不可继续下单"))}else if(pe.value&&Ke.value||pe.value)return void Ee(g("用餐時間已到，無法添加商品"));if((null==t?void 0:t.sku.length)<=1&&(null==t?void 0:t.product_attr)&&0==(null==t?void 0:t.product_attr.length)&&0==(null==t?void 0:t.feed.length))return _e.value.action(e),T.addCart(t);G((()=>{1==M.value?M.value=!1:(M.value=!0,B.value=t)}))}else Ee(g("點餐時間已到，無法繼續下單"))})(t,e)},{default:u((()=>[!e.product_stock||e.product_stock<=0?(s(),o(l,{key:0,class:"ti-goods-sold-out"},{default:u((()=>[p(f(y(g)("已售罄")),1)])),_:1})):1==e.limit_num_status?(s(),o(l,{key:1,class:"ti-goods-sold-out"},{default:u((()=>[p(f(y(g)("已限购")),1)])),_:1})):v("",!0),d(l,{class:N(["ti-goods-box",{"ti-goods-disabled":e.product_stock<=0||1==e.limit_num_status}])},{default:u((()=>[e.limit_num&&e.limit_num>0?(s(),o(l,{key:0,class:"ti-goods-quota"},{default:u((()=>[p(f(y(ue)("限購{count}份",{count:e.limit_num||0})),1)])),_:2},1024)):v("",!0),d(l,{class:"ti-goods-image"},{default:u((()=>{var t;return[d(x,{src:y(Z)(null==(t=e.image[0])?void 0:t.file_path,180,126)||""},null,8,["src"]),he(e.product_id)&&1==(null==e?void 0:e.is_show_kitchen)?(s(),o(l,{key:0,class:"cooking"},{default:u((()=>[d(A,{class:"cooking-image",src:gt}),d(l,{class:"cooking-text"},{default:u((()=>[d(C,null,{default:u((()=>[p(f(ge(e.product_id)),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)):v("",!0)]})),_:2},1024),d(l,{class:"ti-goods-content"},{default:u((()=>[d(l,{class:"ti-goods-title line-clamp-2"},{default:u((()=>{var t;return[p(f((null==(t=e.product_name[y(U)()])?void 0:t.length)>18?e.product_name[y(U)()].slice(0,17)+"...":e.product_name[y(U)()]||e.product_name_text||"-"),1)]})),_:2},1024),d(l,{class:"ti-price-box"},{default:u((()=>[d(C,{class:"ti-goods-price"},{default:u((()=>[p(f(y(Y)((null==e?void 0:e.product_price)||0)),1)])),_:2},1024),d(C,{class:"ti-goods-subPrice",style:{display:"block"}},{default:u((()=>[p(f(y(Q)((null==e?void 0:e.product_price)||0)),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["class"])])),_:2},1032,["onClick"])])),empty:u((()=>[0==i.value.length?(s(),o(I,{key:0})):v("",!0)])),after:u((()=>[0!=i.value.length?(s(),o(a,{key:0,status:r.value?"loading":"no-more"},null,8,["status"])):v("",!0)])),_:1},8,["item-secondary-size","items","grid-items"]))])),_:1}),ne(d(l,{class:"ti-car-order-nav"},{default:u((()=>[d(R,{ref_key:"ballRef",ref:_e,offset:150,size:23,duration:500},{default:u((({active:e})=>[d(Tt,{ref_key:"carRef",ref:fe,class:N(["nav-car",{active:e}]),onCar:Se,onConfirm:Me},null,8,["class"])])),_:1},512)])),_:1},512),[[ce,$e.value]])])),_:1}),d(It,{show:M.value,"onUpdate:show":t[2]||(t[2]=e=>M.value=e),goodsDetail:B.value,onCancel:De,onSuccess:Ae},null,8,["show","goodsDetail"]),d(Lt,{style:{"z-index":"9999"},show:Ue.value,"onUpdate:show":t[3]||(t[3]=e=>Ue.value=e),productList:Ne.value,onConfirm:Pe},null,8,["show","productList"]),d(O,{show:Le.value,width:603.992,title:y(g)("我點的菜"),maskClick:!0,onChange:ze},{content:u((()=>[d(l,{class:"ti-drawer-content"},{default:u((()=>[d(l,{class:"ti-content-head"},{default:u((()=>[d(l,{class:"ti-switch-box"},{default:u((()=>[d(l,{class:N(Ye.value?"ti-switch-on":"ti-switch-off"),onClick:t[4]||(t[4]=e=>Qe(!0))},{default:u((()=>[d(C,{class:N(Ye.value?"ti-switch-text-on":"ti-switch-text-off")},{default:u((()=>[p(f(y(g)("未下單")),1)])),_:1},8,["class"])])),_:1},8,["class"]),d(l,{class:"ti-switch-space"}),d(l,{class:N(Ye.value?"ti-switch-off":"ti-switch-on"),onClick:t[5]||(t[5]=e=>Qe(!1))},{default:u((()=>[d(C,{class:N(Ye.value?"ti-switch-text-off":"ti-switch-text-on")},{default:u((()=>[p(f(y(g)("已下單")),1)])),_:1},8,["class"])])),_:1},8,["class"])])),_:1})])),_:1}),Ye.value?(s(),o(Et,{key:0,buyContinue:He.value,isOverTime:pe.value,isOrderOverTime:Ke.value,onSuccess:Ve,onClose:t[6]||(t[6]=e=>Le.value=!1),onChange:Ce,onSendkitchenFail:Fe},null,8,["buyContinue","isOverTime","isOrderOverTime"])):v("",!0),Ye.value?v("",!0):(s(),o(Rt,{key:1,onClose:t[7]||(t[7]=e=>Le.value=!1)}))])),_:1})])),footer:u((()=>[d(l)])),_:1},8,["show","title"]),d(j,{class:"ti-action-tips",show:z.value,"onUpdate:show":t[8]||(t[8]=e=>z.value=e),isCancelShow:!1,onConfirm:t[9]||(t[9]=e=>z.value=!1)},{title:u((()=>[d(l,{class:"warning-header"},{default:u((()=>[d(l,{class:"warning-image-round"},{default:u((()=>[d(A,{class:"warning-image",src:yt})])),_:1}),pe.value?(s(),o(l,{key:1,class:"warning-text"},{default:u((()=>[p(f(y(g)("用餐時間結束")),1)])),_:1})):(s(),o(l,{key:0,class:"warning-text"},{default:u((()=>[d(C,null,{default:u((()=>[p(f(y(g)("用餐")),1)])),_:1}),d(C,null,{default:u((()=>[p(f(y(g)("還有")),1)])),_:1}),d(C,{class:"warning-text red"},{default:u((()=>[p(f(H.value),1)])),_:1}),d(C,null,{default:u((()=>[p(f(y(g)("分鐘")),1)])),_:1})])),_:1}))])),_:1})])),content:u((()=>[pe.value?(s(),o(l,{key:1,class:"warning-text"},{default:u((()=>[p(f(y(g)("如有需要，請呼叫服務員")),1)])),_:1})):(s(),o(l,{key:0,class:"warning-text"},{default:u((()=>[d(C,null,{default:u((()=>[p(f(y(g)("請盡快用餐,如有需要，請呼叫服務員")),1)])),_:1})])),_:1}))])),_:1},8,["show"]),d(j,{class:"ti-action-tips",show:P.value,"onUpdate:show":t[10]||(t[10]=e=>P.value=e),isCancelShow:!1,onConfirm:t[11]||(t[11]=e=>P.value=!1)},{title:u((()=>[d(l,{class:"warning-header"},{default:u((()=>[d(l,{class:"warning-image-round"},{default:u((()=>[d(A,{class:"warning-image",src:yt})])),_:1}),Ke.value?(s(),o(l,{key:1,class:"warning-text"},{default:u((()=>[p(f(y(g)("點餐時間結束")),1)])),_:1})):(s(),o(l,{key:0,class:"warning-text"},{default:u((()=>[d(C,null,{default:u((()=>[p(f(y(g)("點餐")),1)])),_:1}),d(C,null,{default:u((()=>[p(f(y(g)("還有")),1)])),_:1}),d(C,{class:"warning-text red"},{default:u((()=>[p(f(X.value),1)])),_:1}),d(C,null,{default:u((()=>[p(f(y(g)("分鐘")),1)])),_:1})])),_:1}))])),_:1})])),content:u((()=>[Ke.value?(s(),o(l,{key:1,class:"warning-text"},{default:u((()=>[p(f(y(g)("如有需要，請呼叫服務員")),1)])),_:1})):(s(),o(l,{key:0,class:"warning-text"},{default:u((()=>[d(C,null,{default:u((()=>[p(f(y(g)("請在剩餘時間完成選購")),1)])),_:1})])),_:1}))])),_:1},8,["show"]),d(j,{class:"ti-order-tip",show:V.value,"onUpdate:show":t[12]||(t[12]=e=>V.value=e),title:y(g)("温馨提示"),isCancelShow:!1,onConfirm:t[13]||(t[13]=e=>V.value=!1)},{content:u((()=>[d(l,{class:"place-order-text"},{default:u((()=>[d(C,null,{default:u((()=>[p(f(tt.value),1)])),_:1})])),_:1}),d(F,{"scroll-y":"true",class:"place-scroll-content"},{default:u((()=>[(s(!0),n(L,null,S(at.value,((e,t)=>(s(),o(l,{class:"place-order-text",key:t},{default:u((()=>[d(C,{class:"place-srcoll-item"},{default:u((()=>[p(f(e.tablet_product_name_text),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1},8,["show","title"]),d(j,{class:"ti-action-tips",show:K.value,"onUpdate:show":t[14]||(t[14]=e=>K.value=e),isCancelShow:!1,isConfirmShow:!1},{title:u((()=>[d(l,{class:"warning-header"},{default:u((()=>[d(l,{class:"warning-image-round"},{default:u((()=>[d(A,{class:"warning-image",src:bt})])),_:1}),d(l,{class:"warning-text"},{default:u((()=>[p(f(y(g)("订单已锁定")),1)])),_:1})])),_:1})])),footer:u((()=>[d(l)])),_:1},8,["show"]),d(j,{class:"ti-action-tips",show:ee.value,"onUpdate:show":t[15]||(t[15]=e=>ee.value=e),isCancelShow:!1,isConfirmShow:!0,onConfirm:t[16]||(t[16]=e=>ee.value=!1),title:y(g)("温馨提示"),content:ve.value},{title:u((()=>[d(l,{class:"warning-header"},{default:u((()=>[d(l,{class:"warning-image-round"},{default:u((()=>[d(A,{class:"warning-image",src:yt})])),_:1}),d(l,{class:"warning-text"},{default:u((()=>[p(f(y(g)("温馨提示")),1)])),_:1})])),_:1})])),_:1},8,["show","title","content"]),d(j,{class:"ti-action-tips",show:de.value,"onUpdate:show":t[17]||(t[17]=e=>de.value=e),isCancelShow:!1,isConfirmShow:!0,onConfirm:t[18]||(t[18]=e=>de.value=!1),content:ve.value},{title:u((()=>[d(l,{class:"warning-header"},{default:u((()=>[d(l,{class:"warning-image-round"},{default:u((()=>[d(A,{class:"warning-image",src:wt})])),_:1}),d(l,{class:"warning-text"},{default:u((()=>[p(f(y(g)("網絡異常")),1)])),_:1})])),_:1})])),_:1},8,["show","content"])],64)}}},[["__scopeId","data-v-6f9ee6aa"]]),Mt=Fe({__name:"opentable-index",setup(e){const t=F(),a=()=>{J()},l=x(),i=x(),n=x("");x([]);const c=x(),r=x(!1),v=x(!1),k=x({ip:"",port:"",device_id:"",remark:""}),A=()=>{const e=pe();k.value.ip=(null==e?void 0:e.ip)||fe()||"127.0.0.1",k.value.port=(null==e?void 0:e.port)||"8080"},C=e=>{k.value.remark=e},I=e=>{k.value.ip=e},T=e=>{k.value.port=e},D=async()=>{var e;const t={...k.value};if(t.ip)if(t.port)try{const a=await he(ge(`${null==t?void 0:t.ip}:${t.port}`),!1);ye(t),be(a.data.app_id),we(a.data.shop_supplier_id),xe(null==(e=a.data)?void 0:e.currency),setTimeout((()=>{r.value=!0}),150)}catch(a){-102==a.code?uni.showToast({title:g("綁定失敗,該商家授權已過期"),icon:"none"}):uni.showToast({title:g("绑定失败"),icon:"none"})}else uni.showToast({title:g("請輸入連接埠"),icon:"none"});else uni.showToast({title:g("請輸入伺服器位址"),icon:"none"})},R=e=>{r.value=!1,e&&(c.value=e,n.value=e.table_no)},L=()=>{},S=()=>{A(),n.value=ke().table_no,c.value=ke()},M=async()=>{var e;const a={...k.value};if(a.ip)if(a.port)try{const l=await he(ge(`${null==a?void 0:a.ip}:${a.port}`),!1);if(!c.value)return void uni.showToast({title:g("請查找桌位"),icon:"none"});ye(a),be(l.data.app_id),we(l.data.shop_supplier_id),xe(null==(e=l.data)?void 0:e.currency),setTimeout((()=>{O()}),150),t.clearCartData()}catch(l){-102==l.code?uni.showToast({title:g("綁定失敗,該商家授權已過期"),icon:"none"}):uni.showToast({title:g("绑定失败"),icon:"none"})}else uni.showToast({title:g("請輸入連接埠"),icon:"none"});else uni.showToast({title:g("請輸入伺服器位址"),icon:"none"})},O=async()=>{if(W()===c.value.table_id&&k.value.remark==Ae("machine_remark"))return uni.showToast({title:g("绑定成功"),icon:"none"}),i.value=!1,Ce(!1),void setTimeout((()=>{Ie({url:"/pages/index/index"})}),150);try{await Te({key:Ae("machine_id"),table_id:c.value.table_id,old_table_id:W(),device_remark:k.value.remark});De(c.value),uni.showToast({title:g("绑定成功"),icon:"none"}),i.value=!1,Ce(!1),setTimeout((()=>{Ie({url:"/pages/index/index"})}),150),t.clearCartData(),k.value.remark!=Ae("machine_remark")&&Ee({key:"machine_remark",data:k.value.remark})}catch(e){uni.showToast({title:e.msg||e.errMsg,icon:"none"})}},B=x(!1),G=x(!1),J=()=>{B.value=!0,G.value=!0},N=async e=>{if(e)try{await Se({password:e});k.value.remark=Ae("machine_remark")||"",i.value=!0,c.value=ke(),n.value=c.value.table_no,U()}catch(t){"request:fail"==t.errMsg||"request:fail"==t.errmsg?uni.showToast({title:g("网络异常，请检查您的网络设置"),icon:"none"}):(t.errMsg||t.msg)&&uni.showToast({title:t.msg||t.errMsg,icon:"none"})}else uni.showToast({title:g("請輸入密碼"),icon:"none"})},U=()=>{B.value=!1,G.value=!1};A();const j=x({name:"",logo:"",tableNo:"",is_call_service:1});return $("authorization",(e=>{v.value=!e})),E((()=>{Je()?k.value.device_id=Ne():de({success:e=>{k.value.device_id=e.deviceId}})})),ve((()=>{var e;null==(e=l.value)||e.showBuffet(!0,0)})),(e,t)=>{const c=b(w("ti-layout-head"),Me),x=m,A=h,E=b(w("ti-input"),je),O=b(w("ti-layout-table-list"),ze),J=b(w("ti-button"),Pe),z=b(w("ti-modal"),Oe),F=_;return s(),o(x,{class:"ti-page",onClick:t[1]||(t[1]=e=>y(me)())},{default:u((()=>[d(x,null,{default:u((()=>[d(c,{ref_key:"refCallServer",ref:l,isPay:!0,isTableNo:!0,onDoubleLogo:a,is_call_service:parseInt(j.value.is_call_service)},null,8,["is_call_service"])])),_:1}),d(St),d(Le,{show:B.value,title:y(g)("密碼"),password:G.value,placeholder:y(g)("請輸入密碼"),onExit:U,onConfirm:N},null,8,["show","title","password","placeholder"]),d(z,{show:i.value,title:y(g)("設置")},{content:u((()=>[d(x,{class:"ti-item-input"},{default:u((()=>[d(x,{class:"ti-label-box"},{default:u((()=>[d(x,{class:"ti-label-left"},{default:u((()=>[d(A,{class:"ti-label-server"},{default:u((()=>[p(f(y(g)("當前機器ID")),1)])),_:1})])),_:1})])),_:1}),d(x,{class:"ti-input-box"},{default:u((()=>[d(E,{type:"text",clearable:!1,disabled:!0,value:k.value.device_id},null,8,["value"])])),_:1})])),_:1}),d(x,{class:"ti-item-input"},{default:u((()=>[d(x,{class:"ti-label-box"},{default:u((()=>[d(x,{class:"ti-label-left"},{default:u((()=>[d(A,{class:"ti-label-server"},{default:u((()=>[p(f(y(g)("機器備註(非必填)")),1)])),_:1})])),_:1})])),_:1}),d(x,{class:"ti-input-box"},{default:u((()=>[d(E,{type:"text",onInput:C,value:k.value.remark,placeholder:y(g)("機器備註"),clearable:!1},null,8,["value","placeholder"])])),_:1})])),_:1}),d(x,{class:"ti-item-input"},{default:u((()=>[d(x,{class:"ti-label-box"},{default:u((()=>[d(x,{class:"ti-label-left"},{default:u((()=>[d(A,{class:"ti-label-server"},{default:u((()=>[p(f(y(g)("服務器連接地址")),1)])),_:1})])),_:1}),d(x,{class:"ti-label-right",onClick:D},{default:u((()=>[d(A,{class:"ti-label-table"},{default:u((()=>[p(f(n.value?y(g)("已選 : ")+y(_e)(n.value,19):y(g)("查找桌位")),1)])),_:1})])),_:1})])),_:1}),d(x,{class:"ti-input-box"},{default:u((()=>[d(E,{type:"text",onInput:I,value:k.value.ip,placeholder:y(g)("伺服器位址"),clearable:!1},null,8,["value","placeholder"]),d(x,{class:"ti-colon"},{default:u((()=>[p(":")])),_:1}),d(x,{class:"ti-input-port"},{default:u((()=>[d(E,{type:"number",onInput:T,value:k.value.port,placeholder:y(g)("端口"),clearable:!1},null,8,["value","placeholder"])])),_:1})])),_:1})])),_:1}),d(O,{show:r.value,"onUpdate:show":t[0]||(t[0]=e=>r.value=e),onConfirm:R},null,8,["show"])])),footer:u((()=>[d(x,{class:"footer-button"},{default:u((()=>[d(J,{onClick:L},{default:u((()=>[p(f(y(g)("清除緩存")),1)])),_:1}),d(J,{onClick:S},{default:u((()=>[p(f(y(g)("重置")),1)])),_:1}),d(J,{type:"primary",onClick:M},{default:u((()=>[p(f(y(g)("確定")),1)])),_:1})])),_:1})])),_:1},8,["show","title"]),d(z,{class:"ti-action-tips",show:v.value,title:y(g)("店鋪到期"),isCancelShow:!1,isConfirmShow:!1,content:y(g)("店鋪狀態已到期，如需使用，請聯繫銷售代表")},{title:u((()=>[d(x,{class:"warning-header"},{default:u((()=>[d(x,{class:"warning-image-round"},{default:u((()=>[d(F,{class:"warning-image",src:Ue,mode:""})])),_:1}),d(x,{class:"warning-text"},{default:u((()=>[p(f(y(g)("店鋪到期")),1)])),_:1})])),_:1})])),_:1},8,["show","title","content"])])),_:1})}}},[["__scopeId","data-v-f1d5940f"]]);export{Mt as default};
